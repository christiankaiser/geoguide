(function(){var global=this,objectPrototype=Object.prototype,toString=objectPrototype.toString,enumerables=true,enumerablesTest={toString:1},emptyFn=function(){},i;if(typeof Ext==="undefined"){global.Ext={}}Ext.global=global;for(i in enumerablesTest){enumerables=null}if(enumerables){enumerables=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]}Ext.enumerables=enumerables;Ext.apply=function(object,config,defaults){if(defaults){Ext.apply(object,defaults)}if(object&&config&&typeof config==="object"){var i,j,k;for(i in config){object[i]=config[i]}if(enumerables){for(j=enumerables.length;j--;){k=enumerables[j];if(config.hasOwnProperty(k)){object[k]=config[k]}}}}return object};Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-",scopeResetCSS:false},Ext.buildSettings||{});Ext.apply(Ext,{emptyFn:emptyFn,baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,applyIf:function(object,config){var property;if(object){for(property in config){if(object[property]===undefined){object[property]=config[property]}}}return object},iterate:function(object,fn,scope){if(Ext.isEmpty(object)){return}if(scope===undefined){scope=object}if(Ext.isIterable(object)){Ext.Array.each.call(Ext.Array,object,fn,scope)}else{Ext.Object.each.call(Ext.Object,object,fn,scope)}}});Ext.apply(Ext,{extend:function(){var objectConstructor=objectPrototype.constructor,inlineOverrides=function(o){for(var m in o){if(!o.hasOwnProperty(m)){continue}this[m]=o[m]}};return function(subclass,superclass,overrides){if(Ext.isObject(superclass)){overrides=superclass;superclass=subclass;subclass=overrides.constructor!==objectConstructor?overrides.constructor:function(){superclass.apply(this,arguments)}}if(!superclass){Ext.Error.raise({sourceClass:"Ext",sourceMethod:"extend",msg:"Attempting to extend from a class which has not been loaded on the page."})}var F=function(){},subclassProto,superclassProto=superclass.prototype;F.prototype=superclassProto;subclassProto=subclass.prototype=new F();subclassProto.constructor=subclass;subclass.superclass=superclassProto;if(superclassProto.constructor===objectConstructor){superclassProto.constructor=superclass}subclass.override=function(overrides){Ext.override(subclass,overrides)};subclassProto.override=inlineOverrides;subclassProto.proto=subclassProto;subclass.override(overrides);subclass.extend=function(o){return Ext.extend(subclass,o)};return subclass}}(),override:function(cls,overrides){if(cls.$isClass){return cls.override(overrides)}else{Ext.apply(cls.prototype,overrides)}}});Ext.apply(Ext,{valueFrom:function(value,defaultValue,allowBlank){return Ext.isEmpty(value,allowBlank)?defaultValue:value},typeOf:function(value){if(value===null){return"null"}var type=typeof value;if(type==="undefined"||type==="string"||type==="number"||type==="boolean"){return type}var typeToString=toString.call(value);switch(typeToString){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(type==="function"){return"function"}if(type==="object"){if(value.nodeType!==undefined){if(value.nodeType===3){return(/\S/).test(value.nodeValue)?"textnode":"whitespace"}else{return"element"}}return"object"}Ext.Error.raise({sourceClass:"Ext",sourceMethod:"typeOf",msg:'Failed to determine the type of the specified value "'+value+'". This is most likely a bug.'})},isEmpty:function(value,allowEmptyString){return(value===null)||(value===undefined)||(!allowEmptyString?value==="":false)||(Ext.isArray(value)&&value.length===0)},isArray:("isArray" in Array)?Array.isArray:function(value){return toString.call(value)==="[object Array]"},isDate:function(value){return toString.call(value)==="[object Date]"},isMSDate:function(value){if(!Ext.isString(value)){return false}else{return value.match("\\\\?/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\\\?/")!==null}},isObject:(toString.call(null)==="[object Object]")?function(value){return value!==null&&value!==undefined&&toString.call(value)==="[object Object]"&&value.ownerDocument===undefined}:function(value){return toString.call(value)==="[object Object]"},isSimpleObject:function(value){return value instanceof Object&&value.constructor===Object},isPrimitive:function(value){var type=typeof value;return type==="string"||type==="number"||type==="boolean"},isFunction:(typeof document!=="undefined"&&typeof document.getElementsByTagName("body")==="function")?function(value){return toString.call(value)==="[object Function]"}:function(value){return typeof value==="function"},isNumber:function(value){return typeof value==="number"&&isFinite(value)},isNumeric:function(value){return !isNaN(parseFloat(value))&&isFinite(value)},isString:function(value){return typeof value==="string"},isBoolean:function(value){return typeof value==="boolean"},isElement:function(value){return value?value.nodeType===1:false},isTextNode:function(value){return value?value.nodeName==="#text":false},isDefined:function(value){return typeof value!=="undefined"},isIterable:function(value){return(value&&typeof value!=="string")?value.length!==undefined:false}});Ext.apply(Ext,{clone:function(item){if(item===null||item===undefined){return item}if(item.nodeType&&item.cloneNode){return item.cloneNode(true)}var type=toString.call(item);if(type==="[object Date]"){return new Date(item.getTime())}var i,j,k,clone,key;if(type==="[object Array]"){i=item.length;clone=[];while(i--){clone[i]=Ext.clone(item[i])}}else{if(type==="[object Object]"&&item.constructor===Object){clone={};for(key in item){clone[key]=Ext.clone(item[key])}if(enumerables){for(j=enumerables.length;j--;){k=enumerables[j];clone[k]=item[k]}}}}return clone||item},getUniqueGlobalNamespace:function(){var uniqueGlobalNamespace=this.uniqueGlobalNamespace;if(uniqueGlobalNamespace===undefined){var i=0;do{uniqueGlobalNamespace="ExtBox"+(++i)}while(Ext.global[uniqueGlobalNamespace]!==undefined);Ext.global[uniqueGlobalNamespace]=Ext;this.uniqueGlobalNamespace=uniqueGlobalNamespace}return uniqueGlobalNamespace},functionFactory:function(){var args=Array.prototype.slice.call(arguments),ln=args.length;if(ln>0){args[ln-1]="var Ext=window."+this.getUniqueGlobalNamespace()+";"+args[ln-1]}return Function.prototype.constructor.apply(Function.prototype,args)},globalEval:("execScript" in global)?function(code){global.execScript(code)}:function(code){(function(){eval(code)})()},Logger:{log:function(message,priority){if("console" in global){if(!priority||!(priority in global.console)){priority="log"}message="["+priority.toUpperCase()+"] "+message;global.console[priority](message)}},verbose:function(message){this.log(message,"verbose")},info:function(message){this.log(message,"info")},warn:function(message){this.log(message,"warn")},error:function(message){throw new Error(message)},deprecate:function(message){this.log(message,"warn")}}});Ext.type=Ext.typeOf})();(function(){var version="4.1.0",Version;Ext.Version=Version=Ext.extend(Object,{constructor:function(version){var toNumber=this.toNumber,parts,releaseStartIndex;if(version instanceof Version){return version}this.version=this.shortVersion=String(version).toLowerCase().replace(/_/g,".").replace(/[\-+]/g,"");releaseStartIndex=this.version.search(/([^\d\.])/);if(releaseStartIndex!==-1){this.release=this.version.substr(releaseStartIndex,version.length);this.shortVersion=this.version.substr(0,releaseStartIndex)}this.shortVersion=this.shortVersion.replace(/[^\d]/g,"");parts=this.version.split(".");this.major=toNumber(parts.shift());this.minor=toNumber(parts.shift());this.patch=toNumber(parts.shift());this.build=toNumber(parts.shift());return this},toNumber:function(value){value=parseInt(value||0,10);if(isNaN(value)){value=0}return value},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major||0},getMinor:function(){return this.minor||0},getPatch:function(){return this.patch||0},getBuild:function(){return this.build||0},getRelease:function(){return this.release||""},isGreaterThan:function(target){return Version.compare(this.version,target)===1},isGreaterThanOrEqual:function(target){return Version.compare(this.version,target)>=0},isLessThan:function(target){return Version.compare(this.version,target)===-1},isLessThanOrEqual:function(target){return Version.compare(this.version,target)<=0},equals:function(target){return Version.compare(this.version,target)===0},match:function(target){target=String(target);return this.version.substr(0,target.length)===target},toArray:function(){return[this.getMajor(),this.getMinor(),this.getPatch(),this.getBuild(),this.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(){return this.isGreaterThan.apply(this,arguments)},lt:function(){return this.isLessThan.apply(this,arguments)},gtEq:function(){return this.isGreaterThanOrEqual.apply(this,arguments)},ltEq:function(){return this.isLessThanOrEqual.apply(this,arguments)}});Ext.apply(Version,{releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(value){return !value?0:(isNaN(value)?this.releaseValueMap[value]||value:parseInt(value,10))},compare:function(current,target){var currentValue,targetValue,i;current=new Version(current).toArray();target=new Version(target).toArray();for(i=0;i<Math.max(current.length,target.length);i++){currentValue=this.getComponentValue(current[i]);targetValue=this.getComponentValue(target[i]);if(currentValue<targetValue){return -1}else{if(currentValue>targetValue){return 1}}}return 0}});Ext.apply(Ext,{versions:{},lastRegisteredVersion:null,setVersion:function(packageName,version){Ext.versions[packageName]=new Version(version);Ext.lastRegisteredVersion=Ext.versions[packageName];return this},getVersion:function(packageName){if(packageName===undefined){return Ext.lastRegisteredVersion}return Ext.versions[packageName]},deprecate:function(packageName,since,closure,scope){if(Version.compare(Ext.getVersion(packageName),since)<1){closure.call(scope)}}});Ext.setVersion("core",version)})();Ext.String={trimRegex:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,escapeRe:/('|\\)/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,htmlEncode:(function(){var entities={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},keys=[],p,regex;for(p in entities){keys.push(p)}regex=new RegExp("("+keys.join("|")+")","g");return function(value){return(!value)?value:String(value).replace(regex,function(match,capture){return entities[capture]})}})(),htmlDecode:(function(){var entities={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},keys=[],p,regex;for(p in entities){keys.push(p)}regex=new RegExp("("+keys.join("|")+"|&#[0-9]{1,5};)","g");return function(value){return(!value)?value:String(value).replace(regex,function(match,capture){if(capture in entities){return entities[capture]}else{return String.fromCharCode(parseInt(capture.substr(2),10))}})}})(),urlAppend:function(url,string){if(!Ext.isEmpty(string)){return url+(url.indexOf("?")===-1?"?":"&")+string}return url},trim:function(string){return string.replace(Ext.String.trimRegex,"")},capitalize:function(string){return string.charAt(0).toUpperCase()+string.substr(1)},ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(" "),vs.lastIndexOf("."),vs.lastIndexOf("!"),vs.lastIndexOf("?"));if(index!==-1&&index>=(len-15)){return vs.substr(0,index)+"..."}}return value.substr(0,len-3)+"..."}return value},escapeRegex:function(string){return string.replace(Ext.String.escapeRegexRe,"\\$1")},escape:function(string){return string.replace(Ext.String.escapeRe,"\\$1")},toggle:function(string,value,other){return string===value?other:value},leftPad:function(string,size,character){var result=String(string);character=character||" ";while(result.length<size){result=character+result}return result},format:function(format){var args=Ext.Array.toArray(arguments,1);return format.replace(Ext.String.formatRe,function(m,i){return args[i]})},repeat:function(pattern,count,sep){for(var buf=[],i=count;i--;){buf.push(pattern)}return buf.join(sep||"")}};Ext.htmlEncode=Ext.String.htmlEncode;Ext.htmlDecode=Ext.String.htmlDecode;Ext.urlAppend=Ext.String.urlAppend;(function(){var arrayPrototype=Array.prototype,slice=arrayPrototype.slice,supportsSplice=function(){var array=[],lengthBefore,j=20;if(!array.splice){return false}while(j--){array.push("A")}array.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F");lengthBefore=array.length;array.splice(13,0,"XXX");if(lengthBefore+1!=array.length){return false}return true}(),supportsForEach="forEach" in arrayPrototype,supportsMap="map" in arrayPrototype,supportsIndexOf="indexOf" in arrayPrototype,supportsEvery="every" in arrayPrototype,supportsSome="some" in arrayPrototype,supportsFilter="filter" in arrayPrototype,supportsSort=function(){var a=[1,2,3,4,5].sort(function(){return 0});return a[0]===1&&a[1]===2&&a[2]===3&&a[3]===4&&a[4]===5}(),supportsSliceOnNodeList=true,ExtArray;try{if(typeof document!=="undefined"){slice.call(document.getElementsByTagName("body"))}}catch(e){supportsSliceOnNodeList=false}function fixArrayIndex(array,index){return(index<0)?Math.max(0,array.length+index):Math.min(array.length,index)}function replaceSim(array,index,removeCount,insert){var add=insert?insert.length:0,length=array.length,pos=fixArrayIndex(array,index);if(pos===length){if(add){array.push.apply(array,insert)}}else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove,i;if(tailNewPos<tailOldPos){for(i=0;i<tailCount;++i){array[tailNewPos+i]=array[tailOldPos+i]}}else{if(tailNewPos>tailOldPos){for(i=tailCount;i--;){array[tailNewPos+i]=array[tailOldPos+i]}}}if(add&&pos===lengthAfterRemove){array.length=lengthAfterRemove;array.push.apply(array,insert)}else{array.length=lengthAfterRemove+add;for(i=0;i<add;++i){array[pos+i]=insert[i]}}}return array}function replaceNative(array,index,removeCount,insert){if(insert&&insert.length){if(index<array.length){array.splice.apply(array,[index,removeCount].concat(insert))}else{array.push.apply(array,insert)}}else{array.splice(index,removeCount)}return array}function eraseSim(array,index,removeCount){return replaceSim(array,index,removeCount)}function eraseNative(array,index,removeCount){array.splice(index,removeCount);return array}function spliceSim(array,index,removeCount){var pos=fixArrayIndex(array,index),removed=array.slice(index,fixArrayIndex(array,pos+removeCount));if(arguments.length<4){replaceSim(array,pos,removeCount)}else{replaceSim(array,pos,removeCount,slice.call(arguments,3))}return removed}function spliceNative(array){return array.splice.apply(array,slice.call(arguments,1))}var erase=supportsSplice?eraseNative:eraseSim,replace=supportsSplice?replaceNative:replaceSim,splice=supportsSplice?spliceNative:spliceSim;ExtArray=Ext.Array={each:function(array,fn,scope,reverse){array=ExtArray.from(array);var i,ln=array.length;if(reverse!==true){for(i=0;i<ln;i++){if(fn.call(scope||array[i],array[i],i,array)===false){return i}}}else{for(i=ln-1;i>-1;i--){if(fn.call(scope||array[i],array[i],i,array)===false){return i}}}return true},forEach:supportsForEach?function(array,fn,scope){return array.forEach(fn,scope)}:function(array,fn,scope){var i=0,ln=array.length;for(;i<ln;i++){fn.call(scope,array[i],i,array)}},indexOf:(supportsIndexOf)?function(array,item,from){return array.indexOf(item,from)}:function(array,item,from){var i,length=array.length;for(i=(from<0)?Math.max(0,length+from):from||0;i<length;i++){if(array[i]===item){return i}}return -1},contains:supportsIndexOf?function(array,item){return array.indexOf(item)!==-1}:function(array,item){var i,ln;for(i=0,ln=array.length;i<ln;i++){if(array[i]===item){return true}}return false},toArray:function(iterable,start,end){if(!iterable||!iterable.length){return[]}if(typeof iterable==="string"){iterable=iterable.split("")}if(supportsSliceOnNodeList){return slice.call(iterable,start||0,end||iterable.length)}var array=[],i;start=start||0;end=end?((end<0)?iterable.length+end:end):iterable.length;for(i=start;i<end;i++){array.push(iterable[i])}return array},pluck:function(array,propertyName){var ret=[],i,ln,item;for(i=0,ln=array.length;i<ln;i++){item=array[i];ret.push(item[propertyName])}return ret},map:supportsMap?function(array,fn,scope){return array.map(fn,scope)}:function(array,fn,scope){var results=[],i=0,len=array.length;for(;i<len;i++){results[i]=fn.call(scope,array[i],i,array)}return results},every:function(array,fn,scope){if(!fn){Ext.Error.raise("Ext.Array.every must have a callback function passed as second argument.")}if(supportsEvery){return array.every(fn,scope)}var i=0,ln=array.length;for(;i<ln;++i){if(!fn.call(scope,array[i],i,array)){return false}}return true},some:function(array,fn,scope){if(!fn){Ext.Error.raise("Ext.Array.some must have a callback function passed as second argument.")}if(supportsSome){return array.some(fn,scope)}var i=0,ln=array.length;for(;i<ln;++i){if(fn.call(scope,array[i],i,array)){return true}}return false},clean:function(array){var results=[],i=0,ln=array.length,item;for(;i<ln;i++){item=array[i];if(!Ext.isEmpty(item)){results.push(item)}}return results},unique:function(array){var clone=[],i=0,ln=array.length,item;for(;i<ln;i++){item=array[i];if(ExtArray.indexOf(clone,item)===-1){clone.push(item)}}return clone},filter:function(array,fn,scope){if(supportsFilter){return array.filter(fn,scope)}var results=[],i=0,ln=array.length;for(;i<ln;i++){if(fn.call(scope,array[i],i,array)){results.push(array[i])}}return results},from:function(value,newReference){if(value===undefined||value===null){return[]}if(Ext.isArray(value)){return(newReference)?slice.call(value):value}if(value&&value.length!==undefined&&typeof value!=="string"){return ExtArray.toArray(value)}return[value]},remove:function(array,item){var index=ExtArray.indexOf(array,item);if(index!==-1){erase(array,index,1)}return array},include:function(array,item){if(!ExtArray.contains(array,item)){array.push(item)}},clone:function(array){return slice.call(array)},merge:function(){var args=slice.call(arguments),array=[],i,ln;for(i=0,ln=args.length;i<ln;i++){array=array.concat(args[i])}return ExtArray.unique(array)},intersect:function(){var intersect=[],arrays=slice.call(arguments),item,minArray,itemIndex,arrayIndex;if(!arrays.length){return intersect}arrays=arrays.sort(function(a,b){if(a.length>b.length){return 1}else{if(a.length<b.length){return -1}else{return 0}}});minArray=ExtArray.unique(arrays[0]);for(itemIndex=0;itemIndex<minArray.length;itemIndex++){item=minArray[itemIndex];for(arrayIndex=1;arrayIndex<arrays.length;arrayIndex++){if(arrays[arrayIndex].indexOf(item)===-1){break}if(arrayIndex==(arrays.length-1)){intersect.push(item)}}}return intersect},difference:function(arrayA,arrayB){var clone=slice.call(arrayA),ln=clone.length,i,j,lnB;for(i=0,lnB=arrayB.length;i<lnB;i++){for(j=0;j<ln;j++){if(clone[j]===arrayB[i]){erase(clone,j,1);j--;ln--}}}return clone},slice:function(array,begin,end){return slice.call(array,begin,end)},sort:function(array,sortFn){if(supportsSort){if(sortFn){return array.sort(sortFn)}else{return array.sort()}}var length=array.length,i=0,comparison,j,min,tmp;for(;i<length;i++){min=i;for(j=i+1;j<length;j++){if(sortFn){comparison=sortFn(array[j],array[min]);if(comparison<0){min=j}}else{if(array[j]<array[min]){min=j}}}if(min!==i){tmp=array[i];array[i]=array[min];array[min]=tmp}}return array},flatten:function(array){var worker=[];function rFlatten(a){var i,ln,v;for(i=0,ln=a.length;i<ln;i++){v=a[i];if(Ext.isArray(v)){rFlatten(v)}else{worker.push(v)}}return worker}return rFlatten(array)},min:function(array,comparisonFn){var min=array[0],i,ln,item;for(i=0,ln=array.length;i<ln;i++){item=array[i];if(comparisonFn){if(comparisonFn(min,item)===1){min=item}}else{if(item<min){min=item}}}return min},max:function(array,comparisonFn){var max=array[0],i,ln,item;for(i=0,ln=array.length;i<ln;i++){item=array[i];if(comparisonFn){if(comparisonFn(max,item)===-1){max=item}}else{if(item>max){max=item}}}return max},mean:function(array){return array.length>0?ExtArray.sum(array)/array.length:undefined},sum:function(array){var sum=0,i,ln,item;for(i=0,ln=array.length;i<ln;i++){item=array[i];sum+=item}return sum},_replaceSim:replaceSim,_spliceSim:spliceSim,erase:erase,insert:function(array,index,items){return replace(array,index,0,items)},replace:replace,splice:splice};Ext.each=ExtArray.each;ExtArray.union=ExtArray.merge;Ext.min=ExtArray.min;Ext.max=ExtArray.max;Ext.sum=ExtArray.sum;Ext.mean=ExtArray.mean;Ext.flatten=ExtArray.flatten;Ext.clean=ExtArray.clean;Ext.unique=ExtArray.unique;Ext.pluck=ExtArray.pluck;Ext.toArray=function(){return ExtArray.toArray.apply(ExtArray,arguments)}})();(function(){var isToFixedBroken=(0.9).toFixed()!=="1";Ext.Number={constrain:function(number,min,max){number=parseFloat(number);if(!isNaN(min)){number=Math.max(number,min)}if(!isNaN(max)){number=Math.min(number,max)}return number},snap:function(value,increment,minValue,maxValue){var newValue=value,m;if(!(increment&&value)){return value}m=value%increment;if(m!==0){newValue-=m;if(m*2>=increment){newValue+=increment}else{if(m*2<-increment){newValue-=increment}}}return Ext.Number.constrain(newValue,minValue,maxValue)},toFixed:function(value,precision){if(isToFixedBroken){precision=precision||0;var pow=Math.pow(10,precision);return(Math.round(value*pow)/pow).toFixed(precision)}return value.toFixed(precision)},from:function(value,defaultValue){if(isFinite(value)){value=parseFloat(value)}return !isNaN(value)?value:defaultValue}}})();Ext.num=function(){return Ext.Number.from.apply(this,arguments)};(function(){var TemplateClass=function(){};var ExtObject=Ext.Object={chain:("create" in Object)?function(object){return Object.create(object)}:function(object){TemplateClass.prototype=object;var result=new TemplateClass();TemplateClass.prototype=null;return result},toQueryObjects:function(name,value,recursive){var self=ExtObject.toQueryObjects,objects=[],i,ln;if(Ext.isArray(value)){for(i=0,ln=value.length;i<ln;i++){if(recursive){objects=objects.concat(self(name+"["+i+"]",value[i],true))}else{objects.push({name:name,value:value[i]})}}}else{if(Ext.isObject(value)){for(i in value){if(value.hasOwnProperty(i)){if(recursive){objects=objects.concat(self(name+"["+i+"]",value[i],true))}else{objects.push({name:name,value:value[i]})}}}}else{objects.push({name:name,value:value})}}return objects},toQueryString:function(object,recursive){var paramObjects=[],params=[],i,j,ln,paramObject,value;for(i in object){if(object.hasOwnProperty(i)){paramObjects=paramObjects.concat(ExtObject.toQueryObjects(i,object[i],recursive))}}for(j=0,ln=paramObjects.length;j<ln;j++){paramObject=paramObjects[j];value=paramObject.value;if(Ext.isEmpty(value)){value=""}else{if(Ext.isDate(value)){value=Ext.Date.toString(value)}}params.push(encodeURIComponent(paramObject.name)+"="+encodeURIComponent(String(value)))}return params.join("&")},fromQueryString:function(queryString,recursive){var parts=queryString.replace(/^\?/,"").split("&"),object={},temp,components,name,value,i,ln,part,j,subLn,matchedKeys,matchedName,keys,key,nextKey;for(i=0,ln=parts.length;i<ln;i++){part=parts[i];if(part.length>0){components=part.split("=");name=decodeURIComponent(components[0]);value=(components[1]!==undefined)?decodeURIComponent(components[1]):"";if(!recursive){if(object.hasOwnProperty(name)){if(!Ext.isArray(object[name])){object[name]=[object[name]]}object[name].push(value)}else{object[name]=value}}else{matchedKeys=name.match(/(\[):?([^\]]*)\]/g);matchedName=name.match(/^([^\[]+)/);if(!matchedName){throw new Error('[Ext.Object.fromQueryString] Malformed query string given, failed parsing name from "'+part+'"')}name=matchedName[0];keys=[];if(matchedKeys===null){object[name]=value;continue}for(j=0,subLn=matchedKeys.length;j<subLn;j++){key=matchedKeys[j];key=(key.length===2)?"":key.substring(1,key.length-1);keys.push(key)}keys.unshift(name);temp=object;for(j=0,subLn=keys.length;j<subLn;j++){key=keys[j];if(j===subLn-1){if(Ext.isArray(temp)&&key===""){temp.push(value)}else{temp[key]=value}}else{if(temp[key]===undefined||typeof temp[key]==="string"){nextKey=keys[j+1];temp[key]=(Ext.isNumeric(nextKey)||nextKey==="")?[]:{}}temp=temp[key]}}}}}return object},each:function(object,fn,scope){for(var property in object){if(object.hasOwnProperty(property)){if(fn.call(scope||object,property,object[property],object)===false){return}}}},merge:function(source){var i=1,ln=arguments.length,mergeFn=ExtObject.merge,cloneFn=Ext.clone,object,key,value,sourceKey;for(;i<ln;i++){object=arguments[i];for(key in object){value=object[key];if(value&&value.constructor===Object){sourceKey=source[key];if(sourceKey&&sourceKey.constructor===Object){mergeFn(sourceKey,value)}else{source[key]=cloneFn(value)}}else{source[key]=value}}}return source},mergeIf:function(source){var i=1,ln=arguments.length,cloneFn=Ext.clone,object,key,value;for(;i<ln;i++){object=arguments[i];for(key in object){if(!(key in source)){value=object[key];if(value&&value.constructor===Object){source[key]=cloneFn(value)}else{source[key]=value}}}}return source},getKey:function(object,value){for(var property in object){if(object.hasOwnProperty(property)&&object[property]===value){return property}}return null},getValues:function(object){var values=[],property;for(property in object){if(object.hasOwnProperty(property)){values.push(object[property])}}return values},getKeys:("keys" in Object)?Object.keys:function(object){var keys=[],property;for(property in object){if(object.hasOwnProperty(property)){keys.push(property)}}return keys},getSize:function(object){var size=0,property;for(property in object){if(object.hasOwnProperty(property)){size++}}return size},classify:function(object){var objectProperties=[],arrayProperties=[],propertyClassesMap={},objectClass=function(){var i=0,ln=objectProperties.length,property;for(;i<ln;i++){property=objectProperties[i];this[property]=new propertyClassesMap[property]}ln=arrayProperties.length;for(i=0;i<ln;i++){property=arrayProperties[i];this[property]=object[property].slice()}},key,value,constructor;for(key in object){if(object.hasOwnProperty(key)){value=object[key];if(value){constructor=value.constructor;if(constructor===Object){objectProperties.push(key);propertyClassesMap[key]=ExtObject.classify(value)}else{if(constructor===Array){arrayProperties.push(key)}}}}}objectClass.prototype=object;return objectClass},defineProperty:("defineProperty" in Object)?Object.defineProperty:function(object,name,descriptor){if(descriptor.get){object.__defineGetter__(name,descriptor.get)}if(descriptor.set){object.__defineSetter__(name,descriptor.set)}}};Ext.merge=Ext.Object.merge;Ext.mergeIf=Ext.Object.mergeIf;Ext.urlEncode=function(){var args=Ext.Array.from(arguments),prefix="";if((typeof args[1]==="string")){prefix=args[1]+"&";args[1]=false}return prefix+ExtObject.toQueryString.apply(ExtObject,args)};Ext.urlDecode=function(){return ExtObject.fromQueryString.apply(ExtObject,arguments)}})();Ext.Function={flexSetter:function(fn){return function(a,b){var k,i;if(a===null){return this}if(typeof a!=="string"){for(k in a){if(a.hasOwnProperty(k)){fn.call(this,k,a[k])}}if(Ext.enumerables){for(i=Ext.enumerables.length;i--;){k=Ext.enumerables[i];if(a.hasOwnProperty(k)){fn.call(this,k,a[k])}}}}else{fn.call(this,a,b)}return this}},bind:function(fn,scope,args,appendArgs){if(arguments.length===2){return function(){return fn.apply(scope,arguments)}}var method=fn,slice=Array.prototype.slice;return function(){var callArgs=args||arguments;if(appendArgs===true){callArgs=slice.call(arguments,0);callArgs=callArgs.concat(args)}else{if(typeof appendArgs=="number"){callArgs=slice.call(arguments,0);Ext.Array.insert(callArgs,appendArgs,args)}}return method.apply(scope||window,callArgs)}},pass:function(fn,args,scope){if(!Ext.isArray(args)){args=Ext.Array.clone(args)}return function(){args.push.apply(args,arguments);return fn.apply(scope||this,args)}},alias:function(object,methodName){return function(){return object[methodName].apply(object,arguments)}},clone:function(method){return function(){return method.apply(this,arguments)}},createInterceptor:function(origFn,newFn,scope,returnValue){var method=origFn;if(!Ext.isFunction(newFn)){return origFn}else{return function(){var me=this,args=arguments;newFn.target=me;newFn.method=origFn;return(newFn.apply(scope||me||window,args)!==false)?origFn.apply(me||window,args):returnValue||null}}},createDelayed:function(fn,delay,scope,args,appendArgs){if(scope||args){fn=Ext.Function.bind(fn,scope,args,appendArgs)}return function(){var me=this,args=Array.prototype.slice.call(arguments);setTimeout(function(){fn.apply(me,args)},delay)}},defer:function(fn,millis,scope,args,appendArgs){fn=Ext.Function.bind(fn,scope,args,appendArgs);if(millis>0){return setTimeout(fn,millis)}fn();return 0},createSequence:function(originalFn,newFn,scope){if(!newFn){return originalFn}else{return function(){var result=originalFn.apply(this,arguments);newFn.apply(scope||this,arguments);return result}}},createBuffered:function(fn,buffer,scope,args){var timerId;return function(){var callArgs=args||Array.prototype.slice.call(arguments,0),me=scope||this;if(timerId){clearTimeout(timerId)}timerId=setTimeout(function(){fn.apply(me,callArgs)},buffer)}},createThrottled:function(fn,interval,scope){var lastCallTime,elapsed,lastArgs,timer,execute=function(){fn.apply(scope||this,lastArgs);lastCallTime=new Date().getTime()};return function(){elapsed=new Date().getTime()-lastCallTime;lastArgs=arguments;clearTimeout(timer);if(!lastCallTime||(elapsed>=interval)){execute()}else{timer=setTimeout(execute,interval-elapsed)}}},interceptBefore:function(object,methodName,fn){var method=object[methodName]||Ext.emptyFn;return object[methodName]=function(){var ret=fn.apply(this,arguments);method.apply(this,arguments);return ret}},interceptAfter:function(object,methodName,fn){var method=object[methodName]||Ext.emptyFn;return object[methodName]=function(){method.apply(this,arguments);return fn.apply(this,arguments)}}};Ext.defer=Ext.Function.alias(Ext.Function,"defer");Ext.pass=Ext.Function.alias(Ext.Function,"pass");Ext.bind=Ext.Function.alias(Ext.Function,"bind");Ext.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return eval("("+json+")")},doEncode=function(o){if(!Ext.isDefined(o)||o===null){return"null"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.JSON.encodeDate(o)}else{if(Ext.isString(o)){if(Ext.isMSDate(o)){return encodeMSDate(o)}else{return encodeString(o)}}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{if(Ext.isObject(o)){return encodeObject(o)}else{if(typeof o==="function"){return"null"}}}}}}}}return"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","\x0b":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(s){return'"'+s.replace(charToReplace,function(a){var c=m[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(o){var a=["[",""],len=o.length,i;for(i=0;i<len;i+=1){a.push(doEncode(o[i]),",")}a[a.length-1]="]";return a.join("")},encodeObject=function(o){var a=["{",""],i;for(i in o){if(!useHasOwn||o.hasOwnProperty(i)){a.push(doEncode(i),":",doEncode(o[i]),",")}}a[a.length-1]="}";return a.join("")},encodeMSDate=function(o){return'"'+o+'"'};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json,safe){if(!dc){dc=isNative()?JSON.parse:doDecode}try{return dc(json)}catch(e){if(safe===true){return null}Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+json})}}}()})();Ext.encode=Ext.JSON.encode;Ext.decode=Ext.JSON.decode;Ext.Error={raise:function(object){throw new Error(object.msg)}};Ext.Date={now:Date.now,toString:function(date){if(!date){date=new Date()}var pad=Ext.String.leftPad;return date.getFullYear()+"-"+pad(date.getMonth()+1,2,"0")+"-"+pad(date.getDate(),2,"0")+"T"+pad(date.getHours(),2,"0")+":"+pad(date.getMinutes(),2,"0")+":"+pad(date.getSeconds(),2,"0")}};(function(flexSetter){var noArgs=[],Base=function(){};Ext.apply(Base,{$className:"Ext.Base",$isClass:true,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},extend:function(parent){var parentPrototype=parent.prototype,prototype,i,ln,name,statics;prototype=this.prototype=Ext.Object.chain(parentPrototype);prototype.self=this;this.superclass=prototype.superclass=parentPrototype;if(!parent.$isClass){Ext.apply(prototype,Ext.Base.prototype);prototype.constructor=function(){parentPrototype.constructor.apply(this,arguments)}}statics=parentPrototype.$inheritableStatics;if(statics){for(i=0,ln=statics.length;i<ln;i++){name=statics[i];if(!this.hasOwnProperty(name)){this[name]=parent[name]}}}if(parent.$onExtended){this.$onExtended=parent.$onExtended.slice()}prototype.config=prototype.defaultConfig=new prototype.configClass;prototype.initConfigList=prototype.initConfigList.slice();prototype.initConfigMap=Ext.Object.chain(prototype.initConfigMap)},"$onExtended":[],triggerExtended:function(){var callbacks=this.$onExtended,ln=callbacks.length,i,callback;if(ln>0){for(i=0;i<ln;i++){callback=callbacks[i];callback.fn.apply(callback.scope||this,arguments)}}},onExtended:function(fn,scope){this.$onExtended.push({fn:fn,scope:scope});return this},addConfig:function(config,fullMerge){var prototype=this.prototype,initConfigList=prototype.initConfigList,initConfigMap=prototype.initConfigMap,defaultConfig=prototype.defaultConfig,hasInitConfigItem,name,value;fullMerge=Boolean(fullMerge);for(name in config){if(config.hasOwnProperty(name)&&(fullMerge||!(name in defaultConfig))){value=config[name];hasInitConfigItem=initConfigMap[name];if(value!==null){if(!hasInitConfigItem){initConfigMap[name]=true;initConfigList.push(name)}}else{if(hasInitConfigItem){initConfigMap[name]=false;Ext.Array.remove(initConfigList,name)}}}}if(fullMerge){Ext.merge(defaultConfig,config)}else{Ext.mergeIf(defaultConfig,config)}prototype.configClass=Ext.Object.classify(defaultConfig)},addStatics:function(members){var member,name;var className=Ext.getClassName(this);for(name in members){if(members.hasOwnProperty(name)){member=members[name];if(typeof member=="function"){member.displayName=className+"."+name}this[name]=member}}return this},addInheritableStatics:function(members){var inheritableStatics,hasInheritableStatics,prototype=this.prototype,name,member;inheritableStatics=prototype.$inheritableStatics;hasInheritableStatics=prototype.$hasInheritableStatics;if(!inheritableStatics){inheritableStatics=prototype.$inheritableStatics=[];hasInheritableStatics=prototype.$hasInheritableStatics={}}var className=Ext.getClassName(this);for(name in members){if(members.hasOwnProperty(name)){member=members[name];if(typeof member=="function"){member.displayName=className+"."+name}this[name]=member;if(!hasInheritableStatics[name]){hasInheritableStatics[name]=true;inheritableStatics.push(name)}}}return this},addMembers:function(members){var prototype=this.prototype,names=[],name,member;var className=this.$className||"";for(name in members){if(members.hasOwnProperty(name)){member=members[name];if(typeof member=="function"&&!member.$isClass&&member!==Ext.emptyFn){member.$owner=this;member.$name=name;member.displayName=className+"#"+name}prototype[name]=member}}return this},addMember:function(name,member){if(typeof member=="function"&&!member.$isClass&&member!==Ext.emptyFn){member.$owner=this;member.$name=name;member.displayName=(this.$className||"")+"#"+name}this.prototype[name]=member;return this},implement:function(){this.addMembers.apply(this,arguments)},borrow:function(fromClass,members){var prototype=this.prototype,fromPrototype=fromClass.prototype,className=Ext.getClassName(this),i,ln,name,fn,toBorrow;members=Ext.Array.from(members);for(i=0,ln=members.length;i<ln;i++){name=members[i];toBorrow=fromPrototype[name];if(typeof toBorrow=="function"){fn=function(){return toBorrow.apply(this,arguments)};if(className){fn.displayName=className+"#"+name}fn.$owner=this;fn.$name=name;prototype[name]=fn}else{prototype[name]=toBorrow}}return this},override:function(members){var me=this,enumerables=Ext.enumerables,target=me.prototype,cloneFunction=Ext.Function.clone,name,index,member,statics,names,previous;if(arguments.length===2){name=members;members={};members[name]=arguments[1];enumerables=null}do{names=[];statics=null;for(name in members){if(name=="statics"){statics=members[name]}else{if(name=="config"){me.addConfig(members[name],true)}else{names.push(name)}}}if(enumerables){names.push.apply(names,enumerables)}for(index=names.length;index--;){name=names[index];if(members.hasOwnProperty(name)){member=members[name];if(typeof member=="function"&&!member.$className&&member!==Ext.emptyFn){if(typeof member.$owner!="undefined"){member=cloneFunction(member)}var className=me.$className;if(className){member.displayName=className+"#"+name}member.$owner=me;member.$name=name;previous=target[name];if(previous){member.$previous=previous}}target[name]=member}}target=me;members=statics}while(members);return this},callParent:function(args){var method;return(method=this.callParent.caller)&&(method.$previous||((method=method.$owner?method:method.caller)&&method.$owner.superclass.$class[method.$name])).apply(this,args||noArgs)},mixin:function(name,mixinClass){var mixin=mixinClass.prototype,prototype=this.prototype,key;if(typeof mixin.onClassMixedIn!="undefined"){mixin.onClassMixedIn.call(mixinClass,this)}if(!prototype.hasOwnProperty("mixins")){if("mixins" in prototype){prototype.mixins=Ext.Object.chain(prototype.mixins)}else{prototype.mixins={}}}for(key in mixin){if(key==="mixins"){Ext.merge(prototype.mixins,mixin[key])}else{if(typeof prototype[key]=="undefined"&&key!="mixinId"&&key!="config"){prototype[key]=mixin[key]}}}if("config" in mixin){this.addConfig(mixin.config,false)}prototype.mixins[name]=mixin},getName:function(){return Ext.getClassName(this)},createAlias:flexSetter(function(alias,origin){this.override(alias,function(){return this[origin].apply(this,arguments)})}),addXtype:function(xtype){var prototype=this.prototype,xtypesMap=prototype.xtypesMap,xtypes=prototype.xtypes,xtypesChain=prototype.xtypesChain;if(!prototype.hasOwnProperty("xtypesMap")){xtypesMap=prototype.xtypesMap=Ext.merge({},prototype.xtypesMap||{});xtypes=prototype.xtypes=prototype.xtypes?[].concat(prototype.xtypes):[];xtypesChain=prototype.xtypesChain=prototype.xtypesChain?[].concat(prototype.xtypesChain):[];prototype.xtype=xtype}if(!xtypesMap[xtype]){xtypesMap[xtype]=true;xtypes.push(xtype);xtypesChain.push(xtype);Ext.ClassManager.setAlias(this,"widget."+xtype)}return this}});Base.implement({isInstance:true,$className:"Ext.Base",configClass:Ext.emptyFn,initConfigList:[],initConfigMap:{},statics:function(){var method=this.statics.caller,self=this.self;if(!method){return self}return method.$owner},callParent:function(args){var method,superMethod=(method=this.callParent.caller)&&(method.$previous||((method=method.$owner?method:method.caller)&&method.$owner.superclass[method.$name]));if(!superMethod){method=this.callParent.caller;var parentClass,methodName;if(!method.$owner){if(!method.caller){throw new Error("Attempting to call a protected method from the public scope, which is not allowed")}method=method.caller}parentClass=method.$owner.superclass;methodName=method.$name;if(!(methodName in parentClass)){throw new Error("this.callParent() was called but there's no such method ("+methodName+") found in the parent class ("+(Ext.getClassName(parentClass)||"Object")+")")}}return superMethod.apply(this,args||noArgs)},callSuper:function(args){var method,superMethod=(method=this.callSuper.caller)&&((method=method.$owner?method:method.caller)&&method.$owner.superclass[method.$name]);if(!superMethod){method=this.callSuper.caller;var parentClass,methodName;if(!method.$owner){if(!method.caller){throw new Error("Attempting to call a protected method from the public scope, which is not allowed")}method=method.caller}parentClass=method.$owner.superclass;methodName=method.$name;if(!(methodName in parentClass)){throw new Error("this.callSuper() was called but there's no such method ("+methodName+") found in the parent class ("+(Ext.getClassName(parentClass)||"Object")+")")}}return superMethod.apply(this,args||noArgs)},callOverridden:function(args){var method;return(method=this.callOverridden.caller)&&method.$previous.apply(this,args||noArgs)},self:Base,constructor:function(){return this},wasInstantiated:false,initConfig:function(instanceConfig){var configNameCache=Ext.Class.configNameCache,prototype=this.self.prototype,initConfigList=this.initConfigList,initConfigMap=this.initConfigMap,config=new this.configClass,defaultConfig=this.defaultConfig,i,ln,name,value,nameMap,getName;this.initConfig=Ext.emptyFn;this.initialConfig=instanceConfig||{};if(instanceConfig){Ext.merge(config,instanceConfig)}this.config=config;if(!prototype.hasOwnProperty("wasInstantiated")){prototype.wasInstantiated=true;for(i=0,ln=initConfigList.length;i<ln;i++){name=initConfigList[i];nameMap=configNameCache[name];value=defaultConfig[name];if(!(nameMap.apply in prototype)&&!(nameMap.update in prototype)&&prototype[nameMap.set].$isDefault&&typeof value!="object"){prototype[nameMap.internal]=defaultConfig[name];initConfigMap[name]=false;Ext.Array.remove(initConfigList,name);i--;ln--}}}if(instanceConfig){initConfigList=initConfigList.slice();for(name in instanceConfig){if(name in defaultConfig&&!initConfigMap[name]){initConfigList.push(name)}}}for(i=0,ln=initConfigList.length;i<ln;i++){name=initConfigList[i];nameMap=configNameCache[name];this[nameMap.get]=this[nameMap.initGet]}this.beforeInitConfig(config);for(i=0,ln=initConfigList.length;i<ln;i++){name=initConfigList[i];nameMap=configNameCache[name];getName=nameMap.get;if(this.hasOwnProperty(getName)){this[nameMap.set].call(this,config[name]);delete this[getName]}}return this},beforeInitConfig:Ext.emptyFn,getCurrentConfig:function(){var defaultConfig=this.defaultConfig,configNameCache=Ext.Class.configNameCache,config={},name,nameMap;for(name in defaultConfig){nameMap=configNameCache[name];config[name]=this[nameMap.get].call(this)}return config},setConfig:function(config,applyIfNotSet){if(!config){return this}var configNameCache=Ext.Class.configNameCache,currentConfig=this.config,defaultConfig=this.defaultConfig,initialConfig=this.initialConfig,configList=[],name,i,ln,nameMap;applyIfNotSet=Boolean(applyIfNotSet);for(name in config){if((applyIfNotSet&&(name in initialConfig))){continue}currentConfig[name]=config[name];if(name in defaultConfig){configList.push(name);nameMap=configNameCache[name];this[nameMap.get]=this[nameMap.initGet]}}for(i=0,ln=configList.length;i<ln;i++){name=configList[i];nameMap=configNameCache[name];this[nameMap.set].call(this,config[name]);delete this[nameMap.get]}return this},set:function(name,value){return this[Ext.Class.configNameCache[name].set].call(this,value)},get:function(name){return this[Ext.Class.configNameCache[name].get].call(this)},getConfig:function(name){return this[Ext.Class.configNameCache[name].get].call(this)},hasConfig:function(name){return(name in this.defaultConfig)},getInitialConfig:function(name){var config=this.config;if(!name){return config}else{return config[name]}},onConfigUpdate:function(names,callback,scope){var self=this.self,className=self.$className,i,ln,name,updaterName,updater,newUpdater;names=Ext.Array.from(names);scope=scope||this;for(i=0,ln=names.length;i<ln;i++){name=names[i];updaterName="update"+Ext.String.capitalize(name);updater=this[updaterName]||Ext.emptyFn;newUpdater=function(){updater.apply(this,arguments);scope[callback].apply(scope,arguments)};newUpdater.$name=updaterName;newUpdater.$owner=self;newUpdater.displayName=className+"#"+updaterName;this[updaterName]=newUpdater}},link:function(name,value){this.$links={};this.link=this.doLink;return this.link.apply(this,arguments)},doLink:function(name,value){this.$links[name]=true;this[name]=value;return value},unlink:function(){var i,ln,link,value;for(i=0,ln=arguments.length;i<ln;i++){link=arguments[i];if(this.hasOwnProperty(link)){value=this[link];if(value){if(value.isInstance&&!value.isDestroyed){value.destroy()}else{if(value.parentNode&&"nodeType" in value){value.parentNode.removeChild(value)}}}delete this[link]}}return this},destroy:function(){this.destroy=Ext.emptyFn;this.isDestroyed=true;if(this.hasOwnProperty("$links")){this.unlink.apply(this,Ext.Object.getKeys(this.$links));delete this.$links}}});Ext.Base=Base})(Ext.Function.flexSetter);(function(){var ExtClass,Base=Ext.Base,baseStaticMembers=[],baseStaticMember,baseStaticMemberLength;for(baseStaticMember in Base){if(Base.hasOwnProperty(baseStaticMember)){baseStaticMembers.push(baseStaticMember)}}baseStaticMemberLength=baseStaticMembers.length;Ext.Class=ExtClass=function(Class,data,onCreated){if(typeof Class!="function"){onCreated=data;data=Class;Class=null}if(!data){data={}}Class=ExtClass.create(Class);ExtClass.process(Class,data,onCreated);return Class};Ext.apply(ExtClass,{onBeforeCreated:function(Class,data,hooks){Class.addMembers(data);hooks.onCreated.call(Class,Class)},create:function(Class){var name,i;if(!Class){Class=function(){return this.constructor.apply(this,arguments)}}for(i=0;i<baseStaticMemberLength;i++){name=baseStaticMembers[i];Class[name]=Base[name]}return Class},process:function(Class,data,onCreated){var preprocessorStack=data.preprocessors||ExtClass.defaultPreprocessors,preprocessors=this.preprocessors,hooks={onBeforeCreated:this.onBeforeCreated,onCreated:onCreated||Ext.emptyFn},index=0,name,preprocessor,properties,i,ln,fn,property,process;delete data.preprocessors;process=function(Class,data,hooks){fn=null;while(fn===null){name=preprocessorStack[index++];if(name){preprocessor=preprocessors[name];properties=preprocessor.properties;if(properties===true){fn=preprocessor.fn}else{for(i=0,ln=properties.length;i<ln;i++){property=properties[i];if(data.hasOwnProperty(property)){fn=preprocessor.fn;break}}}}else{hooks.onBeforeCreated.apply(this,arguments);return}}if(fn.call(this,Class,data,hooks,process)!==false){process.apply(this,arguments)}};process.call(this,Class,data,hooks)},preprocessors:{},registerPreprocessor:function(name,fn,properties,position,relativeTo){if(!position){position="last"}if(!properties){properties=[name]}this.preprocessors[name]={name:name,properties:properties||false,fn:fn};this.setDefaultPreprocessorPosition(name,position,relativeTo);return this},getPreprocessor:function(name){return this.preprocessors[name]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(preprocessors){this.defaultPreprocessors=Ext.Array.from(preprocessors);return this},setDefaultPreprocessorPosition:function(name,offset,relativeName){var defaultPreprocessors=this.defaultPreprocessors,index;if(typeof offset=="string"){if(offset==="first"){defaultPreprocessors.unshift(name);return this}else{if(offset==="last"){defaultPreprocessors.push(name);return this}}offset=(offset==="after")?1:-1}index=Ext.Array.indexOf(defaultPreprocessors,relativeName);if(index!==-1){Ext.Array.splice(defaultPreprocessors,Math.max(0,index+offset),0,name)}return this},configNameCache:{},getConfigNameMap:function(name){var cache=this.configNameCache,map=cache[name],capitalizedName;if(!map){capitalizedName=name.charAt(0).toUpperCase()+name.substr(1);map=cache[name]={name:name,internal:"_"+name,initializing:"is"+capitalizedName+"Initializing",apply:"apply"+capitalizedName,update:"update"+capitalizedName,set:"set"+capitalizedName,get:"get"+capitalizedName,initGet:"initGet"+capitalizedName,doSet:"doSet"+capitalizedName,changeEvent:name.toLowerCase()+"change"}}return map},generateSetter:function(nameMap){var internalName=nameMap.internal,getName=nameMap.get,applyName=nameMap.apply,updateName=nameMap.update,setter;setter=function(value){var oldValue=this[internalName],applier=this[applyName],updater=this[updateName];delete this[getName];if(applier){value=applier.call(this,value,oldValue)}if(typeof value!="undefined"){this[internalName]=value;if(updater&&value!==oldValue){updater.call(this,value,oldValue)}}return this};setter.$isDefault=true;return setter},generateInitGetter:function(nameMap){var name=nameMap.name,setName=nameMap.set,getName=nameMap.get,initializingName=nameMap.initializing;return function(){this[initializingName]=true;delete this[getName];this[setName].call(this,this.config[name]);delete this[initializingName];return this[getName].apply(this,arguments)}},generateGetter:function(nameMap){var internalName=nameMap.internal;return function(){return this[internalName]}}});ExtClass.registerPreprocessor("extend",function(Class,data){var Base=Ext.Base,extend=data.extend,Parent;delete data.extend;if(extend&&extend!==Object){Parent=extend}else{Parent=Base}Class.extend(Parent);Class.triggerExtended.apply(Class,arguments);if(data.onClassExtended){Class.onExtended(data.onClassExtended,Class);delete data.onClassExtended}},true);ExtClass.registerPreprocessor("statics",function(Class,data){Class.addStatics(data.statics);delete data.statics});ExtClass.registerPreprocessor("inheritableStatics",function(Class,data){Class.addInheritableStatics(data.inheritableStatics);delete data.inheritableStatics});ExtClass.registerPreprocessor("config",function(Class,data){var config=data.config,prototype=Class.prototype,defaultConfig=prototype.config,nameMap,name,setName,getName,initGetName,internalName,value;delete data.config;for(name in config){if(config.hasOwnProperty(name)&&!(name in defaultConfig)){value=config[name];nameMap=this.getConfigNameMap(name);setName=nameMap.set;getName=nameMap.get;initGetName=nameMap.initGet;internalName=nameMap.internal;data[initGetName]=this.generateInitGetter(nameMap);if(value===null&&!data.hasOwnProperty(internalName)){data[internalName]=null}if(!data.hasOwnProperty(getName)){data[getName]=this.generateGetter(nameMap)}if(!data.hasOwnProperty(setName)){data[setName]=this.generateSetter(nameMap)}}}Class.addConfig(config,true)});ExtClass.registerPreprocessor("mixins",function(Class,data,hooks){var mixins=data.mixins,name,mixin,i,ln;delete data.mixins;Ext.Function.interceptBefore(hooks,"onCreated",function(){if(mixins instanceof Array){for(i=0,ln=mixins.length;i<ln;i++){mixin=mixins[i];name=mixin.prototype.mixinId||mixin.$className;Class.mixin(name,mixin)}}else{for(name in mixins){if(mixins.hasOwnProperty(name)){Class.mixin(name,mixins[name])}}}})});Ext.extend=function(Class,Parent,members){if(arguments.length===2&&Ext.isObject(Parent)){members=Parent;Parent=Class;Class=null}var cls;if(!Parent){throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.")}members.extend=Parent;members.preprocessors=["extend","statics","inheritableStatics","mixins","config"];if(Class){cls=new ExtClass(Class,members)}else{cls=new ExtClass(members)}cls.prototype.override=function(o){for(var m in o){if(o.hasOwnProperty(m)){this[m]=o[m]}}};return cls}})();(function(Class,alias,arraySlice,arrayFrom,global){var Manager=Ext.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{},nameToAlternates:{}},enableNamespaceParseCache:true,namespaceParseCache:{},instantiators:[],isCreated:function(className){var existCache=this.existCache,i,ln,part,root,parts;if(typeof className!="string"||className.length<1){throw new Error("[Ext.ClassManager] Invalid classname, must be a string and must not be empty")}if(this.classes[className]||existCache[className]){return true}root=global;parts=this.parseNamespace(className);for(i=0,ln=parts.length;i<ln;i++){part=parts[i];if(typeof part!="string"){root=part}else{if(!root||!root[part]){return false}root=root[part]}}existCache[className]=true;this.triggerCreated(className);return true},createdListeners:[],nameCreatedListeners:{},triggerCreated:function(className){var listeners=this.createdListeners,nameListeners=this.nameCreatedListeners,alternateNames=this.maps.nameToAlternates[className],names=[className],i,ln,j,subLn,listener,name;for(i=0,ln=listeners.length;i<ln;i++){listener=listeners[i];listener.fn.call(listener.scope,className)}if(alternateNames){names.push.apply(names,alternateNames)}for(i=0,ln=names.length;i<ln;i++){name=names[i];listeners=nameListeners[name];if(listeners){for(j=0,subLn=listeners.length;j<subLn;j++){listener=listeners[j];listener.fn.call(listener.scope,name)}delete nameListeners[name]}}},onCreated:function(fn,scope,className){var listeners=this.createdListeners,nameListeners=this.nameCreatedListeners,listener={fn:fn,scope:scope};if(className){if(this.isCreated(className)){fn.call(scope,className);return}if(!nameListeners[className]){nameListeners[className]=[]}nameListeners[className].push(listener)}else{listeners.push(listener)}},parseNamespace:function(namespace){if(typeof namespace!="string"){throw new Error("[Ext.ClassManager] Invalid namespace, must be a string")}var cache=this.namespaceParseCache;if(this.enableNamespaceParseCache){if(cache.hasOwnProperty(namespace)){return cache[namespace]}}var parts=[],rewrites=this.namespaceRewrites,root=global,name=namespace,rewrite,from,to,i,ln;for(i=0,ln=rewrites.length;i<ln;i++){rewrite=rewrites[i];from=rewrite.from;to=rewrite.to;if(name===from||name.substring(0,from.length)===from){name=name.substring(from.length);if(typeof to!="string"){root=to}else{parts=parts.concat(to.split("."))}break}}parts.push(root);parts=parts.concat(name.split("."));if(this.enableNamespaceParseCache){cache[namespace]=parts}return parts},setNamespace:function(name,value){var root=global,parts=this.parseNamespace(name),ln=parts.length-1,leaf=parts[ln],i,part;for(i=0;i<ln;i++){part=parts[i];if(typeof part!="string"){root=part}else{if(!root[part]){root[part]={}}root=root[part]}}root[leaf]=value;return root[leaf]},createNamespaces:function(){var root=global,parts,part,i,j,ln,subLn;for(i=0,ln=arguments.length;i<ln;i++){parts=this.parseNamespace(arguments[i]);for(j=0,subLn=parts.length;j<subLn;j++){part=parts[j];if(typeof part!="string"){root=part}else{if(!root[part]){root[part]={}}root=root[part]}}}return root},set:function(name,value){var me=this,maps=me.maps,nameToAlternates=maps.nameToAlternates,targetName=me.getName(value),alternates;me.classes[name]=me.setNamespace(name,value);if(targetName&&targetName!==name){maps.alternateToName[name]=targetName;alternates=nameToAlternates[targetName]||(nameToAlternates[targetName]=[]);alternates.push(name)}return this},get:function(name){var classes=this.classes;if(classes[name]){return classes[name]}var root=global,parts=this.parseNamespace(name),part,i,ln;for(i=0,ln=parts.length;i<ln;i++){part=parts[i];if(typeof part!="string"){root=part}else{if(!root||!root[part]){return null}root=root[part]}}return root},setAlias:function(cls,alias){var aliasToNameMap=this.maps.aliasToName,nameToAliasesMap=this.maps.nameToAliases,className;if(typeof cls=="string"){className=cls}else{className=this.getName(cls)}if(alias&&aliasToNameMap[alias]!==className){if(aliasToNameMap[alias]){Ext.Logger.info("[Ext.ClassManager] Overriding existing alias: '"+alias+"' of: '"+aliasToNameMap[alias]+"' with: '"+className+"'. Be sure it's intentional.")}aliasToNameMap[alias]=className}if(!nameToAliasesMap[className]){nameToAliasesMap[className]=[]}if(alias){Ext.Array.include(nameToAliasesMap[className],alias)}return this},addNameAliasMappings:function(aliases){var aliasToNameMap=this.maps.aliasToName,nameToAliasesMap=this.maps.nameToAliases,className,aliasList,alias,i;for(className in aliases){aliasList=nameToAliasesMap[className]||(nameToAliasesMap[className]=[]);for(i=0;i<aliases[className].length;i++){alias=aliases[className][i];if(!aliasToNameMap[alias]){aliasToNameMap[alias]=className;aliasList.push(alias)}}}return this},addNameAlternateMappings:function(alternates){var alternateToName=this.maps.alternateToName,nameToAlternates=this.maps.nameToAlternates,className,aliasList,alternate,i;for(className in alternates){aliasList=nameToAlternates[className]||(nameToAlternates[className]=[]);for(i=0;i<alternates[className].length;i++){alternate=alternates[className];if(!alternateToName[alternate]){alternateToName[alternate]=className;aliasList.push(alternate)}}}return this},getByAlias:function(alias){return this.get(this.getNameByAlias(alias))},getNameByAlias:function(alias){return this.maps.aliasToName[alias]||""},getNameByAlternate:function(alternate){return this.maps.alternateToName[alternate]||""},getAliasesByName:function(name){return this.maps.nameToAliases[name]||[]},getName:function(object){return object&&object.$className||""},getClass:function(object){return object&&object.self||null},create:function(className,data,createdFn){if(typeof className!="string"){throw new Error("[Ext.define] Invalid class name '"+className+"' specified, must be a non-empty string")}data.$className=className;return new Class(data,function(){var postprocessorStack=data.postprocessors||Manager.defaultPostprocessors,registeredPostprocessors=Manager.postprocessors,index=0,postprocessors=[],postprocessor,process,i,ln,j,subLn,postprocessorProperties,postprocessorProperty;delete data.postprocessors;for(i=0,ln=postprocessorStack.length;i<ln;i++){postprocessor=postprocessorStack[i];if(typeof postprocessor=="string"){postprocessor=registeredPostprocessors[postprocessor];postprocessorProperties=postprocessor.properties;if(postprocessorProperties===true){postprocessors.push(postprocessor.fn)}else{if(postprocessorProperties){for(j=0,subLn=postprocessorProperties.length;j<subLn;j++){postprocessorProperty=postprocessorProperties[j];if(data.hasOwnProperty(postprocessorProperty)){postprocessors.push(postprocessor.fn);break}}}}}else{postprocessors.push(postprocessor)}}process=function(clsName,cls,clsData){postprocessor=postprocessors[index++];if(!postprocessor){Manager.set(className,cls);if(createdFn){createdFn.call(cls,cls)}Manager.triggerCreated(className);return}if(postprocessor.call(this,clsName,cls,clsData,process)!==false){process.apply(this,arguments)}};process.call(Manager,className,this,data)})},createOverride:function(className,data){var overriddenClassName=data.override,requires=Ext.Array.from(data.requires);delete data.override;delete data.requires;this.existCache[className]=true;Ext.require(requires,function(){this.onCreated(function(){this.get(overriddenClassName).override(data);this.triggerCreated(className)},this,overriddenClassName)},this);return this},instantiateByAlias:function(){var alias=arguments[0],args=arraySlice.call(arguments),className=this.getNameByAlias(alias);if(!className){className=this.maps.aliasToName[alias];if(!className){throw new Error("[Ext.createByAlias] Cannot create an instance of unrecognized alias: "+alias)}Ext.Logger.warn("[Ext.Loader] Synchronously loading '"+className+"'; consider adding Ext.require('"+alias+"') above Ext.onReady");Ext.syncRequire(className)}args[0]=className;return this.instantiate.apply(this,args)},instantiate:function(){var name=arguments[0],args=arraySlice.call(arguments,1),alias=name,possibleName,cls;if(typeof name!="function"){if((typeof name!="string"||name.length<1)){throw new Error("[Ext.create] Invalid class name or alias '"+name+"' specified, must be a non-empty string")}cls=this.get(name)}else{cls=name}if(!cls){possibleName=this.getNameByAlias(name);if(possibleName){name=possibleName;cls=this.get(name)}}if(!cls){possibleName=this.getNameByAlternate(name);if(possibleName){name=possibleName;cls=this.get(name)}}if(!cls){Ext.Logger.warn("[Ext.Loader] Synchronously loading '"+name+"'; consider adding '"+((possibleName)?alias:name)+"' explicitly as a require of the corresponding class");Ext.syncRequire(name);cls=this.get(name)}if(!cls){throw new Error("[Ext.create] Cannot create an instance of unrecognized class name / alias: "+alias)}if(typeof cls!="function"){throw new Error("[Ext.create] '"+name+"' is a singleton and cannot be instantiated")}return this.getInstantiator(args.length)(cls,args)},dynInstantiate:function(name,args){args=arrayFrom(args,true);args.unshift(name);return this.instantiate.apply(this,args)},getInstantiator:function(length){var instantiators=this.instantiators,instantiator;instantiator=instantiators[length];if(!instantiator){var i=length,args=[];for(i=0;i<length;i++){args.push("a["+i+"]")}instantiator=instantiators[length]=new Function("c","a","return new c("+args.join(",")+")");instantiator.displayName="Ext.ClassManager.instantiate"+length}return instantiator},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(name,fn,properties,position,relativeTo){if(!position){position="last"}if(!properties){properties=[name]}this.postprocessors[name]={name:name,properties:properties||false,fn:fn};this.setDefaultPostprocessorPosition(name,position,relativeTo);return this},setDefaultPostprocessors:function(postprocessors){this.defaultPostprocessors=arrayFrom(postprocessors);return this},setDefaultPostprocessorPosition:function(name,offset,relativeName){var defaultPostprocessors=this.defaultPostprocessors,index;if(typeof offset=="string"){if(offset==="first"){defaultPostprocessors.unshift(name);return this}else{if(offset==="last"){defaultPostprocessors.push(name);return this}}offset=(offset==="after")?1:-1}index=Ext.Array.indexOf(defaultPostprocessors,relativeName);if(index!==-1){Ext.Array.splice(defaultPostprocessors,Math.max(0,index+offset),0,name)}return this},getNamesByExpression:function(expression){var nameToAliasesMap=this.maps.nameToAliases,names=[],name,alias,aliases,possibleName,regex,i,ln;if(typeof expression!="string"||expression.length<1){throw new Error("[Ext.ClassManager.getNamesByExpression] Expression "+expression+" is invalid, must be a non-empty string")}if(expression.indexOf("*")!==-1){expression=expression.replace(/\*/g,"(.*?)");regex=new RegExp("^"+expression+"$");for(name in nameToAliasesMap){if(nameToAliasesMap.hasOwnProperty(name)){aliases=nameToAliasesMap[name];if(name.search(regex)!==-1){names.push(name)}else{for(i=0,ln=aliases.length;i<ln;i++){alias=aliases[i];if(alias.search(regex)!==-1){names.push(name);break}}}}}}else{possibleName=this.getNameByAlias(expression);if(possibleName){names.push(possibleName)}else{possibleName=this.getNameByAlternate(expression);if(possibleName){names.push(possibleName)}else{names.push(expression)}}}return names}};Manager.registerPostprocessor("alias",function(name,cls,data){var aliases=data.alias,i,ln;for(i=0,ln=aliases.length;i<ln;i++){alias=aliases[i];this.setAlias(cls,alias)}},["xtype","alias"]);Manager.registerPostprocessor("singleton",function(name,cls,data,fn){fn.call(this,name,new cls(),data);return false});Manager.registerPostprocessor("alternateClassName",function(name,cls,data){var alternates=data.alternateClassName,i,ln,alternate;if(!(alternates instanceof Array)){alternates=[alternates]}for(i=0,ln=alternates.length;i<ln;i++){alternate=alternates[i];if(typeof alternate!="string"){throw new Error("[Ext.define] Invalid alternate of: '"+alternate+"' for class: '"+name+"'; must be a valid string")}this.set(alternate,cls)}});Ext.apply(Ext,{create:alias(Manager,"instantiate"),widget:function(name){var args=arraySlice.call(arguments);args[0]="widget."+name;return Manager.instantiateByAlias.apply(Manager,args)},createByAlias:alias(Manager,"instantiateByAlias"),define:function(className,data,createdFn){if("override" in data){return Manager.createOverride.apply(Manager,arguments)}return Manager.create.apply(Manager,arguments)},getClassName:alias(Manager,"getName"),getDisplayName:function(object){if(object){if(object.displayName){return object.displayName}if(object.$name&&object.$class){return Ext.getClassName(object.$class)+"#"+object.$name}if(object.$className){return object.$className}}return"Anonymous"},getClass:alias(Manager,"getClass"),namespace:alias(Manager,"createNamespaces")});Ext.createWidget=Ext.widget;Ext.ns=Ext.namespace;Class.registerPreprocessor("className",function(cls,data){if(data.$className){cls.$className=data.$className;cls.displayName=cls.$className}},true,"first");Class.registerPreprocessor("alias",function(cls,data){var prototype=cls.prototype,xtypes=arrayFrom(data.xtype),aliases=arrayFrom(data.alias),widgetPrefix="widget.",widgetPrefixLength=widgetPrefix.length,xtypesChain=Array.prototype.slice.call(prototype.xtypesChain||[]),xtypesMap=Ext.merge({},prototype.xtypesMap||{}),i,ln,alias,xtype;for(i=0,ln=aliases.length;i<ln;i++){alias=aliases[i];if(typeof alias!="string"||alias.length<1){throw new Error("[Ext.define] Invalid alias of: '"+alias+"' for class: '"+name+"'; must be a valid string")}if(alias.substring(0,widgetPrefixLength)===widgetPrefix){xtype=alias.substring(widgetPrefixLength);Ext.Array.include(xtypes,xtype)}}cls.xtype=data.xtype=xtypes[0];data.xtypes=xtypes;for(i=0,ln=xtypes.length;i<ln;i++){xtype=xtypes[i];if(!xtypesMap[xtype]){xtypesMap[xtype]=true;xtypesChain.push(xtype)}}data.xtypesChain=xtypesChain;data.xtypesMap=xtypesMap;Ext.Function.interceptAfter(data,"onClassCreated",function(){var mixins=prototype.mixins,key,mixin;for(key in mixins){if(mixins.hasOwnProperty(key)){mixin=mixins[key];xtypes=mixin.xtypes;if(xtypes){for(i=0,ln=xtypes.length;i<ln;i++){xtype=xtypes[i];if(!xtypesMap[xtype]){xtypesMap[xtype]=true;xtypesChain.push(xtype)}}}}}});for(i=0,ln=xtypes.length;i<ln;i++){xtype=xtypes[i];if(typeof xtype!="string"||xtype.length<1){throw new Error("[Ext.define] Invalid xtype of: '"+xtype+"' for class: '"+name+"'; must be a valid non-empty string")}Ext.Array.include(aliases,widgetPrefix+xtype)}data.alias=aliases},["xtype","alias"])})(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global);(function(Manager,Class,flexSetter,alias,pass,arrayFrom,arrayErase,arrayInclude){var dependencyProperties=["extend","mixins","requires"],Loader,setPathCount=0;Loader=Ext.Loader={isInHistory:{},history:[],config:{enabled:true,disableCaching:true,disableCachingParam:"_dc",paths:{Ext:"."}},setConfig:function(name,value){if(Ext.isObject(name)&&arguments.length===1){Ext.merge(this.config,name)}else{this.config[name]=(Ext.isObject(value))?Ext.merge(this.config[name],value):value}setPathCount+=1;return this},getConfig:function(name){if(name){return this.config[name]}return this.config},setPath:flexSetter(function(name,path){this.config.paths[name]=path;setPathCount+=1;return this}),addClassPathMappings:function(paths){var name;if(setPathCount==0){Loader.config.paths=paths}else{for(name in paths){Loader.config.paths[name]=paths[name]}}setPathCount++;return Loader},getPath:function(className){var path="",paths=this.config.paths,prefix=this.getPrefix(className);if(prefix.length>0){if(prefix===className){return paths[prefix]}path=paths[prefix];className=className.substring(prefix.length+1)}if(path.length>0){path+="/"}return path.replace(/\/\.\//g,"/")+className.replace(/\./g,"/")+".js"},getPrefix:function(className){var paths=this.config.paths,prefix,deepestPrefix="";if(paths.hasOwnProperty(className)){return className}for(prefix in paths){if(paths.hasOwnProperty(prefix)&&prefix+"."===className.substring(0,prefix.length+1)){if(prefix.length>deepestPrefix.length){deepestPrefix=prefix}}}return deepestPrefix},require:function(expressions,fn,scope,excludes){if(fn){fn.call(scope)}},syncRequire:function(){},exclude:function(excludes){var me=this;return{require:function(expressions,fn,scope){return me.require(expressions,fn,scope,excludes)},syncRequire:function(expressions,fn,scope){return me.syncRequire(expressions,fn,scope,excludes)}}},onReady:function(fn,scope,withDomReady,options){var oldFn;if(withDomReady!==false&&Ext.onDocumentReady){oldFn=fn;fn=function(){Ext.onDocumentReady(oldFn,scope,options)}}fn.call(scope)}};Ext.apply(Loader,{documentHead:typeof document!="undefined"&&(document.head||document.getElementsByTagName("head")[0]),isLoading:false,queue:[],isClassFileLoaded:{},isFileLoaded:{},readyListeners:[],optionalRequires:[],requiresMap:{},numPendingFiles:0,numLoadedFiles:0,hasFileLoadError:false,classNameToFilePathMap:{},syncModeEnabled:false,scriptElements:{},refreshQueue:function(){var queue=this.queue,ln=queue.length,i,item,j,requires,references;if(ln===0){this.triggerReady();return}for(i=0;i<ln;i++){item=queue[i];if(item){requires=item.requires;references=item.references;if(requires.length>this.numLoadedFiles){continue}j=0;do{if(Manager.isCreated(requires[j])){arrayErase(requires,j,1)}else{j++}}while(j<requires.length);if(item.requires.length===0){arrayErase(queue,i,1);item.callback.call(item.scope);this.refreshQueue();break}}}return this},injectScriptElement:function(url,onLoad,onError,scope){var script=document.createElement("script"),me=this,onLoadFn=function(){me.cleanupScriptElement(script);onLoad.call(scope)},onErrorFn=function(){me.cleanupScriptElement(script);onError.call(scope)};script.type="text/javascript";script.src=url;script.onload=onLoadFn;script.onerror=onErrorFn;script.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){onLoadFn()}};this.documentHead.appendChild(script);return script},removeScriptElement:function(url){var scriptElements=this.scriptElements;if(scriptElements[url]){this.cleanupScriptElement(scriptElements[url],true);delete scriptElements[url]}return this},cleanupScriptElement:function(script,remove){script.onload=null;script.onreadystatechange=null;script.onerror=null;if(remove){this.documentHead.removeChild(script)}return this},loadScriptFile:function(url,onLoad,onError,scope,synchronous){var me=this,isFileLoaded=this.isFileLoaded,scriptElements=this.scriptElements,noCacheUrl=url+(this.getConfig("disableCaching")?("?"+this.getConfig("disableCachingParam")+"="+Ext.Date.now()):""),xhr,status,content,onScriptError;if(isFileLoaded[url]){return this}scope=scope||this;this.isLoading=true;if(!synchronous){onScriptError=function(){onError.call(scope,"Failed loading '"+url+"', please verify that the file exists",synchronous)};if(!Ext.isReady&&Ext.onDocumentReady){Ext.onDocumentReady(function(){if(!isFileLoaded[url]){scriptElements[url]=me.injectScriptElement(noCacheUrl,onLoad,onScriptError,scope)}})}else{scriptElements[url]=this.injectScriptElement(noCacheUrl,onLoad,onScriptError,scope)}}else{if(typeof XMLHttpRequest!="undefined"){xhr=new XMLHttpRequest()}else{xhr=new ActiveXObject("Microsoft.XMLHTTP")}try{xhr.open("GET",noCacheUrl,false);xhr.send(null)}catch(e){onError.call(this,"Failed loading synchronously via XHR: '"+url+"'; It's likely that the file is either being loaded from a different domain or from the local file system whereby cross origin requests are not allowed due to security reasons. Use asynchronous loading with Ext.require instead.",synchronous)}status=(xhr.status==1223)?204:xhr.status;content=xhr.responseText;if((status>=200&&status<300)||status==304||(status==0&&content.length>0)){Ext.globalEval(content+"\n//@ sourceURL="+url);onLoad.call(scope)}else{onError.call(this,"Failed loading synchronously via XHR: '"+url+"'; please verify that the file exists. XHR status code: "+status,synchronous)}xhr=null}},syncRequire:function(){var syncModeEnabled=this.syncModeEnabled;if(!syncModeEnabled){this.syncModeEnabled=true}this.require.apply(this,arguments);if(!syncModeEnabled){this.syncModeEnabled=false}this.refreshQueue()},require:function(expressions,fn,scope,excludes){var excluded={},included={},queue=this.queue,classNameToFilePathMap=this.classNameToFilePathMap,isClassFileLoaded=this.isClassFileLoaded,excludedClassNames=[],possibleClassNames=[],classNames=[],references=[],callback,syncModeEnabled,filePath,expression,exclude,className,possibleClassName,i,j,ln,subLn;if(excludes){excludes=arrayFrom(excludes);for(i=0,ln=excludes.length;i<ln;i++){exclude=excludes[i];if(typeof exclude=="string"&&exclude.length>0){excludedClassNames=Manager.getNamesByExpression(exclude);for(j=0,subLn=excludedClassNames.length;j<subLn;j++){excluded[excludedClassNames[j]]=true}}}}expressions=arrayFrom(expressions);if(fn){if(fn.length>0){callback=function(){var classes=[],i,ln,name;for(i=0,ln=references.length;i<ln;i++){name=references[i];classes.push(Manager.get(name))}return fn.apply(this,classes)}}else{callback=fn}}else{callback=Ext.emptyFn}scope=scope||Ext.global;for(i=0,ln=expressions.length;i<ln;i++){expression=expressions[i];if(typeof expression=="string"&&expression.length>0){possibleClassNames=Manager.getNamesByExpression(expression);subLn=possibleClassNames.length;for(j=0;j<subLn;j++){possibleClassName=possibleClassNames[j];if(excluded[possibleClassName]!==true){references.push(possibleClassName);if(!Manager.isCreated(possibleClassName)&&!included[possibleClassName]){included[possibleClassName]=true;classNames.push(possibleClassName)}}}}}if(classNames.length>0){if(!this.config.enabled){throw new Error("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+((classNames.length>1)?"es":"")+": "+classNames.join(", "))}}else{callback.call(scope);return this}syncModeEnabled=this.syncModeEnabled;if(!syncModeEnabled){queue.push({requires:classNames.slice(),callback:callback,scope:scope})}ln=classNames.length;for(i=0;i<ln;i++){className=classNames[i];filePath=this.getPath(className);if(syncModeEnabled&&isClassFileLoaded.hasOwnProperty(className)){this.numPendingFiles--;this.removeScriptElement(filePath);delete isClassFileLoaded[className]}if(!isClassFileLoaded.hasOwnProperty(className)){isClassFileLoaded[className]=false;classNameToFilePathMap[className]=filePath;this.numPendingFiles++;this.loadScriptFile(filePath,pass(this.onFileLoaded,[className,filePath],this),pass(this.onFileLoadError,[className,filePath]),this,syncModeEnabled)}}if(syncModeEnabled){callback.call(scope);if(ln===1){return Manager.get(className)}}return this},onFileLoaded:function(className,filePath){this.numLoadedFiles++;this.isClassFileLoaded[className]=true;this.isFileLoaded[filePath]=true;this.numPendingFiles--;if(this.numPendingFiles===0){this.refreshQueue()}if(!this.syncModeEnabled&&this.numPendingFiles===0&&this.isLoading&&!this.hasFileLoadError){var queue=this.queue,missingClasses=[],missingPaths=[],requires,i,ln,j,subLn;for(i=0,ln=queue.length;i<ln;i++){requires=queue[i].requires;for(j=0,subLn=requires.length;j<subLn;j++){if(this.isClassFileLoaded[requires[j]]){missingClasses.push(requires[j])}}}if(missingClasses.length<1){return}missingClasses=Ext.Array.filter(Ext.Array.unique(missingClasses),function(item){return !this.requiresMap.hasOwnProperty(item)},this);for(i=0,ln=missingClasses.length;i<ln;i++){missingPaths.push(this.classNameToFilePathMap[missingClasses[i]])}throw new Error("The following classes are not declared even if their files have been loaded: '"+missingClasses.join("', '")+"'. Please check the source code of their corresponding files for possible typos: '"+missingPaths.join("', '"))}},onFileLoadError:function(className,filePath,errorMessage,isSynchronous){this.numPendingFiles--;this.hasFileLoadError=true;throw new Error("[Ext.Loader] "+errorMessage)},addOptionalRequires:function(requires){var optionalRequires=this.optionalRequires,i,ln,require;requires=arrayFrom(requires);for(i=0,ln=requires.length;i<ln;i++){require=requires[i];arrayInclude(optionalRequires,require)}return this},triggerReady:function(force){var readyListeners=this.readyListeners,optionalRequires=this.optionalRequires,listener;if(this.isLoading||force){this.isLoading=false;if(optionalRequires.length!==0){optionalRequires=optionalRequires.slice();this.optionalRequires.length=0;this.require(optionalRequires,pass(this.triggerReady,[true],this),this);return this}while(readyListeners.length){listener=readyListeners.shift();listener.fn.call(listener.scope);if(this.isLoading){return this}}}return this},onReady:function(fn,scope,withDomReady,options){var oldFn;if(withDomReady!==false&&Ext.onDocumentReady){oldFn=fn;fn=function(){Ext.onDocumentReady(oldFn,scope,options)}}if(!this.isLoading){fn.call(scope)}else{this.readyListeners.push({fn:fn,scope:scope})}},historyPush:function(className){var isInHistory=this.isInHistory;if(className&&this.isClassFileLoaded.hasOwnProperty(className)&&!isInHistory[className]){isInHistory[className]=true;this.history.push(className)}return this}});Ext.require=alias(Loader,"require");Ext.syncRequire=alias(Loader,"syncRequire");Ext.exclude=alias(Loader,"exclude");Ext.onReady=function(fn,scope,options){Loader.onReady(fn,scope,true,options)};Class.registerPreprocessor("loader",function(cls,data,hooks,continueFn){var me=this,dependencies=[],className=Manager.getName(cls),i,j,ln,subLn,value,propertyName,propertyValue;for(i=0,ln=dependencyProperties.length;i<ln;i++){propertyName=dependencyProperties[i];if(data.hasOwnProperty(propertyName)){propertyValue=data[propertyName];if(typeof propertyValue=="string"){dependencies.push(propertyValue)}else{if(propertyValue instanceof Array){for(j=0,subLn=propertyValue.length;j<subLn;j++){value=propertyValue[j];if(typeof value=="string"){dependencies.push(value)}}}else{if(typeof propertyValue!="function"){for(j in propertyValue){if(propertyValue.hasOwnProperty(j)){value=propertyValue[j];if(typeof value=="string"){dependencies.push(value)}}}}}}}}if(dependencies.length===0){return}var deadlockPath=[],requiresMap=Loader.requiresMap,detectDeadlock;if(className){requiresMap[className]=dependencies;if(!Loader.requiredByMap){Loader.requiredByMap={}}Ext.Array.each(dependencies,function(dependency){if(!Loader.requiredByMap[dependency]){Loader.requiredByMap[dependency]=[]}Loader.requiredByMap[dependency].push(className)});detectDeadlock=function(cls){deadlockPath.push(cls);if(requiresMap[cls]){if(Ext.Array.contains(requiresMap[cls],className)){throw new Error("Deadlock detected while loading dependencies! '"+className+"' and '"+deadlockPath[1]+"' mutually require each other. Path: "+deadlockPath.join(" -> ")+" -> "+deadlockPath[0])}for(i=0,ln=requiresMap[cls].length;i<ln;i++){detectDeadlock(requiresMap[cls][i])}}};detectDeadlock(className)}Loader.require(dependencies,function(){for(i=0,ln=dependencyProperties.length;i<ln;i++){propertyName=dependencyProperties[i];if(data.hasOwnProperty(propertyName)){propertyValue=data[propertyName];if(typeof propertyValue=="string"){data[propertyName]=Manager.get(propertyValue)}else{if(propertyValue instanceof Array){for(j=0,subLn=propertyValue.length;j<subLn;j++){value=propertyValue[j];if(typeof value=="string"){data[propertyName][j]=Manager.get(value)}}}else{if(typeof propertyValue!="function"){for(var k in propertyValue){if(propertyValue.hasOwnProperty(k)){value=propertyValue[k];if(typeof value=="string"){data[propertyName][k]=Manager.get(value)}}}}}}}}continueFn.call(me,cls,data,hooks)});return false},true,"after","className");Manager.registerPostprocessor("uses",function(name,cls,data){var uses=arrayFrom(data.uses),items=[],i,ln,item;for(i=0,ln=uses.length;i<ln;i++){item=uses[i];if(typeof item=="string"){items.push(item)}}Loader.addOptionalRequires(items)});Manager.onCreated(function(className){this.historyPush(className)},Loader)})(Ext.ClassManager,Ext.Class,Ext.Function.flexSetter,Ext.Function.alias,Ext.Function.pass,Ext.Array.from,Ext.Array.erase,Ext.Array.include);(function(){var scripts=document.getElementsByTagName("script"),currentScript=scripts[scripts.length-1],src=currentScript.src,path=src.substring(0,src.lastIndexOf("/")+1),Loader=Ext.Loader;if(src.indexOf("src/core/class/")!=-1){path=path+"../../../"}Loader.setConfig({enabled:true,disableCaching:!/[?&](cache|breakpoint)/i.test(location.search),paths:{Ext:path+"src"}})})();Ext.setVersion("touch","2.1.1");Ext.apply(Ext,{version:Ext.getVersion("touch"),idSeed:0,repaint:function(){var mask=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"mask "+Ext.baseCSSPrefix+"mask-transparent"});setTimeout(function(){mask.destroy()},0)},id:function(el,prefix){if(el&&el.id){return el.id}el=Ext.getDom(el)||{};if(el===document||el===document.documentElement){el.id="ext-application"}else{if(el===document.body){el.id="ext-viewport"}else{if(el===window){el.id="ext-window"}}}el.id=el.id||((prefix||"ext-element-")+(++Ext.idSeed));return el.id},getBody:function(){if(!Ext.documentBodyElement){if(!document.body){throw new Error("[Ext.getBody] document.body does not exist at this point")}Ext.documentBodyElement=Ext.get(document.body)}return Ext.documentBodyElement},getHead:function(){if(!Ext.documentHeadElement){Ext.documentHeadElement=Ext.get(document.head||document.getElementsByTagName("head")[0])}return Ext.documentHeadElement},getDoc:function(){if(!Ext.documentElement){Ext.documentElement=Ext.get(document)}return Ext.documentElement},getCmp:function(id){return Ext.ComponentMgr.get(id)},copyTo:function(dest,source,names,usePrototypeKeys){if(typeof names=="string"){names=names.split(/[,;\s]/)}Ext.each(names,function(name){if(usePrototypeKeys||source.hasOwnProperty(name)){dest[name]=source[name]}},this);return dest},destroy:function(){var args=arguments,ln=args.length,i,item;for(i=0;i<ln;i++){item=args[i];if(item){if(Ext.isArray(item)){this.destroy.apply(this,item)}else{if(Ext.isFunction(item.destroy)){item.destroy()}}}}},getDom:function(el){if(!el||!document){return null}return el.dom?el.dom:(typeof el=="string"?document.getElementById(el):el)},removeNode:function(node){if(node&&node.parentNode&&node.tagName!="BODY"){Ext.get(node).clearListeners();node.parentNode.removeChild(node);delete Ext.cache[node.id]}},defaultSetupConfig:{eventPublishers:{dom:{xclass:"Ext.event.publisher.Dom"},touchGesture:{xclass:"Ext.event.publisher.TouchGesture",recognizers:{drag:{xclass:"Ext.event.recognizer.Drag"},tap:{xclass:"Ext.event.recognizer.Tap"},doubleTap:{xclass:"Ext.event.recognizer.DoubleTap"},longPress:{xclass:"Ext.event.recognizer.LongPress"},swipe:{xclass:"Ext.event.recognizer.HorizontalSwipe"},pinch:{xclass:"Ext.event.recognizer.Pinch"},rotate:{xclass:"Ext.event.recognizer.Rotate"}}},componentDelegation:{xclass:"Ext.event.publisher.ComponentDelegation"},componentPaint:{xclass:"Ext.event.publisher.ComponentPaint"},elementPaint:{xclass:"Ext.event.publisher.ElementPaint"},elementSize:{xclass:"Ext.event.publisher.ElementSize"},seriesItemEvents:{xclass:"Ext.chart.series.ItemPublisher"}},logger:{enabled:true,xclass:"Ext.log.Logger",minPriority:"deprecate",writers:{console:{xclass:"Ext.log.writer.Console",throwOnErrors:true,formatter:{xclass:"Ext.log.formatter.Default"}}}},animator:{xclass:"Ext.fx.Runner"},viewport:{xclass:"Ext.viewport.Viewport"}},isSetup:false,frameStartTime:+new Date(),setupListeners:[],onSetup:function(fn,scope){if(Ext.isSetup){fn.call(scope)}else{Ext.setupListeners.push({fn:fn,scope:scope})}},setup:function(config){var defaultSetupConfig=Ext.defaultSetupConfig,emptyFn=Ext.emptyFn,onReady=config.onReady||emptyFn,onUpdated=config.onUpdated||emptyFn,scope=config.scope,requires=Ext.Array.from(config.requires),extOnReady=Ext.onReady,head=Ext.getHead(),callback,viewport,precomposed;Ext.setup=function(){throw new Error("Ext.setup has already been called before")};delete config.requires;delete config.onReady;delete config.onUpdated;delete config.scope;Ext.require(["Ext.event.Dispatcher"]);callback=function(){var listeners=Ext.setupListeners,ln=listeners.length,i,listener;delete Ext.setupListeners;Ext.isSetup=true;for(i=0;i<ln;i++){listener=listeners[i];listener.fn.call(listener.scope)}Ext.onReady=extOnReady;Ext.onReady(onReady,scope)};Ext.onUpdated=onUpdated;Ext.onReady=function(fn,scope){var origin=onReady;onReady=function(){origin();Ext.onReady(fn,scope)}};config=Ext.merge({},defaultSetupConfig,config);Ext.onDocumentReady(function(){Ext.factoryConfig(config,function(data){Ext.event.Dispatcher.getInstance().setPublishers(data.eventPublishers);if(data.logger){Ext.Logger=data.logger}if(data.animator){Ext.Animator=data.animator}if(data.viewport){Ext.Viewport=viewport=data.viewport;if(!scope){scope=viewport}Ext.require(requires,function(){Ext.Viewport.on("ready",callback,null,{single:true})})}else{Ext.require(requires,callback)}})});function addMeta(name,content){var meta=document.createElement("meta");meta.setAttribute("name",name);meta.setAttribute("content",content);head.append(meta)}function addIcon(href,sizes,precomposed){var link=document.createElement("link");link.setAttribute("rel","apple-touch-icon"+(precomposed?"-precomposed":""));link.setAttribute("href",href);if(sizes){link.setAttribute("sizes",sizes)}head.append(link)}function addStartupImage(href,media){var link=document.createElement("link");link.setAttribute("rel","apple-touch-startup-image");link.setAttribute("href",href);if(media){link.setAttribute("media",media)}head.append(link)}var icon=config.icon,isIconPrecomposed=Boolean(config.isIconPrecomposed),startupImage=config.startupImage||{},statusBarStyle=config.statusBarStyle,devicePixelRatio=window.devicePixelRatio||1;if(navigator.standalone){addMeta("viewport","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0")}else{addMeta("viewport","initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0")}addMeta("apple-mobile-web-app-capable","yes");addMeta("apple-touch-fullscreen","yes");if(statusBarStyle){addMeta("apple-mobile-web-app-status-bar-style",statusBarStyle)}if(Ext.isString(icon)){icon={57:icon,72:icon,114:icon,144:icon}}else{if(!icon){icon={}}}if(Ext.os.is.iPad){if(devicePixelRatio>=2){if("1496x2048" in startupImage){addStartupImage(startupImage["1496x2048"],"(orientation: landscape)")}if("1536x2008" in startupImage){addStartupImage(startupImage["1536x2008"],"(orientation: portrait)")}if("144" in icon){addIcon(icon["144"],"144x144",isIconPrecomposed)}}else{if("748x1024" in startupImage){addStartupImage(startupImage["748x1024"],"(orientation: landscape)")}if("768x1004" in startupImage){addStartupImage(startupImage["768x1004"],"(orientation: portrait)")}if("72" in icon){addIcon(icon["72"],"72x72",isIconPrecomposed)}}}else{if(devicePixelRatio>=2&&Ext.os.version.gtEq("4.3")){if(Ext.os.is.iPhone5){addStartupImage(startupImage["640x1096"])}else{addStartupImage(startupImage["640x920"])}if("114" in icon){addIcon(icon["114"],"114x114",isIconPrecomposed)}}else{addStartupImage(startupImage["320x460"]);if("57" in icon){addIcon(icon["57"],null,isIconPrecomposed)}}}},application:function(config){var appName=config.name,onReady,scope,requires;if(!config){config={}}if(!Ext.Loader.config.paths[appName]){Ext.Loader.setPath(appName,config.appFolder||"app")}requires=Ext.Array.from(config.requires);config.requires=["Ext.app.Application"];onReady=config.onReady;scope=config.scope;config.onReady=function(){config.requires=requires;new Ext.app.Application(config);if(onReady){onReady.call(scope)}};Ext.setup(config)},factoryConfig:function(config,callback){var isSimpleObject=Ext.isSimpleObject(config);if(isSimpleObject&&config.xclass){var className=config.xclass;delete config.xclass;Ext.require(className,function(){Ext.factoryConfig(config,function(cfg){callback(Ext.create(className,cfg))})});return}var isArray=Ext.isArray(config),keys=[],key,value,i,ln;if(isSimpleObject||isArray){if(isSimpleObject){for(key in config){if(config.hasOwnProperty(key)){value=config[key];if(Ext.isSimpleObject(value)||Ext.isArray(value)){keys.push(key)}}}}else{for(i=0,ln=config.length;i<ln;i++){value=config[i];if(Ext.isSimpleObject(value)||Ext.isArray(value)){keys.push(i)}}}i=0;ln=keys.length;if(ln===0){callback(config);return}function fn(value){config[key]=value;i++;factory()}function factory(){if(i>=ln){callback(config);return}key=keys[i];value=config[key];Ext.factoryConfig(value,fn)}factory();return}callback(config)},factory:function(config,classReference,instance,aliasNamespace){var manager=Ext.ClassManager,newInstance;if(!config||config.isInstance){if(instance&&instance!==config){instance.destroy()}return config}if(aliasNamespace){if(typeof config=="string"){return manager.instantiateByAlias(aliasNamespace+"."+config)}else{if(Ext.isObject(config)&&"type" in config){return manager.instantiateByAlias(aliasNamespace+"."+config.type,config)}}}if(config===true){return instance||manager.instantiate(classReference)}if(!Ext.isObject(config)){Ext.Logger.error("Invalid config, must be a valid config object")}if("xtype" in config){newInstance=manager.instantiateByAlias("widget."+config.xtype,config)}else{if("xclass" in config){newInstance=manager.instantiate(config.xclass,config)}}if(newInstance){if(instance){instance.destroy()}return newInstance}if(instance){return instance.setConfig(config)}return manager.instantiate(classReference,config)},deprecateClassMember:function(cls,oldName,newName,message){return this.deprecateProperty(cls.prototype,oldName,newName,message)},deprecateClassMembers:function(cls,members){var prototype=cls.prototype,oldName,newName;for(oldName in members){if(members.hasOwnProperty(oldName)){newName=members[oldName];this.deprecateProperty(prototype,oldName,newName)}}},deprecateProperty:function(object,oldName,newName,message){if(!message){message="'"+oldName+"' is deprecated"}if(newName){message+=", please use '"+newName+"' instead"}if(newName){Ext.Object.defineProperty(object,oldName,{get:function(){Ext.Logger.deprecate(message,1);return this[newName]},set:function(value){Ext.Logger.deprecate(message,1);this[newName]=value},configurable:true})}},deprecatePropertyValue:function(object,name,value,message){Ext.Object.defineProperty(object,name,{get:function(){Ext.Logger.deprecate(message,1);return value},configurable:true})},deprecateMethod:function(object,name,method,message){object[name]=function(){Ext.Logger.deprecate(message,2);if(method){return method.apply(this,arguments)}}},deprecateClassMethod:function(cls,name,method,message){if(typeof name!="string"){var from,to;for(from in name){if(name.hasOwnProperty(from)){to=name[from];Ext.deprecateClassMethod(cls,from,to)}}return}var isLateBinding=typeof method=="string",member;if(!message){message="'"+name+"()' is deprecated, please use '"+(isLateBinding?method:method.name)+"()' instead"}if(isLateBinding){member=function(){Ext.Logger.deprecate(message,this);return this[method].apply(this,arguments)}}else{member=function(){Ext.Logger.deprecate(message,this);return method.apply(this,arguments)}}if(name in cls.prototype){Ext.Object.defineProperty(cls.prototype,name,{value:null,writable:true,configurable:true})}cls.addMember(name,member)},showLeaks:function(){var map=Ext.ComponentManager.all.map,leaks=[],parent;Ext.Object.each(map,function(id,component){while((parent=component.getParent())&&map.hasOwnProperty(parent.getId())){component=parent}if(leaks.indexOf(component)===-1){leaks.push(component)}});console.log(leaks)},isReady:false,readyListeners:[],triggerReady:function(){var listeners=Ext.readyListeners,i,ln,listener;if(!Ext.isReady){Ext.isReady=true;for(i=0,ln=listeners.length;i<ln;i++){listener=listeners[i];listener.fn.call(listener.scope)}delete Ext.readyListeners}},onDocumentReady:function(fn,scope){if(Ext.isReady){fn.call(scope)}else{var triggerFn=Ext.triggerReady;Ext.readyListeners.push({fn:fn,scope:scope});if(Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop){if(!Ext.readyListenerAttached){Ext.readyListenerAttached=true;document.addEventListener("deviceready",triggerFn,false)}}else{if(document.readyState.match(/interactive|complete|loaded/)!==null){triggerFn()}else{if(!Ext.readyListenerAttached){Ext.readyListenerAttached=true;window.addEventListener("DOMContentLoaded",triggerFn,false)}}}}},callback:function(callback,scope,args,delay){if(Ext.isFunction(callback)){args=args||[];scope=scope||window;if(delay){Ext.defer(callback,delay,scope,args)}else{callback.apply(scope,args)}}}});Ext.Object.defineProperty(Ext,"Msg",{get:function(){Ext.Logger.error("Using Ext.Msg without requiring Ext.MessageBox");return null},set:function(value){Ext.Object.defineProperty(Ext,"Msg",{value:value});return value},configurable:true});Ext.define("Ext.env.Browser",{requires:["Ext.Version"],statics:{browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",silk:"Silk",other:"Other"},engineNames:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},browserPrefixes:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"Opera/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",silk:"Silk/"}},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},is:Ext.emptyFn,name:null,version:null,engineName:null,engineVersion:null,setFlag:function(name,value){if(typeof value=="undefined"){value=true}this.is[name]=value;this.is[name.toLowerCase()]=value;return this},constructor:function(userAgent){this.userAgent=userAgent;is=this.is=function(name){return is[name]===true};var statics=this.statics(),browserMatch=userAgent.match(new RegExp("((?:"+Ext.Object.getValues(statics.browserPrefixes).join(")|(?:")+"))([\\w\\._]+)")),engineMatch=userAgent.match(new RegExp("((?:"+Ext.Object.getValues(statics.enginePrefixes).join(")|(?:")+"))([\\w\\._]+)")),browserNames=statics.browserNames,browserName=browserNames.other,engineNames=statics.engineNames,engineName=engineNames.other,browserVersion="",engineVersion="",isWebView=false,is,i,name;if(browserMatch){browserName=browserNames[Ext.Object.getKey(statics.browserPrefixes,browserMatch[1])];browserVersion=new Ext.Version(browserMatch[2])}if(engineMatch){engineName=engineNames[Ext.Object.getKey(statics.enginePrefixes,engineMatch[1])];engineVersion=new Ext.Version(engineMatch[2])}if(userAgent.match(/FB/)&&browserName=="Other"){browserName=browserNames.safari;engineName=engineNames.webkit}if(userAgent.match(/Android.*Chrome/g)){browserName="ChromeMobile"}Ext.apply(this,{engineName:engineName,engineVersion:engineVersion,name:browserName,version:browserVersion});this.setFlag(browserName);if(browserVersion){this.setFlag(browserName+(browserVersion.getMajor()||""));this.setFlag(browserName+browserVersion.getShortVersion())}for(i in browserNames){if(browserNames.hasOwnProperty(i)){name=browserNames[i];this.setFlag(name,browserName===name)}}this.setFlag(name);if(engineVersion){this.setFlag(engineName+(engineVersion.getMajor()||""));this.setFlag(engineName+engineVersion.getShortVersion())}for(i in engineNames){if(engineNames.hasOwnProperty(i)){name=engineNames[i];this.setFlag(name,engineName===name)}}this.setFlag("Standalone",!!navigator.standalone);if(typeof window.PhoneGap!="undefined"||typeof window.Cordova!="undefined"||typeof window.cordova!="undefined"){isWebView=true;this.setFlag("PhoneGap")}else{if(!!window.isNK){isWebView=true;this.setFlag("Sencha")}}if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(userAgent)){isWebView=true}this.setFlag("WebView",isWebView);this.isStrict=document.compatMode=="CSS1Compat";this.isSecure=/^https/i.test(window.location.protocol);return this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(name){var prefix=this.propertyPrefixes[this.engineName];if(prefix.length>0){return prefix+Ext.String.capitalize(name)}return name}},function(){var browserEnv=Ext.browser=new this(Ext.global.navigator.userAgent)});Ext.define("Ext.env.OS",{requires:["Ext.Version"],statics:{names:{ios:"iOS",android:"Android",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",linux:"Linux",bada:"Bada",other:"Other"},prefixes:{ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/"}},is:Ext.emptyFn,name:null,version:null,setFlag:function(name,value){if(typeof value=="undefined"){value=true}this.is[name]=value;this.is[name.toLowerCase()]=value;return this},constructor:function(userAgent,platform){var statics=this.statics(),names=statics.names,prefixes=statics.prefixes,name,version="",i,prefix,match,item,is;is=this.is=function(name){return this.is[name]===true};for(i in prefixes){if(prefixes.hasOwnProperty(i)){prefix=prefixes[i];match=userAgent.match(new RegExp("(?:"+prefix+")([^\\s;]+)"));if(match){name=names[i];if(match[1]&&(match[1]=="HTC_"||match[1]=="Silk/")){version=new Ext.Version("2.3")}else{version=new Ext.Version(match[match.length-1])}break}}}if(!name){name=names[(userAgent.toLowerCase().match(/mac|win|linux/)||["other"])[0]];version=new Ext.Version("")}this.name=name;this.version=version;if(platform){this.setFlag(platform.replace(/ simulator$/i,""))}this.setFlag(name);if(version){this.setFlag(name+(version.getMajor()||""));this.setFlag(name+version.getShortVersion())}for(i in names){if(names.hasOwnProperty(i)){item=names[i];if(!is.hasOwnProperty(name)){this.setFlag(item,(name===item))}}}if(this.name=="iOS"&&window.screen.height==568){this.setFlag("iPhone5")}return this}},function(){var navigation=Ext.global.navigator,userAgent=navigation.userAgent,osEnv,osName,deviceType;Ext.os=osEnv=new this(userAgent,navigation.platform);osName=osEnv.name;var search=window.location.search.match(/deviceType=(Tablet|Phone)/),nativeDeviceType=window.deviceType;if(search&&search[1]){deviceType=search[1]}else{if(nativeDeviceType==="iPhone"){deviceType="Phone"}else{if(nativeDeviceType==="iPad"){deviceType="Tablet"}else{if(!osEnv.is.Android&&!osEnv.is.iOS&&/Windows|Linux|MacOS/.test(osName)){deviceType="Desktop";Ext.browser.is.WebView=false}else{if(osEnv.is.iPad||osEnv.is.RIMTablet||osEnv.is.Android3||(osEnv.is.Android4&&userAgent.search(/mobile/i)==-1)){deviceType="Tablet"}else{deviceType="Phone"}}}}}osEnv.setFlag(deviceType,true);osEnv.deviceType=deviceType});Ext.define("Ext.env.Feature",{requires:["Ext.env.Browser","Ext.env.OS"],constructor:function(){this.testElements={};this.has=function(name){return !!this.has[name]};return this},getTestElement:function(tag,createNew){if(tag===undefined){tag="div"}else{if(typeof tag!=="string"){return tag}}if(createNew){return document.createElement(tag)}if(!this.testElements[tag]){this.testElements[tag]=document.createElement(tag)}return this.testElements[tag]},isStyleSupported:function(name,tag){var elementStyle=this.getTestElement(tag).style,cName=Ext.String.capitalize(name);if(typeof elementStyle[name]!=="undefined"||typeof elementStyle[Ext.browser.getStylePrefix(name)+cName]!=="undefined"){return true}return false},isEventSupported:function(name,tag){if(tag===undefined){tag=window}var element=this.getTestElement(tag),eventName="on"+name.toLowerCase(),isSupported=(eventName in element);if(!isSupported){if(element.setAttribute&&element.removeAttribute){element.setAttribute(eventName,"");isSupported=typeof element[eventName]==="function";if(typeof element[eventName]!=="undefined"){element[eventName]=undefined}element.removeAttribute(eventName)}}return isSupported},getSupportedPropertyName:function(object,name){var vendorName=Ext.browser.getVendorProperyName(name);if(vendorName in object){return vendorName}else{if(name in object){return name}}return null},registerTest:Ext.Function.flexSetter(function(name,fn){this.has[name]=fn.call(this);return this})},function(){Ext.feature=new this;var has=Ext.feature.has;Ext.feature.registerTest({Canvas:function(){var element=this.getTestElement("canvas");return !!(element&&element.getContext&&element.getContext("2d"))},Svg:function(){var doc=document;return !!(doc.createElementNS&&!!doc.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)},Vml:function(){var element=this.getTestElement(),ret=false;element.innerHTML="<!--[if vml]><br><![endif]-->";ret=(element.childNodes.length===1);element.innerHTML="";return ret},Touch:function(){return this.isEventSupported("touchstart")&&!(Ext.os&&Ext.os.name.match(/Windows|MacOS|Linux/)&&!Ext.os.is.BlackBerry6)},Orientation:function(){return("orientation" in window)&&this.isEventSupported("orientationchange")},OrientationChange:function(){return this.isEventSupported("orientationchange")},DeviceMotion:function(){return this.isEventSupported("devicemotion")},Geolocation:function(){return"geolocation" in window.navigator},SqlDatabase:function(){return"openDatabase" in window},WebSockets:function(){return"WebSocket" in window},Range:function(){return !!document.createRange},CreateContextualFragment:function(){var range=!!document.createRange?document.createRange():false;return range&&!!range.createContextualFragment},History:function(){return("history" in window&&"pushState" in window.history)},CssTransforms:function(){return this.isStyleSupported("transform")},Css3dTransforms:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")&&!Ext.os.is.Android2},CssAnimations:function(){return this.isStyleSupported("animationName")},CssTransitions:function(){return this.isStyleSupported("transitionProperty")},Audio:function(){return !!this.getTestElement("audio").canPlayType},Video:function(){return !!this.getTestElement("video").canPlayType},ClassList:function(){return"classList" in this.getTestElement()},LocalStorage:function(){var supported=false;try{if("localStorage" in window&&window.localStorage!==null){localStorage.setItem("sencha-localstorage-test","test success");localStorage.removeItem("sencha-localstorage-test");supported=true}}catch(e){}return supported}})});Ext.define("Ext.dom.Query",{select:function(q,root){var results=[],nodes,i,j,qlen,nlen;root=root||document;if(typeof root=="string"){root=document.getElementById(root)}q=q.split(",");for(i=0,qlen=q.length;i<qlen;i++){if(typeof q[i]=="string"){if(q[i][0]=="@"){nodes=root.getAttributeNode(q[i].substring(1));results.push(nodes)}else{nodes=root.querySelectorAll(q[i]);for(j=0,nlen=nodes.length;j<nlen;j++){results.push(nodes[j])}}}}return results},selectNode:function(q,root){return this.select(q,root)[0]},is:function(el,q){if(typeof el=="string"){el=document.getElementById(el)}return this.select(q).indexOf(el)!==-1},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!=="HTML":false}},function(){Ext.ns("Ext.core");Ext.core.DomQuery=Ext.DomQuery=new this();Ext.query=Ext.Function.alias(Ext.DomQuery,"select")});Ext.define("Ext.dom.Helper",{emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/tag|children|cn|html|tpl|tplData$/i,endRe:/end/i,attribXlat:{cls:"class",htmlFor:"for"},closeTags:{},decamelizeName:function(){var camelCaseRe=/([a-z])([A-Z])/g,cache={};function decamel(match,p1,p2){return p1+"-"+p2.toLowerCase()}return function(s){return cache[s]||(cache[s]=s.replace(camelCaseRe,decamel))}}(),generateMarkup:function(spec,buffer){var me=this,attr,val,tag,i,closeTags;if(typeof spec=="string"){buffer.push(spec)}else{if(Ext.isArray(spec)){for(i=0;i<spec.length;i++){if(spec[i]){me.generateMarkup(spec[i],buffer)}}}else{tag=spec.tag||"div";buffer.push("<",tag);for(attr in spec){if(spec.hasOwnProperty(attr)){val=spec[attr];if(!me.confRe.test(attr)){if(typeof val=="object"){buffer.push(" ",attr,'="');me.generateStyles(val,buffer).push('"')}else{buffer.push(" ",me.attribXlat[attr]||attr,'="',val,'"')}}}}if(me.emptyTags.test(tag)){buffer.push("/>")}else{buffer.push(">");if((val=spec.tpl)){val.applyOut(spec.tplData,buffer)}if((val=spec.html)){buffer.push(val)}if((val=spec.cn||spec.children)){me.generateMarkup(val,buffer)}closeTags=me.closeTags;buffer.push(closeTags[tag]||(closeTags[tag]="</"+tag+">"))}}}return buffer},generateStyles:function(styles,buffer){var a=buffer||[],name;for(name in styles){if(styles.hasOwnProperty(name)){a.push(this.decamelizeName(name),":",styles[name],";")}}return buffer||a.join("")},markup:function(spec){if(typeof spec=="string"){return spec}var buf=this.generateMarkup(spec,[]);return buf.join("")},applyStyles:function(el,styles){Ext.fly(el).applyStyles(styles)},createContextualFragment:function(html){var div=document.createElement("div"),fragment=document.createDocumentFragment(),i=0,length,childNodes;div.innerHTML=html;childNodes=div.childNodes;length=childNodes.length;for(;i<length;i++){fragment.appendChild(childNodes[i].cloneNode(true))}return fragment},insertHtml:function(where,el,html){var setStart,range,frag,rangeEl,isBeforeBegin,isAfterBegin;where=where.toLowerCase();if(Ext.isTextNode(el)){if(where=="afterbegin"){where="beforebegin"}else{if(where=="beforeend"){where="afterend"}}}isBeforeBegin=where=="beforebegin";isAfterBegin=where=="afterbegin";range=Ext.feature.has.CreateContextualFragment?el.ownerDocument.createRange():undefined;setStart="setStart"+(this.endRe.test(where)?"After":"Before");if(isBeforeBegin||where=="afterend"){if(range){range[setStart](el);frag=range.createContextualFragment(html)}else{frag=this.createContextualFragment(html)}el.parentNode.insertBefore(frag,isBeforeBegin?el:el.nextSibling);return el[(isBeforeBegin?"previous":"next")+"Sibling"]}else{rangeEl=(isAfterBegin?"first":"last")+"Child";if(el.firstChild){if(range){range[setStart](el[rangeEl]);frag=range.createContextualFragment(html)}else{frag=this.createContextualFragment(html)}if(isAfterBegin){el.insertBefore(frag,el.firstChild)}else{el.appendChild(frag)}}else{el.innerHTML=html}return el[rangeEl]}},insertBefore:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforebegin")},insertAfter:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterend")},insertFirst:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"afterbegin")},append:function(el,o,returnElement){return this.doInsert(el,o,returnElement,"beforeend")},overwrite:function(el,o,returnElement){el=Ext.getDom(el);el.innerHTML=this.markup(o);return returnElement?Ext.get(el.firstChild):el.firstChild},doInsert:function(el,o,returnElement,pos){var newNode=this.insertHtml(pos,Ext.getDom(el),this.markup(o));return returnElement?Ext.get(newNode,true):newNode},createTemplate:function(o){var html=this.markup(o);return new Ext.Template(html)}},function(){Ext.ns("Ext.core");Ext.core.DomHelper=Ext.DomHelper=new this});Ext.define("Ext.mixin.Identifiable",{statics:{uniqueIds:{}},isIdentifiable:true,mixinId:"identifiable",idCleanRegex:/\.|[^\w\-]/g,defaultIdPrefix:"ext-",defaultIdSeparator:"-",getOptimizedId:function(){return this.id},getUniqueId:function(){var id=this.id,prototype,separator,xtype,uniqueIds,prefix;if(!id){prototype=this.self.prototype;separator=this.defaultIdSeparator;uniqueIds=Ext.mixin.Identifiable.uniqueIds;if(!prototype.hasOwnProperty("identifiablePrefix")){xtype=this.xtype;if(xtype){prefix=this.defaultIdPrefix+xtype+separator}else{prefix=prototype.$className.replace(this.idCleanRegex,separator).toLowerCase()+separator}prototype.identifiablePrefix=prefix}prefix=this.identifiablePrefix;if(!uniqueIds.hasOwnProperty(prefix)){uniqueIds[prefix]=0}id=this.id=prefix+(++uniqueIds[prefix])}this.getUniqueId=this.getOptimizedId;return id},setId:function(id){this.id=id},getId:function(){var id=this.id;if(!id){id=this.getUniqueId()}this.getId=this.getOptimizedId;return id}});Ext.define("Ext.dom.Element",{alternateClassName:"Ext.Element",mixins:["Ext.mixin.Identifiable"],requires:["Ext.dom.Query","Ext.dom.Helper"],observableType:"element",xtype:"element",statics:{CREATE_ATTRIBUTES:{style:"style",className:"className",cls:"cls",classList:"classList",text:"text",hidden:"hidden",html:"html",children:"children"},create:function(attributes,domNode){var ATTRIBUTES=this.CREATE_ATTRIBUTES,element,elementStyle,tag,value,name,i,ln;if(!attributes){attributes={}}if(attributes.isElement){return attributes.dom}else{if("nodeType" in attributes){return attributes}}if(typeof attributes=="string"){return document.createTextNode(attributes)}tag=attributes.tag;if(!tag){tag="div"}if(attributes.namespace){element=document.createElementNS(attributes.namespace,tag)}else{element=document.createElement(tag)}elementStyle=element.style;for(name in attributes){if(name!="tag"){value=attributes[name];switch(name){case ATTRIBUTES.style:if(typeof value=="string"){element.setAttribute(name,value)}else{for(i in value){if(value.hasOwnProperty(i)){elementStyle[i]=value[i]}}}break;case ATTRIBUTES.className:case ATTRIBUTES.cls:element.className=value;break;case ATTRIBUTES.classList:element.className=value.join(" ");break;case ATTRIBUTES.text:element.textContent=value;break;case ATTRIBUTES.hidden:if(value){element.style.display="none"}break;case ATTRIBUTES.html:element.innerHTML=value;break;case ATTRIBUTES.children:for(i=0,ln=value.length;i<ln;i++){element.appendChild(this.create(value[i],true))}break;default:element.setAttribute(name,value)}}}if(domNode){return element}else{return this.get(element)}},documentElement:null,cache:{},get:function(element){var cache=this.cache,instance,dom,id;if(!element){return null}if(typeof element=="string"){if(cache.hasOwnProperty(element)){return cache[element]}if(!(dom=document.getElementById(element))){return null}cache[element]=instance=new this(dom);return instance}if("tagName" in element){id=element.id;if(cache.hasOwnProperty(id)){return cache[id]}instance=new this(element);cache[instance.getId()]=instance;return instance}if(element.isElement){return element}if(element.isComposite){return element}if(Ext.isArray(element)){return this.select(element)}if(element===document){if(!this.documentElement){this.documentElement=new this(document.documentElement);this.documentElement.setId("ext-application")}return this.documentElement}return null},data:function(element,key,value){var cache=Ext.cache,id,data;element=this.get(element);if(!element){return null}id=element.id;data=cache[id].data;if(!data){cache[id].data=data={}}if(arguments.length==2){return data[key]}else{return(data[key]=value)}}},isElement:true,constructor:function(dom){if(typeof dom=="string"){dom=document.getElementById(dom)}if(!dom){throw new Error("Invalid domNode reference or an id of an existing domNode: "+dom)}this.dom=dom;this.getUniqueId()},attach:function(dom){this.dom=dom;this.id=dom.id;return this},getUniqueId:function(){var id=this.id,dom;if(!id){dom=this.dom;if(dom.id.length>0){this.id=id=dom.id}else{dom.id=id=this.mixins.identifiable.getUniqueId.call(this)}this.self.cache[id]=this}return id},setId:function(id){var currentId=this.id,cache=this.self.cache;if(currentId){delete cache[currentId]}this.dom.id=id;this.id=id;cache[id]=this;return this},setHtml:function(html){this.dom.innerHTML=html},getHtml:function(){return this.dom.innerHTML},setText:function(text){this.dom.textContent=text},redraw:function(){var dom=this.dom,domStyle=dom.style;domStyle.display="none";dom.offsetHeight;domStyle.display=""},isPainted:function(){var dom=this.dom;return Boolean(dom&&dom.offsetParent)},set:function(attributes,useSet){var dom=this.dom,attribute,value;for(attribute in attributes){if(attributes.hasOwnProperty(attribute)){value=attributes[attribute];if(attribute=="style"){this.applyStyles(value)}else{if(attribute=="cls"){dom.className=value}else{if(useSet!==false){if(value===undefined){dom.removeAttribute(attribute)}else{dom.setAttribute(attribute,value)}}else{dom[attribute]=value}}}}}return this},is:function(selector){return Ext.DomQuery.is(this.dom,selector)},getValue:function(asNumber){var value=this.dom.value;return asNumber?parseInt(value,10):value},getAttribute:function(name,namespace){var dom=this.dom;return dom.getAttributeNS(namespace,name)||dom.getAttribute(namespace+":"+name)||dom.getAttribute(name)||dom[name]},setSizeState:function(state){var classes=["x-sized","x-unsized","x-stretched"],states=[true,false,null],index=states.indexOf(state),addedClass;if(index!==-1){addedClass=classes[index];classes.splice(index,1);this.addCls(addedClass)}this.removeCls(classes);return this},destroy:function(){this.isDestroyed=true;var cache=Ext.Element.cache,dom=this.dom;if(dom&&dom.parentNode&&dom.tagName!="BODY"){dom.parentNode.removeChild(dom)}delete cache[this.id];delete this.dom}},function(Element){Ext.elements=Ext.cache=Element.cache;this.addStatics({Fly:new Ext.Class({extend:Element,constructor:function(dom){this.dom=dom}}),_flyweights:{},fly:function(element,named){var fly=null,flyweights=Element._flyweights,cachedElement;named=named||"_global";element=Ext.getDom(element);if(element){fly=flyweights[named]||(flyweights[named]=new Element.Fly());fly.dom=element;fly.isSynchronized=false;cachedElement=Ext.cache[element.id];if(cachedElement&&cachedElement.isElement){cachedElement.isSynchronized=false}}return fly}});Ext.get=function(element){return Element.get.call(Element,element)};Ext.fly=function(){return Element.fly.apply(Element,arguments)};Ext.ClassManager.onCreated(function(){Element.mixin("observable",Ext.mixin.Observable)},null,"Ext.mixin.Observable")});Ext.dom.Element.addStatics({numberRe:/\d+$/,unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,cssRe:/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,opacityRe:/alpha\(opacity=(.*)\)/i,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:function(size,units){if(size===""||size=="auto"||size===undefined||size===null){return size||""}if(Ext.isNumber(size)||this.numberRe.test(size)){return size+(units||this.defaultUnit||"px")}else{if(!this.unitRe.test(size)){Ext.Logger.warn("Warning, size detected ("+size+") not a valid property value on Element.addUnits.");return size||""}}return size},isAncestor:function(p,c){var ret=false;p=Ext.getDom(p);c=Ext.getDom(c);if(p&&c){if(p.contains){return p.contains(c)}else{if(p.compareDocumentPosition){return !!(p.compareDocumentPosition(c)&16)}else{while((c=c.parentNode)){ret=c==p||ret}}}}return ret},parseBox:function(box){if(typeof box!="string"){box=box.toString()}var parts=box.split(" "),ln=parts.length;if(ln==1){parts[1]=parts[2]=parts[3]=parts[0]}else{if(ln==2){parts[2]=parts[0];parts[3]=parts[1]}else{if(ln==3){parts[3]=parts[1]}}}return{top:parts[0]||0,right:parts[1]||0,bottom:parts[2]||0,left:parts[3]||0}},unitizeBox:function(box,units){var me=this;box=me.parseBox(box);return me.addUnits(box.top,units)+" "+me.addUnits(box.right,units)+" "+me.addUnits(box.bottom,units)+" "+me.addUnits(box.left,units)},camelReplaceFn:function(m,a){return a.charAt(1).toUpperCase()},normalize:function(prop){return this.propertyCache[prop]||(this.propertyCache[prop]=prop.replace(this.camelRe,this.camelReplaceFn))},fromPoint:function(x,y){return Ext.get(document.elementFromPoint(x,y))},parseStyles:function(styles){var out={},cssRe=this.cssRe,matches;if(styles){cssRe.lastIndex=0;while((matches=cssRe.exec(styles))){out[matches[1]]=matches[2]}}return out}});Ext.dom.Element.addMembers({appendChild:function(element){this.dom.appendChild(Ext.getDom(element));return this},removeChild:function(element){this.dom.removeChild(Ext.getDom(element));return this},append:function(){this.appendChild.apply(this,arguments)},appendTo:function(el){Ext.getDom(el).appendChild(this.dom);return this},insertBefore:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el);return this},insertAfter:function(el){el=Ext.getDom(el);el.parentNode.insertBefore(this.dom,el.nextSibling);return this},insertFirst:function(element){var elementDom=Ext.getDom(element),dom=this.dom,firstChild=dom.firstChild;if(!firstChild){dom.appendChild(elementDom)}else{dom.insertBefore(elementDom,firstChild)}return this},insertSibling:function(el,where,returnDom){var me=this,rt,isAfter=(where||"before").toLowerCase()=="after",insertEl;if(Ext.isArray(el)){insertEl=me;Ext.each(el,function(e){rt=Ext.fly(insertEl,"_internal").insertSibling(e,where,returnDom);if(isAfter){insertEl=rt}});return rt}el=el||{};if(el.nodeType||el.dom){rt=me.dom.parentNode.insertBefore(Ext.getDom(el),isAfter?me.dom.nextSibling:me.dom);if(!returnDom){rt=Ext.get(rt)}}else{if(isAfter&&!me.dom.nextSibling){rt=Ext.core.DomHelper.append(me.dom.parentNode,el,!returnDom)}else{rt=Ext.core.DomHelper[isAfter?"insertAfter":"insertBefore"](me.dom,el,!returnDom)}}return rt},replace:function(element){element=Ext.getDom(element);element.parentNode.replaceChild(this.dom,element);return this},replaceWith:function(el){var me=this;if(el.nodeType||el.dom||typeof el=="string"){el=Ext.get(el);me.dom.parentNode.insertBefore(el,me.dom)}else{el=Ext.core.DomHelper.insertBefore(me.dom,el)}delete Ext.cache[me.id];Ext.removeNode(me.dom);me.id=Ext.id(me.dom=el);Ext.dom.Element.addToCache(me.isFlyweight?new Ext.dom.Element(me.dom):me);return me},doReplaceWith:function(element){var dom=this.dom;dom.parentNode.replaceChild(Ext.getDom(element),dom)},createChild:function(config,insertBefore,returnDom){config=config||{tag:"div"};if(insertBefore){return Ext.core.DomHelper.insertBefore(insertBefore,config,returnDom!==true)}else{return Ext.core.DomHelper[!this.dom.firstChild?"insertFirst":"append"](this.dom,config,returnDom!==true)}},wrap:function(config,domNode){var dom=this.dom,wrapper=this.self.create(config,domNode),wrapperDom=(domNode)?wrapper:wrapper.dom,parentNode=dom.parentNode;if(parentNode){parentNode.insertBefore(wrapperDom,dom)}wrapperDom.appendChild(dom);return wrapper},wrapAllChildren:function(config){var dom=this.dom,children=dom.childNodes,wrapper=this.self.create(config),wrapperDom=wrapper.dom;while(children.length>0){wrapperDom.appendChild(dom.firstChild)}dom.appendChild(wrapperDom);return wrapper},unwrapAllChildren:function(){var dom=this.dom,children=dom.childNodes,parentNode=dom.parentNode;if(parentNode){while(children.length>0){parentNode.insertBefore(dom,dom.firstChild)}this.destroy()}},unwrap:function(){var dom=this.dom,parentNode=dom.parentNode,grandparentNode;if(parentNode){grandparentNode=parentNode.parentNode;grandparentNode.insertBefore(dom,parentNode);grandparentNode.removeChild(parentNode)}else{grandparentNode=document.createDocumentFragment();grandparentNode.appendChild(dom)}return this},detach:function(){var dom=this.dom;if(dom&&dom.parentNode&&dom.tagName!=="BODY"){dom.parentNode.removeChild(dom)}return this},insertHtml:function(where,html,returnEl){var el=Ext.core.DomHelper.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el}});Ext.dom.Element.override({getX:function(el){return this.getXY(el)[0]},getY:function(el){return this.getXY(el)[1]},getXY:function(){var rect=this.dom.getBoundingClientRect(),round=Math.round;return[round(rect.left+window.pageXOffset),round(rect.top+window.pageYOffset)]},getOffsetsTo:function(el){var o=this.getXY(),e=Ext.fly(el,"_internal").getXY();return[o[0]-e[0],o[1]-e[1]]},setX:function(x){return this.setXY([x,this.getY()])},setY:function(y){return this.setXY([this.getX(),y])},setXY:function(pos){var me=this;if(arguments.length>1){pos=[pos,arguments[1]]}var pts=me.translatePoints(pos),style=me.dom.style;for(pos in pts){if(!pts.hasOwnProperty(pos)){continue}if(!isNaN(pts[pos])){style[pos]=pts[pos]+"px"}}return me},getLeft:function(){return parseInt(this.getStyle("left"),10)||0},getRight:function(){return parseInt(this.getStyle("right"),10)||0},getTop:function(){return parseInt(this.getStyle("top"),10)||0},getBottom:function(){return parseInt(this.getStyle("bottom"),10)||0},translatePoints:function(x,y){y=isNaN(x[1])?y:x[1];x=isNaN(x[0])?x:x[0];var me=this,relative=me.isStyle("position","relative"),o=me.getXY(),l=parseInt(me.getStyle("left"),10),t=parseInt(me.getStyle("top"),10);l=!isNaN(l)?l:(relative?0:me.dom.offsetLeft);t=!isNaN(t)?t:(relative?0:me.dom.offsetTop);return{left:(x-o[0]+l),top:(y-o[1]+t)}},setBox:function(box){var me=this,width=box.width,height=box.height,top=box.top,left=box.left;if(left!==undefined){me.setLeft(left)}if(top!==undefined){me.setTop(top)}if(width!==undefined){me.setWidth(width)}if(height!==undefined){me.setHeight(height)}return this},getBox:function(contentBox,local){var me=this,dom=me.dom,width=dom.offsetWidth,height=dom.offsetHeight,xy,box,l,r,t,b;if(!local){xy=me.getXY()}else{if(contentBox){xy=[0,0]}else{xy=[parseInt(me.getStyle("left"),10)||0,parseInt(me.getStyle("top"),10)||0]}}if(!contentBox){box={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:width,height:height}}else{l=me.getBorderWidth.call(me,"l")+me.getPadding.call(me,"l");r=me.getBorderWidth.call(me,"r")+me.getPadding.call(me,"r");t=me.getBorderWidth.call(me,"t")+me.getPadding.call(me,"t");b=me.getBorderWidth.call(me,"b")+me.getPadding.call(me,"b");box={x:xy[0]+l,y:xy[1]+t,0:xy[0]+l,1:xy[1]+t,width:width-(l+r),height:height-(t+b)}}box.left=box.x;box.top=box.y;box.right=box.x+box.width;box.bottom=box.y+box.height;return box},getPageBox:function(getRegion){var me=this,el=me.dom,w=el.offsetWidth,h=el.offsetHeight,xy=me.getXY(),t=xy[1],r=xy[0]+w,b=xy[1]+h,l=xy[0];if(!el){return new Ext.util.Region()}if(getRegion){return new Ext.util.Region(t,r,b,l)}else{return{left:l,top:t,width:w,height:h,right:r,bottom:b}}}});Ext.dom.Element.addMembers({WIDTH:"width",HEIGHT:"height",MIN_WIDTH:"min-width",MIN_HEIGHT:"min-height",MAX_WIDTH:"max-width",MAX_HEIGHT:"max-height",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",VISIBILITY:1,DISPLAY:2,OFFSETS:3,SEPARATOR:"-",trimRe:/^\s+|\s+$/g,wordsRe:/\w/g,spacesRe:/\s+/,styleSplitRe:/\s*(?::|;)\s*/,transparentRe:/^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,classNameSplitRegex:/[\s]+/,borders:{t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},paddings:{t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},margins:{t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},defaultUnit:"px",isSynchronized:false,synchronize:function(){var dom=this.dom,hasClassMap={},className=dom.className,classList,i,ln,name;if(className.length>0){classList=dom.className.split(this.classNameSplitRegex);for(i=0,ln=classList.length;i<ln;i++){name=classList[i];hasClassMap[name]=true}}else{classList=[]}this.classList=classList;this.hasClassMap=hasClassMap;this.isSynchronized=true;return this},addCls:function(names,prefix,suffix){if(!names){return this}if(!this.isSynchronized){this.synchronize()}var dom=this.dom,map=this.hasClassMap,classList=this.classList,SEPARATOR=this.SEPARATOR,i,ln,name;prefix=prefix?prefix+SEPARATOR:"";suffix=suffix?SEPARATOR+suffix:"";if(typeof names=="string"){names=names.split(this.spacesRe)}for(i=0,ln=names.length;i<ln;i++){name=prefix+names[i]+suffix;if(!map[name]){map[name]=true;classList.push(name)}}dom.className=classList.join(" ");return this},removeCls:function(names,prefix,suffix){if(!names){return this}if(!this.isSynchronized){this.synchronize()}if(!suffix){suffix=""}var dom=this.dom,map=this.hasClassMap,classList=this.classList,SEPARATOR=this.SEPARATOR,i,ln,name;prefix=prefix?prefix+SEPARATOR:"";suffix=suffix?SEPARATOR+suffix:"";if(typeof names=="string"){names=names.split(this.spacesRe)}for(i=0,ln=names.length;i<ln;i++){name=prefix+names[i]+suffix;if(map[name]){delete map[name];Ext.Array.remove(classList,name)}}dom.className=classList.join(" ");return this},replaceCls:function(oldName,newName,prefix,suffix){return this.removeCls(oldName,prefix,suffix).addCls(newName,prefix,suffix)},hasCls:function(name){if(!this.isSynchronized){this.synchronize()}return this.hasClassMap.hasOwnProperty(name)},toggleCls:function(className,force){if(typeof force!=="boolean"){force=!this.hasCls(className)}return(force)?this.addCls(className):this.removeCls(className)},swapCls:function(firstClass,secondClass,flag,prefix){if(flag===undefined){flag=true}var addedClass=flag?firstClass:secondClass,removedClass=flag?secondClass:firstClass;if(removedClass){this.removeCls(prefix?prefix+"-"+removedClass:removedClass)}if(addedClass){this.addCls(prefix?prefix+"-"+addedClass:addedClass)}return this},setWidth:function(width){return this.setLengthValue(this.WIDTH,width)},setHeight:function(height){return this.setLengthValue(this.HEIGHT,height)},setSize:function(width,height){if(Ext.isObject(width)){height=width.height;width=width.width}this.setWidth(width);this.setHeight(height);return this},setMinWidth:function(width){return this.setLengthValue(this.MIN_WIDTH,width)},setMinHeight:function(height){return this.setLengthValue(this.MIN_HEIGHT,height)},setMaxWidth:function(width){return this.setLengthValue(this.MAX_WIDTH,width)},setMaxHeight:function(height){return this.setLengthValue(this.MAX_HEIGHT,height)},setTop:function(top){return this.setLengthValue(this.TOP,top)},setRight:function(right){return this.setLengthValue(this.RIGHT,right)},setBottom:function(bottom){return this.setLengthValue(this.BOTTOM,bottom)},setLeft:function(left){return this.setLengthValue(this.LEFT,left)},setMargin:function(margin){var domStyle=this.dom.style;if(margin||margin===0){margin=this.self.unitizeBox((margin===true)?5:margin);domStyle.setProperty("margin",margin,"important")}else{domStyle.removeProperty("margin-top");domStyle.removeProperty("margin-right");domStyle.removeProperty("margin-bottom");domStyle.removeProperty("margin-left")}},setPadding:function(padding){var domStyle=this.dom.style;if(padding||padding===0){padding=this.self.unitizeBox((padding===true)?5:padding);domStyle.setProperty("padding",padding,"important")}else{domStyle.removeProperty("padding-top");domStyle.removeProperty("padding-right");domStyle.removeProperty("padding-bottom");domStyle.removeProperty("padding-left")}},setBorder:function(border){var domStyle=this.dom.style;if(border||border===0){border=this.self.unitizeBox((border===true)?1:border);domStyle.setProperty("border-width",border,"important")}else{domStyle.removeProperty("border-top-width");domStyle.removeProperty("border-right-width");domStyle.removeProperty("border-bottom-width");domStyle.removeProperty("border-left-width")}},setLengthValue:function(name,value){var domStyle=this.dom.style;if(value===null){domStyle.removeProperty(name);return this}if(typeof value=="number"){value=value+"px"}domStyle.setProperty(name,value,"important");return this},setVisible:function(visible){var mode=this.getVisibilityMode(),method=visible?"removeCls":"addCls";switch(mode){case this.VISIBILITY:this.removeCls(["x-hidden-display","x-hidden-offsets"]);this[method]("x-hidden-visibility");break;case this.DISPLAY:this.removeCls(["x-hidden-visibility","x-hidden-offsets"]);this[method]("x-hidden-display");break;case this.OFFSETS:this.removeCls(["x-hidden-visibility","x-hidden-display"]);this[method]("x-hidden-offsets");break}return this},getVisibilityMode:function(){var dom=this.dom,mode=Ext.dom.Element.data(dom,"visibilityMode");if(mode===undefined){Ext.dom.Element.data(dom,"visibilityMode",mode=this.DISPLAY)}return mode},setVisibilityMode:function(mode){this.self.data(this.dom,"visibilityMode",mode);return this},show:function(){var dom=this.dom;if(dom){dom.style.removeProperty("display")}},hide:function(){this.dom.style.setProperty("display","none","important")},setVisibility:function(isVisible){var domStyle=this.dom.style;if(isVisible){domStyle.removeProperty("visibility")}else{domStyle.setProperty("visibility","hidden","important")}},styleHooks:{},addStyles:function(sides,styles){var totalSize=0,sidesArr=sides.match(this.wordsRe),i=0,len=sidesArr.length,side,size;for(;i<len;i++){side=sidesArr[i];size=side&&parseInt(this.getStyle(styles[side]),10);if(size){totalSize+=Math.abs(size)}}return totalSize},isStyle:function(style,val){return this.getStyle(style)==val},getStyleValue:function(name){return this.dom.style.getPropertyValue(name)},getStyle:function(prop){var me=this,dom=me.dom,hook=me.styleHooks[prop],cs,result;if(dom==document){return null}if(!hook){me.styleHooks[prop]=hook={name:Ext.dom.Element.normalize(prop)}}if(hook.get){return hook.get(dom,me)}cs=window.getComputedStyle(dom,"");result=(cs&&cs[hook.name]);return result},setStyle:function(prop,value){var me=this,dom=me.dom,hooks=me.styleHooks,style=dom.style,valueFrom=Ext.valueFrom,name,hook;if(typeof prop=="string"){hook=hooks[prop];if(!hook){hooks[prop]=hook={name:Ext.dom.Element.normalize(prop)}}value=valueFrom(value,"");if(hook.set){hook.set(dom,value,me)}else{style[hook.name]=value}}else{for(name in prop){if(prop.hasOwnProperty(name)){hook=hooks[name];if(!hook){hooks[name]=hook={name:Ext.dom.Element.normalize(name)}}value=valueFrom(prop[name],"");if(hook.set){hook.set(dom,value,me)}else{style[hook.name]=value}}}}return me},getHeight:function(contentHeight){var dom=this.dom,height=contentHeight?(dom.clientHeight-this.getPadding("tb")):dom.offsetHeight;return height>0?height:0},getWidth:function(contentWidth){var dom=this.dom,width=contentWidth?(dom.clientWidth-this.getPadding("lr")):dom.offsetWidth;return width>0?width:0},getBorderWidth:function(side){return this.addStyles(side,this.borders)},getPadding:function(side){return this.addStyles(side,this.paddings)},applyStyles:function(styles){if(styles){var dom=this.dom,styleType,i,len;if(typeof styles=="function"){styles=styles.call()}styleType=typeof styles;if(styleType=="string"){styles=Ext.util.Format.trim(styles).split(this.styleSplitRe);for(i=0,len=styles.length;i<len;){dom.style[Ext.dom.Element.normalize(styles[i++])]=styles[i++]}}else{if(styleType=="object"){this.setStyle(styles)}}}},getSize:function(contentSize){var dom=this.dom;return{width:Math.max(0,contentSize?(dom.clientWidth-this.getPadding("lr")):dom.offsetWidth),height:Math.max(0,contentSize?(dom.clientHeight-this.getPadding("tb")):dom.offsetHeight)}},repaint:function(){var dom=this.dom;this.addCls(Ext.baseCSSPrefix+"repaint");setTimeout(function(){Ext.fly(dom).removeCls(Ext.baseCSSPrefix+"repaint")},1);return this},getMargin:function(side){var me=this,hash={t:"top",l:"left",r:"right",b:"bottom"},o={},key;if(!side){for(key in me.margins){o[hash[key]]=parseFloat(me.getStyle(me.margins[key]))||0}return o}else{return me.addStyles.call(me,side,me.margins)}}});Ext.dom.Element.addMembers({getParent:function(){return Ext.get(this.dom.parentNode)},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},contains:function(element){if(!element){return false}var dom=Ext.getDom(element);return(dom===this.dom)||this.self.isAncestor(this.dom,dom)},findParent:function(simpleSelector,maxDepth,returnEl){var p=this.dom,b=document.body,depth=0,stopEl;maxDepth=maxDepth||50;if(isNaN(maxDepth)){stopEl=Ext.getDom(maxDepth);maxDepth=Number.MAX_VALUE}while(p&&p.nodeType==1&&depth<maxDepth&&p!=b&&p!=stopEl){if(Ext.DomQuery.is(p,simpleSelector)){return returnEl?Ext.get(p):p}depth++;p=p.parentNode}return null},findParentNode:function(simpleSelector,maxDepth,returnEl){var p=Ext.fly(this.dom.parentNode,"_internal");return p?p.findParent(simpleSelector,maxDepth,returnEl):null},up:function(simpleSelector,maxDepth){return this.findParentNode(simpleSelector,maxDepth,true)},select:function(selector,composite){return Ext.dom.Element.select(selector,this.dom,composite)},query:function(selector){return Ext.DomQuery.select(selector,this.dom)},down:function(selector,returnDom){var n=Ext.DomQuery.selectNode(selector,this.dom);return returnDom?n:Ext.get(n)},child:function(selector,returnDom){var node,me=this,id;id=Ext.get(me).id;id=id.replace(/[\.:]/g,"\\$0");node=Ext.DomQuery.selectNode("#"+id+" > "+selector,me.dom);return returnDom?node:Ext.get(node)},parent:function(selector,returnDom){return this.matchNode("parentNode","parentNode",selector,returnDom)},next:function(selector,returnDom){return this.matchNode("nextSibling","nextSibling",selector,returnDom)},prev:function(selector,returnDom){return this.matchNode("previousSibling","previousSibling",selector,returnDom)},first:function(selector,returnDom){return this.matchNode("nextSibling","firstChild",selector,returnDom)},last:function(selector,returnDom){return this.matchNode("previousSibling","lastChild",selector,returnDom)},matchNode:function(dir,start,selector,returnDom){if(!this.dom){return null}var n=this.dom[start];while(n){if(n.nodeType==1&&(!selector||Ext.DomQuery.is(n,selector))){return !returnDom?Ext.get(n):n}n=n[dir]}return null},isAncestor:function(element){return this.self.isAncestor.call(this.self,this.dom,element)}});Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:["Ext.CompositeElementLite","Ext.CompositeElement"],requires:["Ext.dom.Element"],statics:{importElementMethods:function(){}},constructor:function(elements,root){this.elements=[];this.add(elements,root);this.el=new Ext.dom.Element.Fly()},isComposite:true,getElement:function(el){return this.el.attach(el).synchronize()},transformElement:function(el){return Ext.getDom(el)},getCount:function(){return this.elements.length},add:function(els,root){var elements=this.elements,i,ln;if(!els){return this}if(typeof els=="string"){els=Ext.dom.Element.selectorFunction(els,root)}else{if(els.isComposite){els=els.elements}else{if(!Ext.isIterable(els)){els=[els]}}}for(i=0,ln=els.length;i<ln;++i){elements.push(this.transformElement(els[i]))}return this},invoke:function(fn,args){var elements=this.elements,ln=elements.length,element,i;for(i=0;i<ln;i++){element=elements[i];if(element){Ext.dom.Element.prototype[fn].apply(this.getElement(element),args)}}return this},item:function(index){var el=this.elements[index],out=null;if(el){out=this.getElement(el)}return out},addListener:function(eventName,handler,scope,opt){var els=this.elements,len=els.length,i,e;for(i=0;i<len;i++){e=els[i];if(e){e.on(eventName,handler,scope||e,opt)}}return this},each:function(fn,scope){var me=this,els=me.elements,len=els.length,i,e;for(i=0;i<len;i++){e=els[i];if(e){e=this.getElement(e);if(fn.call(scope||e,e,me,i)===false){break}}}return me},fill:function(els){var me=this;me.elements=[];me.add(els);return me},filter:function(selector){var els=[],me=this,fn=Ext.isFunction(selector)?selector:function(el){return el.is(selector)};me.each(function(el,self,i){if(fn(el,i)!==false){els[els.length]=me.transformElement(el)}});me.elements=els;return me},indexOf:function(el){return Ext.Array.indexOf(this.elements,this.transformElement(el))},replaceElement:function(el,replacement,domReplace){var index=!isNaN(el)?el:this.indexOf(el),d;if(index>-1){replacement=Ext.getDom(replacement);if(domReplace){d=this.elements[index];d.parentNode.insertBefore(replacement,d);Ext.removeNode(d)}Ext.Array.splice(this.elements,index,1,replacement)}return this},clear:function(){this.elements=[]},addElements:function(els,root){if(!els){return this}if(typeof els=="string"){els=Ext.dom.Element.selectorFunction(els,root)}var yels=this.elements;Ext.each(els,function(e){yels.push(Ext.get(e))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(el){return this.indexOf(el)!=-1},removeElement:function(keys,removeDom){var me=this,elements=this.elements,el;Ext.each(keys,function(val){if((el=(elements[val]||elements[val=me.indexOf(val)]))){if(removeDom){if(el.dom){el.remove()}else{Ext.removeNode(el)}}Ext.Array.erase(elements,val,1)}});return this}},function(){var Element=Ext.dom.Element,elementPrototype=Element.prototype,prototype=this.prototype,name;for(name in elementPrototype){if(typeof elementPrototype[name]=="function"){(function(key){prototype[key]=prototype[key]||function(){return this.invoke(key,arguments)}}).call(prototype,name)}}prototype.on=prototype.addListener;if(Ext.DomQuery){Element.selectorFunction=Ext.DomQuery.select}Element.select=function(selector,root){var elements;if(typeof selector=="string"){elements=Element.selectorFunction(selector,root)}else{if(selector.length!==undefined){elements=selector}else{throw new Error("[Ext.select] Invalid selector specified: "+selector)}}return new Ext.CompositeElementLite(elements)};Ext.select=function(){return Element.select.apply(Element,arguments)}});Ext.define("Ext.mixin.Mixin",{onClassExtended:function(cls,data){var mixinConfig=data.mixinConfig,parentClassMixinConfig,beforeHooks,afterHooks;if(mixinConfig){parentClassMixinConfig=cls.superclass.mixinConfig;if(parentClassMixinConfig){mixinConfig=data.mixinConfig=Ext.merge({},parentClassMixinConfig,mixinConfig)}data.mixinId=mixinConfig.id;beforeHooks=mixinConfig.beforeHooks;afterHooks=mixinConfig.hooks||mixinConfig.afterHooks;if(beforeHooks||afterHooks){Ext.Function.interceptBefore(data,"onClassMixedIn",function(targetClass){var mixin=this.prototype;if(beforeHooks){Ext.Object.each(beforeHooks,function(from,to){targetClass.override(to,function(){if(mixin[from].apply(this,arguments)!==false){return this.callOverridden(arguments)}})})}if(afterHooks){Ext.Object.each(afterHooks,function(from,to){targetClass.override(to,function(){var ret=this.callOverridden(arguments);mixin[from].apply(this,arguments);return ret})})}})}}}});Ext.define("Ext.event.ListenerStack",{currentOrder:"current",length:0,constructor:function(){this.listeners={before:[],current:[],after:[]};this.lateBindingMap={};return this},add:function(fn,scope,options,order){var lateBindingMap=this.lateBindingMap,listeners=this.getAll(order),i=listeners.length,bindingMap,listener,id;if(typeof fn=="string"&&scope.isIdentifiable){id=scope.getId();bindingMap=lateBindingMap[id];if(bindingMap){if(bindingMap[fn]){return false}else{bindingMap[fn]=true}}else{lateBindingMap[id]=bindingMap={};bindingMap[fn]=true}}else{if(i>0){while(i--){listener=listeners[i];if(listener.fn===fn&&listener.scope===scope){listener.options=options;return false}}}}listener=this.create(fn,scope,options,order);if(options&&options.prepend){delete options.prepend;listeners.unshift(listener)}else{listeners.push(listener)}this.length++;return true},getAt:function(index,order){return this.getAll(order)[index]},getAll:function(order){if(!order){order=this.currentOrder}return this.listeners[order]},count:function(order){return this.getAll(order).length},create:function(fn,scope,options,order){return{stack:this,fn:fn,firingFn:false,boundFn:false,isLateBinding:typeof fn=="string",scope:scope,options:options||{},order:order}},remove:function(fn,scope,order){var listeners=this.getAll(order),i=listeners.length,isRemoved=false,lateBindingMap=this.lateBindingMap,listener,id;if(i>0){while(i--){listener=listeners[i];if(listener.fn===fn&&listener.scope===scope){listeners.splice(i,1);isRemoved=true;this.length--;if(typeof fn=="string"&&scope.isIdentifiable){id=scope.getId();if(lateBindingMap[id]&&lateBindingMap[id][fn]){delete lateBindingMap[id][fn]}}break}}}return isRemoved}});Ext.define("Ext.event.Controller",{isFiring:false,listenerStack:null,constructor:function(info){this.firingListeners=[];this.firingArguments=[];this.setInfo(info);return this},setInfo:function(info){this.info=info},getInfo:function(){return this.info},setListenerStacks:function(listenerStacks){this.listenerStacks=listenerStacks},fire:function(args,action){var listenerStacks=this.listenerStacks,firingListeners=this.firingListeners,firingArguments=this.firingArguments,push=firingListeners.push,ln=listenerStacks.length,listeners,beforeListeners,currentListeners,afterListeners,isActionBefore=false,isActionAfter=false,i;firingListeners.length=0;if(action){if(action.order!=="after"){isActionBefore=true}else{isActionAfter=true}}if(ln===1){listeners=listenerStacks[0].listeners;beforeListeners=listeners.before;currentListeners=listeners.current;afterListeners=listeners.after;if(beforeListeners.length>0){push.apply(firingListeners,beforeListeners)}if(isActionBefore){push.call(firingListeners,action)}if(currentListeners.length>0){push.apply(firingListeners,currentListeners)}if(isActionAfter){push.call(firingListeners,action)}if(afterListeners.length>0){push.apply(firingListeners,afterListeners)}}else{for(i=0;i<ln;i++){beforeListeners=listenerStacks[i].listeners.before;if(beforeListeners.length>0){push.apply(firingListeners,beforeListeners)}}if(isActionBefore){push.call(firingListeners,action)}for(i=0;i<ln;i++){currentListeners=listenerStacks[i].listeners.current;if(currentListeners.length>0){push.apply(firingListeners,currentListeners)}}if(isActionAfter){push.call(firingListeners,action)}for(i=0;i<ln;i++){afterListeners=listenerStacks[i].listeners.after;if(afterListeners.length>0){push.apply(firingListeners,afterListeners)}}}if(firingListeners.length===0){return this}if(!args){args=[]}firingArguments.length=0;firingArguments.push.apply(firingArguments,args);firingArguments.push(null,this);this.doFire();return this},doFire:function(){var firingListeners=this.firingListeners,firingArguments=this.firingArguments,optionsArgumentIndex=firingArguments.length-2,i,ln,listener,options,fn,firingFn,boundFn,isLateBinding,scope,args,result;this.isPausing=false;this.isPaused=false;this.isStopped=false;this.isFiring=true;for(i=0,ln=firingListeners.length;i<ln;i++){listener=firingListeners[i];options=listener.options;fn=listener.fn;firingFn=listener.firingFn;boundFn=listener.boundFn;isLateBinding=listener.isLateBinding;scope=listener.scope;if(isLateBinding&&boundFn&&boundFn!==scope[fn]){boundFn=false;firingFn=false}if(!boundFn){if(isLateBinding){boundFn=scope[fn];if(!boundFn){continue}}else{boundFn=fn}listener.boundFn=boundFn}if(!firingFn){firingFn=boundFn;if(options.buffer){firingFn=Ext.Function.createBuffered(firingFn,options.buffer,scope)}if(options.delay){firingFn=Ext.Function.createDelayed(firingFn,options.delay,scope)}listener.firingFn=firingFn}firingArguments[optionsArgumentIndex]=options;args=firingArguments;if(options.args){args=options.args.concat(args)}if(options.single===true){listener.stack.remove(fn,scope,listener.order)}result=firingFn.apply(scope,args);if(result===false){this.stop()}if(this.isStopped){break}if(this.isPausing){this.isPaused=true;firingListeners.splice(0,i+1);return}}this.isFiring=false;this.listenerStacks=null;firingListeners.length=0;firingArguments.length=0;this.connectingController=null},connect:function(controller){this.connectingController=controller},resume:function(){var connectingController=this.connectingController;this.isPausing=false;if(this.isPaused&&this.firingListeners.length>0){this.isPaused=false;this.doFire()}if(connectingController){connectingController.resume()}return this},isInterrupted:function(){return this.isStopped||this.isPaused},stop:function(){var connectingController=this.connectingController;this.isStopped=true;if(connectingController){this.connectingController=null;connectingController.stop()}this.isFiring=false;this.listenerStacks=null;return this},pause:function(){var connectingController=this.connectingController;this.isPausing=true;if(connectingController){connectingController.pause()}return this}});Ext.define("Ext.event.Dispatcher",{requires:["Ext.event.ListenerStack","Ext.event.Controller"],statics:{getInstance:function(){if(!this.instance){this.instance=new this()}return this.instance},setInstance:function(instance){this.instance=instance;return this}},config:{publishers:{}},wildcard:"*",constructor:function(config){this.listenerStacks={};this.activePublishers={};this.publishersCache={};this.noActivePublishers=[];this.controller=null;this.initConfig(config);return this},getListenerStack:function(targetType,target,eventName,createIfNotExist){var listenerStacks=this.listenerStacks,map=listenerStacks[targetType],listenerStack;createIfNotExist=Boolean(createIfNotExist);if(!map){if(createIfNotExist){listenerStacks[targetType]=map={}}else{return null}}map=map[target];if(!map){if(createIfNotExist){listenerStacks[targetType][target]=map={}}else{return null}}listenerStack=map[eventName];if(!listenerStack){if(createIfNotExist){map[eventName]=listenerStack=new Ext.event.ListenerStack()}else{return null}}return listenerStack},getController:function(targetType,target,eventName,connectedController){var controller=this.controller,info={targetType:targetType,target:target,eventName:eventName};if(!controller){this.controller=controller=new Ext.event.Controller()}if(controller.isFiring){controller=new Ext.event.Controller()}controller.setInfo(info);if(connectedController&&controller!==connectedController){controller.connect(connectedController)}return controller},applyPublishers:function(publishers){var i,publisher;this.publishersCache={};for(i in publishers){if(publishers.hasOwnProperty(i)){publisher=publishers[i];this.registerPublisher(publisher)}}return publishers},registerPublisher:function(publisher){var activePublishers=this.activePublishers,targetType=publisher.getTargetType(),publishers=activePublishers[targetType];if(!publishers){activePublishers[targetType]=publishers=[]}publishers.push(publisher);publisher.setDispatcher(this);return this},getCachedActivePublishers:function(targetType,eventName){var cache=this.publishersCache,publishers;if((publishers=cache[targetType])&&(publishers=publishers[eventName])){return publishers}return null},cacheActivePublishers:function(targetType,eventName,publishers){var cache=this.publishersCache;if(!cache[targetType]){cache[targetType]={}}cache[targetType][eventName]=publishers;return publishers},getActivePublishers:function(targetType,eventName){var publishers,activePublishers,i,ln,publisher;if((publishers=this.getCachedActivePublishers(targetType,eventName))){return publishers}activePublishers=this.activePublishers[targetType];if(activePublishers){publishers=[];for(i=0,ln=activePublishers.length;i<ln;i++){publisher=activePublishers[i];if(publisher.handles(eventName)){publishers.push(publisher)}}}else{publishers=this.noActivePublishers}return this.cacheActivePublishers(targetType,eventName,publishers)},hasListener:function(targetType,target,eventName){var listenerStack=this.getListenerStack(targetType,target,eventName);if(listenerStack){return listenerStack.count()>0}return false},addListener:function(targetType,target,eventName){var publishers=this.getActivePublishers(targetType,eventName),ln=publishers.length,i,result;result=this.doAddListener.apply(this,arguments);if(result&&ln>0){for(i=0;i<ln;i++){publishers[i].subscribe(target,eventName)}}return result},doAddListener:function(targetType,target,eventName,fn,scope,options,order){var listenerStack=this.getListenerStack(targetType,target,eventName,true);return listenerStack.add(fn,scope,options,order)},removeListener:function(targetType,target,eventName){var publishers=this.getActivePublishers(targetType,eventName),ln=publishers.length,i,result;result=this.doRemoveListener.apply(this,arguments);if(result&&ln>0){for(i=0;i<ln;i++){publishers[i].unsubscribe(target,eventName)}}return result},doRemoveListener:function(targetType,target,eventName,fn,scope,order){var listenerStack=this.getListenerStack(targetType,target,eventName);if(listenerStack===null){return false}return listenerStack.remove(fn,scope,order)},clearListeners:function(targetType,target,eventName){var listenerStacks=this.listenerStacks,ln=arguments.length,stacks,publishers,i,publisherGroup;if(ln===3){if(listenerStacks[targetType]&&listenerStacks[targetType][target]){this.removeListener(targetType,target,eventName);delete listenerStacks[targetType][target][eventName]}}else{if(ln===2){if(listenerStacks[targetType]){stacks=listenerStacks[targetType][target];if(stacks){for(eventName in stacks){if(stacks.hasOwnProperty(eventName)){publishers=this.getActivePublishers(targetType,eventName);for(i=0,ln=publishers.length;i<ln;i++){publishers[i].unsubscribe(target,eventName,true)}}}delete listenerStacks[targetType][target]}}}else{if(ln===1){publishers=this.activePublishers[targetType];for(i=0,ln=publishers.length;i<ln;i++){publishers[i].unsubscribeAll()}delete listenerStacks[targetType]}else{publishers=this.activePublishers;for(targetType in publishers){if(publishers.hasOwnProperty(targetType)){publisherGroup=publishers[targetType];for(i=0,ln=publisherGroup.length;i<ln;i++){publisherGroup[i].unsubscribeAll()}}}delete this.listenerStacks;this.listenerStacks={}}}}return this},dispatchEvent:function(targetType,target,eventName){var publishers=this.getActivePublishers(targetType,eventName),ln=publishers.length,i;if(ln>0){for(i=0;i<ln;i++){publishers[i].notify(target,eventName)}}return this.doDispatchEvent.apply(this,arguments)},doDispatchEvent:function(targetType,target,eventName,args,action,connectedController){var listenerStack=this.getListenerStack(targetType,target,eventName),wildcardStacks=this.getWildcardListenerStacks(targetType,target,eventName),controller;if((listenerStack===null||listenerStack.length==0)){if(wildcardStacks.length==0&&!action){return}}else{wildcardStacks.push(listenerStack)}controller=this.getController(targetType,target,eventName,connectedController);controller.setListenerStacks(wildcardStacks);controller.fire(args,action);return !controller.isInterrupted()},getWildcardListenerStacks:function(targetType,target,eventName){var stacks=[],wildcard=this.wildcard,isEventNameNotWildcard=eventName!==wildcard,isTargetNotWildcard=target!==wildcard,stack;if(isEventNameNotWildcard&&(stack=this.getListenerStack(targetType,target,wildcard))){stacks.push(stack)}if(isTargetNotWildcard&&(stack=this.getListenerStack(targetType,wildcard,eventName))){stacks.push(stack)}return stacks}});Ext.define("Ext.mixin.Observable",{requires:["Ext.event.Dispatcher"],extend:"Ext.mixin.Mixin",mixins:["Ext.mixin.Identifiable"],mixinConfig:{id:"observable",hooks:{destroy:"destroy"}},alternateClassName:"Ext.util.Observable",isObservable:true,observableType:"observable",validIdRegex:/^([\w\-]+)$/,observableIdPrefix:"#",listenerOptionsRegex:/^(?:delegate|single|delay|buffer|args|prepend)$/,config:{listeners:null,bubbleEvents:null},constructor:function(config){this.initConfig(config)},applyListeners:function(listeners){if(listeners){this.addListener(listeners)}},applyBubbleEvents:function(bubbleEvents){if(bubbleEvents){this.enableBubble(bubbleEvents)}},getOptimizedObservableId:function(){return this.observableId},getObservableId:function(){if(!this.observableId){var id=this.getUniqueId();if(!id.match(this.validIdRegex)){Ext.Logger.error("Invalid unique id of '"+id+"' for this object",this)}this.observableId=this.observableIdPrefix+id;this.getObservableId=this.getOptimizedObservableId}return this.observableId},getOptimizedEventDispatcher:function(){return this.eventDispatcher},getEventDispatcher:function(){if(!this.eventDispatcher){this.eventDispatcher=Ext.event.Dispatcher.getInstance();this.getEventDispatcher=this.getOptimizedEventDispatcher;this.getListeners();this.getBubbleEvents()}return this.eventDispatcher},getManagedListeners:function(object,eventName){var id=object.getUniqueId(),managedListeners=this.managedListeners;if(!managedListeners){this.managedListeners=managedListeners={}}if(!managedListeners[id]){managedListeners[id]={};object.doAddListener("destroy","clearManagedListeners",this,{single:true,args:[object]})}if(!managedListeners[id][eventName]){managedListeners[id][eventName]=[]}return managedListeners[id][eventName]},getUsedSelectors:function(){var selectors=this.usedSelectors;if(!selectors){selectors=this.usedSelectors=[];selectors.$map={}}return selectors},fireEvent:function(eventName){var args=Array.prototype.slice.call(arguments,1);return this.doFireEvent(eventName,args)},fireAction:function(eventName,args,fn,scope,options,order){var fnType=typeof fn,action;if(args===undefined){args=[]}if(fnType!="undefined"){action={fn:fn,isLateBinding:fnType=="string",scope:scope||this,options:options||{},order:order}}return this.doFireEvent(eventName,args,action)},doFireEvent:function(eventName,args,action,connectedController){if(this.eventFiringSuspended){return}var id=this.getObservableId(),dispatcher=this.getEventDispatcher();return dispatcher.dispatchEvent(this.observableType,id,eventName,args,action,connectedController)},doAddListener:function(name,fn,scope,options,order){var isManaged=(scope&&scope!==this&&scope.isIdentifiable),usedSelectors=this.getUsedSelectors(),usedSelectorsMap=usedSelectors.$map,selector=this.getObservableId(),isAdded,managedListeners,delegate;if(!options){options={}}if(!scope){scope=this}if(options.delegate){delegate=options.delegate;selector+=" "+delegate}if(!(selector in usedSelectorsMap)){usedSelectorsMap[selector]=true;usedSelectors.push(selector)}isAdded=this.addDispatcherListener(selector,name,fn,scope,options,order);if(isAdded&&isManaged){managedListeners=this.getManagedListeners(scope,name);managedListeners.push({delegate:delegate,scope:scope,fn:fn,order:order})}return isAdded},addDispatcherListener:function(selector,name,fn,scope,options,order){return this.getEventDispatcher().addListener(this.observableType,selector,name,fn,scope,options,order)},doRemoveListener:function(name,fn,scope,options,order){var isManaged=(scope&&scope!==this&&scope.isIdentifiable),selector=this.getObservableId(),isRemoved,managedListeners,i,ln,listener,delegate;if(options&&options.delegate){delegate=options.delegate;selector+=" "+delegate}if(!scope){scope=this}isRemoved=this.removeDispatcherListener(selector,name,fn,scope,order);if(isRemoved&&isManaged){managedListeners=this.getManagedListeners(scope,name);for(i=0,ln=managedListeners.length;i<ln;i++){listener=managedListeners[i];if(listener.fn===fn&&listener.scope===scope&&listener.delegate===delegate&&listener.order===order){managedListeners.splice(i,1);break}}}return isRemoved},removeDispatcherListener:function(selector,name,fn,scope,order){return this.getEventDispatcher().removeListener(this.observableType,selector,name,fn,scope,order)},clearManagedListeners:function(object){var managedListeners=this.managedListeners,id,namedListeners,listeners,eventName,i,ln,listener,options;if(!managedListeners){return this}if(object){if(typeof object!="string"){id=object.getUniqueId()}else{id=object}namedListeners=managedListeners[id];for(eventName in namedListeners){if(namedListeners.hasOwnProperty(eventName)){listeners=namedListeners[eventName];for(i=0,ln=listeners.length;i<ln;i++){listener=listeners[i];options={};if(listener.delegate){options.delegate=listener.delegate}if(this.doRemoveListener(eventName,listener.fn,listener.scope,options,listener.order)){i--;ln--}}}}delete managedListeners[id];return this}for(id in managedListeners){if(managedListeners.hasOwnProperty(id)){this.clearManagedListeners(id)}}},changeListener:function(actionFn,eventName,fn,scope,options,order){var eventNames,listeners,listenerOptionsRegex,actualOptions,name,value,i,ln,listener,valueType;if(typeof fn!="undefined"){if(typeof eventName!="string"){for(i=0,ln=eventName.length;i<ln;i++){name=eventName[i];actionFn.call(this,name,fn,scope,options,order)}return this}actionFn.call(this,eventName,fn,scope,options,order)}else{if(Ext.isArray(eventName)){listeners=eventName;for(i=0,ln=listeners.length;i<ln;i++){listener=listeners[i];actionFn.call(this,listener.event,listener.fn,listener.scope,listener,listener.order)}}else{listenerOptionsRegex=this.listenerOptionsRegex;options=eventName;eventNames=[];listeners=[];actualOptions={};for(name in options){value=options[name];if(name==="scope"){scope=value;continue}else{if(name==="order"){order=value;continue}}if(!listenerOptionsRegex.test(name)){valueType=typeof value;if(valueType!="string"&&valueType!="function"){actionFn.call(this,name,value.fn,value.scope||scope,value,value.order||order);continue}eventNames.push(name);listeners.push(value)}else{actualOptions[name]=value}}for(i=0,ln=eventNames.length;i<ln;i++){actionFn.call(this,eventNames[i],listeners[i],scope,actualOptions,order)}}}return this},addListener:function(eventName,fn,scope,options,order){return this.changeListener(this.doAddListener,eventName,fn,scope,options,order)},toggleListener:function(toggle,eventName,fn,scope,options,order){return this.changeListener(toggle?this.doAddListener:this.doRemoveListener,eventName,fn,scope,options,order)},addBeforeListener:function(eventName,fn,scope,options){return this.addListener(eventName,fn,scope,options,"before")},addAfterListener:function(eventName,fn,scope,options){return this.addListener(eventName,fn,scope,options,"after")},removeListener:function(eventName,fn,scope,options,order){return this.changeListener(this.doRemoveListener,eventName,fn,scope,options,order)},removeBeforeListener:function(eventName,fn,scope,options){return this.removeListener(eventName,fn,scope,options,"before")},removeAfterListener:function(eventName,fn,scope,options){return this.removeListener(eventName,fn,scope,options,"after")},clearListeners:function(){var usedSelectors=this.getUsedSelectors(),dispatcher=this.getEventDispatcher(),i,ln,selector;for(i=0,ln=usedSelectors.length;i<ln;i++){selector=usedSelectors[i];dispatcher.clearListeners(this.observableType,selector)}},hasListener:function(eventName){return this.getEventDispatcher().hasListener(this.observableType,this.getObservableId(),eventName)},suspendEvents:function(){this.eventFiringSuspended=true},resumeEvents:function(){this.eventFiringSuspended=false},relayEvents:function(object,events,prefix){var i,ln,oldName,newName;if(typeof prefix=="undefined"){prefix=""}if(typeof events=="string"){events=[events]}if(Ext.isArray(events)){for(i=0,ln=events.length;i<ln;i++){oldName=events[i];newName=prefix+oldName;object.addListener(oldName,this.createEventRelayer(newName),this)}}else{for(oldName in events){if(events.hasOwnProperty(oldName)){newName=prefix+events[oldName];object.addListener(oldName,this.createEventRelayer(newName),this)}}}return this},relayEvent:function(args,fn,scope,options,order){var fnType=typeof fn,controller=args[args.length-1],eventName=controller.getInfo().eventName,action;args=Array.prototype.slice.call(args,0,-2);args[0]=this;if(fnType!="undefined"){action={fn:fn,scope:scope||this,options:options||{},order:order,isLateBinding:fnType=="string"}}return this.doFireEvent(eventName,args,action,controller)},createEventRelayer:function(newName){return function(){return this.doFireEvent(newName,Array.prototype.slice.call(arguments,0,-2))}},enableBubble:function(events){var isBubblingEnabled=this.isBubblingEnabled,i,ln,name;if(!isBubblingEnabled){isBubblingEnabled=this.isBubblingEnabled={}}if(typeof events=="string"){events=Ext.Array.clone(arguments)}for(i=0,ln=events.length;i<ln;i++){name=events[i];if(!isBubblingEnabled[name]){isBubblingEnabled[name]=true;this.addListener(name,this.createEventBubbler(name),this)}}},createEventBubbler:function(name){return function doBubbleEvent(){var bubbleTarget=("getBubbleTarget" in this)?this.getBubbleTarget():null;if(bubbleTarget&&bubbleTarget!==this&&bubbleTarget.isObservable){bubbleTarget.fireAction(name,Array.prototype.slice.call(arguments,0,-2),doBubbleEvent,bubbleTarget,null,"after")}}},getBubbleTarget:function(){return false},destroy:function(){if(this.observableId){this.fireEvent("destroy",this);this.clearListeners();this.clearManagedListeners()}},addEvents:Ext.emptyFn},function(){this.createAlias({on:"addListener",un:"removeListener",onBefore:"addBeforeListener",onAfter:"addAfterListener",unBefore:"removeBeforeListener",unAfter:"removeAfterListener"})});Ext.define("Ext.Evented",{alternateClassName:"Ext.EventedBase",mixins:["Ext.mixin.Observable"],statics:{generateSetter:function(nameMap){var internalName=nameMap.internal,applyName=nameMap.apply,changeEventName=nameMap.changeEvent,doSetName=nameMap.doSet;return function(value){var initialized=this.initialized,oldValue=this[internalName],applier=this[applyName];if(applier){value=applier.call(this,value,oldValue);if(typeof value=="undefined"){return this}}oldValue=this[internalName];if(value!==oldValue){if(initialized){this.fireAction(changeEventName,[this,value,oldValue],this.doSet,this,{nameMap:nameMap})}else{this[internalName]=value;if(this[doSetName]){this[doSetName].call(this,value,oldValue)}}}return this}}},initialized:false,constructor:function(config){this.initialConfig=config;this.initialize()},initialize:function(){this.initConfig(this.initialConfig);this.initialized=true},doSet:function(me,value,oldValue,options){var nameMap=options.nameMap;me[nameMap.internal]=value;if(me[nameMap.doSet]){me[nameMap.doSet].call(this,value,oldValue)}},onClassExtended:function(Class,data){if(!data.hasOwnProperty("eventedConfig")){return}var ExtClass=Ext.Class,config=data.config,eventedConfig=data.eventedConfig,name,nameMap;data.config=(config)?Ext.applyIf(config,eventedConfig):eventedConfig;for(name in eventedConfig){if(eventedConfig.hasOwnProperty(name)){nameMap=ExtClass.getConfigNameMap(name);data[nameMap.set]=this.generateSetter(nameMap)}}}});Ext.define("Ext.AbstractComponent",{extend:"Ext.Evented",onClassExtended:function(Class,members){if(!members.hasOwnProperty("cachedConfig")){return}var prototype=Class.prototype,config=members.config,cachedConfig=members.cachedConfig,cachedConfigList=prototype.cachedConfigList,hasCachedConfig=prototype.hasCachedConfig,name,value;delete members.cachedConfig;prototype.cachedConfigList=cachedConfigList=(cachedConfigList)?cachedConfigList.slice():[];prototype.hasCachedConfig=hasCachedConfig=(hasCachedConfig)?Ext.Object.chain(hasCachedConfig):{};if(!config){members.config=config={}}for(name in cachedConfig){if(cachedConfig.hasOwnProperty(name)){value=cachedConfig[name];if(!hasCachedConfig[name]){hasCachedConfig[name]=true;cachedConfigList.push(name)}config[name]=value}}},getElementConfig:Ext.emptyFn,referenceAttributeName:"reference",referenceSelector:"[reference]",addReferenceNode:function(name,domNode){Ext.Object.defineProperty(this,name,{get:function(){var reference;delete this[name];this[name]=reference=new Ext.Element(domNode);return reference},configurable:true})},initElement:function(){var prototype=this.self.prototype,id=this.getId(),referenceList=[],cleanAttributes=true,referenceAttributeName=this.referenceAttributeName,needsOptimization=false,renderTemplate,renderElement,element,referenceNodes,i,ln,referenceNode,reference,configNameCache,defaultConfig,cachedConfigList,initConfigList,initConfigMap,configList,elements,name,nameMap,internalName;if(prototype.hasOwnProperty("renderTemplate")){renderTemplate=this.renderTemplate.cloneNode(true);renderElement=renderTemplate.firstChild}else{cleanAttributes=false;needsOptimization=true;renderTemplate=document.createDocumentFragment();renderElement=Ext.Element.create(this.getElementConfig(),true);renderTemplate.appendChild(renderElement)}referenceNodes=renderTemplate.querySelectorAll(this.referenceSelector);for(i=0,ln=referenceNodes.length;i<ln;i++){referenceNode=referenceNodes[i];reference=referenceNode.getAttribute(referenceAttributeName);if(cleanAttributes){referenceNode.removeAttribute(referenceAttributeName)}if(reference=="element"){referenceNode.id=id;this.element=element=new Ext.Element(referenceNode)}else{this.addReferenceNode(reference,referenceNode)}referenceList.push(reference)}this.referenceList=referenceList;if(!this.innerElement){this.innerElement=element}if(!this.bodyElement){this.bodyElement=this.innerElement}if(renderElement===element.dom){this.renderElement=element}else{this.addReferenceNode("renderElement",renderElement)}if(needsOptimization){configNameCache=Ext.Class.configNameCache;defaultConfig=this.config;cachedConfigList=this.cachedConfigList;initConfigList=this.initConfigList;initConfigMap=this.initConfigMap;configList=[];for(i=0,ln=cachedConfigList.length;i<ln;i++){name=cachedConfigList[i];nameMap=configNameCache[name];if(initConfigMap[name]){initConfigMap[name]=false;Ext.Array.remove(initConfigList,name)}if(defaultConfig[name]!==null){configList.push(name);this[nameMap.get]=this[nameMap.initGet]}}for(i=0,ln=configList.length;i<ln;i++){name=configList[i];nameMap=configNameCache[name];internalName=nameMap.internal;this[internalName]=null;this[nameMap.set].call(this,defaultConfig[name]);delete this[nameMap.get];prototype[internalName]=this[internalName]}renderElement=this.renderElement.dom;prototype.renderTemplate=renderTemplate=document.createDocumentFragment();renderTemplate.appendChild(renderElement.cloneNode(true));elements=renderTemplate.querySelectorAll("[id]");for(i=0,ln=elements.length;i<ln;i++){element=elements[i];element.removeAttribute("id")}for(i=0,ln=referenceList.length;i<ln;i++){reference=referenceList[i];this[reference].dom.removeAttribute("reference")}}return this}});Ext.define("Ext.util.HashMap",{mixins:{observable:"Ext.mixin.Observable"},constructor:function(config){this.callParent();this.mixins.observable.constructor.call(this);this.clear(true)},getCount:function(){return this.length},getData:function(key,value){if(value===undefined){value=key;key=this.getKey(value)}return[key,value]},getKey:function(o){return o.id},add:function(key,value){var me=this,data;if(me.containsKey(key)){throw new Error("This key already exists in the HashMap")}data=this.getData(key,value);key=data[0];value=data[1];me.map[key]=value;++me.length;me.fireEvent("add",me,key,value);return value},replace:function(key,value){var me=this,map=me.map,old;if(!me.containsKey(key)){me.add(key,value)}old=map[key];map[key]=value;me.fireEvent("replace",me,key,value,old);return value},remove:function(o){var key=this.findKey(o);if(key!==undefined){return this.removeByKey(key)}return false},removeByKey:function(key){var me=this,value;if(me.containsKey(key)){value=me.map[key];delete me.map[key];--me.length;me.fireEvent("remove",me,key,value);return true}return false},get:function(key){return this.map[key]},clear:function(initial){var me=this;me.map={};me.length=0;if(initial!==true){me.fireEvent("clear",me)}return me},containsKey:function(key){return this.map[key]!==undefined},contains:function(value){return this.containsKey(this.findKey(value))},getKeys:function(){return this.getArray(true)},getValues:function(){return this.getArray(false)},getArray:function(isKey){var arr=[],key,map=this.map;for(key in map){if(map.hasOwnProperty(key)){arr.push(isKey?key:map[key])}}return arr},each:function(fn,scope){var items=Ext.apply({},this.map),key,length=this.length;scope=scope||this;for(key in items){if(items.hasOwnProperty(key)){if(fn.call(scope,key,items[key],length)===false){break}}}return this},clone:function(){var hash=new Ext.util.HashMap(),map=this.map,key;hash.suspendEvents();for(key in map){if(map.hasOwnProperty(key)){hash.add(key,map[key])}}hash.resumeEvents();return hash},findKey:function(value){var key,map=this.map;for(key in map){if(map.hasOwnProperty(key)&&map[key]===value){return key}}return undefined}});Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(config){Ext.apply(this,config||{});this.all=Ext.create("Ext.util.HashMap");this.types={}},get:function(id){return this.all.get(id)},register:function(item){this.all.add(item)},unregister:function(item){this.all.remove(item)},registerType:function(type,cls){this.types[type]=cls;cls[this.typeName]=type},isRegistered:function(type){return this.types[type]!==undefined},create:function(config,defaultType){var type=config[this.typeName]||config.type||defaultType,Constructor=this.types[type];if(Constructor==undefined){Ext.Error.raise("The '"+type+"' type has not been registered with this manager")}return new Constructor(config)},onAvailable:function(id,fn,scope){var all=this.all,item;if(all.containsKey(id)){item=all.get(id);fn.call(scope||item,item)}else{all.on("add",function(map,key,item){if(key==id){fn.call(scope||item,item);all.un("add",fn,scope)}})}},each:function(fn,scope){this.all.each(fn,scope||this)},getCount:function(){return this.all.getCount()}});Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:true,constructor:function(){var map={};this.all={map:map,getArray:function(){var list=[],id;for(id in map){list.push(map[id])}return list}};this.map=map},register:function(component){var id=component.getId();if(this.map[id]){Ext.Logger.warn("Registering a component with a id (`"+id+"`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`.")}this.map[component.getId()]=component},unregister:function(component){delete this.map[component.getId()]},isRegistered:function(component){return this.map[component]!==undefined},get:function(id){return this.map[id]},create:function(component,defaultType){if(component.isComponent){return component}else{if(Ext.isString(component)){return Ext.createByAlias("widget."+component)}else{var type=component.xtype||defaultType;return Ext.createByAlias("widget."+type,component)}}},registerType:Ext.emptyFn});(function(){function xf(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})}Ext.DateExtras={now:Date.now||function(){return +new Date()},getElapsed:function(dateA,dateB){return Math.abs(dateA-(dateB||new Date()))},useStrict:false,formatCodeToRegex:function(character,currentGroup){var p=utilDate.parseCodes[character];if(p){p=typeof p=="function"?p():p;utilDate.parseCodes[character]=p}return p?Ext.applyIf({c:p.c?xf(p.c,currentGroup||"{0}"):p.c},p):{g:0,c:null,s:Ext.String.escapeRegex(character)}},parseFunctions:{MS:function(input,strict){var re=new RegExp("\\\\?/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\\\?/");var r=(input||"").match(re);return r?new Date(((r[1]||"")+r[2])*1):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(month){return utilDate.monthNames[month].substring(0,3)},getShortDayName:function(day){return utilDate.dayNames[day].substring(0,3)},getMonthNumber:function(name){return utilDate.monthNumbers[name.substring(0,1).toUpperCase()+name.substring(1,3).toLowerCase()]},formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var c="Y-m-dTH:i:sP",code=[],i=0,l=c.length;i<l;++i){var e=c.charAt(i);code.push(e=="T"?"'T'":utilDate.getFormatCode(e))}return code.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(y,m,d,h,i,s,ms){h=h||0;i=i||0;s=s||0;ms=ms||0;var dt=utilDate.add(new Date(y<100?100:y,m-1,d,h,i,s,ms),utilDate.YEAR,y<100?y-100:0);return y==dt.getFullYear()&&m==dt.getMonth()+1&&d==dt.getDate()&&h==dt.getHours()&&i==dt.getMinutes()&&s==dt.getSeconds()&&ms==dt.getMilliseconds()},parse:function(input,format,strict){var p=utilDate.parseFunctions;if(p[format]==null){utilDate.createParser(format)}return p[format](input,Ext.isDefined(strict)?strict:utilDate.useStrict)},parseDate:function(input,format,strict){return utilDate.parse(input,format,strict)},getFormatCode:function(character){var f=utilDate.formatCodes[character];if(f){f=typeof f=="function"?f():f;utilDate.formatCodes[character]=f}return f||("'"+Ext.String.escape(character)+"'")},createFormat:function(format){var code=[],special=false,ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code.push("'"+Ext.String.escape(ch)+"'")}else{if(ch=="\n"){code.push(Ext.JSON.encode(ch))}else{code.push(utilDate.getFormatCode(ch))}}}}utilDate.formatFunctions[format]=Ext.functionFactory("return "+code.join("+"))},createParser:(function(){var code=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Ext.Date.defaults,","results = String(input).match(Ext.Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = Ext.Date.clearTime(new Date);","y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));","m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));","d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));","h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));","i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));","s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));","ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = Ext.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (Ext.Date.isLeapYear(v) && z <= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);","}else if(strict === true && !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = Ext.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(format){var regexNum=utilDate.parseRegexes.length,currentGroup=1,calc=[],regex=[],special=false,ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex.push(Ext.String.escape(ch))}else{var obj=utilDate.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex.push(obj.s);if(obj.g&&obj.c){calc.push(obj.c)}}}}utilDate.parseRegexes[regexNum]=new RegExp("^"+regex.join("")+"$","i");utilDate.parseFunctions[format]=Ext.functionFactory("input","strict",xf(code,regexNum,calc.join("")))}})(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],i=0;i<7;a.push(utilDate.getShortDayName(i)),++i){}return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+utilDate.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n",s:"("+utilDate.monthNames.join("|")+")"}},M:function(){for(var a=[],i=0;i<12;a.push(utilDate.getShortMonthName(i)),++i){}return Ext.applyIf({s:"("+a.join("|")+")"},utilDate.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return utilDate.formatCodeToRegex("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)"},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return utilDate.formatCodeToRegex("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return utilDate.formatCodeToRegex("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var calc=[],arr=[utilDate.formatCodeToRegex("Y",1),utilDate.formatCodeToRegex("m",2),utilDate.formatCodeToRegex("d",3),utilDate.formatCodeToRegex("h",4),utilDate.formatCodeToRegex("i",5),utilDate.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",utilDate.formatCodeToRegex("P",8).c,"}else{",utilDate.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(var i=0,l=arr.length;i<l;++i){calc.push(arr[i].c)}return{g:1,c:calc.join(""),s:[arr[0].s,"(?:","-",arr[1].s,"(?:","-",arr[2].s,"(?:","(?:T| )?",arr[3].s,":",arr[4].s,"(?::",arr[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(date,format){return utilDate.format(date,format)},format:function(date,format){if(utilDate.formatFunctions[format]==null){utilDate.createFormat(format)}var result=utilDate.formatFunctions[format].call(date);return result+""},getTimezone:function(date){return date.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(date,colon){var offset=date.getTimezoneOffset();return(offset>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(offset)/60),2,"0")+(colon?":":"")+Ext.String.leftPad(Math.abs(offset%60),2,"0")},getDayOfYear:function(date){var num=0,d=Ext.Date.clone(date),m=date.getMonth(),i;for(i=0,d.setDate(1),d.setMonth(0);i<m;d.setMonth(++i)){num+=utilDate.getDaysInMonth(d)}return num+date.getDate()-1},getWeekOfYear:(function(){var ms1d=86400000,ms7d=7*ms1d;return function(date){var DC3=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()+3)/ms1d,AWN=Math.floor(DC3/7),Wyr=new Date(AWN*ms7d).getUTCFullYear();return AWN-Math.floor(Date.UTC(Wyr,0,7)/ms7d)+1}})(),isLeapYear:function(date){var year=date.getFullYear();return !!((year&3)==0&&(year%100||(year%400==0&&year)))},getFirstDayOfMonth:function(date){var day=(date.getDay()-(date.getDate()-1))%7;return(day<0)?(day+7):day},getLastDayOfMonth:function(date){return utilDate.getLastDateOfMonth(date).getDay()},getFirstDateOfMonth:function(date){return new Date(date.getFullYear(),date.getMonth(),1)},getLastDateOfMonth:function(date){return new Date(date.getFullYear(),date.getMonth(),utilDate.getDaysInMonth(date))},getDaysInMonth:(function(){var daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];return function(date){var m=date.getMonth();return m==1&&utilDate.isLeapYear(date)?29:daysInMonth[m]}})(),getSuffix:function(date){switch(date.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(date){return new Date(date.getTime())},isDST:function(date){return new Date(date.getFullYear(),0,1).getTimezoneOffset()!=date.getTimezoneOffset()},clearTime:function(date,clone){if(clone){return Ext.Date.clearTime(Ext.Date.clone(date))}var d=date.getDate();date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(date.getDate()!=d){for(var hr=1,c=utilDate.add(date,Ext.Date.HOUR,hr);c.getDate()!=d;hr++,c=utilDate.add(date,Ext.Date.HOUR,hr)){}date.setDate(d);date.setHours(c.getHours())}return date},add:function(date,interval,value){var d=Ext.Date.clone(date);if(!interval||value===0){return d}switch(interval.toLowerCase()){case Ext.Date.MILLI:d=new Date(d.valueOf()+value);break;case Ext.Date.SECOND:d=new Date(d.valueOf()+value*1000);break;case Ext.Date.MINUTE:d=new Date(d.valueOf()+value*60000);break;case Ext.Date.HOUR:d=new Date(d.valueOf()+value*3600000);break;case Ext.Date.DAY:d=new Date(d.valueOf()+value*86400000);break;case Ext.Date.MONTH:var day=date.getDate();if(day>28){day=Math.min(day,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(date),"mo",value)).getDate())}d.setDate(day);d.setMonth(date.getMonth()+value);break;case Ext.Date.YEAR:d.setFullYear(date.getFullYear()+value);break}return d},between:function(date,start,end){var t=date.getTime();return start.getTime()<=t&&t<=end.getTime()},diff:function(min,max,unit){var ExtDate=Ext.Date,est,diff=+max-min;switch(unit){case ExtDate.MILLI:return diff;case ExtDate.SECOND:return Math.floor(diff/1000);case ExtDate.MINUTE:return Math.floor(diff/60000);case ExtDate.HOUR:return Math.floor(diff/3600000);case ExtDate.DAY:return Math.floor(diff/86400000);case"w":return Math.floor(diff/604800000);case ExtDate.MONTH:est=(max.getFullYear()*12+max.getMonth())-(min.getFullYear()*12+min.getMonth());if(Ext.Date.add(min,unit,est)>max){return est-1}else{return est}case ExtDate.YEAR:est=max.getFullYear()-min.getFullYear();if(Ext.Date.add(min,unit,est)>max){return est-1}else{return est}}},align:function(date,unit,step){var num=new Date(+date);switch(unit.toLowerCase()){case Ext.Date.MILLI:return num;break;case Ext.Date.SECOND:num.setUTCSeconds(num.getUTCSeconds()-num.getUTCSeconds()%step);num.setUTCMilliseconds(0);return num;break;case Ext.Date.MINUTE:num.setUTCMinutes(num.getUTCMinutes()-num.getUTCMinutes()%step);num.setUTCSeconds(0);num.setUTCMilliseconds(0);return num;break;case Ext.Date.HOUR:num.setUTCHours(num.getUTCHours()-num.getUTCHours()%step);num.setUTCMinutes(0);num.setUTCSeconds(0);num.setUTCMilliseconds(0);return num;break;case Ext.Date.DAY:if(step==7||step==14){num.setUTCDate(num.getUTCDate()-num.getUTCDay()+1)}num.setUTCHours(0);num.setUTCMinutes(0);num.setUTCSeconds(0);num.setUTCMilliseconds(0);return num;break;case Ext.Date.MONTH:num.setUTCMonth(num.getUTCMonth()-(num.getUTCMonth()-1)%step,1);num.setUTCHours(0);num.setUTCMinutes(0);num.setUTCSeconds(0);num.setUTCMilliseconds(0);return num;break;case Ext.Date.YEAR:num.setUTCFullYear(num.getUTCFullYear()-num.getUTCFullYear()%step,1,1);num.setUTCHours(0);num.setUTCMinutes(0);num.setUTCSeconds(0);num.setUTCMilliseconds(0);return date;break}}};var utilDate=Ext.DateExtras;Ext.apply(Ext.Date,utilDate)})();Ext.define("Ext.util.Format",{requires:["Ext.DateExtras"],singleton:true,defaultDateFormat:"m/d/Y",escapeRe:/('|\\)/g,trimRe:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,dashesRe:/-/g,iso8601TestRe:/\d\dT\d\d/,iso8601SplitRe:/[- :T\.Z\+]/,ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(" "),vs.lastIndexOf("."),vs.lastIndexOf("!"),vs.lastIndexOf("?"));if(index!=-1&&index>=(len-15)){return vs.substr(0,index)+"..."}}return value.substr(0,len-3)+"..."}return value},escapeRegex:function(s){return s.replace(Ext.util.Format.escapeRegexRe,"\\$1")},escape:function(string){return string.replace(Ext.util.Format.escapeRe,"\\$1")},toggle:function(string,value,other){return string==value?other:value},trim:function(string){return string.replace(Ext.util.Format.trimRe,"")},leftPad:function(val,size,ch){var result=String(val);ch=ch||" ";while(result.length<size){result=ch+result}return result},format:function(format){var args=Ext.toArray(arguments,1);return format.replace(Ext.util.Format.formatRe,function(m,i){return args[i]})},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},date:function(value,format){var date=value;if(!value){return""}if(!Ext.isDate(value)){date=new Date(Date.parse(value));if(isNaN(date)){if(this.iso8601TestRe.test(value)){date=value.split(this.iso8601SplitRe);date=new Date(date[0],date[1]-1,date[2],date[3],date[4],date[5])}if(isNaN(date)){date=new Date(Date.parse(value.replace(this.dashesRe,"/")));if(isNaN(date)){Ext.Logger.error("Cannot parse the passed value "+value+" into a valid date")}}}value=date}return Ext.Date.format(value,format||Ext.util.Format.defaultDateFormat)}});Ext.define("Ext.Template",{requires:["Ext.dom.Helper","Ext.util.Format"],inheritableStatics:{from:function(el,config){el=Ext.getDom(el);return new this(el.value||el.innerHTML,config||"")}},constructor:function(html){var me=this,args=arguments,buffer=[],i=0,length=args.length,value;me.initialConfig={};if(length===1&&Ext.isArray(html)){args=html;length=args.length}if(length>1){for(;i<length;i++){value=args[i];if(typeof value=="object"){Ext.apply(me.initialConfig,value);Ext.apply(me,value)}else{buffer.push(value)}}}else{buffer.push(html)}me.html=buffer.join("");if(me.compiled){me.compile()}},isTemplate:true,disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,apply:function(values){var me=this,useFormat=me.disableFormats!==true,fm=Ext.util.Format,tpl=me,ret;if(me.compiled){return me.compiled(values).join("")}function fn(m,name,format,args){if(format&&useFormat){if(args){args=[values[name]].concat(Ext.functionFactory("return ["+args+"];")())}else{args=[values[name]]}if(format.substr(0,5)=="this."){return tpl[format.substr(5)].apply(tpl,args)}else{return fm[format].apply(fm,args)}}else{return values[name]!==undefined?values[name]:""}}ret=me.html.replace(me.re,fn);return ret},applyOut:function(values,out){var me=this;if(me.compiled){out.push.apply(out,me.compiled(values))}else{out.push(me.apply(values))}return out},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(html,compile){var me=this;me.html=html;me.compiled=null;return compile?me.compile():me},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==true,body,bodyReturn;function fn(m,name,format,args){if(format&&useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format="this."+format.substr(5)+"("}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"',"+format+"values['"+name+"']"+args+") ,'"}bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn);body="this.compiled = function(values){ return ['"+bodyReturn+"'];};";eval(body);return me},insertFirst:function(el,values,returnElement){return this.doInsert("afterBegin",el,values,returnElement)},insertBefore:function(el,values,returnElement){return this.doInsert("beforeBegin",el,values,returnElement)},insertAfter:function(el,values,returnElement){return this.doInsert("afterEnd",el,values,returnElement)},append:function(el,values,returnElement){return this.doInsert("beforeEnd",el,values,returnElement)},doInsert:function(where,el,values,returnElement){var newNode=Ext.DomHelper.insertHtml(where,Ext.getDom(el),this.apply(values));return returnElement?Ext.get(newNode):newNode},overwrite:function(el,values,returnElement){var newNode=Ext.DomHelper.overwrite(Ext.getDom(el),this.apply(values));return returnElement?Ext.get(newNode):newNode}});Ext.define("Ext.XTemplateParser",{constructor:function(config){Ext.apply(this,config)},doTpl:Ext.emptyFn,parse:function(str){var me=this,len=str.length,aliases={elseif:"elif"},topRe=me.topRe,actionsRe=me.actionsRe,index,stack,s,m,t,prev,frame,subMatch,begin,end,actions,prop;me.level=0;me.stack=stack=[];for(index=0;index<len;index=end){topRe.lastIndex=index;m=topRe.exec(str);if(!m){me.doText(str.substring(index,len));break}begin=m.index;end=topRe.lastIndex;if(index<begin){me.doText(str.substring(index,begin))}if(m[1]){end=str.indexOf("%}",begin+2);me.doEval(str.substring(begin+2,end));end+=2}else{if(m[2]){end=str.indexOf("]}",begin+2);me.doExpr(str.substring(begin+2,end));end+=2}else{if(m[3]){me.doTag(m[3])}else{if(m[4]){actions=null;while((subMatch=actionsRe.exec(m[4]))!==null){s=subMatch[2]||subMatch[3];if(s){s=Ext.String.htmlDecode(s);t=subMatch[1];t=aliases[t]||t;actions=actions||{};prev=actions[t];if(typeof prev=="string"){actions[t]=[prev,s]}else{if(prev){actions[t].push(s)}else{actions[t]=s}}}}if(!actions){if(me.elseRe.test(m[4])){me.doElse()}else{if(me.defaultRe.test(m[4])){me.doDefault()}else{me.doTpl();stack.push({type:"tpl"})}}}else{if(actions["if"]){me.doIf(actions["if"],actions);stack.push({type:"if"})}else{if(actions["switch"]){me.doSwitch(actions["switch"],actions);stack.push({type:"switch"})}else{if(actions["case"]){me.doCase(actions["case"],actions)}else{if(actions.elif){me.doElseIf(actions.elif,actions)}else{if(actions["for"]){++me.level;if(prop=me.propRe.exec(m[4])){actions.propName=prop[1]||prop[2]}me.doFor(actions["for"],actions);stack.push({type:"for",actions:actions})}else{if(actions.exec){me.doExec(actions.exec,actions);stack.push({type:"exec",actions:actions})}}}}}}}}else{if(m[0].length===5){stack.push({type:"tpl"})}else{frame=stack.pop();me.doEnd(frame.type,frame.actions);if(frame.type=="for"){--me.level}}}}}}}},topRe:/(?:(\{\%)|(\{\[)|\{([^{}]*)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,actionsRe:/\s*(elif|elseif|if|for|exec|switch|case|eval)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\s*default\s*$/,elseRe:/^\s*else\s*$/});Ext.define("Ext.XTemplateCompiler",{extend:"Ext.XTemplateParser",useEval:Ext.isGecko,useIndex:Ext.isIE6||Ext.isIE7,useFormat:true,propNameRe:/^[\w\d\$]*$/,compile:function(tpl){var me=this,code=me.generate(tpl);return me.useEval?me.evalTpl(code):(new Function("Ext",code))(Ext)},generate:function(tpl){var me=this,definitions="var fm=Ext.util.Format,ts=Object.prototype.toString;",code;me.maxLevel=0;me.body=["var c0=values, a0="+me.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, v;\n"];if(me.definitions){if(typeof me.definitions==="string"){me.definitions=[me.definitions,definitions]}else{me.definitions.push(definitions)}}else{me.definitions=[definitions]}me.switches=[];me.parse(tpl);me.definitions.push((me.useEval?"$=":"return")+" function ("+me.fnArgs+") {",me.body.join(""),"}");code=me.definitions.join("\n");me.definitions.length=me.body.length=me.switches.length=0;delete me.definitions;delete me.body;delete me.switches;return code},doText:function(text){var me=this,out=me.body;text=text.replace(me.aposRe,"\\'").replace(me.newLineRe,"\\n");if(me.useIndex){out.push("out[out.length]='",text,"'\n")}else{out.push("out.push('",text,"')\n")}},doExpr:function(expr){var out=this.body;out.push("if ((v="+expr+")!==undefined && (v="+expr+")!==null) out");if(this.useIndex){out.push("[out.length]=v+''\n")}else{out.push(".push(v+'')\n")}},doTag:function(tag){this.doExpr(this.parseTag(tag))},doElse:function(){this.body.push("} else {\n")},doEval:function(text){this.body.push(text,"\n")},doIf:function(action,actions){var me=this;if(action==="."){me.body.push("if (values) {\n")}else{if(me.propNameRe.test(action)){me.body.push("if (",me.parseTag(action),") {\n")}else{me.body.push("if (",me.addFn(action),me.callFn,") {\n")}}if(actions.exec){me.doExec(actions.exec)}},doElseIf:function(action,actions){var me=this;if(action==="."){me.body.push("else if (values) {\n")}else{if(me.propNameRe.test(action)){me.body.push("} else if (",me.parseTag(action),") {\n")}else{me.body.push("} else if (",me.addFn(action),me.callFn,") {\n")}}if(actions.exec){me.doExec(actions.exec)}},doSwitch:function(action){var me=this;if(action==="."){me.body.push("switch (values) {\n")}else{if(me.propNameRe.test(action)){me.body.push("switch (",me.parseTag(action),") {\n")}else{me.body.push("switch (",me.addFn(action),me.callFn,") {\n")}}me.switches.push(0)},doCase:function(action){var me=this,cases=Ext.isArray(action)?action:[action],n=me.switches.length-1,match,i;if(me.switches[n]){me.body.push("break;\n")}else{me.switches[n]++}for(i=0,n=cases.length;i<n;++i){match=me.intRe.exec(cases[i]);cases[i]=match?match[1]:("'"+cases[i].replace(me.aposRe,"\\'")+"'")}me.body.push("case ",cases.join(": case "),":\n")},doDefault:function(){var me=this,n=me.switches.length-1;if(me.switches[n]){me.body.push("break;\n")}else{me.switches[n]++}me.body.push("default:\n")},doEnd:function(type,actions){var me=this,L=me.level-1;if(type=="for"){if(actions.exec){me.doExec(actions.exec)}me.body.push("}\n");me.body.push("parent=p",L,";values=r",L+1,";xcount=n",L,";xindex=i",L,"\n")}else{if(type=="if"||type=="switch"){me.body.push("}\n")}}},doFor:function(action,actions){var me=this,s,L=me.level,up=L-1,pL="p"+L,parentAssignment;if(action==="."){s="values"}else{if(me.propNameRe.test(action)){s=me.parseTag(action)}else{s=me.addFn(action)+me.callFn}}if(me.maxLevel<L){me.maxLevel=L;me.body.push("var ")}if(action=="."){parentAssignment="c"+L}else{parentAssignment="a"+up+"?c"+up+"[i"+up+"]:p"+L}me.body.push("i",L,"=0,n",L,"=0,c",L,"=",s,",a",L,"=",me.createArrayTest(L),",p",L,"=c",up,",r",L,"=values;\n","parent=",parentAssignment,"\n","if (c",L,"){if(a",L,"){n",L,"=c",L,".length;}else if (c",L,".isMixedCollection){c",L,"=c",L,".items;n",L,"=c",L,".length;}else if(c",L,".isStore){c",L,"=c",L,".data.items;n",L,"=c",L,".length;}else{c",L,"=[c",L,"];n",L,"=1;}}\n","for (xcount=n",L,";i",L,"<n"+L+";++i",L,"){\n","values=c",L,"[i",L,"]");if(actions.propName){me.body.push(".",actions.propName)}me.body.push("\n","xindex=i",L,"+1\n")},createArrayTest:("isArray" in Array)?function(L){return"Array.isArray(c"+L+")"}:function(L){return"ts.call(c"+L+')==="[object Array]"'},doExec:function(action,actions){var me=this,name="f"+me.definitions.length;me.definitions.push("function "+name+"("+me.fnArgs+") {"," try { with(values) {","  "+action," }} catch(e) {",'Ext.Logger.log("XTemplate Error: " + e.message);',"}","}");me.body.push(name+me.callFn+"\n")},addFn:function(body){var me=this,name="f"+me.definitions.length;if(body==="."){me.definitions.push("function "+name+"("+me.fnArgs+") {"," return values","}")}else{if(body===".."){me.definitions.push("function "+name+"("+me.fnArgs+") {"," return parent","}")}else{me.definitions.push("function "+name+"("+me.fnArgs+") {"," try { with(values) {","  return("+body+")"," }} catch(e) {",'Ext.Logger.log("XTemplate Error: " + e.message);',"}","}")}}return name},parseTag:function(tag){var me=this,m=me.tagRe.exec(tag),name=m[1],format=m[2],args=m[3],math=m[4],v;if(name=="."){if(!me.validTypes){me.definitions.push("var validTypes={string:1,number:1,boolean:1};");me.validTypes=true}v='validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'}else{if(name=="#"){v="xindex"}else{if(name.substr(0,7)=="parent."){v=name}else{if(isNaN(name)&&name.indexOf("-")==-1&&name.indexOf(".")!=-1){v="values."+name}else{v="values['"+name+"']"}}}}if(math){v="("+v+math+")"}if(format&&me.useFormat){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format+="("}}else{return v}return format+v+args+")"},evalTpl:function($){eval($);return $},newLineRe:/\r\n|\r|\n/g,aposRe:/[']/g,intRe:/^\s*(\d+)\s*$/,tagRe:/([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?/},function(){var proto=this.prototype;proto.fnArgs="out,values,parent,xindex,xcount";proto.callFn=".call(this,"+proto.fnArgs+")"});Ext.define("Ext.XTemplate",{extend:"Ext.Template",requires:"Ext.XTemplateCompiler",emptyObj:{},apply:function(values){return this.applyOut(values,[]).join("")},applyOut:function(values,out,parent){var me=this,xindex=values.xindex,xcount=values.xcount,compiler;if(!me.fn){compiler=new Ext.XTemplateCompiler({useFormat:me.disableFormats!==true,definitions:me.definitions});me.fn=compiler.compile(me.html)}try{xindex=typeof xindex==="number"?xindex:1;xcount=typeof xcount==="number"?xcount:1;me.fn.call(me,out,values,parent||me.emptyObj,xindex,xcount)}catch(e){Ext.Logger.log("Error: "+e.message)}return out},compile:function(){return this},statics:{getTpl:function(instance,name){var tpl=instance[name],proto;if(tpl&&!tpl.isTemplate){tpl=Ext.ClassManager.dynInstantiate("Ext.XTemplate",tpl);if(instance.hasOwnProperty(name)){instance[name]=tpl}else{for(proto=instance.self.prototype;proto;proto=proto.superclass){if(proto.hasOwnProperty(name)){proto[name]=tpl;break}}}}return tpl||null}}});Ext.define("Ext.behavior.Behavior",{constructor:function(component){this.component=component;component.on("destroy","onComponentDestroy",this)},onComponentDestroy:Ext.emptyFn});Ext.define("Ext.fx.easing.Abstract",{config:{startTime:0,startValue:0},isEasing:true,isEnded:false,constructor:function(config){this.initConfig(config);return this},applyStartTime:function(startTime){if(!startTime){startTime=Ext.Date.now()}return startTime},updateStartTime:function(startTime){this.reset()},reset:function(){this.isEnded=false},getValue:Ext.emptyFn});Ext.define("Ext.fx.easing.Linear",{extend:"Ext.fx.easing.Abstract",alias:"easing.linear",config:{duration:0,endValue:0},updateStartValue:function(startValue){this.distance=this.getEndValue()-startValue},updateEndValue:function(endValue){this.distance=endValue-this.getStartValue()},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),duration=this.getDuration();if(deltaTime>duration){this.isEnded=true;return this.getEndValue()}else{return this.getStartValue()+((deltaTime/duration)*this.distance)}}});Ext.define("Ext.util.translatable.Abstract",{extend:"Ext.Evented",requires:["Ext.fx.easing.Linear"],config:{easing:null,easingX:null,easingY:null,fps:Ext.os.is.Android4?50:60},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:false,isTranslatable:true,constructor:function(config){this.doAnimationFrame=Ext.Function.bind(this.doAnimationFrame,this);this.initConfig(config)},factoryEasing:function(easing){return Ext.factory(easing,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(easing){if(!this.getEasingX()){this.setEasingX(this.factoryEasing(easing))}if(!this.getEasingY()){this.setEasingY(this.factoryEasing(easing))}},applyEasingX:function(easing){return this.factoryEasing(easing)},applyEasingY:function(easing){return this.factoryEasing(easing)},updateFps:function(fps){this.animationInterval=1000/fps},doTranslate:Ext.emptyFn,translate:function(x,y,animation){if(animation){return this.translateAnimated(x,y,animation)}if(this.isAnimating){this.stopAnimation()}if(!isNaN(x)&&typeof x=="number"){this.x=x}if(!isNaN(y)&&typeof y=="number"){this.y=y}this.doTranslate(x,y)},translateAxis:function(axis,value,animation){var x,y;if(axis=="x"){x=value}else{y=value}return this.translate(x,y,animation)},animate:function(easingX,easingY){this.activeEasingX=easingX;this.activeEasingY=easingY;this.isAnimating=true;this.lastX=null;this.lastY=null;this.animationFrameId=requestAnimationFrame(this.doAnimationFrame);this.fireEvent("animationstart",this,this.x,this.y);return this},translateAnimated:function(x,y,animation){if(!Ext.isObject(animation)){animation={}}if(this.isAnimating){this.stopAnimation()}var now=Ext.Date.now(),easing=animation.easing,easingX=(typeof x=="number")?(animation.easingX||easing||this.getEasingX()||true):null,easingY=(typeof y=="number")?(animation.easingY||easing||this.getEasingY()||true):null;if(easingX){easingX=this.factoryEasing(easingX);easingX.setStartTime(now);easingX.setStartValue(this.x);easingX.setEndValue(x);if("duration" in animation){easingX.setDuration(animation.duration)}}if(easingY){easingY=this.factoryEasing(easingY);easingY.setStartTime(now);easingY.setStartValue(this.y);easingY.setEndValue(y);if("duration" in animation){easingY.setDuration(animation.duration)}}return this.animate(easingX,easingY)},doAnimationFrame:function(){var me=this,easingX=me.activeEasingX,easingY=me.activeEasingY,now=Date.now(),x,y;this.animationFrameId=requestAnimationFrame(this.doAnimationFrame);if(!me.isAnimating){return}me.lastRun=now;if(easingX===null&&easingY===null){me.stopAnimation();return}if(easingX!==null){me.x=x=Math.round(easingX.getValue());if(easingX.isEnded){me.activeEasingX=null;me.fireEvent("axisanimationend",me,"x",x)}}else{x=me.x}if(easingY!==null){me.y=y=Math.round(easingY.getValue());if(easingY.isEnded){me.activeEasingY=null;me.fireEvent("axisanimationend",me,"y",y)}}else{y=me.y}if(me.lastX!==x||me.lastY!==y){me.doTranslate(x,y);me.lastX=x;me.lastY=y}me.fireEvent("animationframe",me,x,y)},stopAnimation:function(){if(!this.isAnimating){return}this.activeEasingX=null;this.activeEasingY=null;this.isAnimating=false;cancelAnimationFrame(this.animationFrameId);this.fireEvent("animationend",this,this.x,this.y)},refresh:function(){this.translate(this.x,this.y)},destroy:function(){if(this.isAnimating){this.stopAnimation()}this.callParent(arguments)}});Ext.define("Ext.util.translatable.Dom",{extend:"Ext.util.translatable.Abstract",config:{element:null},applyElement:function(element){if(!element){return}return Ext.get(element)},updateElement:function(){this.refresh()}});Ext.define("Ext.util.translatable.CssTransform",{extend:"Ext.util.translatable.Dom",doTranslate:function(){this.getElement().dom.style.webkitTransform="translate3d("+this.x+"px, "+this.y+"px, 0px)"},destroy:function(){var element=this.getElement();if(element&&!element.isDestroyed){element.dom.style.webkitTransform=null}this.callSuper()}});Ext.define("Ext.util.translatable.ScrollPosition",{extend:"Ext.util.translatable.Dom",wrapperWidth:0,wrapperHeight:0,config:{useWrapper:true},getWrapper:function(){var wrapper=this.wrapper,element=this.getElement(),container;if(!wrapper){container=element.getParent();if(!container){return null}if(this.getUseWrapper()){wrapper=element.wrap()}else{wrapper=container}element.addCls("x-translatable");wrapper.addCls("x-translatable-container");this.wrapper=wrapper;wrapper.on("resize","onWrapperResize",this);wrapper.on("painted","refresh",this);this.refresh()}return wrapper},doTranslate:function(x,y){var wrapper=this.getWrapper(),dom;if(wrapper){dom=wrapper.dom;if(typeof x=="number"){dom.scrollLeft=this.wrapperWidth-x}if(typeof y=="number"){dom.scrollTop=this.wrapperHeight-y}}},onWrapperResize:function(wrapper,info){this.wrapperWidth=info.width;this.wrapperHeight=info.height;this.refresh()},destroy:function(){var element=this.getElement(),wrapper=this.wrapper;if(wrapper){if(!element.isDestroyed){if(this.getUseWrapper()){wrapper.doReplaceWith(element)}element.removeCls("x-translatable")}wrapper.removeCls("x-translatable-container");wrapper.un("resize","onWrapperResize",this);wrapper.un("painted","refresh",this);delete this.wrapper;delete this._element}this.callSuper()}});Ext.define("Ext.util.Translatable",{requires:["Ext.util.translatable.CssTransform","Ext.util.translatable.ScrollPosition"],constructor:function(config){var namespace=Ext.util.translatable,CssTransform=namespace.CssTransform,ScrollPosition=namespace.ScrollPosition,classReference;if(typeof config=="object"&&"translationMethod" in config){if(config.translationMethod==="scrollposition"){classReference=ScrollPosition}else{if(config.translationMethod==="csstransform"){classReference=CssTransform}}}if(!classReference){if(Ext.os.is.Android2){classReference=ScrollPosition}else{classReference=CssTransform}}return new classReference(config)}});Ext.define("Ext.behavior.Translatable",{extend:"Ext.behavior.Behavior",requires:["Ext.util.Translatable"],setConfig:function(config){var translatable=this.translatable,component=this.component;if(config){if(!translatable){this.translatable=translatable=new Ext.util.Translatable(config);translatable.setElement(component.renderElement);translatable.on("destroy","onTranslatableDestroy",this)}else{if(Ext.isObject(config)){translatable.setConfig(config)}}}else{if(translatable){translatable.destroy()}}return this},getTranslatable:function(){return this.translatable},onTranslatableDestroy:function(){delete this.translatable},onComponentDestroy:function(){var translatable=this.translatable;if(translatable){translatable.destroy()}}});Ext.define("Ext.util.Draggable",{isDraggable:true,mixins:["Ext.mixin.Observable"],requires:["Ext.util.Translatable"],config:{cls:Ext.baseCSSPrefix+"draggable",draggingCls:Ext.baseCSSPrefix+"dragging",element:null,constraint:"container",disabled:null,direction:"both",initialOffset:{x:0,y:0},translatable:{}},DIRECTION_BOTH:"both",DIRECTION_VERTICAL:"vertical",DIRECTION_HORIZONTAL:"horizontal",defaultConstraint:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}},containerWidth:0,containerHeight:0,width:0,height:0,constructor:function(config){var element;this.extraConstraint={};this.initialConfig=config;this.offset={x:0,y:0};this.listeners={dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",resize:"onElementResize",scope:this};if(config&&config.element){element=config.element;delete config.element;this.setElement(element)}return this},applyElement:function(element){if(!element){return}return Ext.get(element)},updateElement:function(element){element.on(this.listeners);this.initConfig(this.initialConfig)},updateInitialOffset:function(initialOffset){if(typeof initialOffset=="number"){initialOffset={x:initialOffset,y:initialOffset}}var offset=this.offset,x,y;offset.x=x=initialOffset.x;offset.y=y=initialOffset.y;this.getTranslatable().translate(x,y)},updateCls:function(cls){this.getElement().addCls(cls)},applyTranslatable:function(translatable,currentInstance){translatable=Ext.factory(translatable,Ext.util.Translatable,currentInstance);translatable.setElement(this.getElement());return translatable},setExtraConstraint:function(constraint){this.extraConstraint=constraint||{};this.refreshConstraint();return this},addExtraConstraint:function(constraint){Ext.merge(this.extraConstraint,constraint);this.refreshConstraint();return this},applyConstraint:function(newConstraint){this.currentConstraint=newConstraint;if(!newConstraint){newConstraint=this.defaultConstraint}if(newConstraint==="container"){return Ext.merge(this.getContainerConstraint(),this.extraConstraint)}return Ext.merge({},this.extraConstraint,newConstraint)},updateConstraint:function(){this.refreshOffset()},getContainerConstraint:function(){var container=this.getContainer(),element=this.getElement();if(!container||!element.dom){return this.defaultConstraint}return{min:{x:0,y:0},max:{x:this.containerWidth-this.width,y:this.containerHeight-this.height}}},getContainer:function(){var container=this.container;if(!container){container=this.getElement().getParent();if(container){this.container=container;container.on({resize:"onContainerResize",destroy:"onContainerDestroy",scope:this})}}return container},onElementResize:function(element,info){this.width=info.width;this.height=info.height;this.refresh()},onContainerResize:function(container,info){this.containerWidth=info.width;this.containerHeight=info.height;this.refresh()},onContainerDestroy:function(){delete this.container;delete this.containerSizeMonitor},detachListeners:function(){this.getElement().un(this.listeners)},isAxisEnabled:function(axis){var direction=this.getDirection();if(axis==="x"){return(direction===this.DIRECTION_BOTH||direction===this.DIRECTION_HORIZONTAL)}return(direction===this.DIRECTION_BOTH||direction===this.DIRECTION_VERTICAL)},onDragStart:function(e){if(this.getDisabled()){return false}var offset=this.offset;this.fireAction("dragstart",[this,e,offset.x,offset.y],this.initDragStart)},initDragStart:function(me,e,offsetX,offsetY){this.dragStartOffset={x:offsetX,y:offsetY};this.isDragging=true;this.getElement().addCls(this.getDraggingCls())},onDrag:function(e){if(!this.isDragging){return}var startOffset=this.dragStartOffset;this.fireAction("drag",[this,e,startOffset.x+e.deltaX,startOffset.y+e.deltaY],this.doDrag)},doDrag:function(me,e,offsetX,offsetY){me.setOffset(offsetX,offsetY)},onDragEnd:function(e){if(!this.isDragging){return}this.onDrag(e);this.isDragging=false;this.getElement().removeCls(this.getDraggingCls());this.fireEvent("dragend",this,e,this.offset.x,this.offset.y)},setOffset:function(x,y,animation){var currentOffset=this.offset,constraint=this.getConstraint(),minOffset=constraint.min,maxOffset=constraint.max,min=Math.min,max=Math.max;if(this.isAxisEnabled("x")&&typeof x=="number"){x=min(max(x,minOffset.x),maxOffset.x)}else{x=currentOffset.x}if(this.isAxisEnabled("y")&&typeof y=="number"){y=min(max(y,minOffset.y),maxOffset.y)}else{y=currentOffset.y}currentOffset.x=x;currentOffset.y=y;this.getTranslatable().translate(x,y,animation)},getOffset:function(){return this.offset},refreshConstraint:function(){this.setConstraint(this.currentConstraint)},refreshOffset:function(){var offset=this.offset;this.setOffset(offset.x,offset.y)},refresh:function(){this.refreshConstraint();this.getTranslatable().refresh();this.refreshOffset()},enable:function(){return this.setDisabled(false)},disable:function(){return this.setDisabled(true)},destroy:function(){var translatable=this.getTranslatable();var element=this.getElement();if(element&&!element.isDestroyed){element.removeCls(this.getCls())}this.detachListeners();if(translatable){translatable.destroy()}}},function(){});Ext.define("Ext.behavior.Draggable",{extend:"Ext.behavior.Behavior",requires:["Ext.util.Draggable"],setConfig:function(config){var draggable=this.draggable,component=this.component;if(config){if(!draggable){component.setTranslatable(true);this.draggable=draggable=new Ext.util.Draggable(config);draggable.setTranslatable(component.getTranslatable());draggable.setElement(component.renderElement);draggable.on("destroy","onDraggableDestroy",this);component.on(this.listeners)}else{if(Ext.isObject(config)){draggable.setConfig(config)}}}else{if(draggable){draggable.destroy()}}return this},getDraggable:function(){return this.draggable},onDraggableDestroy:function(){delete this.draggable},onComponentDestroy:function(){var draggable=this.draggable;if(draggable){draggable.destroy()}}});Ext.define("Ext.mixin.Traversable",{extend:"Ext.mixin.Mixin",mixinConfig:{id:"traversable"},setParent:function(parent){this.parent=parent;return this},hasParent:function(){return Boolean(this.parent)},getParent:function(){return this.parent},getAncestors:function(){var ancestors=[],parent=this.getParent();while(parent){ancestors.push(parent);parent=parent.getParent()}return ancestors},getAncestorIds:function(){var ancestorIds=[],parent=this.getParent();while(parent){ancestorIds.push(parent.getId());parent=parent.getParent()}return ancestorIds}});(function(clsPrefix){Ext.define("Ext.Component",{extend:"Ext.AbstractComponent",alternateClassName:"Ext.lib.Component",mixins:["Ext.mixin.Traversable"],requires:["Ext.ComponentManager","Ext.XTemplate","Ext.dom.Element","Ext.behavior.Translatable","Ext.behavior.Draggable"],xtype:"component",observableType:"component",cachedConfig:{baseCls:null,cls:null,floatingCls:clsPrefix+"floating",hiddenCls:clsPrefix+"item-hidden",ui:null,margin:null,padding:null,border:null,styleHtmlCls:clsPrefix+"html",styleHtmlContent:null},eventedConfig:{flex:null,left:null,top:null,right:null,bottom:null,width:null,height:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,docked:null,centered:null,hidden:null,disabled:null},config:{style:null,html:null,draggable:null,translatable:null,renderTo:null,zIndex:null,tpl:null,enterAnimation:null,exitAnimation:null,showAnimation:null,hideAnimation:null,tplWriteMode:"overwrite",data:null,disabledCls:clsPrefix+"item-disabled",contentEl:null,itemId:undefined,record:null,plugins:null},listenerOptionsRegex:/^(?:delegate|single|delay|buffer|args|prepend|element)$/,alignmentRegex:/^([a-z]+)-([a-z]+)(\?)?$/,isComponent:true,floating:false,rendered:false,isInner:true,dockPositions:{top:true,right:true,bottom:true,left:true},innerElement:null,element:null,template:[],widthLayoutSized:false,heightLayoutSized:false,layoutStretched:false,sizeState:false,sizeFlags:0,LAYOUT_WIDTH:1,LAYOUT_HEIGHT:2,LAYOUT_BOTH:3,LAYOUT_STRETCHED:4,constructor:function(config){var me=this,currentConfig=me.config,id;me.onInitializedListeners=[];me.initialConfig=config;if(config!==undefined&&"id" in config){id=config.id}else{if("id" in currentConfig){id=currentConfig.id}else{id=me.getId()}}me.id=id;me.setId(id);Ext.ComponentManager.register(me);me.initElement();me.initConfig(me.initialConfig);me.refreshSizeState=me.doRefreshSizeState;me.refreshFloating=me.doRefreshFloating;if(me.refreshSizeStateOnInitialized){me.refreshSizeState()}if(me.refreshFloatingOnInitialized){me.refreshFloating()}me.initialize();me.triggerInitialized();if(me.config.fullscreen){me.fireEvent("fullscreen",me)}me.fireEvent("initialize",me)},beforeInitConfig:function(config){this.beforeInitialize.apply(this,arguments)},beforeInitialize:Ext.emptyFn,initialize:Ext.emptyFn,getTemplate:function(){return this.template},getElementConfig:function(){return{reference:"element",classList:["x-unsized"],children:this.getTemplate()}},triggerInitialized:function(){var listeners=this.onInitializedListeners,ln=listeners.length,listener,fn,scope,args,i;if(!this.initialized){this.initialized=true;if(ln>0){for(i=0;i<ln;i++){listener=listeners[i];fn=listener.fn;scope=listener.scope;args=listener.args;if(typeof fn=="string"){scope[fn].apply(scope,args)}else{fn.apply(scope,args)}}listeners.length=0}}},onInitialized:function(fn,scope,args){var listeners=this.onInitializedListeners;if(!scope){scope=this}if(this.initialized){if(typeof fn=="string"){scope[fn].apply(scope,args)}else{fn.apply(scope,args)}}else{listeners.push({fn:fn,scope:scope,args:args})}},renderTo:function(container,insertBeforeElement){var dom=this.renderElement.dom,containerDom=Ext.getDom(container),insertBeforeChildDom=Ext.getDom(insertBeforeElement);if(containerDom){if(insertBeforeChildDom){containerDom.insertBefore(dom,insertBeforeChildDom)}else{containerDom.appendChild(dom)}this.setRendered(Boolean(dom.offsetParent))}},setParent:function(parent){var currentParent=this.parent;if(parent&&currentParent&&currentParent!==parent){currentParent.remove(this,false)}this.parent=parent;return this},applyPlugins:function(config){var ln,i,configObj;if(!config){return config}config=[].concat(config);for(i=0,ln=config.length;i<ln;i++){configObj=config[i];config[i]=Ext.factory(configObj,"Ext.plugin.Plugin",null,"plugin")}return config},updatePlugins:function(newPlugins,oldPlugins){var ln,i;if(newPlugins){for(i=0,ln=newPlugins.length;i<ln;i++){newPlugins[i].init(this)}}if(oldPlugins){for(i=0,ln=oldPlugins.length;i<ln;i++){Ext.destroy(oldPlugins[i])}}},updateRenderTo:function(newContainer){this.renderTo(newContainer)},updateStyle:function(style){this.element.applyStyles(style)},updateBorder:function(border){this.element.setBorder(border)},updatePadding:function(padding){this.innerElement.setPadding(padding)},updateMargin:function(margin){this.element.setMargin(margin)},updateUi:function(newUi,oldUi){var baseCls=this.getBaseCls();if(baseCls){if(oldUi){this.element.removeCls(oldUi,baseCls)}if(newUi){this.element.addCls(newUi,baseCls)}}},applyBaseCls:function(baseCls){return baseCls||clsPrefix+this.xtype},updateBaseCls:function(newBaseCls,oldBaseCls){var me=this,ui=me.getUi();if(newBaseCls){this.element.addCls(newBaseCls);if(ui){this.element.addCls(newBaseCls,null,ui)}}if(oldBaseCls){this.element.removeCls(oldBaseCls);if(ui){this.element.removeCls(oldBaseCls,null,ui)}}},addCls:function(cls,prefix,suffix){var oldCls=this.getCls(),newCls=(oldCls)?oldCls.slice():[],ln,i,cachedCls;prefix=prefix||"";suffix=suffix||"";if(typeof cls=="string"){cls=[cls]}ln=cls.length;if(!newCls.length&&prefix===""&&suffix===""){newCls=cls}else{for(i=0;i<ln;i++){cachedCls=prefix+cls[i]+suffix;if(newCls.indexOf(cachedCls)==-1){newCls.push(cachedCls)}}}this.setCls(newCls)},removeCls:function(cls,prefix,suffix){var oldCls=this.getCls(),newCls=(oldCls)?oldCls.slice():[],ln,i;prefix=prefix||"";suffix=suffix||"";if(typeof cls=="string"){newCls=Ext.Array.remove(newCls,prefix+cls+suffix)}else{ln=cls.length;for(i=0;i<ln;i++){newCls=Ext.Array.remove(newCls,prefix+cls[i]+suffix)}}this.setCls(newCls)},replaceCls:function(oldCls,newCls,prefix,suffix){var cls=this.getCls(),array=(cls)?cls.slice():[],ln,i,cachedCls;prefix=prefix||"";suffix=suffix||"";if(typeof oldCls=="string"){array=Ext.Array.remove(array,prefix+oldCls+suffix)}else{if(oldCls){ln=oldCls.length;for(i=0;i<ln;i++){array=Ext.Array.remove(array,prefix+oldCls[i]+suffix)}}}if(typeof newCls=="string"){array.push(prefix+newCls+suffix)}else{if(newCls){ln=newCls.length;if(!array.length&&prefix===""&&suffix===""){array=newCls}else{for(i=0;i<ln;i++){cachedCls=prefix+newCls[i]+suffix;if(array.indexOf(cachedCls)==-1){array.push(cachedCls)}}}}}this.setCls(array)},toggleCls:function(className,force){this.element.toggleCls(className,force);return this},applyCls:function(cls){if(typeof cls=="string"){cls=[cls]}if(!cls||!cls.length){cls=null}return cls},updateCls:function(newCls,oldCls){if(this.element&&((newCls&&!oldCls)||(!newCls&&oldCls)||newCls.length!=oldCls.length||Ext.Array.difference(newCls,oldCls).length>0)){this.element.replaceCls(oldCls,newCls)}},updateStyleHtmlCls:function(newHtmlCls,oldHtmlCls){var innerHtmlElement=this.innerHtmlElement,innerElement=this.innerElement;if(this.getStyleHtmlContent()&&oldHtmlCls){if(innerHtmlElement){innerHtmlElement.replaceCls(oldHtmlCls,newHtmlCls)}else{innerElement.replaceCls(oldHtmlCls,newHtmlCls)}}},applyStyleHtmlContent:function(config){return Boolean(config)},updateStyleHtmlContent:function(styleHtmlContent){var htmlCls=this.getStyleHtmlCls(),innerElement=this.innerElement,innerHtmlElement=this.innerHtmlElement;if(styleHtmlContent){if(innerHtmlElement){innerHtmlElement.addCls(htmlCls)}else{innerElement.addCls(htmlCls)}}else{if(innerHtmlElement){innerHtmlElement.removeCls(htmlCls)}else{innerElement.addCls(htmlCls)}}},applyContentEl:function(contentEl){if(contentEl){return Ext.get(contentEl)}},updateContentEl:function(newContentEl,oldContentEl){if(oldContentEl){oldContentEl.hide();Ext.getBody().append(oldContentEl)}if(newContentEl){this.setHtml(newContentEl.dom);newContentEl.show()}},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},isCentered:function(){return Boolean(this.getCentered())},isFloating:function(){return this.floating},isDocked:function(){return Boolean(this.getDocked())},isInnerItem:function(){return this.isInner},setIsInner:function(isInner){if(isInner!==this.isInner){this.isInner=isInner;if(this.initialized){this.fireEvent("innerstatechange",this,isInner)}}},filterPositionValue:function(value){if(value===""||value==="auto"){value=null}return value},filterLengthValue:function(value){if(value==="auto"||(!value&&value!==0)){return null}return value},applyTop:function(top){return this.filterPositionValue(top)},applyRight:function(right){return this.filterPositionValue(right)},applyBottom:function(bottom){return this.filterPositionValue(bottom)},applyLeft:function(left){return this.filterPositionValue(left)},applyWidth:function(width){return this.filterLengthValue(width)},applyHeight:function(height){return this.filterLengthValue(height)},applyMinWidth:function(width){return this.filterLengthValue(width)},applyMinHeight:function(height){return this.filterLengthValue(height)},applyMaxWidth:function(width){return this.filterLengthValue(width)},applyMaxHeight:function(height){return this.filterLengthValue(height)},doSetTop:function(top){this.element.setTop(top);this.refreshFloating()},doSetRight:function(right){this.element.setRight(right);this.refreshFloating()},doSetBottom:function(bottom){this.element.setBottom(bottom);this.refreshFloating()},doSetLeft:function(left){this.element.setLeft(left);this.refreshFloating()},doSetWidth:function(width){this.element.setWidth(width);this.refreshSizeState()},doSetHeight:function(height){this.element.setHeight(height);this.refreshSizeState()},applyFlex:function(flex){if(flex){flex=Number(flex);if(isNaN(flex)){flex=null}}else{flex=null}return flex},doSetFlex:Ext.emptyFn,refreshSizeState:function(){this.refreshSizeStateOnInitialized=true},doRefreshSizeState:function(){var hasWidth=this.getWidth()!==null||this.widthLayoutSized||(this.getLeft()!==null&&this.getRight()!==null),hasHeight=this.getHeight()!==null||this.heightLayoutSized||(this.getTop()!==null&&this.getBottom()!==null),stretched=this.layoutStretched||(!hasHeight&&this.getMinHeight()!==null),state=hasWidth&&hasHeight,flags=(hasWidth&&this.LAYOUT_WIDTH)|(hasHeight&&this.LAYOUT_HEIGHT)|(stretched&&this.LAYOUT_STRETCHED);if(!state&&stretched){state=null}this.setSizeState(state);this.setSizeFlags(flags)},setLayoutSizeFlags:function(flags){this.layoutStretched=!!(flags&this.LAYOUT_STRETCHED);this.widthLayoutSized=!!(flags&this.LAYOUT_WIDTH);this.heightLayoutSized=!!(flags&this.LAYOUT_HEIGHT);this.refreshSizeState()},setSizeFlags:function(flags){if(flags!==this.sizeFlags){this.sizeFlags=flags;if(this.initialized){this.fireEvent("sizeflagschange",this,flags)}}},getSizeFlags:function(){if(!this.initialized){this.doRefreshSizeState()}return this.sizeFlags},setSizeState:function(state){if(state!==this.sizeState){this.sizeState=state;this.element.setSizeState(state);if(this.initialized){this.fireEvent("sizestatechange",this,state)}}},getSizeState:function(){if(!this.initialized){this.doRefreshSizeState()}return this.sizeState},doSetMinWidth:function(width){this.element.setMinWidth(width)},doSetMinHeight:function(height){this.element.setMinHeight(height);this.refreshSizeState()},doSetMaxWidth:function(width){this.element.setMaxWidth(width)},doSetMaxHeight:function(height){this.element.setMaxHeight(height)},applyCentered:function(centered){centered=Boolean(centered);if(centered){this.refreshInnerState=Ext.emptyFn;if(this.isFloating()){this.resetFloating()}if(this.isDocked()){this.setDocked(false)}this.setIsInner(false);delete this.refreshInnerState}return centered},doSetCentered:function(centered){this.toggleCls(this.getFloatingCls(),centered);if(!centered){this.refreshInnerState()}},applyDocked:function(docked){if(!docked){return null}if(!/^(top|right|bottom|left)$/.test(docked)){Ext.Logger.error("Invalid docking position of '"+docked.position+"', must be either 'top', 'right', 'bottom', 'left' or `null` (for no docking)",this);return}this.refreshInnerState=Ext.emptyFn;if(this.isFloating()){this.resetFloating()}if(this.isCentered()){this.setCentered(false)}this.setIsInner(false);delete this.refreshInnerState;return docked},doSetDocked:function(docked,oldDocked){this.fireEvent("afterdockedchange",this,docked,oldDocked);if(!docked){this.refreshInnerState()}},resetFloating:function(){this.setTop(null);this.setRight(null);this.setBottom(null);this.setLeft(null)},refreshInnerState:function(){this.setIsInner(!this.isCentered()&&!this.isFloating()&&!this.isDocked())},refreshFloating:function(){this.refreshFloatingOnInitialized=true},doRefreshFloating:function(){var floating=true,floatingCls=this.getFloatingCls();if(this.getTop()===null&&this.getBottom()===null&&this.getRight()===null&&this.getLeft()===null){floating=false}else{this.refreshSizeState()}if(floating!==this.floating){this.floating=floating;if(floating){this.refreshInnerState=Ext.emptyFn;if(this.isCentered()){this.setCentered(false)}if(this.isDocked()){this.setDocked(false)}this.setIsInner(false);delete this.refreshInnerState}this.element.toggleCls(floatingCls,floating);if(this.initialized){this.fireEvent("floatingchange",this,floating)}if(!floating){this.refreshInnerState()}}},updateFloatingCls:function(newFloatingCls,oldFloatingCls){if(this.isFloating()){this.replaceCls(oldFloatingCls,newFloatingCls)}},applyDisabled:function(disabled){return Boolean(disabled)},doSetDisabled:function(disabled){this.element[disabled?"addCls":"removeCls"](this.getDisabledCls())},updateDisabledCls:function(newDisabledCls,oldDisabledCls){if(this.isDisabled()){this.element.replaceCls(oldDisabledCls,newDisabledCls)}},disable:function(){this.setDisabled(true)},enable:function(){this.setDisabled(false)},isDisabled:function(){return this.getDisabled()},applyZIndex:function(zIndex){if(!zIndex&&zIndex!==0){zIndex=null}if(zIndex!==null){zIndex=Number(zIndex);if(isNaN(zIndex)){zIndex=null}}return zIndex},updateZIndex:function(zIndex){var element=this.element,domStyle;if(element&&!element.isDestroyed){domStyle=element.dom.style;if(zIndex!==null){domStyle.setProperty("z-index",zIndex,"important")}else{domStyle.removeProperty("z-index")}}},getInnerHtmlElement:function(){var innerHtmlElement=this.innerHtmlElement,styleHtmlCls=this.getStyleHtmlCls();if(!innerHtmlElement||!innerHtmlElement.dom||!innerHtmlElement.dom.parentNode){this.innerHtmlElement=innerHtmlElement=this.innerElement.createChild({cls:"x-innerhtml "});if(this.getStyleHtmlContent()){this.innerHtmlElement.addCls(styleHtmlCls);this.innerElement.removeCls(styleHtmlCls)}}return innerHtmlElement},updateHtml:function(html){var innerHtmlElement=this.getInnerHtmlElement();if(Ext.isElement(html)){innerHtmlElement.setHtml("");innerHtmlElement.append(html)}else{innerHtmlElement.setHtml(html)}},applyHidden:function(hidden){return Boolean(hidden)},doSetHidden:function(hidden){var element=this.renderElement;if(element.isDestroyed){return}if(hidden){element.hide()}else{element.show()}if(this.element){this.element[hidden?"addCls":"removeCls"](this.getHiddenCls())}this.fireEvent(hidden?"hide":"show",this)},updateHiddenCls:function(newHiddenCls,oldHiddenCls){if(this.isHidden()){this.element.replaceCls(oldHiddenCls,newHiddenCls)}},isHidden:function(){return this.getHidden()},hide:function(animation){if(!this.getHidden()){if(animation===undefined||(animation&&animation.isComponent)){animation=this.getHideAnimation()}if(animation){if(animation===true){animation="fadeOut"}this.onBefore({hiddenchange:"animateFn",scope:this,single:true,args:[animation]})}this.setHidden(true)}return this},show:function(animation){var hidden=this.getHidden();if(hidden||hidden===null){if(animation===true){animation="fadeIn"}else{if(animation===undefined||(animation&&animation.isComponent)){animation=this.getShowAnimation()}}if(animation){this.onBefore({hiddenchange:"animateFn",scope:this,single:true,args:[animation]})}this.setHidden(false)}return this},animateFn:function(animation,component,newState,oldState,options,controller){if(animation&&(!newState||(newState&&this.isPainted()))){var anim=new Ext.fx.Animation(animation);anim.setElement(component.element);if(newState){anim.setOnEnd(function(){controller.resume()});controller.pause()}Ext.Animator.run(anim)}},setVisibility:function(isVisible){this.renderElement.setVisibility(isVisible)},isRendered:function(){return this.rendered},isPainted:function(){return this.renderElement.isPainted()},applyTpl:function(config){return(Ext.isObject(config)&&config.isTemplate)?config:new Ext.XTemplate(config)},applyData:function(data){if(Ext.isObject(data)){return Ext.apply({},data)}else{if(!data){data={}}}return data},updateData:function(newData){var me=this;if(newData){var tpl=me.getTpl(),tplWriteMode=me.getTplWriteMode();if(tpl){tpl[tplWriteMode](me.getInnerHtmlElement(),newData)}this.fireEvent("updatedata",me,newData)}},applyRecord:function(config){if(config&&Ext.isObject(config)&&config.isModel){return config}return null},updateRecord:function(newRecord,oldRecord){var me=this;if(oldRecord){oldRecord.unjoin(me)}if(!newRecord){me.updateData("")}else{newRecord.join(me);me.updateData(newRecord.getData(true))}},afterEdit:function(){this.updateRecord(this.getRecord())},afterErase:function(){this.setRecord(null)},applyItemId:function(itemId){return itemId||this.getId()},isXType:function(xtype,shallow){if(shallow){return this.xtypes.indexOf(xtype)!=-1}return Boolean(this.xtypesMap[xtype])},getXTypes:function(){return this.xtypesChain.join("/")},getDraggableBehavior:function(){var behavior=this.draggableBehavior;if(!behavior){behavior=this.draggableBehavior=new Ext.behavior.Draggable(this)}return behavior},applyDraggable:function(config){this.getDraggableBehavior().setConfig(config)},getDraggable:function(){return this.getDraggableBehavior().getDraggable()},getTranslatableBehavior:function(){var behavior=this.translatableBehavior;if(!behavior){behavior=this.translatableBehavior=new Ext.behavior.Translatable(this)}return behavior},applyTranslatable:function(config){this.getTranslatableBehavior().setConfig(config)},getTranslatable:function(){return this.getTranslatableBehavior().getTranslatable()},translateAxis:function(axis,value,animation){var x,y;if(axis==="x"){x=value}else{y=value}return this.translate(x,y,animation)},translate:function(){var translatable=this.getTranslatable();if(!translatable){this.setTranslatable(true);translatable=this.getTranslatable()}translatable.translate.apply(translatable,arguments)},setRendered:function(rendered){var wasRendered=this.rendered;if(rendered!==wasRendered){this.rendered=rendered;return true}return false},setSize:function(width,height){if(width!=undefined){this.setWidth(width)}if(height!=undefined){this.setHeight(height)}},doAddListener:function(name,fn,scope,options,order){if(options&&"element" in options){if(this.referenceList.indexOf(options.element)===-1){Ext.Logger.error("Adding event listener with an invalid element reference of '"+options.element+"' for this component. Available values are: '"+this.referenceList.join("', '")+"'",this)}return this[options.element].doAddListener(name,fn,scope||this,options,order)}if(name=="painted"||name=="resize"){return this.element.doAddListener(name,fn,scope||this,options,order)}return this.callParent(arguments)},doRemoveListener:function(name,fn,scope,options,order){if(options&&"element" in options){if(this.referenceList.indexOf(options.element)===-1){Ext.Logger.error("Removing event listener with an invalid element reference of '"+options.element+"' for this component. Available values are: '"+this.referenceList.join('", "')+"'",this)}this[options.element].doRemoveListener(name,fn,scope||this,options,order)}return this.callParent(arguments)},showBy:function(component,alignment){var me=this,viewport=Ext.Viewport,parent=me.getParent();me.setVisibility(false);if(parent!==viewport){viewport.add(me)}me.show();me.on({hide:"onShowByErased",destroy:"onShowByErased",single:true,scope:me});viewport.on("resize","alignTo",me,{args:[component,alignment]});me.alignTo(component,alignment);me.setVisibility(true)},onShowByErased:function(){Ext.Viewport.un("resize","alignTo",this)},alignTo:function(component,alignment){var alignToElement=component.isComponent?component.renderElement:component,element=this.renderElement,alignToBox=alignToElement.getPageBox(),constrainBox=this.getParent().element.getPageBox(),box=element.getPageBox(),alignToHeight=alignToBox.height,alignToWidth=alignToBox.width,height=box.height,width=box.width;constrainBox.bottom-=5;constrainBox.height-=10;constrainBox.left+=5;constrainBox.right-=5;constrainBox.top+=5;constrainBox.width-=10;if(!alignment||alignment==="auto"){if(constrainBox.bottom-alignToBox.bottom<height){if(alignToBox.top-constrainBox.top<height){if(alignToBox.left-constrainBox.left<width){alignment="cl-cr?"}else{alignment="cr-cl?"}}else{alignment="bc-tc?"}}else{alignment="tc-bc?"}}var matches=alignment.match(this.alignmentRegex);if(!matches){Ext.Logger.error("Invalid alignment value of '"+alignment+"'")}var from=matches[1].split(""),to=matches[2].split(""),constrained=(matches[3]==="?"),fromVertical=from[0],fromHorizontal=from[1]||fromVertical,toVertical=to[0],toHorizontal=to[1]||toVertical,top=alignToBox.top,left=alignToBox.left,halfAlignHeight=alignToHeight/2,halfAlignWidth=alignToWidth/2,halfWidth=width/2,halfHeight=height/2,maxLeft,maxTop;switch(fromVertical){case"t":switch(toVertical){case"c":top+=halfAlignHeight;break;case"b":top+=alignToHeight}break;case"b":switch(toVertical){case"c":top-=(height-halfAlignHeight);break;case"t":top-=height;break;case"b":top-=height-alignToHeight}break;case"c":switch(toVertical){case"t":top-=halfHeight;break;case"c":top-=(halfHeight-halfAlignHeight);break;case"b":top-=(halfHeight-alignToHeight)}break}switch(fromHorizontal){case"l":switch(toHorizontal){case"c":left+=halfAlignHeight;break;case"r":left+=alignToWidth}break;case"r":switch(toHorizontal){case"r":left-=(width-alignToWidth);break;case"c":left-=(width-halfWidth);break;case"l":left-=width}break;case"c":switch(toHorizontal){case"l":left-=halfWidth;break;case"c":left-=(halfWidth-halfAlignWidth);break;case"r":left-=(halfWidth-alignToWidth)}break}if(constrained){maxLeft=(constrainBox.left+constrainBox.width)-width;maxTop=(constrainBox.top+constrainBox.height)-height;left=Math.max(constrainBox.left,Math.min(maxLeft,left));top=Math.max(constrainBox.top,Math.min(maxTop,top))}this.setLeft(left);this.setTop(top)},up:function(selector){var result=this.parent;if(selector){for(;result;result=result.parent){if(Ext.ComponentQuery.is(result,selector)){return result}}}return result},getBubbleTarget:function(){return this.getParent()},destroy:function(){this.destroy=Ext.emptyFn;var parent=this.getParent(),referenceList=this.referenceList,i,ln,reference;this.isDestroying=true;Ext.destroy(this.getTranslatable(),this.getPlugins());if(parent){parent.remove(this,false)}for(i=0,ln=referenceList.length;i<ln;i++){reference=referenceList[i];this[reference].destroy();delete this[reference]}Ext.destroy(this.innerHtmlElement);this.setRecord(null);this.callSuper();Ext.ComponentManager.unregister(this)}},function(){})})(Ext.baseCSSPrefix);Ext.define("Ext.layout.wrapper.Inner",{config:{sizeState:null,container:null},constructor:function(config){this.initConfig(config)},getElement:function(){return this.getContainer().bodyElement},setInnerWrapper:Ext.emptyFn,getInnerWrapper:Ext.emptyFn});Ext.define("Ext.layout.Abstract",{mixins:["Ext.mixin.Observable"],isLayout:true,constructor:function(config){this.initialConfig=config},setContainer:function(container){this.container=container;this.initConfig(this.initialConfig);return this},onItemAdd:function(){},onItemRemove:function(){},onItemMove:function(){},onItemCenteredChange:function(){},onItemFloatingChange:function(){},onItemDockedChange:function(){},onItemInnerStateChange:function(){}});Ext.define("Ext.mixin.Bindable",{extend:"Ext.mixin.Mixin",mixinConfig:{id:"bindable"},bind:function(instance,boundMethod,bindingMethod,preventDefault){if(!bindingMethod){bindingMethod=boundMethod}var boundFn=instance[boundMethod],fn;instance[boundMethod]=fn=function(){var binding=fn.$binding,scope=binding.bindingScope,args=Array.prototype.slice.call(arguments);args.push(arguments);if(!binding.preventDefault&&scope[binding.bindingMethod].apply(scope,args)!==false){return binding.boundFn.apply(this,arguments)}};fn.$binding={preventDefault:!!preventDefault,boundFn:boundFn,bindingMethod:bindingMethod,bindingScope:this};return this},unbind:function(instance,boundMethod,bindingMethod){if(!bindingMethod){bindingMethod=boundMethod}var fn=instance[boundMethod],binding=fn.$binding,boundFn,currentBinding;while(binding){boundFn=binding.boundFn;if(binding.bindingMethod===bindingMethod&&binding.bindingScope===this){if(currentBinding){currentBinding.boundFn=boundFn}else{instance[boundMethod]=boundFn}return this}currentBinding=binding;binding=binding.boundFn}return this}});Ext.define("Ext.util.Wrapper",{mixins:["Ext.mixin.Bindable"],constructor:function(elementConfig,wrappedElement){var element=this.link("element",Ext.Element.create(elementConfig));if(wrappedElement){element.insertBefore(wrappedElement);this.wrap(wrappedElement)}},bindSize:function(sizeName){var wrappedElement=this.wrappedElement,boundMethodName;this.boundSizeName=sizeName;this.boundMethodName=boundMethodName=sizeName==="width"?"setWidth":"setHeight";this.bind(wrappedElement,boundMethodName,"onBoundSizeChange");wrappedElement[boundMethodName].call(wrappedElement,wrappedElement.getStyleValue(sizeName))},onBoundSizeChange:function(size,args){var element=this.element;if(typeof size==="string"&&size.substr(-1)==="%"){args[0]="100%"}else{size=""}element[this.boundMethodName].call(element,size)},wrap:function(wrappedElement){var element=this.element,innerDom;this.wrappedElement=wrappedElement;innerDom=element.dom;while(innerDom.firstElementChild!==null){innerDom=innerDom.firstElementChild}innerDom.appendChild(wrappedElement.dom)},destroy:function(){var element=this.element,dom=element.dom,wrappedElement=this.wrappedElement,boundMethodName=this.boundMethodName,parentNode=dom.parentNode,size;if(boundMethodName){this.unbind(wrappedElement,boundMethodName,"onBoundSizeChange");size=element.getStyle(this.boundSizeName);if(size){wrappedElement[boundMethodName].call(wrappedElement,size)}}if(parentNode){if(!wrappedElement.isDestroyed){parentNode.replaceChild(dom.firstElementChild,dom)}delete this.wrappedElement}this.callSuper()}});Ext.define("Ext.layout.wrapper.BoxDock",{config:{direction:"horizontal",element:{className:"x-dock"},bodyElement:{className:"x-dock-body"},innerWrapper:null,sizeState:false,container:null},positionMap:{top:"start",left:"start",bottom:"end",right:"end"},constructor:function(config){this.items={start:[],end:[]};this.itemsCount=0;this.initConfig(config)},addItems:function(items){var i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];this.addItem(item)}},addItem:function(item){var docked=item.getDocked(),position=this.positionMap[docked],wrapper=item.$dockWrapper,container=this.getContainer(),index=container.indexOf(item),element=item.element,items=this.items,sideItems=items[position],i,ln,sibling,referenceElement,siblingIndex;if(wrapper){wrapper.removeItem(item)}item.$dockWrapper=this;item.addCls("x-dock-item");item.addCls("x-docked-"+docked);for(i=0,ln=sideItems.length;i<ln;i++){sibling=sideItems[i];siblingIndex=container.indexOf(sibling);if(siblingIndex>index){referenceElement=sibling.element;sideItems.splice(i,0,item);break}}if(!referenceElement){sideItems.push(item);referenceElement=this.getBodyElement()}this.itemsCount++;if(position==="start"){element.insertBefore(referenceElement)}else{element.insertAfter(referenceElement)}},removeItem:function(item){var position=item.getDocked(),items=this.items[this.positionMap[position]];Ext.Array.remove(items,item);item.element.detach();delete item.$dockWrapper;item.removeCls("x-dock-item");item.removeCls("x-docked-"+position);if(--this.itemsCount===0){this.destroy()}},getItemsSlice:function(index){var container=this.getContainer(),items=this.items,slice=[],sideItems,i,ln,item;for(sideItems=items.start,i=0,ln=sideItems.length;i<ln;i++){item=sideItems[i];if(container.indexOf(item)>index){slice.push(item)}}for(sideItems=items.end,i=0,ln=sideItems.length;i<ln;i++){item=sideItems[i];if(container.indexOf(item)>index){slice.push(item)}}return slice},applyElement:function(element){return Ext.Element.create(element)},updateElement:function(element){element.addCls("x-dock-"+this.getDirection())},applyBodyElement:function(bodyElement){return Ext.Element.create(bodyElement)},updateBodyElement:function(bodyElement){this.getElement().append(bodyElement)},updateInnerWrapper:function(innerWrapper,oldInnerWrapper){var bodyElement=this.getBodyElement();if(oldInnerWrapper&&oldInnerWrapper.$outerWrapper===this){oldInnerWrapper.getElement().detach();delete oldInnerWrapper.$outerWrapper}if(innerWrapper){innerWrapper.setSizeState(this.getSizeState());innerWrapper.$outerWrapper=this;bodyElement.append(innerWrapper.getElement())}},updateSizeState:function(state){var innerWrapper=this.getInnerWrapper();this.getElement().setSizeState(state);if(innerWrapper){innerWrapper.setSizeState(state)}},destroy:function(){var innerWrapper=this.getInnerWrapper(),outerWrapper=this.$outerWrapper,innerWrapperElement;if(innerWrapper){if(outerWrapper){outerWrapper.setInnerWrapper(innerWrapper)}else{innerWrapperElement=innerWrapper.getElement();if(!innerWrapperElement.isDestroyed){innerWrapperElement.replace(this.getElement())}delete innerWrapper.$outerWrapper}}delete this.$outerWrapper;this.setInnerWrapper(null);this.unlink("_bodyElement","_element");this.callSuper()}});Ext.define("Ext.layout.Default",{extend:"Ext.layout.Abstract",isAuto:true,alias:["layout.default","layout.auto"],requires:["Ext.util.Wrapper","Ext.layout.wrapper.BoxDock","Ext.layout.wrapper.Inner"],config:{animation:null},centerWrapperClass:"x-center",dockWrapperClass:"x-dock",positionMap:{top:"start",left:"start",middle:"center",bottom:"end",right:"end"},positionDirectionMap:{top:"vertical",bottom:"vertical",left:"horizontal",right:"horizontal"},setContainer:function(container){var options={delegate:"> component"};this.dockedItems=[];this.callSuper(arguments);container.on("centeredchange","onItemCenteredChange",this,options,"before").on("floatingchange","onItemFloatingChange",this,options,"before").on("dockedchange","onBeforeItemDockedChange",this,options,"before").on("afterdockedchange","onAfterItemDockedChange",this,options)},monitorSizeStateChange:function(){this.monitorSizeStateChange=Ext.emptyFn;this.container.on("sizestatechange","onContainerSizeStateChange",this)},monitorSizeFlagsChange:function(){this.monitorSizeFlagsChange=Ext.emptyFn;this.container.on("sizeflagschange","onContainerSizeFlagsChange",this)},onItemAdd:function(item){var docked=item.getDocked();if(docked!==null){this.dockItem(item)}else{if(item.isCentered()){this.onItemCenteredChange(item,true)}else{if(item.isFloating()){this.onItemFloatingChange(item,true)}else{this.onItemInnerStateChange(item,true)}}}},onItemInnerStateChange:function(item,isInner,destroying){if(isInner){this.insertInnerItem(item,this.container.innerIndexOf(item))}else{this.removeInnerItem(item)}},insertInnerItem:function(item,index){var container=this.container,containerDom=container.innerElement.dom,itemDom=item.element.dom,nextSibling=container.getInnerAt(index+1),nextSiblingDom=nextSibling?nextSibling.element.dom:null;containerDom.insertBefore(itemDom,nextSiblingDom);return this},insertBodyItem:function(item){var container=this.container.setUseBodyElement(true),bodyDom=container.bodyElement.dom;if(item.getZIndex()===null){item.setZIndex((container.indexOf(item)+1)*2)}bodyDom.insertBefore(item.element.dom,bodyDom.firstChild);return this},removeInnerItem:function(item){item.element.detach()},removeBodyItem:function(item){item.setZIndex(null);item.element.detach()},onItemRemove:function(item,index,destroying){var docked=item.getDocked();if(docked){this.undockItem(item)}else{if(item.isCentered()){this.onItemCenteredChange(item,false)}else{if(item.isFloating()){this.onItemFloatingChange(item,false)}else{this.onItemInnerStateChange(item,false,destroying)}}}},onItemMove:function(item,toIndex,fromIndex){if(item.isCentered()||item.isFloating()){item.setZIndex((toIndex+1)*2)}else{if(item.isInnerItem()){this.insertInnerItem(item,this.container.innerIndexOf(item))}else{this.undockItem(item);this.dockItem(item)}}},onItemCenteredChange:function(item,centered){var wrapperName="$centerWrapper";if(centered){this.insertBodyItem(item);item.link(wrapperName,new Ext.util.Wrapper({className:this.centerWrapperClass},item.element))}else{item.unlink(wrapperName);this.removeBodyItem(item)}},onItemFloatingChange:function(item,floating){if(floating){this.insertBodyItem(item)}else{this.removeBodyItem(item)}},onBeforeItemDockedChange:function(item,docked,oldDocked){if(oldDocked){this.undockItem(item)}},onAfterItemDockedChange:function(item,docked,oldDocked){if(docked){this.dockItem(item)}},onAfterDockedChange:function(item,docked,oldDocked){var parent=item.getParent();if(parent&&docked){parent.getLayout().onAfterItemDockedChange(item,docked,oldDocked)}},onContainerSizeStateChange:function(){var dockWrapper=this.getDockWrapper();if(dockWrapper){dockWrapper.setSizeState(this.container.getSizeState())}},onContainerSizeFlagsChange:function(){var items=this.dockedItems,i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];this.refreshDockedItemLayoutSizeFlags(item)}},refreshDockedItemLayoutSizeFlags:function(item){var container=this.container,dockedDirection=this.positionDirectionMap[item.getDocked()],binaryMask=(dockedDirection==="horizontal")?container.LAYOUT_HEIGHT:container.LAYOUT_WIDTH,flags=(container.getSizeFlags()&binaryMask);item.setLayoutSizeFlags(flags)},dockItem:function(item){var DockClass=Ext.layout.wrapper.BoxDock,dockedItems=this.dockedItems,ln=dockedItems.length,container=this.container,itemIndex=container.indexOf(item),positionDirectionMap=this.positionDirectionMap,direction=positionDirectionMap[item.getDocked()],dockInnerWrapper=this.dockInnerWrapper,referenceDirection,i,dockedItem,index,previousItem,slice,referenceItem,referenceDocked,referenceWrapper,newWrapper,nestedWrapper;this.monitorSizeStateChange();this.monitorSizeFlagsChange();if(!dockInnerWrapper){dockInnerWrapper=this.link("dockInnerWrapper",new Ext.layout.wrapper.Inner({container:this.container}))}if(ln===0){dockedItems.push(item);newWrapper=new DockClass({container:this.container,direction:direction});newWrapper.addItem(item);newWrapper.getElement().replace(dockInnerWrapper.getElement());newWrapper.setInnerWrapper(dockInnerWrapper);container.onInitialized("onContainerSizeStateChange",this)}else{for(i=0;i<ln;i++){dockedItem=dockedItems[i];index=container.indexOf(dockedItem);if(index>itemIndex){referenceItem=previousItem||dockedItems[0];dockedItems.splice(i,0,item);break}previousItem=dockedItem}if(!referenceItem){referenceItem=dockedItems[ln-1];dockedItems.push(item)}referenceDocked=referenceItem.getDocked();referenceWrapper=referenceItem.$dockWrapper;referenceDirection=positionDirectionMap[referenceDocked];if(direction===referenceDirection){referenceWrapper.addItem(item)}else{slice=referenceWrapper.getItemsSlice(itemIndex);newWrapper=new DockClass({container:this.container,direction:direction});if(slice.length>0){if(slice.length===referenceWrapper.itemsCount){nestedWrapper=referenceWrapper;newWrapper.setSizeState(nestedWrapper.getSizeState());newWrapper.getElement().replace(nestedWrapper.getElement())}else{nestedWrapper=new DockClass({container:this.container,direction:referenceDirection});nestedWrapper.setInnerWrapper(referenceWrapper.getInnerWrapper());nestedWrapper.addItems(slice);referenceWrapper.setInnerWrapper(newWrapper)}newWrapper.setInnerWrapper(nestedWrapper)}else{newWrapper.setInnerWrapper(referenceWrapper.getInnerWrapper());referenceWrapper.setInnerWrapper(newWrapper)}newWrapper.addItem(item)}}container.onInitialized("refreshDockedItemLayoutSizeFlags",this,[item])},getDockWrapper:function(){var dockedItems=this.dockedItems;if(dockedItems.length>0){return dockedItems[0].$dockWrapper}return null},undockItem:function(item){var dockedItems=this.dockedItems;if(item.$dockWrapper){item.$dockWrapper.removeItem(item)}Ext.Array.remove(dockedItems,item);item.setLayoutSizeFlags(0)},destroy:function(){this.dockedItems.length=0;delete this.dockedItems;this.callSuper()}});Ext.define("Ext.layout.Box",{extend:"Ext.layout.Default",config:{orient:"horizontal",align:"start",pack:"start"},alias:"layout.tablebox",layoutBaseClass:"x-layout-tablebox",itemClass:"x-layout-tablebox-item",setContainer:function(container){this.callSuper(arguments);container.innerElement.addCls(this.layoutBaseClass);container.on("flexchange","onItemFlexChange",this,{delegate:"> component"})},onItemInnerStateChange:function(item,isInner){this.callSuper(arguments);item.toggleCls(this.itemClass,isInner)},onItemFlexChange:function(){}});Ext.define("Ext.layout.FlexBox",{extend:"Ext.layout.Box",alias:"layout.box",config:{align:"stretch"},layoutBaseClass:"x-layout-box",itemClass:"x-layout-box-item",setContainer:function(container){this.callSuper(arguments);this.monitorSizeFlagsChange()},applyOrient:function(orient){if(orient!=="horizontal"&&orient!=="vertical"){Ext.Logger.error("Invalid box orient of: '"+orient+"', must be either 'horizontal' or 'vertical'")}return orient},updateOrient:function(orient,oldOrient){var container=this.container,delegation={delegate:"> component"};if(orient==="horizontal"){this.sizePropertyName="width"}else{this.sizePropertyName="height"}container.innerElement.swapCls("x-"+orient,"x-"+oldOrient);if(oldOrient){container.un(oldOrient==="horizontal"?"widthchange":"heightchange","onItemSizeChange",this,delegation);this.redrawContainer()}container.on(orient==="horizontal"?"widthchange":"heightchange","onItemSizeChange",this,delegation)},onItemInnerStateChange:function(item,isInner){this.callSuper(arguments);var flex,size;item.toggleCls(this.itemClass,isInner);if(isInner){flex=item.getFlex();size=item.get(this.sizePropertyName);if(flex){this.doItemFlexChange(item,flex)}else{if(size){this.doItemSizeChange(item,size)}}}this.refreshItemSizeState(item)},refreshItemSizeState:function(item){var isInner=item.isInnerItem(),container=this.container,LAYOUT_HEIGHT=container.LAYOUT_HEIGHT,LAYOUT_WIDTH=container.LAYOUT_WIDTH,dimension=this.sizePropertyName,layoutSizeFlags=0,containerSizeFlags=container.getSizeFlags();if(isInner){layoutSizeFlags|=container.LAYOUT_STRETCHED;if(this.getAlign()==="stretch"){layoutSizeFlags|=containerSizeFlags&(dimension==="width"?LAYOUT_HEIGHT:LAYOUT_WIDTH)}if(item.getFlex()){layoutSizeFlags|=containerSizeFlags&(dimension==="width"?LAYOUT_WIDTH:LAYOUT_HEIGHT)}}item.setLayoutSizeFlags(layoutSizeFlags)},refreshAllItemSizedStates:function(){var innerItems=this.container.innerItems,i,ln,item;for(i=0,ln=innerItems.length;i<ln;i++){item=innerItems[i];this.refreshItemSizeState(item)}},onContainerSizeFlagsChange:function(){this.refreshAllItemSizedStates();this.callSuper(arguments)},onItemSizeChange:function(item,size){if(item.isInnerItem()){this.doItemSizeChange(item,size)}},doItemSizeChange:function(item,size){if(size){item.setFlex(null);this.redrawContainer()}},onItemFlexChange:function(item,flex){if(item.isInnerItem()){this.doItemFlexChange(item,flex);this.refreshItemSizeState(item)}},doItemFlexChange:function(item,flex){this.setItemFlex(item,flex);if(flex){item.set(this.sizePropertyName,null)}else{this.redrawContainer()}},redrawContainer:function(){var container=this.container,renderedTo=container.element.dom.parentNode;if(renderedTo&&renderedTo.nodeType!==11){container.innerElement.redraw()}},setItemFlex:function(item,flex){var element=item.element;element.toggleCls("x-flexed",!!flex);element.setStyle("-webkit-box-flex",flex)},convertPosition:function(position){var positionMap=this.positionMap;if(positionMap.hasOwnProperty(position)){return positionMap[position]}return position},applyAlign:function(align){return this.convertPosition(align)},updateAlign:function(align,oldAlign){var container=this.container;container.innerElement.swapCls(align,oldAlign,true,"x-align");if(oldAlign!==undefined){this.refreshAllItemSizedStates()}},applyPack:function(pack){return this.convertPosition(pack)},updatePack:function(pack,oldPack){this.container.innerElement.swapCls(pack,oldPack,true,"x-pack")}});Ext.define("Ext.layout.HBox",{extend:"Ext.layout.FlexBox",alias:"layout.hbox"});Ext.define("Ext.layout.Fit",{extend:"Ext.layout.Default",isFit:true,alias:"layout.fit",layoutClass:"x-layout-fit",itemClass:"x-layout-fit-item",setContainer:function(container){this.callSuper(arguments);container.innerElement.addCls(this.layoutClass);this.onContainerSizeFlagsChange();this.monitorSizeFlagsChange()},onContainerSizeFlagsChange:function(){var container=this.container,sizeFlags=container.getSizeFlags(),stretched=Boolean(sizeFlags&container.LAYOUT_STRETCHED),innerItems=container.innerItems,i,ln,item;this.callSuper();for(i=0,ln=innerItems.length;i<ln;i++){item=innerItems[i];item.setLayoutSizeFlags(sizeFlags)}container.innerElement.toggleCls("x-stretched",stretched)},onItemInnerStateChange:function(item,isInner){this.callSuper(arguments);item.toggleCls(this.itemClass,isInner);item.setLayoutSizeFlags(isInner?this.container.getSizeFlags():0)}});Ext.define("Ext.layout.Float",{extend:"Ext.layout.Default",alias:"layout.float",config:{direction:"left"},layoutClass:"layout-float",itemClass:"layout-float-item",setContainer:function(container){this.callSuper(arguments);container.innerElement.addCls(this.layoutClass)},onItemInnerStateChange:function(item,isInner){this.callSuper(arguments);item.toggleCls(this.itemClass,isInner)},updateDirection:function(direction,oldDirection){var prefix="direction-";this.container.innerElement.swapCls(prefix+direction,prefix+oldDirection)}});Ext.define("Ext.layout.wrapper.Dock",{requires:["Ext.util.Wrapper"],config:{direction:"horizontal",element:{className:"x-dock"},bodyElement:{className:"x-dock-body"},innerWrapper:null,sizeState:false,container:null},positionMap:{top:"start",left:"start",bottom:"end",right:"end"},constructor:function(config){this.items={start:[],end:[]};this.itemsCount=0;this.initConfig(config)},addItems:function(items){var i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];this.addItem(item)}},addItem:function(item){var docked=item.getDocked(),position=this.positionMap[docked],wrapper=item.$dockWrapper,container=this.getContainer(),index=container.indexOf(item),items=this.items,sideItems=items[position],itemWrapper,element,i,ln,sibling,referenceElement,siblingIndex;if(wrapper){wrapper.removeItem(item)}item.$dockWrapper=this;itemWrapper=item.link("$dockItemWrapper",new Ext.util.Wrapper({className:"x-dock-item"}));item.addCls("x-docked-"+docked);element=itemWrapper.element;for(i=0,ln=sideItems.length;i<ln;i++){sibling=sideItems[i];siblingIndex=container.indexOf(sibling);if(siblingIndex>index){referenceElement=sibling.element;sideItems.splice(i,0,item);break}}if(!referenceElement){sideItems.push(item);referenceElement=this.getBodyElement()}this.itemsCount++;if(position==="start"){element.insertBefore(referenceElement)}else{element.insertAfter(referenceElement)}itemWrapper.wrap(item.element);itemWrapper.bindSize(this.getDirection()==="horizontal"?"width":"height")},removeItem:function(item){var position=item.getDocked(),items=this.items[this.positionMap[position]];item.removeCls("x-docked-"+position);Ext.Array.remove(items,item);item.unlink("$dockItemWrapper");item.element.detach();delete item.$dockWrapper;if(--this.itemsCount===0){this.destroy()}},getItemsSlice:function(index){var container=this.getContainer(),items=this.items,slice=[],sideItems,i,ln,item;for(sideItems=items.start,i=0,ln=sideItems.length;i<ln;i++){item=sideItems[i];if(container.indexOf(item)>index){slice.push(item)}}for(sideItems=items.end,i=0,ln=sideItems.length;i<ln;i++){item=sideItems[i];if(container.indexOf(item)>index){slice.push(item)}}return slice},applyElement:function(element){return Ext.Element.create(element)},updateElement:function(element){element.addCls("x-dock-"+this.getDirection())},applyBodyElement:function(bodyElement){return Ext.Element.create(bodyElement)},updateBodyElement:function(bodyElement){this.getElement().append(bodyElement)},updateInnerWrapper:function(innerWrapper,oldInnerWrapper){var innerElement=this.getBodyElement();if(oldInnerWrapper&&oldInnerWrapper.$outerWrapper===this){innerElement.remove(oldInnerWrapper.getElement());delete oldInnerWrapper.$outerWrapper}if(innerWrapper){innerWrapper.setSizeState(this.getSizeState());innerWrapper.$outerWrapper=this;innerElement.append(innerWrapper.getElement())}},updateSizeState:function(state){var innerWrapper=this.getInnerWrapper();this.getElement().setSizeState(state);if(innerWrapper){innerWrapper.setSizeState(state)}},destroy:function(){var innerWrapper=this.getInnerWrapper(),outerWrapper=this.$outerWrapper;if(innerWrapper){if(outerWrapper){outerWrapper.setInnerWrapper(innerWrapper)}else{innerWrapper.getElement().replace(this.getElement());delete innerWrapper.$outerWrapper}}delete this.$outerWrapper;this.setInnerWrapper(null);this.unlink("_bodyElement","_element");this.callSuper()}});Ext.define("Ext.layout.VBox",{extend:"Ext.layout.FlexBox",alias:"layout.vbox",config:{orient:"vertical"}});Ext.define("Ext.fx.layout.card.Abstract",{extend:"Ext.Evented",isAnimation:true,config:{direction:"left",duration:null,reverse:null,layout:null},updateLayout:function(){this.enable()},enable:function(){var layout=this.getLayout();if(layout){layout.onBefore("activeitemchange","onActiveItemChange",this)}},disable:function(){var layout=this.getLayout();if(this.isAnimating){this.stopAnimation()}if(layout){layout.unBefore("activeitemchange","onActiveItemChange",this)}},onActiveItemChange:Ext.emptyFn,destroy:function(){var layout=this.getLayout();if(this.isAnimating){this.stopAnimation()}if(layout){layout.unBefore("activeitemchange","onActiveItemChange",this)}this.setLayout(null);if(this.observableId){this.fireEvent("destroy",this);this.clearListeners();this.clearManagedListeners()}}});Ext.define("Ext.fx.State",{isAnimatable:{"background-color":true,"background-image":true,"background-position":true,"border-bottom-color":true,"border-bottom-width":true,"border-color":true,"border-left-color":true,"border-left-width":true,"border-right-color":true,"border-right-width":true,"border-spacing":true,"border-top-color":true,"border-top-width":true,"border-width":true,bottom:true,color:true,crop:true,"font-size":true,"font-weight":true,height:true,left:true,"letter-spacing":true,"line-height":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,opacity:true,"outline-color":true,"outline-offset":true,"outline-width":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,right:true,"text-indent":true,"text-shadow":true,top:true,"vertical-align":true,visibility:true,width:true,"word-spacing":true,"z-index":true,zoom:true,transform:true},constructor:function(data){this.data={};this.set(data)},setConfig:function(data){this.set(data);return this},setRaw:function(data){this.data=data;return this},clear:function(){return this.setRaw({})},setTransform:function(name,value){var data=this.data,isArray=Ext.isArray(value),transform=data.transform,ln,key;if(!transform){transform=data.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}}if(typeof name=="string"){switch(name){case"translate":if(isArray){ln=value.length;if(ln==0){break}transform.translateX=value[0];if(ln==1){break}transform.translateY=value[1];if(ln==2){break}transform.translateZ=value[2]}else{transform.translateX=value}break;case"rotate":if(isArray){ln=value.length;if(ln==0){break}transform.rotateX=value[0];if(ln==1){break}transform.rotateY=value[1];if(ln==2){break}transform.rotateZ=value[2]}else{transform.rotate=value}break;case"scale":if(isArray){ln=value.length;if(ln==0){break}transform.scaleX=value[0];if(ln==1){break}transform.scaleY=value[1];if(ln==2){break}transform.scaleZ=value[2]}else{transform.scaleX=value;transform.scaleY=value}break;case"skew":if(isArray){ln=value.length;if(ln==0){break}transform.skewX=value[0];if(ln==1){break}transform.skewY=value[1]}else{transform.skewX=value}break;default:transform[name]=value}}else{for(key in name){if(name.hasOwnProperty(key)){value=name[key];this.setTransform(key,value)}}}},set:function(name,value){var data=this.data,key;if(typeof name!="string"){for(key in name){value=name[key];if(key==="transform"){this.setTransform(value)}else{data[key]=value}}}else{if(name==="transform"){this.setTransform(value)}else{data[name]=value}}return this},unset:function(name){var data=this.data;if(data.hasOwnProperty(name)){delete data[name]}return this},getData:function(){return this.data}});Ext.define("Ext.fx.animation.Abstract",{extend:"Ext.Evented",isAnimation:true,requires:["Ext.fx.State"],config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:false,replacePrevious:true},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_DOWN:"down",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\d\.]+)%$/,constructor:function(){this.states={};this.callParent(arguments);return this},applyElement:function(element){return Ext.get(element)},applyBefore:function(before,current){if(before){return Ext.factory(before,Ext.fx.State,current)}},applyAfter:function(after,current){if(after){return Ext.factory(after,Ext.fx.State,current)}},setFrom:function(from){return this.setState(this.STATE_FROM,from)},setTo:function(to){return this.setState(this.STATE_TO,to)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(states){var validNameRegex=this.stateNameRegex,name;for(name in states){if(validNameRegex.test(name)){this.setState(name,states[name])}}return this},getStates:function(){return this.states},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.stop();this.callParent()},setState:function(name,state){var states=this.getStates(),stateInstance;stateInstance=Ext.factory(state,Ext.fx.State,states[name]);if(stateInstance){states[name]=stateInstance}else{if(name===this.STATE_TO){Ext.Logger.error("Setting and invalid '100%' / 'to' state of: "+state)}}return this},getState:function(name){return this.getStates()[name]},getData:function(){var states=this.getStates(),statesData={},before=this.getBefore(),after=this.getAfter(),from=states[this.STATE_FROM],to=states[this.STATE_TO],fromData=from.getData(),toData=to.getData(),data,name,state;for(name in states){if(states.hasOwnProperty(name)){state=states[name];data=state.getData();statesData[name]=data}}if(Ext.os.is.Android2){statesData["0.0001%"]=fromData}return{before:before?before.getData():{},after:after?after.getData():{},states:statesData,from:fromData,to:toData,duration:this.getDuration(),iteration:this.getIteration(),direction:this.getDirection(),easing:this.getEasing(),delay:this.getDelay(),onEnd:this.getOnEnd(),onBeforeEnd:this.getOnBeforeEnd(),onBeforeStart:this.getOnBeforeStart(),scope:this.getScope(),preserveEndState:this.getPreserveEndState(),replacePrevious:this.getReplacePrevious()}}});Ext.define("Ext.fx.animation.Slide",{extend:"Ext.fx.animation.Abstract",alternateClassName:"Ext.fx.animation.SlideIn",alias:["animation.slide","animation.slideIn"],config:{direction:"left",out:false,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:true,useCssTransform:true},reverseDirectionMap:{up:"down",down:"up",left:"right",right:"left"},applyEasing:function(easing){if(easing==="auto"){return"ease-"+((this.getOut())?"in":"out")}return easing},getContainerBox:function(){var box=this._containerBox;if(box==="auto"){box=this.getElement().getParent().getPageBox()}return box},getElementBox:function(){var box=this._elementBox;if(this.getIsElementBoxFit()){return this.getContainerBox()}if(box==="auto"){box=this.getElement().getPageBox()}return box},getData:function(){var elementBox=this.getElementBox(),containerBox=this.getContainerBox(),box=elementBox?elementBox:containerBox,from=this.getFrom(),to=this.getTo(),out=this.getOut(),offset=this.getOffset(),direction=this.getDirection(),useCssTransform=this.getUseCssTransform(),reverse=this.getReverse(),translateX=0,translateY=0,fromX,fromY,toX,toY;if(reverse){direction=this.reverseDirectionMap[direction]}switch(direction){case this.DIRECTION_UP:if(out){translateY=containerBox.top-box.top-box.height-offset}else{translateY=containerBox.bottom-box.bottom+box.height+offset}break;case this.DIRECTION_DOWN:if(out){translateY=containerBox.bottom-box.bottom+box.height+offset}else{translateY=containerBox.top-box.height-box.top-offset}break;case this.DIRECTION_RIGHT:if(out){translateX=containerBox.right-box.right+box.width+offset}else{translateX=containerBox.left-box.left-box.width-offset}break;case this.DIRECTION_LEFT:if(out){translateX=containerBox.left-box.left-box.width-offset}else{translateX=containerBox.right-box.right+box.width+offset}break}fromX=(out)?0:translateX;fromY=(out)?0:translateY;if(useCssTransform){from.setTransform({translateX:fromX,translateY:fromY})}else{from.set("left",fromX);from.set("top",fromY)}toX=(out)?translateX:0;toY=(out)?translateY:0;if(useCssTransform){to.setTransform({translateX:toX,translateY:toY})}else{to.set("left",toX);to.set("top",toY)}return this.callParent(arguments)}});Ext.define("Ext.fx.animation.SlideOut",{extend:"Ext.fx.animation.Slide",alias:["animation.slideOut"],config:{out:true}});Ext.define("Ext.fx.animation.Fade",{extend:"Ext.fx.animation.Abstract",alternateClassName:"Ext.fx.animation.FadeIn",alias:["animation.fade","animation.fadeIn"],config:{out:false,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(newOut){var to=this.getTo(),from=this.getFrom();if(newOut){from.set("opacity",1);to.set("opacity",0)}else{from.set("opacity",0);to.set("opacity",1)}}});Ext.define("Ext.fx.animation.FadeOut",{extend:"Ext.fx.animation.Fade",alias:"animation.fadeOut",config:{out:true,before:{}}});Ext.define("Ext.fx.animation.Flip",{extend:"Ext.fx.animation.Abstract",alias:"animation.flip",config:{easing:"ease-in",direction:"right",half:false,out:null},getData:function(){var from=this.getFrom(),to=this.getTo(),direction=this.getDirection(),out=this.getOut(),half=this.getHalf(),rotate=(half)?90:180,fromScale=1,toScale=1,fromRotateX=0,fromRotateY=0,toRotateX=0,toRotateY=0;if(out){toScale=0.8}else{fromScale=0.8}switch(direction){case this.DIRECTION_UP:if(out){toRotateX=rotate}else{fromRotateX=-rotate}break;case this.DIRECTION_DOWN:if(out){toRotateX=-rotate}else{fromRotateX=rotate}break;case this.DIRECTION_RIGHT:if(out){toRotateY=-rotate}else{fromRotateY=rotate}break;case this.DIRECTION_LEFT:if(out){toRotateY=-rotate}else{fromRotateY=rotate}break}from.setTransform({rotateX:fromRotateX,rotateY:fromRotateY,scale:fromScale});to.setTransform({rotateX:toRotateX,rotateY:toRotateY,scale:toScale});return this.callParent(arguments)}});Ext.define("Ext.fx.animation.Pop",{extend:"Ext.fx.animation.Abstract",alias:["animation.pop","animation.popIn"],alternateClassName:"Ext.fx.animation.PopIn",config:{out:false,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var to=this.getTo(),from=this.getFrom(),out=this.getOut();if(out){from.set("opacity",1);from.setTransform({scale:1});to.set("opacity",0);to.setTransform({scale:0})}else{from.set("opacity",0);from.setTransform({scale:0});to.set("opacity",1);to.setTransform({scale:1})}return this.callParent(arguments)}});Ext.define("Ext.fx.animation.PopOut",{extend:"Ext.fx.animation.Pop",alias:"animation.popOut",config:{out:true,before:{}}});Ext.define("Ext.fx.Animation",{requires:["Ext.fx.animation.Slide","Ext.fx.animation.SlideOut","Ext.fx.animation.Fade","Ext.fx.animation.FadeOut","Ext.fx.animation.Flip","Ext.fx.animation.Pop","Ext.fx.animation.PopOut"],constructor:function(config){var defaultClass=Ext.fx.animation.Abstract,type;if(typeof config=="string"){type=config;config={}}else{if(config&&config.type){type=config.type}}if(type){if(Ext.os.is.Android2){if(type=="pop"){type="fade"}if(type=="popIn"){type="fadeIn"}if(type=="popOut"){type="fadeOut"}}defaultClass=Ext.ClassManager.getByAlias("animation."+type);if(!defaultClass){Ext.Logger.error("Invalid animation type of: '"+type+"'")}}return Ext.factory(config,defaultClass)}});Ext.define("Ext.fx.layout.card.Style",{extend:"Ext.fx.layout.card.Abstract",requires:["Ext.fx.Animation"],config:{inAnimation:{before:{visibility:null},preserveEndState:false,replacePrevious:true},outAnimation:{preserveEndState:false,replacePrevious:true}},constructor:function(config){var inAnimation,outAnimation;this.initConfig(config);this.endAnimationCounter=0;inAnimation=this.getInAnimation();outAnimation=this.getOutAnimation();inAnimation.on("animationend","incrementEnd",this);outAnimation.on("animationend","incrementEnd",this)},updateDirection:function(direction){this.getInAnimation().setDirection(direction);this.getOutAnimation().setDirection(direction)},updateDuration:function(duration){this.getInAnimation().setDuration(duration);this.getOutAnimation().setDuration(duration)},updateReverse:function(reverse){this.getInAnimation().setReverse(reverse);this.getOutAnimation().setReverse(reverse)},incrementEnd:function(){this.endAnimationCounter++;if(this.endAnimationCounter>1){this.endAnimationCounter=0;this.fireEvent("animationend",this)}},applyInAnimation:function(animation,inAnimation){return Ext.factory(animation,Ext.fx.Animation,inAnimation)},applyOutAnimation:function(animation,outAnimation){return Ext.factory(animation,Ext.fx.Animation,outAnimation)},updateInAnimation:function(animation){animation.setScope(this)},updateOutAnimation:function(animation){animation.setScope(this)},onActiveItemChange:function(cardLayout,newItem,oldItem,options,controller){var inAnimation=this.getInAnimation(),outAnimation=this.getOutAnimation(),inElement,outElement;if(newItem&&oldItem&&oldItem.isPainted()){inElement=newItem.renderElement;outElement=oldItem.renderElement;inAnimation.setElement(inElement);outAnimation.setElement(outElement);outAnimation.setOnBeforeEnd(function(element,interrupted){if(interrupted||Ext.Animator.hasRunningAnimations(element)){controller.firingArguments[1]=null;controller.firingArguments[2]=null}});outAnimation.setOnEnd(function(){controller.resume()});inElement.dom.style.setProperty("visibility","hidden","!important");newItem.show();Ext.Animator.run([outAnimation,inAnimation]);controller.pause()}},destroy:function(){Ext.destroy(this.getInAnimation(),this.getOutAnimation());this.callParent(arguments)}});Ext.define("Ext.fx.layout.card.Slide",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.slide",config:{inAnimation:{type:"slide",easing:"ease-out"},outAnimation:{type:"slide",easing:"ease-out",out:true}},updateReverse:function(reverse){this.getInAnimation().setReverse(reverse);this.getOutAnimation().setReverse(reverse)}});Ext.define("Ext.fx.layout.card.Cover",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.cover",config:{reverse:null,inAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out"},outAnimation:{easing:"ease-out",from:{opacity:0.99},to:{opacity:1},out:true}},updateReverse:function(reverse){this.getInAnimation().setReverse(reverse);this.getOutAnimation().setReverse(reverse)}});Ext.define("Ext.fx.layout.card.Reveal",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.reveal",config:{inAnimation:{easing:"ease-out",from:{opacity:0.99},to:{opacity:1}},outAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out",out:true}},updateReverse:function(reverse){this.getInAnimation().setReverse(reverse);this.getOutAnimation().setReverse(reverse)}});Ext.define("Ext.fx.layout.card.Fade",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.fade",config:{reverse:null,inAnimation:{type:"fade",easing:"ease-out"},outAnimation:{type:"fade",easing:"ease-out",out:true}}});Ext.define("Ext.fx.layout.card.Flip",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.flip",config:{duration:500,inAnimation:{type:"flip",half:true,easing:"ease-out",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null}},outAnimation:{type:"flip",half:true,easing:"ease-in",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null},out:true}},updateDuration:function(duration){var halfDuration=duration/2,inAnimation=this.getInAnimation(),outAnimation=this.getOutAnimation();inAnimation.setDelay(halfDuration);inAnimation.setDuration(halfDuration);outAnimation.setDuration(halfDuration)}});Ext.define("Ext.fx.layout.card.Pop",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.pop",config:{duration:500,inAnimation:{type:"pop",easing:"ease-out"},outAnimation:{type:"pop",easing:"ease-in",out:true}},updateDuration:function(duration){var halfDuration=duration/2,inAnimation=this.getInAnimation(),outAnimation=this.getOutAnimation();inAnimation.setDelay(halfDuration);inAnimation.setDuration(halfDuration);outAnimation.setDuration(halfDuration)}});Ext.define("Ext.fx.layout.card.Scroll",{extend:"Ext.fx.layout.card.Abstract",requires:["Ext.fx.easing.Linear"],alias:"fx.layout.card.scroll",config:{duration:150},constructor:function(config){this.initConfig(config);this.doAnimationFrame=Ext.Function.bind(this.doAnimationFrame,this)},getEasing:function(){var easing=this.easing;if(!easing){this.easing=easing=new Ext.fx.easing.Linear()}return easing},updateDuration:function(duration){this.getEasing().setDuration(duration)},onActiveItemChange:function(cardLayout,newItem,oldItem,options,controller){var direction=this.getDirection(),easing=this.getEasing(),containerElement,inElement,outElement,containerWidth,containerHeight,reverse;if(newItem&&oldItem){if(this.isAnimating){this.stopAnimation()}newItem.setWidth("100%");newItem.setHeight("100%");containerElement=this.getLayout().container.innerElement;containerWidth=containerElement.getWidth();containerHeight=containerElement.getHeight();inElement=newItem.renderElement;outElement=oldItem.renderElement;this.oldItem=oldItem;this.newItem=newItem;this.currentEventController=controller;this.containerElement=containerElement;this.isReverse=reverse=this.getReverse();newItem.show();if(direction=="right"){direction="left";this.isReverse=reverse=!reverse}else{if(direction=="down"){direction="up";this.isReverse=reverse=!reverse}}if(direction=="left"){if(reverse){easing.setConfig({startValue:containerWidth,endValue:0});containerElement.dom.scrollLeft=containerWidth;outElement.setLeft(containerWidth)}else{easing.setConfig({startValue:0,endValue:containerWidth});inElement.setLeft(containerWidth)}}else{if(reverse){easing.setConfig({startValue:containerHeight,endValue:0});containerElement.dom.scrollTop=containerHeight;outElement.setTop(containerHeight)}else{easing.setConfig({startValue:0,endValue:containerHeight});inElement.setTop(containerHeight)}}this.startAnimation();controller.pause()}},startAnimation:function(){this.isAnimating=true;this.getEasing().setStartTime(Date.now());this.timer=setInterval(this.doAnimationFrame,20);this.doAnimationFrame()},doAnimationFrame:function(){var easing=this.getEasing(),direction=this.getDirection(),scroll="scrollTop",value;if(direction=="left"||direction=="right"){scroll="scrollLeft"}if(easing.isEnded){this.stopAnimation()}else{value=easing.getValue();this.containerElement.dom[scroll]=value}},stopAnimation:function(){var me=this,direction=me.getDirection(),scroll="setTop",oldItem=me.oldItem,newItem=me.newItem;if(direction=="left"||direction=="right"){scroll="setLeft"}me.currentEventController.resume();if(me.isReverse&&oldItem&&oldItem.renderElement&&oldItem.renderElement.dom){oldItem.renderElement[scroll](null)}else{if(newItem&&newItem.renderElement&&newItem.renderElement.dom){newItem.renderElement[scroll](null)}}clearInterval(me.timer);me.isAnimating=false;me.fireEvent("animationend",me)}});Ext.define("Ext.fx.layout.Card",{requires:["Ext.fx.layout.card.Slide","Ext.fx.layout.card.Cover","Ext.fx.layout.card.Reveal","Ext.fx.layout.card.Fade","Ext.fx.layout.card.Flip","Ext.fx.layout.card.Pop","Ext.fx.layout.card.Scroll"],constructor:function(config){var defaultClass=Ext.fx.layout.card.Abstract,type;if(!config){return null}if(typeof config=="string"){type=config;config={}}else{if(config.type){type=config.type}}config.elementBox=false;if(type){if(Ext.os.is.Android2){if(type!="fade"){type="scroll"}}defaultClass=Ext.ClassManager.getByAlias("fx.layout.card."+type);if(!defaultClass){Ext.Logger.error("Unknown card animation type: '"+type+"'")}}return Ext.factory(config,defaultClass)}});Ext.define("Ext.layout.Card",{extend:"Ext.layout.Default",alias:"layout.card",isCard:true,layoutClass:"x-layout-card",itemClass:"x-layout-card-item",requires:["Ext.fx.layout.Card"],applyAnimation:function(animation){return new Ext.fx.layout.Card(animation)},updateAnimation:function(animation,oldAnimation){if(animation&&animation.isAnimation){animation.setLayout(this)}if(oldAnimation){oldAnimation.destroy()}},setContainer:function(container){this.callSuper(arguments);container.innerElement.addCls(this.layoutClass);container.onInitialized("onContainerInitialized",this)},onContainerInitialized:function(){var container=this.container,activeItem=container.getActiveItem();if(activeItem){activeItem.show()}container.on("activeitemchange","onContainerActiveItemChange",this)},onContainerActiveItemChange:function(container){this.relayEvent(arguments,"doActiveItemChange")},onItemInnerStateChange:function(item,isInner,destroying){this.callSuper(arguments);var container=this.container,activeItem=container.getActiveItem();item.toggleCls(this.itemClass,isInner);item.setLayoutSizeFlags(isInner?container.LAYOUT_BOTH:0);if(isInner){if(activeItem!==container.innerIndexOf(item)&&activeItem!==item&&item!==container.pendingActiveItem){item.hide()}}else{if(!destroying&&!item.isDestroyed&&item.isDestroying!==true){item.show()}}},doActiveItemChange:function(me,newActiveItem,oldActiveItem){if(oldActiveItem){oldActiveItem.hide()}if(newActiveItem){newActiveItem.show()}},destroy:function(){this.callParent(arguments);Ext.destroy(this.getAnimation())}});Ext.define("Ext.util.Filter",{isFilter:true,config:{property:null,value:null,filterFn:Ext.emptyFn,anyMatch:false,exactMatch:false,caseSensitive:false,root:null,id:undefined,scope:null},applyId:function(id){if(!id){if(this.getProperty()){id=this.getProperty()+"-"+String(this.getValue())}if(!id){id=Ext.id(null,"ext-filter-")}}return id},constructor:function(config){this.initConfig(config)},applyFilterFn:function(filterFn){if(filterFn===Ext.emptyFn){filterFn=this.getInitialConfig("filter");if(filterFn){return filterFn}var value=this.getValue();if(!this.getProperty()&&!value&&value!==0){Ext.Logger.error("A Filter requires either a property and value, or a filterFn to be set");return Ext.emptyFn}else{return this.createFilterFn()}}return filterFn},createFilterFn:function(){var me=this,matcher=me.createValueMatcher();return function(item){var root=me.getRoot(),property=me.getProperty();if(root){item=item[root]}return matcher.test(item[property])}},createValueMatcher:function(){var me=this,value=me.getValue(),anyMatch=me.getAnyMatch(),exactMatch=me.getExactMatch(),caseSensitive=me.getCaseSensitive(),escapeRe=Ext.String.escapeRegex;if(value===null||value===undefined||!value.exec){value=String(value);if(anyMatch===true){value=escapeRe(value)}else{value="^"+escapeRe(value);if(exactMatch===true){value+="$"}}value=new RegExp(value,caseSensitive?"":"i")}return value}});Ext.define("Ext.util.AbstractMixedCollection",{requires:["Ext.util.Filter"],mixins:{observable:"Ext.mixin.Observable"},constructor:function(allowFunctions,keyFn){var me=this;me.items=[];me.map={};me.keys=[];me.length=0;me.allowFunctions=allowFunctions===true;if(keyFn){me.getKey=keyFn}me.mixins.observable.constructor.call(me)},allowFunctions:false,add:function(key,obj){var me=this,myObj=obj,myKey=key,old;if(arguments.length==1){myObj=myKey;myKey=me.getKey(myObj)}if(typeof myKey!="undefined"&&myKey!==null){old=me.map[myKey];if(typeof old!="undefined"){return me.replace(myKey,myObj)}me.map[myKey]=myObj}me.length++;me.items.push(myObj);me.keys.push(myKey);me.fireEvent("add",me.length-1,myObj,myKey);return myObj},getKey:function(o){return o.id},replace:function(key,o){var me=this,old,index;if(arguments.length==1){o=arguments[0];key=me.getKey(o)}old=me.map[key];if(typeof key=="undefined"||key===null||typeof old=="undefined"){return me.add(key,o)}index=me.indexOfKey(key);me.items[index]=o;me.map[key]=o;me.fireEvent("replace",key,old,o);return o},addAll:function(objs){var me=this,i=0,args,len,key;if(arguments.length>1||Ext.isArray(objs)){args=arguments.length>1?arguments:objs;for(len=args.length;i<len;i++){me.add(args[i])}}else{for(key in objs){if(objs.hasOwnProperty(key)){if(me.allowFunctions||typeof objs[key]!="function"){me.add(key,objs[key])}}}}},each:function(fn,scope){var items=[].concat(this.items),i=0,len=items.length,item;for(;i<len;i++){item=items[i];if(fn.call(scope||item,item,i,len)===false){break}}},eachKey:function(fn,scope){var keys=this.keys,items=this.items,i=0,len=keys.length;for(;i<len;i++){fn.call(scope||window,keys[i],items[i],i,len)}},findBy:function(fn,scope){var keys=this.keys,items=this.items,i=0,len=items.length;for(;i<len;i++){if(fn.call(scope||window,items[i],keys[i])){return items[i]}}return null},insert:function(index,key,obj){var me=this,myKey=key,myObj=obj;if(arguments.length==2){myObj=myKey;myKey=me.getKey(myObj)}if(me.containsKey(myKey)){me.suspendEvents();me.removeAtKey(myKey);me.resumeEvents()}if(index>=me.length){return me.add(myKey,myObj)}me.length++;Ext.Array.splice(me.items,index,0,myObj);if(typeof myKey!="undefined"&&myKey!==null){me.map[myKey]=myObj}Ext.Array.splice(me.keys,index,0,myKey);me.fireEvent("add",index,myObj,myKey);return myObj},remove:function(o){return this.removeAt(this.indexOf(o))},removeAll:function(items){Ext.each(items||[],function(item){this.remove(item)},this);return this},removeAt:function(index){var me=this,o,key;if(index<me.length&&index>=0){me.length--;o=me.items[index];Ext.Array.erase(me.items,index,1);key=me.keys[index];if(typeof key!="undefined"){delete me.map[key]}Ext.Array.erase(me.keys,index,1);me.fireEvent("remove",o,key);return o}return false},removeAtKey:function(key){return this.removeAt(this.indexOfKey(key))},getCount:function(){return this.length},indexOf:function(o){return Ext.Array.indexOf(this.items,o)},indexOfKey:function(key){return Ext.Array.indexOf(this.keys,key)},get:function(key){var me=this,mk=me.map[key],item=mk!==undefined?mk:(typeof key=="number")?me.items[key]:undefined;return typeof item!="function"||me.allowFunctions?item:null},getAt:function(index){return this.items[index]},getByKey:function(key){return this.map[key]},contains:function(o){return Ext.Array.contains(this.items,o)},containsKey:function(key){return typeof this.map[key]!="undefined"},clear:function(){var me=this;me.length=0;me.items=[];me.keys=[];me.map={};me.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(property,root,start,end){var values=this.extractValues(property,root),length=values.length,sum=0,i;start=start||0;end=(end||end===0)?end:length-1;for(i=start;i<=end;i++){sum+=values[i]}return sum},collect:function(property,root,allowNull){var values=this.extractValues(property,root),length=values.length,hits={},unique=[],value,strValue,i;for(i=0;i<length;i++){value=values[i];strValue=String(value);if((allowNull||!Ext.isEmpty(value))&&!hits[strValue]){hits[strValue]=true;unique.push(value)}}return unique},extractValues:function(property,root){var values=this.items;if(root){values=Ext.Array.pluck(values,root)}return Ext.Array.pluck(values,property)},getRange:function(start,end){var me=this,items=me.items,range=[],i;if(items.length<1){return range}start=start||0;end=Math.min(typeof end=="undefined"?me.length-1:end,me.length-1);if(start<=end){for(i=start;i<=end;i++){range[range.length]=items[i]}}else{for(i=start;i>=end;i--){range[range.length]=items[i]}}return range},filter:function(property,value,anyMatch,caseSensitive){var filters=[],filterFn;if(Ext.isString(property)){filters.push(Ext.create("Ext.util.Filter",{property:property,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive}))}else{if(Ext.isArray(property)||property instanceof Ext.util.Filter){filters=filters.concat(property)}}filterFn=function(record){var isMatch=true,length=filters.length,i;for(i=0;i<length;i++){var filter=filters[i],fn=filter.getFilterFn(),scope=filter.getScope();isMatch=isMatch&&fn.call(scope,record)}return isMatch};return this.filterBy(filterFn)},filterBy:function(fn,scope){var me=this,newMC=new this.self(),keys=me.keys,items=me.items,length=items.length,i;newMC.getKey=me.getKey;for(i=0;i<length;i++){if(fn.call(scope||me,items[i],keys[i])){newMC.add(keys[i],items[i])}}return newMC},findIndex:function(property,value,start,anyMatch,caseSensitive){if(Ext.isEmpty(value,false)){return -1}value=this.createValueMatcher(value,anyMatch,caseSensitive);return this.findIndexBy(function(o){return o&&value.test(o[property])},null,start)},findIndexBy:function(fn,scope,start){var me=this,keys=me.keys,items=me.items,i=start||0,len=items.length;for(;i<len;i++){if(fn.call(scope||me,items[i],keys[i])){return i}}return -1},createValueMatcher:function(value,anyMatch,caseSensitive,exactMatch){if(!value.exec){var er=Ext.String.escapeRegex;value=String(value);if(anyMatch===true){value=er(value)}else{value="^"+er(value);if(exactMatch===true){value+="$"}}value=new RegExp(value,caseSensitive?"":"i")}return value},clone:function(){var me=this,copy=new this.self(),keys=me.keys,items=me.items,i=0,len=items.length;for(;i<len;i++){copy.add(keys[i],items[i])}copy.getKey=me.getKey;return copy}});Ext.define("Ext.util.Sorter",{isSorter:true,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:undefined},constructor:function(config){this.initConfig(config)},applySorterFn:function(sorterFn){if(!sorterFn&&!this.getProperty()){Ext.Logger.error("A Sorter requires either a property or a sorterFn.")}return sorterFn},applyProperty:function(property){if(!property&&!this.getSorterFn()){Ext.Logger.error("A Sorter requires either a property or a sorterFn.")}return property},applyId:function(id){if(!id){id=this.getProperty();if(!id){id=Ext.id(null,"ext-sorter-")}}return id},createSortFunction:function(sorterFn){var me=this,modifier=me.getDirection().toUpperCase()=="DESC"?-1:1;return function(o1,o2){return modifier*sorterFn.call(me,o1,o2)}},defaultSortFn:function(item1,item2){var me=this,transform=me._transform,root=me._root,value1,value2,property=me._property;if(root!==null){item1=item1[root];item2=item2[root]}value1=item1[property];value2=item2[property];if(transform){value1=transform(value1);value2=transform(value2)}return value1>value2?1:(value1<value2?-1:0)},updateDirection:function(){this.updateSortFn()},updateSortFn:function(){this.sort=this.createSortFunction(this.getSorterFn()||this.defaultSortFn)},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))}});Ext.define("Ext.util.Sortable",{extend:"Ext.mixin.Mixin",isSortable:true,mixinConfig:{hooks:{destroy:"destroy"}},defaultSortDirection:"ASC",requires:["Ext.util.Sorter"],initSortable:function(){var me=this,sorters=me.sorters;me.sorters=Ext.create("Ext.util.AbstractMixedCollection",false,function(item){return item.id||item.property});if(sorters){me.sorters.addAll(me.decodeSorters(sorters))}},sort:function(sorters,direction,where,doSort){var me=this,sorter,sorterFn,newSorters;if(Ext.isArray(sorters)){doSort=where;where=direction;newSorters=sorters}else{if(Ext.isObject(sorters)){doSort=where;where=direction;newSorters=[sorters]}else{if(Ext.isString(sorters)){sorter=me.sorters.get(sorters);if(!sorter){sorter={property:sorters,direction:direction};newSorters=[sorter]}else{if(direction===undefined){sorter.toggle()}else{sorter.setDirection(direction)}}}}}if(newSorters&&newSorters.length){newSorters=me.decodeSorters(newSorters);if(Ext.isString(where)){if(where==="prepend"){sorters=me.sorters.clone().items;me.sorters.clear();me.sorters.addAll(newSorters);me.sorters.addAll(sorters)}else{me.sorters.addAll(newSorters)}}else{me.sorters.clear();me.sorters.addAll(newSorters)}if(doSort!==false){me.onBeforeSort(newSorters)}}if(doSort!==false){sorters=me.sorters.items;if(sorters.length){sorterFn=function(r1,r2){var result=sorters[0].sort(r1,r2),length=sorters.length,i;for(i=1;i<length;i++){result=result||sorters[i].sort.call(this,r1,r2)}return result};me.doSort(sorterFn)}}return sorters},onBeforeSort:Ext.emptyFn,decodeSorters:function(sorters){if(!Ext.isArray(sorters)){if(sorters===undefined){sorters=[]}else{sorters=[sorters]}}var length=sorters.length,Sorter=Ext.util.Sorter,fields=this.model?this.model.prototype.fields:null,field,config,i;for(i=0;i<length;i++){config=sorters[i];if(!(config instanceof Sorter)){if(Ext.isString(config)){config={property:config}}Ext.applyIf(config,{root:this.sortRoot,direction:"ASC"});if(config.fn){config.sorterFn=config.fn}if(typeof config=="function"){config={sorterFn:config}}if(fields&&!config.transform){field=fields.get(config.property);config.transform=field?field.sortType:undefined}sorters[i]=Ext.create("Ext.util.Sorter",config)}}return sorters},getSorters:function(){return this.sorters.items},destroy:function(){this.callSuper();Ext.destroy(this.sorters)}});Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){var me=this;me.callParent(arguments);me.mixins.sortable.initSortable.call(me)},doSort:function(sorterFn){this.sortBy(sorterFn)},_sort:function(property,dir,fn){var me=this,i,len,dsc=String(dir).toUpperCase()=="DESC"?-1:1,c=[],keys=me.keys,items=me.items;fn=fn||function(a,b){return a-b};for(i=0,len=items.length;i<len;i++){c[c.length]={key:keys[i],value:items[i],index:i}}Ext.Array.sort(c,function(a,b){var v=fn(a[property],b[property])*dsc;if(v===0){v=(a.index<b.index?-1:1)}return v});for(i=0,len=c.length;i<len;i++){items[i]=c[i].value;keys[i]=c[i].key}me.fireEvent("sort",me)},sortBy:function(sorterFn){var me=this,items=me.items,keys=me.keys,length=items.length,temp=[],i;for(i=0;i<length;i++){temp[i]={key:keys[i],value:items[i],index:i}}Ext.Array.sort(temp,function(a,b){var v=sorterFn(a.value,b.value);if(v===0){v=(a.index<b.index?-1:1)}return v});for(i=0;i<length;i++){items[i]=temp[i].value;keys[i]=temp[i].key}me.fireEvent("sort",me,items,keys)},reorder:function(mapping){var me=this,items=me.items,index=0,length=items.length,order=[],remaining=[],oldIndex;me.suspendEvents();for(oldIndex in mapping){order[mapping[oldIndex]]=items[oldIndex]}for(index=0;index<length;index++){if(mapping[index]==undefined){remaining.push(items[index])}}for(index=0;index<length;index++){if(order[index]==undefined){order[index]=remaining.shift()}}me.clear();me.addAll(order);me.resumeEvents();me.fireEvent("sort",me)},sortByKey:function(dir,fn){this._sort("key",dir,fn||function(a,b){var v1=String(a).toUpperCase(),v2=String(b).toUpperCase();return v1>v2?1:(v1<v2?-1:0)})}});Ext.define("Ext.ItemCollection",{extend:"Ext.util.MixedCollection",getKey:function(item){return item.getItemId()},has:function(item){return this.map.hasOwnProperty(item.getId())}});Ext.define("Ext.fx.easing.Momentum",{extend:"Ext.fx.easing.Abstract",config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(friction){var theta=Math.log(1-(friction/10));this.theta=theta;this.alpha=theta/this.getAcceleration()},updateStartVelocity:function(velocity){this.velocity=velocity*this.getAcceleration()},updateAcceleration:function(acceleration){this.velocity=this.getStartVelocity()*acceleration;this.alpha=this.theta/acceleration},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var deltaTime=Ext.Date.now()-this.getStartTime();return Math.exp(deltaTime*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}});Ext.define("Ext.fx.easing.Bounce",{extend:"Ext.fx.easing.Abstract",config:{springTension:0.3,acceleration:30,startVelocity:0},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),theta=(deltaTime/this.getAcceleration()),powTime=theta*Math.pow(Math.E,-this.getSpringTension()*theta);return this.getStartValue()+(this.getStartVelocity()*powTime)}});Ext.define("Ext.fx.easing.BoundMomentum",{extend:"Ext.fx.easing.Abstract",requires:["Ext.fx.easing.Momentum","Ext.fx.easing.Bounce"],config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:0.01,startVelocity:0},applyMomentum:function(config,currentEasing){return Ext.factory(config,Ext.fx.easing.Momentum,currentEasing)},applyBounce:function(config,currentEasing){return Ext.factory(config,Ext.fx.easing.Bounce,currentEasing)},updateStartTime:function(startTime){this.getMomentum().setStartTime(startTime);this.callParent(arguments)},updateStartVelocity:function(startVelocity){this.getMomentum().setStartVelocity(startVelocity)},updateStartValue:function(startValue){this.getMomentum().setStartValue(startValue)},reset:function(){this.lastValue=null;this.isBouncingBack=false;this.isOutOfBound=false;return this.callParent(arguments)},getValue:function(){var momentum=this.getMomentum(),bounce=this.getBounce(),startVelocity=momentum.getStartVelocity(),direction=startVelocity>0?1:-1,minValue=this.getMinMomentumValue(),maxValue=this.getMaxMomentumValue(),boundedValue=(direction==1)?maxValue:minValue,lastValue=this.lastValue,value,velocity;if(startVelocity===0){return this.getStartValue()}if(!this.isOutOfBound){value=momentum.getValue();velocity=momentum.getVelocity();if(Math.abs(velocity)<this.getMinVelocity()){this.isEnded=true}if(value>=minValue&&value<=maxValue){return value}this.isOutOfBound=true;bounce.setStartTime(Ext.Date.now()).setStartVelocity(velocity).setStartValue(boundedValue)}value=bounce.getValue();if(!this.isEnded){if(!this.isBouncingBack){if(lastValue!==null){if((direction==1&&value<lastValue)||(direction==-1&&value>lastValue)){this.isBouncingBack=true}}}else{if(Math.round(value)==boundedValue){this.isEnded=true}}}this.lastValue=value;return value}});Ext.define("Ext.fx.easing.EaseOut",{extend:"Ext.fx.easing.Linear",alias:"easing.ease-out",config:{exponent:4,duration:1500},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),duration=this.getDuration(),startValue=this.getStartValue(),endValue=this.getEndValue(),distance=this.distance,theta=deltaTime/duration,thetaC=1-theta,thetaEnd=1-Math.pow(thetaC,this.getExponent()),currentValue=startValue+(thetaEnd*distance);if(deltaTime>=duration){this.isEnded=true;return endValue}return currentValue}});Ext.define("Ext.scroll.Scroller",{extend:"Ext.Evented",requires:["Ext.fx.easing.BoundMomentum","Ext.fx.easing.EaseOut","Ext.util.Translatable"],config:{element:null,direction:"auto",fps:"auto",disabled:null,directionLock:false,momentumEasing:{momentum:{acceleration:30,friction:0.5},bounce:{acceleration:30,springTension:0.3},minVelocity:1},bounceEasing:{duration:400},outOfBoundRestrictFactor:0.5,startMomentumResetTime:300,maxAbsoluteVelocity:6,containerSize:"auto",size:"auto",autoRefresh:true,initialOffset:{x:0,y:0},slotSnapSize:{x:0,y:0},slotSnapOffset:{x:0,y:0},slotSnapEasing:{duration:150},translatable:{translationMethod:"auto",useWrapper:false}},cls:Ext.baseCSSPrefix+"scroll-scroller",containerCls:Ext.baseCSSPrefix+"scroll-container",dragStartTime:0,dragEndTime:0,isDragging:false,isAnimating:false,constructor:function(config){var element=config&&config.element;if(Ext.os.is.Android4&&!Ext.browser.is.Chrome){this.onDrag=Ext.Function.createThrottled(this.onDrag,20,this)}this.listeners={scope:this,touchstart:"onTouchStart",touchend:"onTouchEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"};this.minPosition={x:0,y:0};this.startPosition={x:0,y:0};this.position={x:0,y:0};this.velocity={x:0,y:0};this.isAxisEnabledFlags={x:false,y:false};this.flickStartPosition={x:0,y:0};this.flickStartTime={x:0,y:0};this.lastDragPosition={x:0,y:0};this.dragDirection={x:0,y:0};this.initialConfig=config;if(element){this.setElement(element)}return this},applyElement:function(element){if(!element){return}return Ext.get(element)},updateElement:function(element){this.initialize();element.addCls(this.cls);if(!this.getDisabled()){this.attachListeneners()}this.onConfigUpdate(["containerSize","size"],"refreshMaxPosition");this.on("maxpositionchange","snapToBoundary");this.on("minpositionchange","snapToBoundary");return this},applyTranslatable:function(config,translatable){return Ext.factory(config,Ext.util.Translatable,translatable)},updateTranslatable:function(translatable){translatable.setConfig({element:this.getElement(),listeners:{animationframe:"onAnimationFrame",animationend:"onAnimationEnd",scope:this}})},updateFps:function(fps){if(fps!=="auto"){this.getTranslatable().setFps(fps)}},attachListeneners:function(){this.getContainer().on(this.listeners)},detachListeners:function(){this.getContainer().un(this.listeners)},updateDisabled:function(disabled){if(disabled){this.detachListeners()}else{this.attachListeneners()}},updateInitialOffset:function(initialOffset){if(typeof initialOffset=="number"){initialOffset={x:initialOffset,y:initialOffset}}var position=this.position,x,y;position.x=x=initialOffset.x;position.y=y=initialOffset.y;this.getTranslatable().translate(-x,-y)},applyDirection:function(direction){var minPosition=this.getMinPosition(),maxPosition=this.getMaxPosition(),isHorizontal,isVertical;this.givenDirection=direction;if(direction==="auto"){isHorizontal=maxPosition.x>minPosition.x;isVertical=maxPosition.y>minPosition.y;if(isHorizontal&&isVertical){direction="both"}else{if(isHorizontal){direction="horizontal"}else{direction="vertical"}}}return direction},updateDirection:function(direction){var isAxisEnabled=this.isAxisEnabledFlags;isAxisEnabled.x=(direction==="both"||direction==="horizontal");isAxisEnabled.y=(direction==="both"||direction==="vertical")},isAxisEnabled:function(axis){this.getDirection();return this.isAxisEnabledFlags[axis]},applyMomentumEasing:function(easing){var defaultClass=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},applyBounceEasing:function(easing){var defaultClass=Ext.fx.easing.EaseOut;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},updateBounceEasing:function(easing){this.getTranslatable().setEasingX(easing.x).setEasingY(easing.y)},applySlotSnapEasing:function(easing){var defaultClass=Ext.fx.easing.EaseOut;return{x:Ext.factory(easing,defaultClass),y:Ext.factory(easing,defaultClass)}},getMinPosition:function(){var minPosition=this.minPosition;if(!minPosition){this.minPosition=minPosition={x:0,y:0};this.fireEvent("minpositionchange",this,minPosition)}return minPosition},getMaxPosition:function(){var maxPosition=this.maxPosition,size,containerSize;if(!maxPosition){size=this.getSize();containerSize=this.getContainerSize();this.maxPosition=maxPosition={x:Math.max(0,size.x-containerSize.x),y:Math.max(0,size.y-containerSize.y)};this.fireEvent("maxpositionchange",this,maxPosition)}return maxPosition},refreshMaxPosition:function(){this.maxPosition=null;this.getMaxPosition()},applyContainerSize:function(size){var containerDom=this.getContainer().dom,x,y;if(!containerDom){return}this.givenContainerSize=size;if(size==="auto"){x=containerDom.offsetWidth;y=containerDom.offsetHeight}else{x=size.x;y=size.y}return{x:x,y:y}},applySize:function(size){var dom=this.getElement().dom,x,y;if(!dom){return}this.givenSize=size;if(size==="auto"){x=dom.offsetWidth;y=dom.offsetHeight}else{if(typeof size=="number"){x=size;y=size}else{x=size.x;y=size.y}}return{x:x,y:y}},updateAutoRefresh:function(autoRefresh){this.getElement().toggleListener(autoRefresh,"resize","onElementResize",this);this.getContainer().toggleListener(autoRefresh,"resize","onContainerResize",this)},applySlotSnapSize:function(snapSize){if(typeof snapSize=="number"){return{x:snapSize,y:snapSize}}return snapSize},applySlotSnapOffset:function(snapOffset){if(typeof snapOffset=="number"){return{x:snapOffset,y:snapOffset}}return snapOffset},getContainer:function(){var container=this.container;if(!container){this.container=container=this.getElement().getParent();if(!container){Ext.Logger.error("Making an element scrollable that doesn't have any container")}container.addCls(this.containerCls)}return container},refresh:function(){this.stopAnimation();this.getTranslatable().refresh();this.setSize(this.givenSize);this.setContainerSize(this.givenContainerSize);this.setDirection(this.givenDirection);this.fireEvent("refresh",this);return this},onElementResize:function(element,info){this.setSize({x:info.width,y:info.height});this.refresh()},onContainerResize:function(container,info){this.setContainerSize({x:info.width,y:info.height});this.refresh()},scrollTo:function(x,y,animation){if(this.isDestroyed){return this}var translatable=this.getTranslatable(),position=this.position,positionChanged=false,translationX,translationY;if(this.isAxisEnabled("x")){if(typeof x!="number"){x=position.x}else{if(position.x!==x){position.x=x;positionChanged=true}}translationX=-x}if(this.isAxisEnabled("y")){if(typeof y!="number"){y=position.y}else{if(position.y!==y){position.y=y;positionChanged=true}}translationY=-y}if(positionChanged){if(animation!==undefined&&animation!==false){translatable.translateAnimated(translationX,translationY,animation)}else{this.fireEvent("scroll",this,position.x,position.y);translatable.translate(translationX,translationY)}}return this},scrollToTop:function(animation){var initialOffset=this.getInitialOffset();return this.scrollTo(initialOffset.x,initialOffset.y,animation)},scrollToEnd:function(animation){var size=this.getSize(),cntSize=this.getContainerSize();return this.scrollTo(size.x-cntSize.x,size.y-cntSize.y,animation)},scrollBy:function(x,y,animation){var position=this.position;x=(typeof x=="number")?x+position.x:null;y=(typeof y=="number")?y+position.y:null;return this.scrollTo(x,y,animation)},onTouchStart:function(){this.isTouching=true;this.stopAnimation()},onTouchEnd:function(){var position=this.position;this.isTouching=false;if(!this.isDragging&&this.snapToSlot()){this.fireEvent("scrollstart",this,position.x,position.y)}},onDragStart:function(e){var direction=this.getDirection(),absDeltaX=e.absDeltaX,absDeltaY=e.absDeltaY,directionLock=this.getDirectionLock(),startPosition=this.startPosition,flickStartPosition=this.flickStartPosition,flickStartTime=this.flickStartTime,lastDragPosition=this.lastDragPosition,currentPosition=this.position,dragDirection=this.dragDirection,x=currentPosition.x,y=currentPosition.y,now=Ext.Date.now();this.isDragging=true;if(directionLock&&direction!=="both"){if((direction==="horizontal"&&absDeltaX>absDeltaY)||(direction==="vertical"&&absDeltaY>absDeltaX)){e.stopPropagation()}else{this.isDragging=false;return}}lastDragPosition.x=x;lastDragPosition.y=y;flickStartPosition.x=x;flickStartPosition.y=y;startPosition.x=x;startPosition.y=y;flickStartTime.x=now;flickStartTime.y=now;dragDirection.x=0;dragDirection.y=0;this.dragStartTime=now;this.isDragging=true;this.fireEvent("scrollstart",this,x,y)},onAxisDrag:function(axis,delta){if(!this.isAxisEnabled(axis)){return}var flickStartPosition=this.flickStartPosition,flickStartTime=this.flickStartTime,lastDragPosition=this.lastDragPosition,dragDirection=this.dragDirection,old=this.position[axis],min=this.getMinPosition()[axis],max=this.getMaxPosition()[axis],start=this.startPosition[axis],last=lastDragPosition[axis],current=start-delta,lastDirection=dragDirection[axis],restrictFactor=this.getOutOfBoundRestrictFactor(),startMomentumResetTime=this.getStartMomentumResetTime(),now=Ext.Date.now(),distance;if(current<min){current*=restrictFactor}else{if(current>max){distance=current-max;current=max+distance*restrictFactor}}if(current>last){dragDirection[axis]=1}else{if(current<last){dragDirection[axis]=-1}}if((lastDirection!==0&&(dragDirection[axis]!==lastDirection))||(now-flickStartTime[axis])>startMomentumResetTime){flickStartPosition[axis]=old;flickStartTime[axis]=now}lastDragPosition[axis]=current},onDrag:function(e){if(!this.isDragging){return}var lastDragPosition=this.lastDragPosition;this.onAxisDrag("x",e.deltaX);this.onAxisDrag("y",e.deltaY);this.scrollTo(lastDragPosition.x,lastDragPosition.y)},onDragEnd:function(e){var easingX,easingY;if(!this.isDragging){return}this.dragEndTime=Ext.Date.now();this.onDrag(e);this.isDragging=false;easingX=this.getAnimationEasing("x");easingY=this.getAnimationEasing("y");if(easingX||easingY){this.getTranslatable().animate(easingX,easingY)}else{this.onScrollEnd()}},getAnimationEasing:function(axis){if(!this.isAxisEnabled(axis)){return null}var currentPosition=this.position[axis],flickStartPosition=this.flickStartPosition[axis],flickStartTime=this.flickStartTime[axis],minPosition=this.getMinPosition()[axis],maxPosition=this.getMaxPosition()[axis],maxAbsVelocity=this.getMaxAbsoluteVelocity(),boundValue=null,dragEndTime=this.dragEndTime,easing,velocity,duration;if(currentPosition<minPosition){boundValue=minPosition}else{if(currentPosition>maxPosition){boundValue=maxPosition}}if(boundValue!==null){easing=this.getBounceEasing()[axis];easing.setConfig({startTime:dragEndTime,startValue:-currentPosition,endValue:-boundValue});return easing}duration=dragEndTime-flickStartTime;if(duration===0){return null}velocity=(currentPosition-flickStartPosition)/(dragEndTime-flickStartTime);if(velocity===0){return null}if(velocity<-maxAbsVelocity){velocity=-maxAbsVelocity}else{if(velocity>maxAbsVelocity){velocity=maxAbsVelocity}}easing=this.getMomentumEasing()[axis];easing.setConfig({startTime:dragEndTime,startValue:-currentPosition,startVelocity:-velocity,minMomentumValue:-maxPosition,maxMomentumValue:0});return easing},onAnimationFrame:function(translatable,x,y){var position=this.position;position.x=-x;position.y=-y;this.fireEvent("scroll",this,position.x,position.y)},onAnimationEnd:function(){this.snapToBoundary();this.onScrollEnd()},stopAnimation:function(){this.getTranslatable().stopAnimation()},onScrollEnd:function(){var position=this.position;if(this.isTouching||!this.snapToSlot()){this.fireEvent("scrollend",this,position.x,position.y)}},snapToSlot:function(){var snapX=this.getSnapPosition("x"),snapY=this.getSnapPosition("y"),easing=this.getSlotSnapEasing();if(snapX!==null||snapY!==null){this.scrollTo(snapX,snapY,{easingX:easing.x,easingY:easing.y});return true}return false},getSnapPosition:function(axis){var snapSize=this.getSlotSnapSize()[axis],snapPosition=null,position,snapOffset,maxPosition,mod;if(snapSize!==0&&this.isAxisEnabled(axis)){position=this.position[axis];snapOffset=this.getSlotSnapOffset()[axis];maxPosition=this.getMaxPosition()[axis];mod=(position-snapOffset)%snapSize;if((mod!==0)&&(position!==maxPosition)){if(Math.abs(mod)>snapSize/2){snapPosition=Math.min(maxPosition,position+((mod>0)?snapSize-mod:mod-snapSize))}else{snapPosition=position-mod}}}return snapPosition},snapToBoundary:function(){var position=this.position,minPosition=this.getMinPosition(),maxPosition=this.getMaxPosition(),minX=minPosition.x,minY=minPosition.y,maxX=maxPosition.x,maxY=maxPosition.y,x=Math.round(position.x),y=Math.round(position.y);if(x<minX){x=minX}else{if(x>maxX){x=maxX}}if(y<minY){y=minY}else{if(y>maxY){y=maxY}}this.scrollTo(x,y)},destroy:function(){var element=this.getElement(),sizeMonitors=this.sizeMonitors;if(sizeMonitors){sizeMonitors.element.destroy();sizeMonitors.container.destroy()}if(element&&!element.isDestroyed){element.removeCls(this.cls);this.getContainer().removeCls(this.containerCls)}Ext.destroy(this.getTranslatable());this.callParent(arguments)}},function(){});Ext.define("Ext.scroll.indicator.Abstract",{extend:"Ext.Component",config:{baseCls:"x-scroll-indicator",axis:"x",value:0,length:null,minLength:6,hidden:true,ui:"dark"},cachedConfig:{ratio:1,barCls:"x-scroll-bar",active:true},barElement:null,barLength:0,gapLength:0,getElementConfig:function(){return{reference:"barElement",children:[this.callParent()]}},applyRatio:function(ratio){if(isNaN(ratio)){ratio=1}return ratio},refresh:function(){var bar=this.barElement,barDom=bar.dom,ratio=this.getRatio(),axis=this.getAxis(),barLength=(axis==="x")?barDom.offsetWidth:barDom.offsetHeight,length=barLength*ratio;this.barLength=barLength;this.gapLength=barLength-length;this.setLength(length);this.updateValue(this.getValue())},updateBarCls:function(barCls){this.barElement.addCls(barCls)},updateAxis:function(axis){this.element.addCls(this.getBaseCls(),null,axis);this.barElement.addCls(this.getBarCls(),null,axis)},updateValue:function(value){this.setOffset(this.gapLength*value)},updateActive:function(active){this.barElement[active?"addCls":"removeCls"]("active")},doSetHidden:function(hidden){var elementDomStyle=this.element.dom.style;if(hidden){elementDomStyle.opacity="0"}else{elementDomStyle.opacity=""}},applyLength:function(length){return Math.max(this.getMinLength(),length)},updateLength:function(length){if(!this.isDestroyed){var axis=this.getAxis(),element=this.element;if(axis==="x"){element.setWidth(length)}else{element.setHeight(length)}}},setOffset:function(offset){var axis=this.getAxis(),element=this.element;if(axis==="x"){element.setLeft(offset)}else{element.setTop(offset)}}});Ext.define("Ext.scroll.indicator.Default",{extend:"Ext.scroll.indicator.Abstract",config:{cls:"default"},setOffset:function(offset){var axis=this.getAxis(),domStyle=this.element.dom.style;if(axis==="x"){domStyle.webkitTransform="translate3d("+offset+"px, 0, 0)"}else{domStyle.webkitTransform="translate3d(0, "+offset+"px, 0)"}},updateValue:function(value){var barLength=this.barLength,gapLength=this.gapLength,length=this.getLength(),newLength,offset,extra;if(value<=0){offset=0;this.updateLength(this.applyLength(length+value*barLength))}else{if(value>=1){extra=Math.round((value-1)*barLength);newLength=this.applyLength(length-extra);extra=length-newLength;this.updateLength(newLength);offset=gapLength+extra}else{offset=gapLength*value}}this.setOffset(offset)}});Ext.define("Ext.scroll.indicator.ScrollPosition",{extend:"Ext.scroll.indicator.Abstract",config:{cls:"scrollposition"},getElementConfig:function(){var config=this.callParent(arguments);config.children.unshift({className:"x-scroll-bar-stretcher"});return config},updateValue:function(value){if(this.gapLength===0){if(value>1){value=value-1}this.setOffset(this.barLength*value)}else{this.setOffset(this.gapLength*value)}},updateLength:function(){var scrollOffset=this.barLength,barDom=this.barElement.dom,element=this.element;this.callParent(arguments);if(this.getAxis()==="x"){barDom.scrollLeft=scrollOffset;element.setLeft(scrollOffset)}else{barDom.scrollTop=scrollOffset;element.setTop(scrollOffset)}},setOffset:function(offset){var barLength=this.barLength,minLength=this.getMinLength(),barDom=this.barElement.dom;offset=Math.min(barLength-minLength,Math.max(offset,minLength-this.getLength()));offset=barLength-offset;if(this.getAxis()==="x"){barDom.scrollLeft=offset}else{barDom.scrollTop=offset}}});Ext.define("Ext.scroll.indicator.CssTransform",{extend:"Ext.scroll.indicator.Abstract",config:{cls:"csstransform"},getElementConfig:function(){var config=this.callParent();config.children[0].children=[{reference:"startElement"},{reference:"middleElement"},{reference:"endElement"}];return config},refresh:function(){var axis=this.getAxis(),startElementDom=this.startElement.dom,endElementDom=this.endElement.dom,middleElement=this.middleElement,startElementLength,endElementLength;if(axis==="x"){startElementLength=startElementDom.offsetWidth;endElementLength=endElementDom.offsetWidth;middleElement.setLeft(startElementLength)}else{startElementLength=startElementDom.offsetHeight;endElementLength=endElementDom.offsetHeight;middleElement.setTop(startElementLength)}this.startElementLength=startElementLength;this.endElementLength=endElementLength;this.callParent()},updateLength:function(length){var axis=this.getAxis(),endElementStyle=this.endElement.dom.style,middleElementStyle=this.middleElement.dom.style,endElementLength=this.endElementLength,endElementOffset=length-endElementLength,middleElementLength=endElementOffset-this.startElementLength;if(axis==="x"){endElementStyle.webkitTransform="translate3d("+endElementOffset+"px, 0, 0)";middleElementStyle.webkitTransform="translate3d(0, 0, 0) scaleX("+middleElementLength+")"}else{endElementStyle.webkitTransform="translate3d(0, "+endElementOffset+"px, 0)";middleElementStyle.webkitTransform="translate3d(0, 0, 0) scaleY("+middleElementLength+")"}},updateValue:function(value){var barLength=this.barLength,gapLength=this.gapLength,length=this.getLength(),newLength,offset,extra;if(value<=0){offset=0;this.updateLength(this.applyLength(length+value*barLength))}else{if(value>=1){extra=Math.round((value-1)*barLength);newLength=this.applyLength(length-extra);extra=length-newLength;this.updateLength(newLength);offset=gapLength+extra}else{offset=gapLength*value}}this.setOffset(offset)},setOffset:function(offset){var axis=this.getAxis(),elementStyle=this.element.dom.style;offset=Math.round(offset);if(axis==="x"){elementStyle.webkitTransform="translate3d("+offset+"px, 0, 0)"}else{elementStyle.webkitTransform="translate3d(0, "+offset+"px, 0)"}}});Ext.define("Ext.scroll.indicator.Throttled",{extend:"Ext.scroll.indicator.Default",config:{cls:"throttled"},constructor:function(){this.callParent(arguments);this.updateLength=Ext.Function.createThrottled(this.updateLength,75,this);this.setOffset=Ext.Function.createThrottled(this.setOffset,50,this)},doSetHidden:function(hidden){if(hidden){this.setOffset(-10000)}else{delete this.lastLength;delete this.lastOffset;this.updateValue(this.getValue())}},updateLength:function(length){length=Math.round(length);if(this.lastLength===length||this.lastOffset===-10000){return}this.lastLength=length;Ext.TaskQueue.requestWrite("doUpdateLength",this,[length])},doUpdateLength:function(length){if(!this.isDestroyed){var axis=this.getAxis(),element=this.element;if(axis==="x"){element.setWidth(length)}else{element.setHeight(length)}}},setOffset:function(offset){offset=Math.round(offset);if(this.lastOffset===offset||this.lastOffset===-10000){return}this.lastOffset=offset;Ext.TaskQueue.requestWrite("doSetOffset",this,[offset])},doSetOffset:function(offset){if(!this.isDestroyed){var axis=this.getAxis(),domStyle=this.element.dom.style;if(axis==="x"){domStyle.webkitTransform="translate3d("+offset+"px, 0, 0)"}else{domStyle.webkitTransform="translate3d(0, "+offset+"px, 0)"}}}});Ext.define("Ext.scroll.Indicator",{requires:["Ext.scroll.indicator.Default","Ext.scroll.indicator.ScrollPosition","Ext.scroll.indicator.CssTransform","Ext.scroll.indicator.Throttled"],alternateClassName:"Ext.util.Indicator",constructor:function(config){if(Ext.os.is.Android2||Ext.os.is.Android3){return new Ext.scroll.indicator.ScrollPosition(config)}else{if(Ext.os.is.iOS||Ext.browser.is.ChromeMobile){return new Ext.scroll.indicator.CssTransform(config)}else{if(Ext.os.is.Android4){return new Ext.scroll.indicator.Throttled(config)}else{return new Ext.scroll.indicator.Default(config)}}}}});Ext.define("Ext.scroll.View",{extend:"Ext.Evented",alternateClassName:"Ext.util.ScrollView",requires:["Ext.scroll.Scroller","Ext.scroll.Indicator"],config:{indicatorsUi:"dark",element:null,scroller:{},indicators:{x:{axis:"x"},y:{axis:"y"}},indicatorsHidingDelay:100,cls:Ext.baseCSSPrefix+"scroll-view"},processConfig:function(config){if(!config){return null}if(typeof config=="string"){config={direction:config}}config=Ext.merge({},config);var scrollerConfig=config.scroller,name;if(!scrollerConfig){config.scroller=scrollerConfig={}}for(name in config){if(config.hasOwnProperty(name)){if(!this.hasConfig(name)){scrollerConfig[name]=config[name];delete config[name]}}}return config},constructor:function(config){config=this.processConfig(config);this.useIndicators={x:true,y:true};this.doHideIndicators=Ext.Function.bind(this.doHideIndicators,this);this.initConfig(config)},setConfig:function(config){return this.callParent([this.processConfig(config)])},updateIndicatorsUi:function(newUi){var indicators=this.getIndicators();indicators.x.setUi(newUi);indicators.y.setUi(newUi)},applyScroller:function(config,currentScroller){return Ext.factory(config,Ext.scroll.Scroller,currentScroller)},applyIndicators:function(config,indicators){var defaultClass=Ext.scroll.Indicator,useIndicators=this.useIndicators;if(!config){config={}}if(!config.x){useIndicators.x=false;config.x={}}if(!config.y){useIndicators.y=false;config.y={}}return{x:Ext.factory(config.x,defaultClass,indicators&&indicators.x),y:Ext.factory(config.y,defaultClass,indicators&&indicators.y)}},updateIndicators:function(indicators){this.indicatorsGrid=Ext.Element.create({className:"x-scroll-bar-grid-wrapper",children:[{className:"x-scroll-bar-grid",children:[{children:[{},{children:[indicators.y.barElement]}]},{children:[{children:[indicators.x.barElement]},{}]}]}]})},updateScroller:function(scroller){scroller.on({scope:this,scrollstart:"onScrollStart",scroll:"onScroll",scrollend:"onScrollEnd",refresh:"refreshIndicators"})},isAxisEnabled:function(axis){return this.getScroller().isAxisEnabled(axis)&&this.useIndicators[axis]},applyElement:function(element){if(element){return Ext.get(element)}},updateElement:function(element){var scrollerElement=element.getFirstChild().getFirstChild(),scroller=this.getScroller();element.addCls(this.getCls());element.insertFirst(this.indicatorsGrid);scroller.setElement(scrollerElement);this.refreshIndicators();return this},showIndicators:function(){var indicators=this.getIndicators();if(this.hasOwnProperty("indicatorsHidingTimer")){clearTimeout(this.indicatorsHidingTimer);delete this.indicatorsHidingTimer}if(this.isAxisEnabled("x")){indicators.x.show()}if(this.isAxisEnabled("y")){indicators.y.show()}},hideIndicators:function(){var delay=this.getIndicatorsHidingDelay();if(delay>0){this.indicatorsHidingTimer=setTimeout(this.doHideIndicators,delay)}else{this.doHideIndicators()}},doHideIndicators:function(){var indicators=this.getIndicators();if(this.isAxisEnabled("x")){indicators.x.hide()}if(this.isAxisEnabled("y")){indicators.y.hide()}},onScrollStart:function(){this.onScroll.apply(this,arguments);this.showIndicators()},onScrollEnd:function(){this.hideIndicators()},onScroll:function(scroller,x,y){this.setIndicatorValue("x",x);this.setIndicatorValue("y",y);if(this.isBenchmarking){this.framesCount++}},isBenchmarking:false,framesCount:0,getCurrentFps:function(){var now=Date.now(),fps;if(!this.isBenchmarking){this.isBenchmarking=true;fps=0}else{fps=Math.round(this.framesCount*1000/(now-this.framesCountStartTime))}this.framesCountStartTime=now;this.framesCount=0;return fps},setIndicatorValue:function(axis,scrollerPosition){if(!this.isAxisEnabled(axis)){return this}var scroller=this.getScroller(),scrollerMaxPosition=scroller.getMaxPosition()[axis],scrollerContainerSize=scroller.getContainerSize()[axis],value;if(scrollerMaxPosition===0){value=scrollerPosition/scrollerContainerSize;if(scrollerPosition>=0){value+=1}}else{if(scrollerPosition>scrollerMaxPosition){value=1+((scrollerPosition-scrollerMaxPosition)/scrollerContainerSize)}else{if(scrollerPosition<0){value=scrollerPosition/scrollerContainerSize}else{value=scrollerPosition/scrollerMaxPosition}}}this.getIndicators()[axis].setValue(value)},refreshIndicator:function(axis){if(!this.isAxisEnabled(axis)){return this}var scroller=this.getScroller(),indicator=this.getIndicators()[axis],scrollerContainerSize=scroller.getContainerSize()[axis],scrollerSize=scroller.getSize()[axis],ratio=scrollerContainerSize/scrollerSize;indicator.setRatio(ratio);indicator.refresh()},refresh:function(){return this.getScroller().refresh()},refreshIndicators:function(){var indicators=this.getIndicators();indicators.x.setActive(this.isAxisEnabled("x"));indicators.y.setActive(this.isAxisEnabled("y"));this.refreshIndicator("x");this.refreshIndicator("y")},destroy:function(){var element=this.getElement(),indicators=this.getIndicators();Ext.destroy(this.getScroller(),this.indicatorsGrid);if(this.hasOwnProperty("indicatorsHidingTimer")){clearTimeout(this.indicatorsHidingTimer);delete this.indicatorsHidingTimer}if(element&&!element.isDestroyed){element.removeCls(this.getCls())}indicators.x.destroy();indicators.y.destroy();delete this.indicatorsGrid;this.callParent(arguments)}});Ext.define("Ext.behavior.Scrollable",{extend:"Ext.behavior.Behavior",requires:["Ext.scroll.View"],constructor:function(){this.listeners={painted:"onComponentPainted",scope:this};this.callParent(arguments)},onComponentPainted:function(){this.scrollView.refresh()},setConfig:function(config){var scrollView=this.scrollView,component=this.component,scrollerElement;if(config){if(!scrollView){this.scrollView=scrollView=new Ext.scroll.View(config);scrollView.on("destroy","onScrollViewDestroy",this);component.setUseBodyElement(true);this.scrollerElement=scrollerElement=component.innerElement;this.scrollContainer=scrollerElement.wrap();scrollView.setElement(component.bodyElement);if(component.isPainted()){this.onComponentPainted(component)}component.on(this.listeners)}else{if(Ext.isString(config)||Ext.isObject(config)){scrollView.setConfig(config)}}}else{if(scrollView){scrollView.destroy()}}return this},getScrollView:function(){return this.scrollView},onScrollViewDestroy:function(){var component=this.component,scrollerElement=this.scrollerElement;if(!scrollerElement.isDestroyed){this.scrollerElement.unwrap()}this.scrollContainer.destroy();if(!component.isDestroyed){component.un(this.listeners)}delete this.scrollerElement;delete this.scrollView;delete this.scrollContainer},onComponentDestroy:function(){var scrollView=this.scrollView;if(scrollView){scrollView.destroy()}}});Ext.define("Ext.Mask",{extend:"Ext.Component",xtype:"mask",config:{baseCls:Ext.baseCSSPrefix+"mask",transparent:false,top:0,left:0,right:0,bottom:0},initialize:function(){this.callSuper();this.element.on("*","onEvent",this)},onEvent:function(e){var controller=arguments[arguments.length-1];if(controller.info.eventName==="tap"){this.fireEvent("tap",this,e);return false}if(e&&e.stopEvent){e.stopEvent()}return false},updateTransparent:function(newTransparent){this[newTransparent?"addCls":"removeCls"](this.getBaseCls()+"-transparent")}});Ext.define("Ext.Container",{extend:"Ext.Component",alternateClassName:"Ext.lib.Container",requires:["Ext.layout.*","Ext.ItemCollection","Ext.behavior.Scrollable","Ext.Mask"],xtype:"container",eventedConfig:{activeItem:0,scrollable:null},config:{layout:null,control:{},defaults:null,items:null,autoDestroy:true,defaultType:null,useBodyElement:null,masked:null,modal:null,hideOnMaskTap:null},isContainer:true,constructor:function(config){var me=this;me._items=me.items=new Ext.ItemCollection();me.innerItems=[];me.onItemAdd=me.onFirstItemAdd;me.callParent(arguments)},getElementConfig:function(){return{reference:"element",classList:["x-container","x-unsized"],children:[{reference:"innerElement",className:"x-inner"}]}},applyMasked:function(masked){var isVisible=true,currentMask;if(masked===false){masked=true;isVisible=false}currentMask=Ext.factory(masked,Ext.Mask,this.getMasked());if(currentMask){this.add(currentMask);currentMask.setHidden(!isVisible)}return currentMask},mask:function(mask){this.setMasked(mask||true)},unmask:function(){this.setMasked(false)},setParent:function(container){this.callSuper(arguments);if(container){var modal=this.getModal();if(modal){container.insertBefore(modal,this);modal.setZIndex(this.getZIndex()-1)}}},applyModal:function(modal,currentModal){var isVisible=true;if(modal===false){modal=true;isVisible=false}currentModal=Ext.factory(modal,Ext.Mask,currentModal);if(currentModal){currentModal.setVisibility(isVisible)}return currentModal},updateModal:function(modal){var container=this.getParent();if(container){if(modal){container.insertBefore(modal,this);modal.setZIndex(this.getZIndex()-1)}else{container.remove(modal)}}},updateHideOnMaskTap:function(hide){var mask=this.getModal();if(mask){mask[hide?"on":"un"].call(mask,"tap","hide",this)}},updateZIndex:function(zIndex){var modal=this.getModal();this.callParent(arguments);if(modal){modal.setZIndex(zIndex-1)}},updateBaseCls:function(newBaseCls,oldBaseCls){var me=this,ui=me.getUi();if(newBaseCls){this.element.addCls(newBaseCls);this.innerElement.addCls(newBaseCls,null,"inner");if(ui){this.element.addCls(newBaseCls,null,ui)}}if(oldBaseCls){this.element.removeCls(oldBaseCls);this.innerElement.removeCls(newBaseCls,null,"inner");if(ui){this.element.removeCls(oldBaseCls,null,ui)}}},updateUseBodyElement:function(useBodyElement){if(useBodyElement){this.link("bodyElement",this.innerElement.wrap({cls:"x-body"}))}},applyItems:function(items,collection){if(items){var me=this;me.getDefaultType();me.getDefaults();if(me.initialized&&collection.length>0){me.removeAll()}me.add(items);if(me.initialized){var activeItem=me.initialConfig.activeItem||me.config.activeItem||0;me.setActiveItem(activeItem)}}},applyControl:function(selectors){var selector,key,listener,listeners;for(selector in selectors){listeners=selectors[selector];for(key in listeners){listener=listeners[key];if(Ext.isObject(listener)){listener.delegate=selector}}listeners.delegate=selector;this.addListener(listeners)}return selectors},onFirstItemAdd:function(){delete this.onItemAdd;if(this.innerHtmlElement&&!this.getHtml()){this.innerHtmlElement.destroy();delete this.innerHtmlElement}this.on("innerstatechange","onItemInnerStateChange",this,{delegate:"> component"});return this.onItemAdd.apply(this,arguments)},updateLayout:function(newLayout,oldLayout){if(oldLayout&&oldLayout.isLayout){Ext.Logger.error("Replacing a layout after one has already been initialized is not currently supported.")}},getLayout:function(){var layout=this.layout;if(!layout){layout=this.link("_layout",this.link("layout",Ext.factory(this._layout||"default",Ext.layout.Default,null,"layout")));layout.setContainer(this)}return layout},updateDefaultType:function(defaultType){this.defaultItemClass=Ext.ClassManager.getByAlias("widget."+defaultType);if(!this.defaultItemClass){Ext.Logger.error("Invalid defaultType of: '"+defaultType+"', must be a valid component xtype")}},applyDefaults:function(defaults){if(defaults){this.factoryItem=this.factoryItemWithDefaults;return defaults}},factoryItem:function(item){if(!item){Ext.Logger.error("Invalid item given: "+item+", must be either the config object to factory a new item, or an existing component instance")}return Ext.factory(item,this.defaultItemClass)},factoryItemWithDefaults:function(item){if(!item){Ext.Logger.error("Invalid item given: "+item+", must be either the config object to factory a new item, or an existing component instance")}var me=this,defaults=me.getDefaults(),instance;if(!defaults){return Ext.factory(item,me.defaultItemClass)}if(item.isComponent){instance=item;if(defaults&&item.isInnerItem()&&!me.has(instance)){instance.setConfig(defaults,true)}}else{if(defaults&&!item.ignoreDefaults){if(!(item.hasOwnProperty("left")&&item.hasOwnProperty("right")&&item.hasOwnProperty("top")&&item.hasOwnProperty("bottom")&&item.hasOwnProperty("docked")&&item.hasOwnProperty("centered"))){item=Ext.mergeIf({},item,defaults)}}instance=Ext.factory(item,me.defaultItemClass)}return instance},add:function(newItems){var me=this,i,ln,item,newActiveItem;newItems=Ext.Array.from(newItems);ln=newItems.length;for(i=0;i<ln;i++){item=me.factoryItem(newItems[i]);this.doAdd(item);if(!newActiveItem&&!this.getActiveItem()&&this.innerItems.length>0&&item.isInnerItem()){newActiveItem=item}}if(newActiveItem){this.setActiveItem(newActiveItem)}return item},doAdd:function(item){var me=this,items=me.getItems(),index;if(!items.has(item)){index=items.length;items.add(item);if(item.isInnerItem()){me.insertInner(item)}item.setParent(me);me.onItemAdd(item,index)}},remove:function(item,destroy){var me=this,index=me.indexOf(item),innerItems=me.getInnerItems();if(destroy===undefined){destroy=me.getAutoDestroy()}if(index!==-1){if(!me.removingAll&&innerItems.length>1&&item===me.getActiveItem()){me.on({activeitemchange:"doRemove",scope:me,single:true,order:"after",args:[item,index,destroy]});me.doResetActiveItem(innerItems.indexOf(item))}else{me.doRemove(item,index,destroy);if(innerItems.length===0){me.setActiveItem(null)}}}return me},doResetActiveItem:function(innerIndex){if(innerIndex===0){this.setActiveItem(1)}else{this.setActiveItem(0)}},doRemove:function(item,index,destroy){var me=this;me.items.remove(item);if(item.isInnerItem()){me.removeInner(item)}me.onItemRemove(item,index,destroy);item.setParent(null);if(destroy){item.destroy()}},removeAll:function(destroy,everything){var items=this.items,ln=items.length,i=0,item;if(destroy===undefined){destroy=this.getAutoDestroy()}everything=Boolean(everything);this.removingAll=true;for(;i<ln;i++){item=items.getAt(i);if(item&&(everything||item.isInnerItem())){this.doRemove(item,i,destroy);i--;ln--}}this.setActiveItem(null);this.removingAll=false;return this},getAt:function(index){return this.items.getAt(index)},getInnerAt:function(index){return this.innerItems[index]},removeAt:function(index){var item=this.getAt(index);if(item){this.remove(item)}return this},removeInnerAt:function(index){var item=this.getInnerItems()[index];if(item){this.remove(item)}return this},has:function(item){return this.getItems().indexOf(item)!=-1},hasInnerItem:function(item){return this.innerItems.indexOf(item)!=-1},indexOf:function(item){return this.getItems().indexOf(item)},innerIndexOf:function(item){return this.innerItems.indexOf(item)},insertInner:function(item,index){var items=this.getItems().items,innerItems=this.innerItems,currentInnerIndex=innerItems.indexOf(item),newInnerIndex=-1,nextSibling;if(currentInnerIndex!==-1){innerItems.splice(currentInnerIndex,1)}if(typeof index=="number"){do{nextSibling=items[++index]}while(nextSibling&&!nextSibling.isInnerItem());if(nextSibling){newInnerIndex=innerItems.indexOf(nextSibling);innerItems.splice(newInnerIndex,0,item)}}if(newInnerIndex===-1){innerItems.push(item);newInnerIndex=innerItems.length-1}if(currentInnerIndex!==-1){this.onInnerItemMove(item,newInnerIndex,currentInnerIndex)}return this},onInnerItemMove:Ext.emptyFn,removeInner:function(item){Ext.Array.remove(this.innerItems,item);return this},insert:function(index,item){var me=this,i;if(Ext.isArray(item)){for(i=item.length-1;i>=0;i--){me.insert(index,item[i])}return me}item=this.factoryItem(item);this.doInsert(index,item);return item},doInsert:function(index,item){var me=this,items=me.items,itemsLength=items.length,currentIndex,isInnerItem;isInnerItem=item.isInnerItem();if(index>itemsLength){index=itemsLength}if(items[index-1]===item){return me}currentIndex=me.indexOf(item);if(currentIndex!==-1){if(currentIndex<index){index-=1}items.removeAt(currentIndex)}items.insert(index,item);if(currentIndex===-1){item.setParent(me)}if(isInnerItem){me.insertInner(item,index)}if(currentIndex!==-1){me.onItemMove(item,index,currentIndex)}else{me.onItemAdd(item,index)}},insertFirst:function(item){return this.insert(0,item)},insertLast:function(item){return this.insert(this.getItems().length,item)},insertBefore:function(item,relativeToItem){var index=this.indexOf(relativeToItem);if(index!==-1){this.insert(index,item)}return this},insertAfter:function(item,relativeToItem){var index=this.indexOf(relativeToItem);if(index!==-1){this.insert(index+1,item)}return this},onItemAdd:function(item,index){this.doItemLayoutAdd(item,index);if(this.initialized){this.fireEvent("add",this,item,index)}},doItemLayoutAdd:function(item,index){var layout=this.getLayout();if(this.isRendered()&&item.setRendered(true)){item.fireAction("renderedchange",[this,item,true],"onItemAdd",layout,{args:[item,index]})}else{layout.onItemAdd(item,index)}},onItemRemove:function(item,index){this.doItemLayoutRemove(item,index);this.fireEvent("remove",this,item,index)},doItemLayoutRemove:function(item,index){var layout=this.getLayout();if(this.isRendered()&&item.setRendered(false)){item.fireAction("renderedchange",[this,item,false],"onItemRemove",layout,{args:[item,index,undefined]})}else{layout.onItemRemove(item,index)}},onItemMove:function(item,toIndex,fromIndex){if(item.isDocked()){item.setDocked(null)}this.doItemLayoutMove(item,toIndex,fromIndex);this.fireEvent("move",this,item,toIndex,fromIndex)},doItemLayoutMove:function(item,toIndex,fromIndex){this.getLayout().onItemMove(item,toIndex,fromIndex)},onItemInnerStateChange:function(item,isInner){var layout=this.getLayout();if(isInner){this.insertInner(item,this.items.indexOf(item))}else{this.removeInner(item)}layout.onItemInnerStateChange.apply(layout,arguments)},getInnerItems:function(){return this.innerItems},getDockedItems:function(){var items=this.getItems().items,dockedItems=[],ln=items.length,item,i;for(i=0;i<ln;i++){item=items[i];if(item.isDocked()){dockedItems.push(item)}}return dockedItems},applyActiveItem:function(activeItem,currentActiveItem){var innerItems=this.getInnerItems();this.getItems();if(!activeItem&&innerItems.length===0){return 0}else{if(typeof activeItem=="number"){activeItem=Math.max(0,Math.min(activeItem,innerItems.length-1));activeItem=innerItems[activeItem];if(activeItem){return activeItem}else{if(currentActiveItem){return null}}}else{if(activeItem){var item;if(typeof activeItem=="string"){item=this.child(activeItem);activeItem={xtype:activeItem}}if(!item||!item.isComponent){item=this.factoryItem(activeItem)}this.pendingActiveItem=item;if(!item.isInnerItem()){Ext.Logger.error("Setting activeItem to be a non-inner item")}if(!this.has(item)){this.add(item)}return item}}}},animateActiveItem:function(activeItem,animation){var layout=this.getLayout(),defaultAnimation;if(this.activeItemAnimation){this.activeItemAnimation.destroy()}this.activeItemAnimation=animation=new Ext.fx.layout.Card(animation);if(animation&&layout.isCard){animation.setLayout(layout);defaultAnimation=layout.getAnimation();if(defaultAnimation){defaultAnimation.disable();animation.on("animationend",function(){defaultAnimation.enable();animation.destroy()},this)}}return this.setActiveItem(activeItem)},doSetActiveItem:function(newActiveItem,oldActiveItem){delete this.pendingActiveItem;if(oldActiveItem){oldActiveItem.fireEvent("deactivate",oldActiveItem,this,newActiveItem)}if(newActiveItem){newActiveItem.fireEvent("activate",newActiveItem,this,oldActiveItem)}},doSetHidden:function(hidden){var modal=this.getModal();if(modal){modal.setHidden(hidden)}this.callSuper(arguments)},setRendered:function(rendered){if(this.callParent(arguments)){var items=this.items.items,i,ln;for(i=0,ln=items.length;i<ln;i++){items[i].setRendered(rendered)}return true}return false},getScrollableBehavior:function(){var behavior=this.scrollableBehavior;if(!behavior){behavior=this.scrollableBehavior=new Ext.behavior.Scrollable(this)}return behavior},applyScrollable:function(config){if(typeof config==="boolean"){if(config===false&&!this.heightLayoutSized){Ext.Logger.warn("This container is set to scrollable: false but has no specified height. You may need to set the container to scrollable: null or provide a height.",this)}this.getScrollableBehavior().setConfig({disabled:!config})}else{if(config&&!config.isObservable){this.getScrollableBehavior().setConfig(config)}}return config},doSetScrollable:function(){},getScrollable:function(){return this.getScrollableBehavior().getScrollView()},getRefItems:function(deep){var items=this.getItems().items.slice(),ln=items.length,i,item;if(deep){for(i=0;i<ln;i++){item=items[i];if(item.getRefItems){items=items.concat(item.getRefItems(true))}}}return items},getComponent:function(component){if(Ext.isObject(component)){component=component.getItemId()}return this.getItems().get(component)},getDockedComponent:function(component){if(Ext.isObject(component)){component=component.getItemId()}var dockedItems=this.getDockedItems(),ln=dockedItems.length,item,i;if(Ext.isNumber(component)){return dockedItems[component]}for(i=0;i<ln;i++){item=dockedItems[i];if(item.id==component){return item}}return false},query:function(selector){return Ext.ComponentQuery.query(selector,this)},child:function(selector){return this.query("> "+selector)[0]||null},down:function(selector){return this.query(selector)[0]||null},destroy:function(){var me=this,modal=me.getModal();if(modal){modal.destroy()}me.removeAll(true,true);me.unlink("_scrollable");Ext.destroy(me.items);me.callSuper()}},function(){this.addMember("defaultItemClass",this)});Ext.define("Ext.util.Point",{radianToDegreeConstant:180/Math.PI,statics:{fromEvent:function(e){var changedTouches=e.changedTouches,touch=(changedTouches&&changedTouches.length>0)?changedTouches[0]:e;return this.fromTouch(touch)},fromTouch:function(touch){return new this(touch.pageX,touch.pageY)},from:function(object){if(!object){return new this(0,0)}if(!(object instanceof this)){return new this(object.x,object.y)}return object}},constructor:function(x,y){if(typeof x=="undefined"){x=0}if(typeof y=="undefined"){y=0}this.x=x;this.y=y;return this},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(point){this.x=point.x;this.y=point.y;return this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(point){return(this.x===point.x&&this.y===point.y)},isCloseTo:function(point,threshold){if(typeof threshold=="number"){threshold={x:threshold};threshold.y=threshold.x}var x=point.x,y=point.y,thresholdX=threshold.x,thresholdY=threshold.y;return(this.x<=x+thresholdX&&this.x>=x-thresholdX&&this.y<=y+thresholdY&&this.y>=y-thresholdY)},isWithin:function(){return this.isCloseTo.apply(this,arguments)},translate:function(x,y){this.x+=x;this.y+=y;return this},roundedEquals:function(point){return(Math.round(this.x)===Math.round(point.x)&&Math.round(this.y)===Math.round(point.y))},getDistanceTo:function(point){var deltaX=this.x-point.x,deltaY=this.y-point.y;return Math.sqrt(deltaX*deltaX+deltaY*deltaY)},getAngleTo:function(point){var deltaX=this.x-point.x,deltaY=this.y-point.y;return Math.atan2(deltaY,deltaX)*this.radianToDegreeConstant}});Ext.define("Ext.util.LineSegment",{requires:["Ext.util.Point"],constructor:function(point1,point2){var Point=Ext.util.Point;this.point1=Point.from(point1);this.point2=Point.from(point2)},intersects:function(lineSegment){var point1=this.point1,point2=this.point2,point3=lineSegment.point1,point4=lineSegment.point2,x1=point1.x,x2=point2.x,x3=point3.x,x4=point4.x,y1=point1.y,y2=point2.y,y3=point3.y,y4=point4.y,d=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4),xi,yi;if(d==0){return null}xi=((x3-x4)*(x1*y2-y1*x2)-(x1-x2)*(x3*y4-y3*x4))/d;yi=((y3-y4)*(x1*y2-y1*x2)-(y1-y2)*(x3*y4-y3*x4))/d;if(xi<Math.min(x1,x2)||xi>Math.max(x1,x2)||xi<Math.min(x3,x4)||xi>Math.max(x3,x4)||yi<Math.min(y1,y2)||yi>Math.max(y1,y2)||yi<Math.min(y3,y4)||yi>Math.max(y3,y4)){return null}return new Ext.util.Point(xi,yi)},toString:function(){return this.point1.toString()+" "+this.point2.toString()}});Ext.define("Ext.Panel",{extend:"Ext.Container",requires:["Ext.util.LineSegment"],alternateClassName:"Ext.lib.Panel",xtype:"panel",isPanel:true,config:{baseCls:Ext.baseCSSPrefix+"panel",bodyPadding:null,bodyMargin:null,bodyBorder:null},getElementConfig:function(){var config=this.callParent();config.children.push({reference:"tipElement",className:"x-anchor",hidden:true});return config},applyBodyPadding:function(bodyPadding){if(bodyPadding===true){bodyPadding=5}if(bodyPadding){bodyPadding=Ext.dom.Element.unitizeBox(bodyPadding)}return bodyPadding},updateBodyPadding:function(newBodyPadding){this.element.setStyle("padding",newBodyPadding)},applyBodyMargin:function(bodyMargin){if(bodyMargin===true){bodyMargin=5}if(bodyMargin){bodyMargin=Ext.dom.Element.unitizeBox(bodyMargin)}return bodyMargin},updateBodyMargin:function(newBodyMargin){this.element.setStyle("margin",newBodyMargin)},applyBodyBorder:function(bodyBorder){if(bodyBorder===true){bodyBorder=1}if(bodyBorder){bodyBorder=Ext.dom.Element.unitizeBox(bodyBorder)}return bodyBorder},updateBodyBorder:function(newBodyBorder){this.element.setStyle("border-width",newBodyBorder)},alignTo:function(component){var tipElement=this.tipElement;tipElement.hide();if(this.currentTipPosition){tipElement.removeCls("x-anchor-"+this.currentTipPosition)}this.callParent(arguments);var LineSegment=Ext.util.LineSegment,alignToElement=component.isComponent?component.renderElement:component,element=this.renderElement,alignToBox=alignToElement.getPageBox(),box=element.getPageBox(),left=box.left,top=box.top,right=box.right,bottom=box.bottom,centerX=left+(box.width/2),centerY=top+(box.height/2),leftTopPoint={x:left,y:top},rightTopPoint={x:right,y:top},leftBottomPoint={x:left,y:bottom},rightBottomPoint={x:right,y:bottom},boxCenterPoint={x:centerX,y:centerY},alignToCenterX=alignToBox.left+(alignToBox.width/2),alignToCenterY=alignToBox.top+(alignToBox.height/2),alignToBoxCenterPoint={x:alignToCenterX,y:alignToCenterY},centerLineSegment=new LineSegment(boxCenterPoint,alignToBoxCenterPoint),offsetLeft=0,offsetTop=0,tipSize,tipWidth,tipHeight,tipPosition,tipX,tipY;tipElement.setVisibility(false);tipElement.show();tipSize=tipElement.getSize();tipWidth=tipSize.width;tipHeight=tipSize.height;if(centerLineSegment.intersects(new LineSegment(leftTopPoint,rightTopPoint))){tipX=Math.min(Math.max(alignToCenterX,left+tipWidth),right-(tipWidth));tipY=top;offsetTop=tipHeight+10;tipPosition="top"}else{if(centerLineSegment.intersects(new LineSegment(leftTopPoint,leftBottomPoint))){tipX=left;tipY=Math.min(Math.max(alignToCenterY+(tipWidth/2),tipWidth*1.6),bottom-(tipWidth/2.2));offsetLeft=tipHeight+10;tipPosition="left"}else{if(centerLineSegment.intersects(new LineSegment(leftBottomPoint,rightBottomPoint))){tipX=Math.min(Math.max(alignToCenterX,left+tipWidth),right-tipWidth);tipY=bottom;offsetTop=-tipHeight-10;tipPosition="bottom"}else{if(centerLineSegment.intersects(new LineSegment(rightTopPoint,rightBottomPoint))){tipX=right;tipY=Math.max(Math.min(alignToCenterY-tipHeight,bottom-tipWidth*1.3),tipWidth/2);offsetLeft=-tipHeight-10;tipPosition="right"}}}}if(tipX||tipY){this.currentTipPosition=tipPosition;tipElement.addCls("x-anchor-"+tipPosition);tipElement.setLeft(tipX-left);tipElement.setTop(tipY-top);tipElement.setVisibility(true);this.setLeft(this.getLeft()+offsetLeft);this.setTop(this.getTop()+offsetTop)}}});Ext.define("Ext.Sheet",{extend:"Ext.Panel",xtype:"sheet",requires:["Ext.fx.Animation"],config:{baseCls:Ext.baseCSSPrefix+"sheet",modal:true,centered:true,stretchX:null,stretchY:null,enter:"bottom",exit:"bottom",showAnimation:!Ext.os.is.Android2?{type:"slideIn",duration:250,easing:"ease-out"}:null,hideAnimation:!Ext.os.is.Android2?{type:"slideOut",duration:250,easing:"ease-in"}:null},applyHideAnimation:function(config){var exit=this.getExit(),direction=exit;if(exit===null){return null}if(config===true){config={type:"slideOut"}}if(Ext.isString(config)){config={type:config}}var anim=Ext.factory(config,Ext.fx.Animation);if(anim){if(exit=="bottom"){direction="down"}if(exit=="top"){direction="up"}anim.setDirection(direction)}return anim},applyShowAnimation:function(config){var enter=this.getEnter(),direction=enter;if(enter===null){return null}if(config===true){config={type:"slideIn"}}if(Ext.isString(config)){config={type:config}}var anim=Ext.factory(config,Ext.fx.Animation);if(anim){if(enter=="bottom"){direction="down"}if(enter=="top"){direction="up"}anim.setBefore({display:null});anim.setReverse(true);anim.setDirection(direction)}return anim},updateStretchX:function(newStretchX){this.getLeft();this.getRight();if(newStretchX){this.setLeft(0);this.setRight(0)}},updateStretchY:function(newStretchY){this.getTop();this.getBottom();if(newStretchY){this.setTop(0);this.setBottom(0)}}});Ext.define("Ext.Button",{extend:"Ext.Component",xtype:"button",cachedConfig:{pressedCls:Ext.baseCSSPrefix+"button-pressing",badgeCls:Ext.baseCSSPrefix+"badge",hasBadgeCls:Ext.baseCSSPrefix+"hasbadge",labelCls:Ext.baseCSSPrefix+"button-label",iconMaskCls:Ext.baseCSSPrefix+"icon-mask",iconCls:null},config:{badgeText:null,text:null,icon:null,iconAlign:"left",pressedDelay:0,iconMask:null,handler:null,scope:null,autoEvent:null,ui:"normal",baseCls:Ext.baseCSSPrefix+"button"},template:[{tag:"span",reference:"badgeElement",hidden:true},{tag:"span",className:Ext.baseCSSPrefix+"button-icon",reference:"iconElement",hidden:true},{tag:"span",reference:"textElement",hidden:true}],initialize:function(){this.callParent();this.element.on({scope:this,tap:"onTap",touchstart:"onPress",touchend:"onRelease"})},updateBadgeText:function(badgeText){var element=this.element,badgeElement=this.badgeElement;if(badgeText){badgeElement.show();badgeElement.setText(badgeText)}else{badgeElement.hide()}element[(badgeText)?"addCls":"removeCls"](this.getHasBadgeCls())},updateText:function(text){var textElement=this.textElement;if(textElement){if(text){textElement.show();textElement.setHtml(text)}else{textElement.hide()}}},updateHtml:function(html){var textElement=this.textElement;if(html){textElement.show();textElement.setHtml(html)}else{textElement.hide()}},updateBadgeCls:function(badgeCls,oldBadgeCls){this.badgeElement.replaceCls(oldBadgeCls,badgeCls)},updateHasBadgeCls:function(hasBadgeCls,oldHasBadgeCls){var element=this.element;if(element.hasCls(oldHasBadgeCls)){element.replaceCls(oldHasBadgeCls,hasBadgeCls)}},updateLabelCls:function(labelCls,oldLabelCls){this.textElement.replaceCls(oldLabelCls,labelCls)},updatePressedCls:function(pressedCls,oldPressedCls){var element=this.element;if(element.hasCls(oldPressedCls)){element.replaceCls(oldPressedCls,pressedCls)}},updateIcon:function(icon){var me=this,element=me.iconElement;if(icon){me.showIconElement();element.setStyle("background-image","url("+icon+")");me.refreshIconAlign();me.refreshIconMask()}else{element.setStyle("background-image","");me.hideIconElement();me.setIconAlign(false)}},updateIconCls:function(iconCls,oldIconCls){var me=this,element=me.iconElement;if(iconCls){me.showIconElement();element.replaceCls(oldIconCls,iconCls);me.refreshIconAlign();me.refreshIconMask()}else{element.removeCls(oldIconCls);me.hideIconElement();me.setIconAlign(false)}},updateIconAlign:function(alignment,oldAlignment){var element=this.element,baseCls=Ext.baseCSSPrefix+"iconalign-";if(!this.getText()){alignment="center"}element.removeCls(baseCls+"center");element.removeCls(baseCls+oldAlignment);if(this.getIcon()||this.getIconCls()){element.addCls(baseCls+alignment)}},refreshIconAlign:function(){this.updateIconAlign(this.getIconAlign())},updateIconMaskCls:function(iconMaskCls,oldIconMaskCls){var element=this.iconElement;if(this.getIconMask()){element.replaceCls(oldIconMaskCls,iconMaskCls)}},updateIconMask:function(iconMask){this.iconElement[iconMask?"addCls":"removeCls"](this.getIconMaskCls())},refreshIconMask:function(){this.updateIconMask(this.getIconMask())},applyAutoEvent:function(autoEvent){var me=this;if(typeof autoEvent=="string"){autoEvent={name:autoEvent,scope:me.scope||me}}return autoEvent},updateAutoEvent:function(autoEvent){var name=autoEvent.name,scope=autoEvent.scope;this.setHandler(function(){scope.fireEvent(name,scope,this)});this.setScope(scope)},hideIconElement:function(){this.iconElement.hide()},showIconElement:function(){this.iconElement.show()},applyUi:function(config){if(config&&Ext.isString(config)){var array=config.split("-");if(array&&(array[1]=="back"||array[1]=="forward")){return array}}return config},getUi:function(){var ui=this._ui;if(Ext.isArray(ui)){return ui.join("-")}return ui},applyPressedDelay:function(delay){if(Ext.isNumber(delay)){return delay}return(delay)?100:0},onPress:function(){var me=this,element=me.element,pressedDelay=me.getPressedDelay(),pressedCls=me.getPressedCls();if(!me.getDisabled()){if(pressedDelay>0){me.pressedTimeout=setTimeout(function(){delete me.pressedTimeout;if(element){element.addCls(pressedCls)}},pressedDelay)}else{element.addCls(pressedCls)}}},onRelease:function(e){this.fireAction("release",[this,e],"doRelease")},doRelease:function(me,e){if(!me.getDisabled()){if(me.hasOwnProperty("pressedTimeout")){clearTimeout(me.pressedTimeout);delete me.pressedTimeout}else{me.element.removeCls(me.getPressedCls())}}},onTap:function(e){if(this.getDisabled()){return false}this.fireAction("tap",[this,e],"doTap")},doTap:function(me,e){var handler=me.getHandler(),scope=me.getScope()||me;if(!handler){return}if(typeof handler=="string"){handler=scope[handler]}if(e&&e.preventDefault){e.preventDefault()}handler.apply(scope,arguments)}},function(){});Ext.define("Ext.ActionSheet",{extend:"Ext.Sheet",alias:"widget.actionsheet",requires:["Ext.Button"],config:{baseCls:Ext.baseCSSPrefix+"sheet-action",left:0,right:0,bottom:0,centered:false,height:"auto",defaultType:"button"}});Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.mixin.Observable"},statics:{requestId:0},config:{url:null,async:true,method:null,username:"",password:"",disableCaching:true,disableCachingParam:"_dc",timeout:30000,extraParams:null,defaultHeaders:null,useDefaultHeader:true,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:true,defaultXhrHeader:"XMLHttpRequest",autoAbort:false},textAreaRe:/textarea/i,multiPartRe:/multipart\/form-data/i,lineBreakRe:/\r\n/g,constructor:function(config){this.initConfig(config);this.requests={}},request:function(options){options=options||{};var me=this,scope=options.scope||window,username=options.username||me.getUsername(),password=options.password||me.getPassword()||"",async,requestOptions,request,headers,xhr;if(me.fireEvent("beforerequest",me,options)!==false){requestOptions=me.setOptions(options,scope);if(this.isFormUpload(options)===true){this.upload(options.form,requestOptions.url,requestOptions.data,options);return null}if(options.autoAbort===true||me.getAutoAbort()){me.abort()}xhr=this.getXhrInstance();async=options.async!==false?(options.async||me.getAsync()):false;if(username){xhr.open(requestOptions.method,requestOptions.url,async,username,password)}else{xhr.open(requestOptions.method,requestOptions.url,async)}headers=me.setupHeaders(xhr,options,requestOptions.data,requestOptions.params);request={id:++Ext.data.Connection.requestId,xhr:xhr,headers:headers,options:options,async:async,timeout:setTimeout(function(){request.timedout=true;me.abort(request)},options.timeout||me.getTimeout())};me.requests[request.id]=request;if(async){xhr.onreadystatechange=Ext.Function.bind(me.onStateChange,me,[request])}xhr.send(requestOptions.data);if(!async){return this.onComplete(request)}return request}else{Ext.callback(options.callback,options.scope,[options,undefined,undefined]);return null}},upload:function(form,url,params,options){form=Ext.getDom(form);options=options||{};var id=Ext.id(),frame=document.createElement("iframe"),hiddens=[],encoding="multipart/form-data",buf={target:form.target,method:form.method,encoding:form.encoding,enctype:form.enctype,action:form.action},addField=function(name,value){hiddenItem=document.createElement("input");Ext.fly(hiddenItem).set({type:"hidden",value:value,name:name});form.appendChild(hiddenItem);hiddens.push(hiddenItem)},hiddenItem;Ext.fly(frame).set({id:id,name:id,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL});document.body.appendChild(frame);if(document.frames){document.frames[id].name=id}Ext.fly(form).set({target:id,method:"POST",enctype:encoding,encoding:encoding,action:url||buf.action});if(params){Ext.iterate(Ext.Object.fromQueryString(params),function(name,value){if(Ext.isArray(value)){Ext.each(value,function(v){addField(name,v)})}else{addField(name,value)}})}Ext.fly(frame).on("load",Ext.Function.bind(this.onUploadComplete,this,[frame,options]),null,{single:true});form.submit();Ext.fly(form).set(buf);Ext.each(hiddens,function(h){Ext.removeNode(h)})},onUploadComplete:function(frame,options){var me=this,response={responseText:"",responseXML:null},doc,firstChild;try{doc=frame.contentWindow.document||frame.contentDocument||window.frames[id].document;if(doc){if(doc.body){if(this.textAreaRe.test((firstChild=doc.body.firstChild||{}).tagName)){response.responseText=firstChild.value}else{response.responseText=doc.body.innerHTML}}response.responseXML=doc.XMLDocument||doc}}catch(e){}me.fireEvent("requestcomplete",me,response,options);Ext.callback(options.success,options.scope,[response,options]);Ext.callback(options.callback,options.scope,[options,true,response]);setTimeout(function(){Ext.removeNode(frame)},100)},isFormUpload:function(options){var form=this.getForm(options);if(form){return(options.isUpload||(this.multiPartRe).test(form.getAttribute("enctype")))}return false},getForm:function(options){return Ext.getDom(options.form)||null},setOptions:function(options,scope){var me=this,params=options.params||{},extraParams=me.getExtraParams(),urlParams=options.urlParams,url=options.url||me.getUrl(),jsonData=options.jsonData,method,disableCache,data;if(Ext.isFunction(params)){params=params.call(scope,options)}if(Ext.isFunction(url)){url=url.call(scope,options)}url=this.setupUrl(options,url);if(!url){Ext.Logger.error("No URL specified")}data=options.rawData||options.xmlData||jsonData||null;if(jsonData&&!Ext.isPrimitive(jsonData)){data=Ext.encode(data)}if(Ext.isObject(params)){params=Ext.Object.toQueryString(params)}if(Ext.isObject(extraParams)){extraParams=Ext.Object.toQueryString(extraParams)}params=params+((extraParams)?((params)?"&":"")+extraParams:"");urlParams=Ext.isObject(urlParams)?Ext.Object.toQueryString(urlParams):urlParams;params=this.setupParams(options,params);method=(options.method||me.getMethod()||((params||data)?"POST":"GET")).toUpperCase();this.setupMethod(options,method);disableCache=options.disableCaching!==false?(options.disableCaching||me.getDisableCaching()):false;if(disableCache){url=Ext.urlAppend(url,(options.disableCachingParam||me.getDisableCachingParam())+"="+(new Date().getTime()))}if((method=="GET"||data)&&params){url=Ext.urlAppend(url,params);params=null}if(urlParams){url=Ext.urlAppend(url,urlParams)}return{url:url,method:method,data:data||params||null}},setupUrl:function(options,url){var form=this.getForm(options);if(form){url=url||form.action}return url},setupParams:function(options,params){var form=this.getForm(options),serializedForm;if(form&&!this.isFormUpload(options)){serializedForm=Ext.Element.serializeForm(form);params=params?(params+"&"+serializedForm):serializedForm}return params},setupMethod:function(options,method){if(this.isFormUpload(options)){return"POST"}return method},setupHeaders:function(xhr,options,data,params){var me=this,headers=Ext.apply({},options.headers||{},me.getDefaultHeaders()||{}),contentType=me.getDefaultPostHeader(),jsonData=options.jsonData,xmlData=options.xmlData,key,header;if(!headers["Content-Type"]&&(data||params)){if(data){if(options.rawData){contentType="text/plain"}else{if(xmlData&&Ext.isDefined(xmlData)){contentType="text/xml"}else{if(jsonData&&Ext.isDefined(jsonData)){contentType="application/json"}}}}headers["Content-Type"]=contentType}if(((me.getUseDefaultXhrHeader()&&options.useDefaultXhrHeader!==false)||options.useDefaultXhrHeader)&&!headers["X-Requested-With"]){headers["X-Requested-With"]=me.getDefaultXhrHeader()}try{for(key in headers){if(headers.hasOwnProperty(key)){header=headers[key];xhr.setRequestHeader(key,header)}}}catch(e){me.fireEvent("exception",key,header)}if(options.withCredentials){xhr.withCredentials=options.withCredentials}return headers},getXhrInstance:(function(){var options=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i=0,len=options.length,xhr;for(;i<len;++i){try{xhr=options[i];xhr();break}catch(e){}}return xhr})(),isLoading:function(request){if(!(request&&request.xhr)){return false}var state=request.xhr.readyState;return !(state===0||state==4)},abort:function(request){var me=this,requests=me.requests,id;if(request&&me.isLoading(request)){request.xhr.onreadystatechange=null;request.xhr.abort();me.clearTimeout(request);if(!request.timedout){request.aborted=true}me.onComplete(request);me.cleanup(request)}else{if(!request){for(id in requests){if(requests.hasOwnProperty(id)){me.abort(requests[id])}}}}},abortAll:function(){this.abort()},onStateChange:function(request){if(request.xhr.readyState==4){this.clearTimeout(request);this.onComplete(request);this.cleanup(request)}},clearTimeout:function(request){clearTimeout(request.timeout);delete request.timeout},cleanup:function(request){request.xhr=null;delete request.xhr},onComplete:function(request){var me=this,options=request.options,result,success,response;try{result=me.parseStatus(request.xhr.status,request.xhr);if(request.timedout){result.success=false}}catch(e){result={success:false,isException:false}}success=result.success;if(success){response=me.createResponse(request);me.fireEvent("requestcomplete",me,response,options);Ext.callback(options.success,options.scope,[response,options])}else{if(result.isException||request.aborted||request.timedout){response=me.createException(request)}else{response=me.createResponse(request)}me.fireEvent("requestexception",me,response,options);Ext.callback(options.failure,options.scope,[response,options])}Ext.callback(options.callback,options.scope,[options,success,response]);delete me.requests[request.id];return response},parseStatus:function(status,xhr){status=status==1223?204:status;var success=(status>=200&&status<300)||status==304||(status==0&&xhr.responseText.length>0),isException=false;if(!success){switch(status){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:isException=true;break}}return{success:success,isException:isException}},createResponse:function(request){var xhr=request.xhr,headers={},lines,count,line,index,key,response;if(request.timedout||request.aborted){request.success=false;lines=[]}else{lines=xhr.getAllResponseHeaders().replace(this.lineBreakRe,"\n").split("\n")}count=lines.length;while(count--){line=lines[count];index=line.indexOf(":");if(index>=0){key=line.substr(0,index).toLowerCase();if(line.charAt(index+1)==" "){++index}headers[key]=line.substr(index+1)}}request.xhr=null;delete request.xhr;response={request:request,requestId:request.id,status:xhr.status,statusText:xhr.statusText,getResponseHeader:function(header){return headers[header.toLowerCase()]},getAllResponseHeaders:function(){return headers},responseText:xhr.responseText,responseXML:xhr.responseXML};xhr=null;return response},createException:function(request){return{request:request,requestId:request.id,status:request.aborted?-1:0,statusText:request.aborted?"transaction aborted":"communication failure",aborted:request.aborted,timedout:request.timedout}}});Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:true,autoAbort:false});Ext.define("Ext.Anim",{isAnim:true,disableAnimations:false,defaultConfig:{from:{},to:{},duration:250,delay:0,easing:"ease-in-out",autoClear:true,out:true,direction:null,reverse:false},opposites:{left:"right",right:"left",up:"down",down:"up"},constructor:function(config){config=Ext.apply({},config||{},this.defaultConfig);this.config=config;this.callSuper([config]);this.running=[]},initConfig:function(el,runConfig){var me=this,config=Ext.apply({},runConfig||{},me.config);config.el=el=Ext.get(el);if(config.reverse&&me.opposites[config.direction]){config.direction=me.opposites[config.direction]}if(me.config.before){me.config.before.call(config,el,config)}if(runConfig.before){runConfig.before.call(config.scope||config,el,config)}return config},run:function(el,config){el=Ext.get(el);config=config||{};var me=this,style=el.dom.style,property,after=config.after;if(me.running[el.id]){me.onTransitionEnd(null,el,{config:config,after:after})}config=this.initConfig(el,config);if(this.disableAnimations){for(property in config.to){if(!config.to.hasOwnProperty(property)){continue}style[property]=config.to[property]}this.onTransitionEnd(null,el,{config:config,after:after});return me}el.un("transitionend",me.onTransitionEnd,me);style.webkitTransitionDuration="0ms";for(property in config.from){if(!config.from.hasOwnProperty(property)){continue}style[property]=config.from[property]}setTimeout(function(){if(!el.dom){return}if(config.is3d===true){el.parent().setStyle({"-webkit-perspective":"1200","-webkit-transform-style":"preserve-3d"})}style.webkitTransitionDuration=config.duration+"ms";style.webkitTransitionProperty="all";style.webkitTransitionTimingFunction=config.easing;el.on("transitionend",me.onTransitionEnd,me,{single:true,config:config,after:after});for(property in config.to){if(!config.to.hasOwnProperty(property)){continue}style[property]=config.to[property]}},config.delay||5);me.running[el.id]=config;return me},onTransitionEnd:function(ev,el,o){el=Ext.get(el);if(this.running[el.id]===undefined){return}var style=el.dom.style,config=o.config,me=this,property;if(config.autoClear){for(property in config.to){if(!config.to.hasOwnProperty(property)||config[property]===false){continue}style[property]=""}}style.webkitTransitionDuration=null;style.webkitTransitionProperty=null;style.webkitTransitionTimingFunction=null;if(config.is3d){el.parent().setStyle({"-webkit-perspective":"","-webkit-transform-style":""})}if(me.config.after){me.config.after.call(config,el,config)}if(o.after){o.after.call(config.scope||me,el,config)}delete me.running[el.id]}},function(){Ext.Anim.seed=1000;Ext.Anim.run=function(el,anim,config){if(el.isComponent){el=el.element}config=config||{};if(anim.isAnim){anim.run(el,config)}else{if(Ext.isObject(anim)){if(config.before&&anim.before){config.before=Ext.createInterceptor(config.before,anim.before,anim.scope)}if(config.after&&anim.after){config.after=Ext.createInterceptor(config.after,anim.after,anim.scope)}config=Ext.apply({},config,anim);anim=anim.type}if(!Ext.anims[anim]){throw anim+" is not a valid animation type."}else{if(el&&el.dom){Ext.anims[anim].run(el,config)}}}};Ext.anims={fade:new Ext.Anim({type:"fade",before:function(el){var fromOpacity=1,toOpacity=1,curZ=el.getStyle("z-index")=="auto"?0:el.getStyle("z-index"),zIndex=curZ;if(this.out){toOpacity=0}else{zIndex=Math.abs(curZ)+1;fromOpacity=0}this.from={opacity:fromOpacity,"z-index":zIndex};this.to={opacity:toOpacity,"z-index":zIndex}}}),slide:new Ext.Anim({direction:"left",cover:false,reveal:false,opacity:false,"z-index":false,before:function(el){var currentZIndex=el.getStyle("z-index")=="auto"?0:el.getStyle("z-index"),currentOpacity=el.getStyle("opacity"),zIndex=currentZIndex+1,out=this.out,direction=this.direction,toX=0,toY=0,fromX=0,fromY=0,elH=el.getHeight(),elW=el.getWidth();if(direction=="left"||direction=="right"){if(out){toX=-elW}else{fromX=elW}}else{if(direction=="up"||direction=="down"){if(out){toY=-elH}else{fromY=elH}}}if(direction=="right"||direction=="down"){toY*=-1;toX*=-1;fromY*=-1;fromX*=-1}if(this.cover&&out){toX=0;toY=0;zIndex=currentZIndex}else{if(this.reveal&&!out){fromX=0;fromY=0;zIndex=currentZIndex}}this.from={"-webkit-transform":"translate3d("+fromX+"px, "+fromY+"px, 0)","z-index":zIndex,opacity:currentOpacity-0.01};this.to={"-webkit-transform":"translate3d("+toX+"px, "+toY+"px, 0)","z-index":zIndex,opacity:currentOpacity}}}),pop:new Ext.Anim({scaleOnExit:true,before:function(el){var fromScale=1,toScale=1,fromOpacity=1,toOpacity=1,curZ=el.getStyle("z-index")=="auto"?0:el.getStyle("z-index"),fromZ=curZ,toZ=curZ;if(!this.out){fromScale=0.01;fromZ=curZ+1;toZ=curZ+1;fromOpacity=0}else{if(this.scaleOnExit){toScale=0.01;toOpacity=0}else{toOpacity=0.8}}this.from={"-webkit-transform":"scale("+fromScale+")","-webkit-transform-origin":"50% 50%",opacity:fromOpacity,"z-index":fromZ};this.to={"-webkit-transform":"scale("+toScale+")","-webkit-transform-origin":"50% 50%",opacity:toOpacity,"z-index":toZ}}}),flip:new Ext.Anim({is3d:true,direction:"left",before:function(el){var rotateProp="Y",fromScale=1,toScale=1,fromRotate=0,toRotate=0;if(this.out){toRotate=-180;toScale=0.8}else{fromRotate=180;fromScale=0.8}if(this.direction=="up"||this.direction=="down"){rotateProp="X"}if(this.direction=="right"||this.direction=="left"){toRotate*=-1;fromRotate*=-1}this.from={"-webkit-transform":"rotate"+rotateProp+"("+fromRotate+"deg) scale("+fromScale+")","-webkit-backface-visibility":"hidden"};this.to={"-webkit-transform":"rotate"+rotateProp+"("+toRotate+"deg) scale("+toScale+")","-webkit-backface-visibility":"hidden"}}}),cube:new Ext.Anim({is3d:true,direction:"left",style:"outer",before:function(el){var origin="0% 0%",fromRotate=0,toRotate=0,rotateProp="Y",fromZ=0,toZ=0,elW=el.getWidth(),elH=el.getHeight(),showTranslateZ=true,fromTranslate=" translateX(0)",toTranslate="";if(this.direction=="left"||this.direction=="right"){if(this.out){origin="100% 100%";toZ=elW;toRotate=-90}else{origin="0% 0%";fromZ=elW;fromRotate=90}}else{if(this.direction=="up"||this.direction=="down"){rotateProp="X";if(this.out){origin="100% 100%";toZ=elH;toRotate=90}else{origin="0% 0%";fromZ=elH;fromRotate=-90}}}if(this.direction=="down"||this.direction=="right"){fromRotate*=-1;toRotate*=-1;origin=(origin=="0% 0%")?"100% 100%":"0% 0%"}if(this.style=="inner"){fromZ*=-1;toZ*=-1;fromRotate*=-1;toRotate*=-1;if(!this.out){toTranslate=" translateX(0px)";origin="0% 50%"}else{toTranslate=fromTranslate;origin="100% 50%"}}this.from={"-webkit-transform":"rotate"+rotateProp+"("+fromRotate+"deg)"+(showTranslateZ?" translateZ("+fromZ+"px)":"")+fromTranslate,"-webkit-transform-origin":origin};this.to={"-webkit-transform":"rotate"+rotateProp+"("+toRotate+"deg) translateZ("+toZ+"px)"+toTranslate,"-webkit-transform-origin":origin}},duration:250}),wipe:new Ext.Anim({before:function(el){var curZ=el.getStyle("z-index"),zIndex,mask="";if(!this.out){zIndex=curZ+1;mask="-webkit-gradient(linear, left bottom, right bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))";this.from={"-webkit-mask-image":mask,"-webkit-mask-size":el.getWidth()*3+"px "+el.getHeight()+"px","z-index":zIndex,"-webkit-mask-position-x":0};this.to={"-webkit-mask-image":mask,"-webkit-mask-size":el.getWidth()*3+"px "+el.getHeight()+"px","z-index":zIndex,"-webkit-mask-position-x":-el.getWidth()*2+"px"}}},duration:500})}});Ext.define("Ext.Media",{extend:"Ext.Component",xtype:"media",config:{url:"",enableControls:Ext.os.is.Android?false:true,autoResume:false,autoPause:true,preload:true,loop:false,media:null,volume:1,muted:false},constructor:function(){this.mediaEvents={};this.callSuper(arguments)},initialize:function(){var me=this;me.callParent();me.on({scope:me,activate:me.onActivate,deactivate:me.onDeactivate});me.addMediaListener({canplay:"onCanPlay",play:"onPlay",pause:"onPause",ended:"onEnd",volumechange:"onVolumeChange",timeupdate:"onTimeUpdate"})},addMediaListener:function(event,fn){var me=this,dom=me.media.dom,bind=Ext.Function.bind;Ext.Object.each(event,function(e,fn){fn=bind(me[fn],me);me.mediaEvents[e]=fn;dom.addEventListener(e,fn)})},onPlay:function(){this.fireEvent("play",this)},onCanPlay:function(){this.fireEvent("canplay",this)},onPause:function(){this.fireEvent("pause",this,this.getCurrentTime())},onEnd:function(){this.fireEvent("ended",this,this.getCurrentTime())},onVolumeChange:function(){this.fireEvent("volumechange",this,this.media.dom.volume)},onTimeUpdate:function(){this.fireEvent("timeupdate",this,this.getCurrentTime())},isPlaying:function(){return !Boolean(this.media.dom.paused)},onActivate:function(){var me=this;if(me.getAutoResume()&&!me.isPlaying()){me.play()}},onDeactivate:function(){var me=this;if(me.getAutoPause()&&me.isPlaying()){me.pause()}},updateUrl:function(newUrl){var dom=this.media.dom;dom.src=newUrl;if("load" in dom){dom.load()}if(this.isPlaying()){this.play()}},updateEnableControls:function(enableControls){this.media.dom.controls=enableControls?"controls":false},updateLoop:function(loop){this.media.dom.loop=loop?"loop":false},play:function(){var dom=this.media.dom;if("play" in dom){dom.play();setTimeout(function(){dom.play()},10)}},pause:function(){var dom=this.media.dom;if("pause" in dom){dom.pause()}},toggle:function(){if(this.isPlaying()){this.pause()}else{this.play()}},stop:function(){var me=this;me.setCurrentTime(0);me.fireEvent("stop",me);me.pause()},updateVolume:function(volume){this.media.dom.volume=volume},updateMuted:function(muted){this.fireEvent("mutedchange",this,muted);this.media.dom.muted=muted},getCurrentTime:function(){return this.media.dom.currentTime},setCurrentTime:function(time){this.media.dom.currentTime=time;return time},getDuration:function(){return this.media.dom.duration},destroy:function(){var me=this,dom=me.media.dom,mediaEvents=me.mediaEvents;Ext.Object.each(mediaEvents,function(event,fn){dom.removeEventListener(event,fn)});this.callSuper()}});Ext.define("Ext.Audio",{extend:"Ext.Media",xtype:"audio",config:{cls:Ext.baseCSSPrefix+"audio"},onActivate:function(){var me=this;me.callParent();if(Ext.os.is.Phone){me.element.show()}},onDeactivate:function(){var me=this;me.callParent();if(Ext.os.is.Phone){me.element.hide()}},template:[{reference:"media",preload:"auto",tag:"audio",cls:Ext.baseCSSPrefix+"component"}]});Ext.define("Ext.ComponentQuery",{singleton:true,uses:["Ext.ComponentManager"]},function(){var cq=this,filterFnPattern=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),filterItems=function(items,operation){return operation.method.apply(this,[items].concat(operation.args))},getItems=function(items,mode){var result=[],i=0,length=items.length,candidate,deep=mode!==">";for(;i<length;i++){candidate=items[i];if(candidate.getRefItems){result=result.concat(candidate.getRefItems(deep))}}return result},getAncestors=function(items){var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];while(!!(candidate=(candidate.ownerCt||candidate.floatParent))){result.push(candidate)}}return result},filterByXType=function(items,xtype,shallow){if(xtype==="*"){return items.slice()}else{var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.isXType(xtype,shallow)){result.push(candidate)}}return result}},filterByClassName=function(items,className){var EA=Ext.Array,result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.el?candidate.el.hasCls(className):EA.contains(candidate.initCls(),className)){result.push(candidate)}}return result},filterByAttribute=function(items,property,operator,value){var result=[],i=0,length=items.length,candidate,getter,getValue;for(;i<length;i++){candidate=items[i];getter=Ext.Class.getConfigNameMap(property).get;if(candidate[getter]){getValue=candidate[getter]();if(!value?!!getValue:(String(getValue)===value)){result.push(candidate)}}else{if(candidate.config&&candidate.config[property]){if(!value?!!candidate.config[property]:(String(candidate.config[property])===value)){result.push(candidate)}}else{if(!value?!!candidate[property]:(String(candidate[property])===value)){result.push(candidate)}}}}return result},filterById=function(items,id){var result=[],i=0,length=items.length,candidate;for(;i<length;i++){candidate=items[i];if(candidate.getId()===id||candidate.getItemId()===id){result.push(candidate)}}return result},filterByPseudo=function(items,name,value){return cq.pseudos[name](items,value)},modeRe=/^(\s?([>\^])\s?|\s|$)/,tokenRe=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,matchers=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:filterByXType},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:filterByAttribute},{re:/^#([\w\-]+)/,method:filterById},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:filterByPseudo},{re:/^(?:\{([^\}]+)\})/,method:filterFnPattern}];cq.Query=Ext.extend(Object,{constructor:function(cfg){cfg=cfg||{};Ext.apply(this,cfg)},execute:function(root){var operations=this.operations,i=0,length=operations.length,operation,workingItems;if(!root){workingItems=Ext.ComponentManager.all.getArray()}else{if(Ext.isArray(root)){workingItems=root}}for(;i<length;i++){operation=operations[i];if(operation.mode==="^"){workingItems=getAncestors(workingItems||[root])}else{if(operation.mode){workingItems=getItems(workingItems||[root],operation.mode)}else{workingItems=filterItems(workingItems||getItems([root]),operation)}}if(i===length-1){return workingItems}}return[]},is:function(component){var operations=this.operations,components=Ext.isArray(component)?component:[component],originalLength=components.length,lastOperation=operations[operations.length-1],ln,i;components=filterItems(components,lastOperation);if(components.length===originalLength){if(operations.length>1){for(i=0,ln=components.length;i<ln;i++){if(Ext.Array.indexOf(this.execute(),components[i])===-1){return false}}}return true}return false}});Ext.apply(this,{cache:{},pseudos:{not:function(components,selector){var CQ=Ext.ComponentQuery,i=0,length=components.length,results=[],index=-1,component;for(;i<length;++i){component=components[i];if(!CQ.is(component,selector)){results[++index]=component}}return results}},query:function(selector,root){var selectors=selector.split(","),length=selectors.length,i=0,results=[],noDupResults=[],dupMatcher={},query,resultsLn,cmp;for(;i<length;i++){selector=Ext.String.trim(selectors[i]);query=this.parse(selector);results=results.concat(query.execute(root))}if(length>1){resultsLn=results.length;for(i=0;i<resultsLn;i++){cmp=results[i];if(!dupMatcher[cmp.id]){noDupResults.push(cmp);dupMatcher[cmp.id]=true}}results=noDupResults}return results},is:function(component,selector){if(!selector){return true}var query=this.cache[selector];if(!query){this.cache[selector]=query=this.parse(selector)}return query.is(component)},parse:function(selector){var operations=[],length=matchers.length,lastSelector,tokenMatch,matchedChar,modeMatch,selectorMatch,i,matcher,method;while(selector&&lastSelector!==selector){lastSelector=selector;tokenMatch=selector.match(tokenRe);if(tokenMatch){matchedChar=tokenMatch[1];if(matchedChar==="#"){operations.push({method:filterById,args:[Ext.String.trim(tokenMatch[2])]})}else{if(matchedChar==="."){operations.push({method:filterByClassName,args:[Ext.String.trim(tokenMatch[2])]})}else{operations.push({method:filterByXType,args:[Ext.String.trim(tokenMatch[2]),Boolean(tokenMatch[3])]})}}selector=selector.replace(tokenMatch[0],"")}while(!(modeMatch=selector.match(modeRe))){for(i=0;selector&&i<length;i++){matcher=matchers[i];selectorMatch=selector.match(matcher.re);method=matcher.method;if(selectorMatch){operations.push({method:Ext.isString(matcher.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[method].concat(selectorMatch.slice(1)))):matcher.method,args:selectorMatch.slice(1)});selector=selector.replace(selectorMatch[0],"");break}if(i===(length-1)){Ext.Error.raise('Invalid ComponentQuery selector: "'+arguments[0]+'"')}}}if(modeMatch[1]){operations.push({mode:modeMatch[2]||modeMatch[1]});selector=selector.replace(modeMatch[0],"")}}return new cq.Query({operations:operations})}})});Ext.define("Ext.Decorator",{extend:"Ext.Component",isDecorator:true,config:{component:{}},statics:{generateProxySetter:function(name){return function(value){var component=this.getComponent();component[name].call(component,value);return this}},generateProxyGetter:function(name){return function(){var component=this.getComponent();return component[name].call(component)}}},onClassExtended:function(Class,members){if(!members.hasOwnProperty("proxyConfig")){return}var ExtClass=Ext.Class,proxyConfig=members.proxyConfig,config=members.config;members.config=(config)?Ext.applyIf(config,proxyConfig):proxyConfig;var name,nameMap,setName,getName;for(name in proxyConfig){if(proxyConfig.hasOwnProperty(name)){nameMap=ExtClass.getConfigNameMap(name);setName=nameMap.set;getName=nameMap.get;members[setName]=this.generateProxySetter(setName);members[getName]=this.generateProxyGetter(getName)}}},applyComponent:function(config){return Ext.factory(config,Ext.Component)},updateComponent:function(newComponent,oldComponent){if(oldComponent){if(this.isRendered()&&oldComponent.setRendered(false)){oldComponent.fireAction("renderedchange",[this,oldComponent,false],"doUnsetComponent",this,{args:[oldComponent]})}else{this.doUnsetComponent(oldComponent)}}if(newComponent){if(this.isRendered()&&newComponent.setRendered(true)){newComponent.fireAction("renderedchange",[this,newComponent,true],"doSetComponent",this,{args:[newComponent]})}else{this.doSetComponent(newComponent)}}},doUnsetComponent:function(component){if(component.renderElement.dom){component.setLayoutSizeFlags(0);this.innerElement.dom.removeChild(component.renderElement.dom)}},doSetComponent:function(component){if(component.renderElement.dom){component.setLayoutSizeFlags(this.getSizeFlags());this.innerElement.dom.appendChild(component.renderElement.dom)}},setRendered:function(rendered){var component;if(this.callParent(arguments)){component=this.getComponent();if(component){component.setRendered(rendered)}return true}return false},setDisabled:function(disabled){this.callParent(arguments);this.getComponent().setDisabled(disabled)},destroy:function(){Ext.destroy(this.getComponent());this.callParent()}});Ext.define("Ext.Img",{extend:"Ext.Component",xtype:["image","img"],config:{src:null,baseCls:Ext.baseCSSPrefix+"img",imageCls:Ext.baseCSSPrefix+"img-image",backgroundCls:Ext.baseCSSPrefix+"img-background",mode:"background"},beforeInitialize:function(){var me=this;me.onLoad=Ext.Function.bind(me.onLoad,me);me.onError=Ext.Function.bind(me.onError,me)},initialize:function(){var me=this;me.callParent();me.relayEvents(me.renderElement,"*");me.element.on({tap:"onTap",scope:me})},hide:function(){this.callParent();this.hiddenSrc=this.hiddenSrc||this.getSrc();this.setSrc(null)},show:function(){this.callParent();if(this.hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode:function(mode){var me=this,imageCls=me.getImageCls(),backgroundCls=me.getBackgroundCls();if(mode==="background"){if(me.imageElement){me.imageElement.destroy();delete me.imageElement;me.updateSrc(me.getSrc())}me.replaceCls(imageCls,backgroundCls)}else{me.imageElement=me.element.createChild({tag:"img"});me.replaceCls(backgroundCls,imageCls)}},updateImageCls:function(newCls,oldCls){this.replaceCls(oldCls,newCls)},updateBackgroundCls:function(newCls,oldCls){this.replaceCls(oldCls,newCls)},onTap:function(e){this.fireEvent("tap",this,e)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:function(newSrc){var me=this,dom;if(me.getMode()==="background"){dom=this.imageObject||new Image()}else{dom=me.imageElement.dom}this.imageObject=dom;dom.setAttribute("src",Ext.isString(newSrc)?newSrc:"");dom.addEventListener("load",me.onLoad,false);dom.addEventListener("error",me.onError,false)},detachListeners:function(){var dom=this.imageObject;if(dom){dom.removeEventListener("load",this.onLoad,false);dom.removeEventListener("error",this.onError,false)}},onLoad:function(e){this.detachListeners();if(this.getMode()==="background"){this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'}this.fireEvent("load",this,e)},onError:function(e){this.detachListeners();this.fireEvent("error",this,e)},doSetWidth:function(width){var sizingElement=(this.getMode()==="background")?this.element:this.imageElement;sizingElement.setWidth(width);this.callParent(arguments)},doSetHeight:function(height){var sizingElement=(this.getMode()==="background")?this.element:this.imageElement;sizingElement.setHeight(height);this.callParent(arguments)},destroy:function(){this.detachListeners();Ext.destroy(this.imageObject,this.imageElement);delete this.imageObject;delete this.imageElement;this.callParent()}});Ext.define("Ext.Label",{extend:"Ext.Component",xtype:"label",config:{baseCls:Ext.baseCSSPrefix+"label"}});Ext.define("Ext.LoadMask",{extend:"Ext.Mask",xtype:"loadmask",config:{message:"Loading...",messageCls:Ext.baseCSSPrefix+"mask-message",indicator:true},getTemplate:function(){var prefix=Ext.baseCSSPrefix;return[{reference:"innerElement",cls:prefix+"mask-inner",children:[{reference:"indicatorElement",cls:prefix+"loading-spinner-outer",children:[{cls:prefix+"loading-spinner",children:[{tag:"span",cls:prefix+"loading-top"},{tag:"span",cls:prefix+"loading-right"},{tag:"span",cls:prefix+"loading-bottom"},{tag:"span",cls:prefix+"loading-left"}]}]},{reference:"messageElement"}]}]},updateMessage:function(newMessage){var cls=Ext.baseCSSPrefix+"has-message";if(newMessage){this.addCls(cls)}else{this.removeCls(cls)}this.messageElement.setHtml(newMessage)},updateMessageCls:function(newMessageCls,oldMessageCls){this.messageElement.replaceCls(oldMessageCls,newMessageCls)},updateIndicator:function(newIndicator){this[newIndicator?"removeCls":"addCls"](Ext.baseCSSPrefix+"indicator-hidden")}},function(){});Ext.define("Ext.util.Geolocation",{extend:"Ext.Evented",alternateClassName:["Ext.util.GeoLocation"],config:{autoUpdate:true,frequency:10000,latitude:null,longitude:null,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,speed:null,timestamp:null,allowHighAccuracy:false,timeout:Infinity,maximumAge:0,provider:undefined},updateMaximumAge:function(){if(this.watchOperation){this.updateWatchOperation()}},updateTimeout:function(){if(this.watchOperation){this.updateWatchOperation()}},updateAllowHighAccuracy:function(){if(this.watchOperation){this.updateWatchOperation()}},applyProvider:function(config){if(Ext.feature.has.Geolocation){if(!config){if(navigator&&navigator.geolocation){config=navigator.geolocation}else{if(window.google){config=google.gears.factory.create("beta.geolocation")}}}}else{this.fireEvent("locationerror",this,false,false,true,"This device does not support Geolocation.")}return config},updateAutoUpdate:function(newAutoUpdate,oldAutoUpdate){var me=this,provider=me.getProvider();if(oldAutoUpdate&&provider){clearInterval(me.watchOperationId);me.watchOperationId=null}if(newAutoUpdate){if(!provider){me.fireEvent("locationerror",me,false,false,true,null);return}try{me.updateWatchOperation()}catch(e){me.fireEvent("locationerror",me,false,false,true,e.message)}}},updateWatchOperation:function(){var me=this,provider=me.getProvider();if(me.watchOperationId){clearInterval(me.watchOperationId)}function pollPosition(){provider.getCurrentPosition(Ext.bind(me.fireUpdate,me),Ext.bind(me.fireError,me),me.parseOptions())}pollPosition();me.watchOperationId=setInterval(pollPosition,this.getFrequency())},updateLocation:function(callback,scope,positionOptions){var me=this,provider=me.getProvider();var failFunction=function(message,error){if(error){me.fireError(error)}else{me.fireEvent("locationerror",me,false,false,true,message)}if(callback){callback.call(scope||me,null,me)}};if(!provider){failFunction(null);return}try{provider.getCurrentPosition(function(position){me.fireUpdate(position);if(callback){callback.call(scope||me,me,me)}},function(error){failFunction(null,error)},positionOptions||me.parseOptions())}catch(e){failFunction(e.message)}},fireUpdate:function(position){var me=this,coords=position.coords;this.position=position;me.setConfig({timestamp:position.timestamp,latitude:coords.latitude,longitude:coords.longitude,accuracy:coords.accuracy,altitude:coords.altitude,altitudeAccuracy:coords.altitudeAccuracy,heading:coords.heading,speed:coords.speed});me.fireEvent("locationupdate",me)},fireError:function(error){var errorCode=error.code;this.fireEvent("locationerror",this,errorCode==error.TIMEOUT,errorCode==error.PERMISSION_DENIED,errorCode==error.POSITION_UNAVAILABLE,error.message==undefined?null:error.message)},parseOptions:function(){var timeout=this.getTimeout(),ret={maximumAge:this.getMaximumAge(),enableHighAccuracy:this.getAllowHighAccuracy()};if(timeout!==Infinity){ret.timeout=timeout}return ret},destroy:function(){this.setAutoUpdate(false)}});Ext.define("Ext.Map",{extend:"Ext.Container",xtype:"map",requires:["Ext.util.Geolocation"],isMap:true,config:{baseCls:Ext.baseCSSPrefix+"map",useCurrentLocation:false,map:null,geo:null,mapOptions:{}},constructor:function(){this.callParent(arguments);if(!(window.google||{}).maps){this.setHtml("Google Maps API is required")}},initialize:function(){this.callParent();this.on({painted:"doResize",scope:this});this.innerElement.on("touchstart","onTouchStart",this)},getElementConfig:function(){return{reference:"element",className:"x-container",children:[{reference:"innerElement",className:"x-inner",children:[{reference:"mapContainer",className:Ext.baseCSSPrefix+"map-container"}]}]}},onTouchStart:function(e){e.makeUnpreventable()},applyMapOptions:function(options){return Ext.merge({},this.options,options)},updateMapOptions:function(newOptions){var me=this,gm=(window.google||{}).maps,map=this.getMap();if(gm&&map){map.setOptions(newOptions)}if(newOptions.center&&!me.isPainted()){me.un("painted","setMapCenter",this);me.on("painted","setMapCenter",this,{delay:150,single:true,args:[newOptions.center]})}},getMapOptions:function(){return Ext.merge({},this.options||this.getInitialConfig("mapOptions"))},updateUseCurrentLocation:function(useCurrentLocation){this.setGeo(useCurrentLocation);if(!useCurrentLocation){this.setMapCenter()}},applyGeo:function(config){return Ext.factory(config,Ext.util.Geolocation,this.getGeo())},updateGeo:function(newGeo,oldGeo){var events={locationupdate:"onGeoUpdate",locationerror:"onGeoError",scope:this};if(oldGeo){oldGeo.un(events)}if(newGeo){newGeo.on(events);newGeo.updateLocation()}},doResize:function(){var gm=(window.google||{}).maps,map=this.getMap();if(gm&&map){gm.event.trigger(map,"resize")}},renderMap:function(){var me=this,gm=(window.google||{}).maps,element=me.mapContainer,mapOptions=me.getMapOptions(),map=me.getMap(),event;if(gm){if(Ext.os.is.iPad){Ext.merge({navigationControlOptions:{style:gm.NavigationControlStyle.ZOOM_PAN}},mapOptions)}mapOptions=Ext.merge({zoom:12,mapTypeId:gm.MapTypeId.ROADMAP},mapOptions);if(!mapOptions.hasOwnProperty("center")){mapOptions.center=new gm.LatLng(37.381592,-122.135672)}if(element.dom.firstChild){Ext.fly(element.dom.firstChild).destroy()}if(map){gm.event.clearInstanceListeners(map)}me.setMap(new gm.Map(element.dom,mapOptions));map=me.getMap();event=gm.event;event.addListener(map,"zoom_changed",Ext.bind(me.onZoomChange,me));event.addListener(map,"maptypeid_changed",Ext.bind(me.onTypeChange,me));event.addListener(map,"center_changed",Ext.bind(me.onCenterChange,me));me.fireEvent("maprender",me,map)}},onGeoUpdate:function(geo){if(geo){this.setMapCenter(new google.maps.LatLng(geo.getLatitude(),geo.getLongitude()))}},onGeoError:Ext.emptyFn,setMapCenter:function(coordinates){var me=this,map=me.getMap(),gm=(window.google||{}).maps;if(gm){if(!me.isPainted()){me.un("painted","setMapCenter",this);me.on("painted","setMapCenter",this,{delay:150,single:true,args:[coordinates]});return}coordinates=coordinates||new gm.LatLng(37.381592,-122.135672);if(coordinates&&!(coordinates instanceof gm.LatLng)&&"longitude" in coordinates){coordinates=new gm.LatLng(coordinates.latitude,coordinates.longitude)}if(!map){me.renderMap();map=me.getMap()}if(map&&coordinates instanceof gm.LatLng){map.panTo(coordinates)}else{this.options=Ext.apply(this.getMapOptions(),{center:coordinates})}}},onZoomChange:function(){var mapOptions=this.getMapOptions(),map=this.getMap(),zoom;zoom=(map&&map.getZoom)?map.getZoom():mapOptions.zoom||10;this.options=Ext.apply(mapOptions,{zoom:zoom});this.fireEvent("zoomchange",this,map,zoom)},onTypeChange:function(){var mapOptions=this.getMapOptions(),map=this.getMap(),mapTypeId;mapTypeId=(map&&map.getMapTypeId)?map.getMapTypeId():mapOptions.mapTypeId;this.options=Ext.apply(mapOptions,{mapTypeId:mapTypeId});this.fireEvent("typechange",this,map,mapTypeId)},onCenterChange:function(){var mapOptions=this.getMapOptions(),map=this.getMap(),center;center=(map&&map.getCenter)?map.getCenter():mapOptions.center;this.options=Ext.apply(mapOptions,{center:center});this.fireEvent("centerchange",this,map,center)},destroy:function(){Ext.destroy(this.getGeo());var map=this.getMap();if(map&&(window.google||{}).maps){google.maps.event.clearInstanceListeners(map)}this.callParent()}},function(){});Ext.define("Ext.Title",{extend:"Ext.Component",xtype:"title",config:{baseCls:"x-title",title:""},updateTitle:function(newTitle){this.setHtml(newTitle)}});Ext.define("Ext.Spacer",{extend:"Ext.Component",alias:"widget.spacer",config:{},constructor:function(config){config=config||{};if(!config.width){config.flex=1}this.callParent([config])}});Ext.define("Ext.Toolbar",{extend:"Ext.Container",xtype:"toolbar",requires:["Ext.Button","Ext.Title","Ext.Spacer","Ext.layout.HBox"],isToolbar:true,config:{baseCls:Ext.baseCSSPrefix+"toolbar",ui:"dark",title:null,defaultType:"button",minHeight:"2.6em",layout:{type:"hbox",align:"center"}},constructor:function(config){config=config||{};if(config.docked=="left"||config.docked=="right"){config.layout={type:"vbox",align:"stretch"}}this.callParent([config])},applyTitle:function(title){if(typeof title=="string"){title={title:title,centered:true}}return Ext.factory(title,Ext.Title,this.getTitle())},updateTitle:function(newTitle,oldTitle){if(newTitle){this.add(newTitle)}if(oldTitle){oldTitle.destroy()}},showTitle:function(){var title=this.getTitle();if(title){title.show()}},hideTitle:function(){var title=this.getTitle();if(title){title.hide()}}},function(){});Ext.define("Ext.field.Input",{extend:"Ext.Component",xtype:"input",tag:"input",cachedConfig:{cls:Ext.baseCSSPrefix+"form-field",focusCls:Ext.baseCSSPrefix+"field-focus",maskCls:Ext.baseCSSPrefix+"field-mask",useMask:"auto",type:"text",checked:false},config:{baseCls:Ext.baseCSSPrefix+"field-input",name:null,value:null,isFocused:false,tabIndex:null,placeHolder:null,minValue:null,maxValue:null,stepValue:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,maxRows:null,pattern:null,startValue:false},getTemplate:function(){var items=[{reference:"input",tag:this.tag},{reference:"clearIcon",cls:"x-clear-icon"}];items.push({reference:"mask",classList:[this.config.maskCls]});return items},initElement:function(){var me=this;me.callParent();me.input.on({scope:me,keyup:"onKeyUp",keydown:"onKeyDown",focus:"onFocus",blur:"onBlur",input:"onInput",paste:"onPaste"});me.mask.on({tap:"onMaskTap",scope:me});if(me.clearIcon){me.clearIcon.on({tap:"onClearIconTap",scope:me})}},applyUseMask:function(useMask){if(useMask==="auto"){useMask=Ext.os.is.iOS&&Ext.os.version.lt("5")}return Boolean(useMask)},updateUseMask:function(newUseMask){this.mask[newUseMask?"show":"hide"]()},updatePattern:function(pattern){this.updateFieldAttribute("pattern",pattern)},updateFieldAttribute:function(attribute,newValue){var input=this.input;if(newValue){input.dom.setAttribute(attribute,newValue)}else{input.dom.removeAttribute(attribute)}},updateCls:function(newCls,oldCls){this.input.addCls(Ext.baseCSSPrefix+"input-el");this.input.replaceCls(oldCls,newCls)},updateType:function(newType,oldType){var prefix=Ext.baseCSSPrefix+"input-";this.input.replaceCls(prefix+oldType,prefix+newType);this.updateFieldAttribute("type",newType)},updateName:function(newName){this.updateFieldAttribute("name",newName)},getValue:function(){var input=this.input;if(input){this._value=input.dom.value}return this._value},applyValue:function(value){return(Ext.isEmpty(value))?"":value},updateValue:function(newValue){var input=this.input;if(input){input.dom.value=newValue}},setValue:function(newValue){var oldValue=this._value;this.updateValue(this.applyValue(newValue));newValue=this.getValue();if(String(newValue)!=String(oldValue)&&this.initialized){this.onChange(this,newValue,oldValue)}return this},applyTabIndex:function(tabIndex){if(tabIndex!==null&&typeof tabIndex!="number"){throw new Error("Ext.field.Field: [applyTabIndex] trying to pass a value which is not a number")}return tabIndex},updateTabIndex:function(newTabIndex){this.updateFieldAttribute("tabIndex",newTabIndex)},testAutoFn:function(value){return[true,"on"].indexOf(value)!==-1},applyMaxLength:function(maxLength){if(maxLength!==null&&typeof maxLength!="number"){throw new Error("Ext.field.Text: [applyMaxLength] trying to pass a value which is not a number")}return maxLength},updateMaxLength:function(newMaxLength){this.updateFieldAttribute("maxlength",newMaxLength)},updatePlaceHolder:function(newPlaceHolder){this.updateFieldAttribute("placeholder",newPlaceHolder)},applyAutoComplete:function(autoComplete){return this.testAutoFn(autoComplete)},updateAutoComplete:function(newAutoComplete){var value=newAutoComplete?"on":"off";this.updateFieldAttribute("autocomplete",value)},applyAutoCapitalize:function(autoCapitalize){return this.testAutoFn(autoCapitalize)},updateAutoCapitalize:function(newAutoCapitalize){var value=newAutoCapitalize?"on":"off";this.updateFieldAttribute("autocapitalize",value)},applyAutoCorrect:function(autoCorrect){return this.testAutoFn(autoCorrect)},updateAutoCorrect:function(newAutoCorrect){var value=newAutoCorrect?"on":"off";this.updateFieldAttribute("autocorrect",value)},updateMinValue:function(newMinValue){this.updateFieldAttribute("min",newMinValue)},updateMaxValue:function(newMaxValue){this.updateFieldAttribute("max",newMaxValue)},updateStepValue:function(newStepValue){this.updateFieldAttribute("step",newStepValue)},checkedRe:/^(true|1|on)/i,getChecked:function(){var el=this.input,checked;if(el){checked=el.dom.checked;this._checked=checked}return checked},applyChecked:function(checked){return !!this.checkedRe.test(String(checked))},setChecked:function(newChecked){this.updateChecked(this.applyChecked(newChecked));this._checked=newChecked},updateChecked:function(newChecked){this.input.dom.checked=newChecked},updateReadOnly:function(readOnly){this.updateFieldAttribute("readonly",readOnly)},applyMaxRows:function(maxRows){if(maxRows!==null&&typeof maxRows!=="number"){throw new Error("Ext.field.Input: [applyMaxRows] trying to pass a value which is not a number")}return maxRows},updateMaxRows:function(newRows){this.updateFieldAttribute("rows",newRows)},doSetDisabled:function(disabled){this.callParent(arguments);this.input.dom.disabled=disabled;if(!disabled){this.blur()}},isDirty:function(){if(this.getDisabled()){return false}return String(this.getValue())!==String(this.originalValue)},reset:function(){this.setValue(this.originalValue)},onMaskTap:function(e){this.fireAction("masktap",[this,e],"doMaskTap")},doMaskTap:function(me,e){if(me.getDisabled()){return false}me.maskCorrectionTimer=Ext.defer(me.showMask,1000,me);me.hideMask()},showMask:function(e){if(this.mask){this.mask.setStyle("display","block")}},hideMask:function(e){if(this.mask){this.mask.setStyle("display","none")}},focus:function(){var me=this,el=me.input;if(el&&el.dom.focus){el.dom.focus()}return me},blur:function(){var me=this,el=this.input;if(el&&el.dom.blur){el.dom.blur()}return me},select:function(){var me=this,el=me.input;if(el&&el.dom.setSelectionRange){el.dom.setSelectionRange(0,9999)}return me},onFocus:function(e){this.fireAction("focus",[e],"doFocus")},doFocus:function(e){var me=this;if(me.mask){if(me.maskCorrectionTimer){clearTimeout(me.maskCorrectionTimer)}me.hideMask()}if(!me.getIsFocused()){me.setIsFocused(true);me.setStartValue(me.getValue())}},onBlur:function(e){this.fireAction("blur",[e],"doBlur")},doBlur:function(e){var me=this,value=me.getValue(),startValue=me.getStartValue();me.setIsFocused(false);if(String(value)!=String(startValue)){me.onChange(me,value,startValue)}me.showMask()},onClearIconTap:function(e){this.fireEvent("clearicontap",this,e);if(Ext.os.is.Android){this.focus()}},onClick:function(e){this.fireEvent("click",e)},onChange:function(me,value,startValue){this.fireEvent("change",me,value,startValue)},onPaste:function(e){this.fireEvent("paste",e)},onKeyUp:function(e){this.fireEvent("keyup",e)},onKeyDown:function(){this.ignoreInput=true},onInput:function(e){var me=this;if(me.ignoreInput){me.ignoreInput=false;return}setTimeout(function(){if(!me.ignoreInput){me.fireEvent("keyup",e);me.ignoreInput=false}},10)},onMouseDown:function(e){this.fireEvent("mousedown",e)}});Ext.define("Ext.field.Field",{extend:"Ext.Decorator",alternateClassName:"Ext.form.Field",xtype:"field",requires:["Ext.field.Input"],isField:true,isFormField:true,config:{baseCls:Ext.baseCSSPrefix+"field",label:null,labelAlign:"left",labelWidth:"30%",labelWrap:false,clearIcon:null,required:false,inputType:null,name:null,value:null,tabIndex:null},cachedConfig:{labelCls:null,requiredCls:Ext.baseCSSPrefix+"field-required",inputCls:null},getElementConfig:function(){var prefix=Ext.baseCSSPrefix;return{reference:"element",className:"x-container",children:[{reference:"label",cls:prefix+"form-label",children:[{reference:"labelspan",tag:"span"}]},{reference:"innerElement",cls:prefix+"component-outer"}]}},updateLabel:function(newLabel,oldLabel){var renderElement=this.renderElement,prefix=Ext.baseCSSPrefix;if(newLabel){this.labelspan.setHtml(newLabel);renderElement.addCls(prefix+"field-labeled")}else{renderElement.removeCls(prefix+"field-labeled")}},updateLabelAlign:function(newLabelAlign,oldLabelAlign){var renderElement=this.renderElement,prefix=Ext.baseCSSPrefix;if(newLabelAlign){renderElement.addCls(prefix+"label-align-"+newLabelAlign);if(newLabelAlign=="top"||newLabelAlign=="bottom"){this.label.setWidth("100%")}else{this.updateLabelWidth(this.getLabelWidth())}}if(oldLabelAlign){renderElement.removeCls(prefix+"label-align-"+oldLabelAlign)}},updateLabelCls:function(newLabelCls,oldLabelCls){if(newLabelCls){this.label.addCls(newLabelCls)}if(oldLabelCls){this.label.removeCls(oldLabelCls)}},updateLabelWidth:function(newLabelWidth){var labelAlign=this.getLabelAlign();if(newLabelWidth){if(labelAlign=="top"||labelAlign=="bottom"){this.label.setWidth("100%")}else{this.label.setWidth(newLabelWidth)}}},updateLabelWrap:function(newLabelWrap,oldLabelWrap){var cls=Ext.baseCSSPrefix+"form-label-nowrap";if(!newLabelWrap){this.addCls(cls)}else{this.removeCls(cls)}},updateRequired:function(newRequired){this.renderElement[newRequired?"addCls":"removeCls"](this.getRequiredCls())},updateRequiredCls:function(newRequiredCls,oldRequiredCls){if(this.getRequired()){this.renderElement.replaceCls(oldRequiredCls,newRequiredCls)}},initialize:function(){var me=this;me.callParent();me.doInitValue()},doInitValue:function(){this.originalValue=this.getInitialConfig().value},reset:function(){this.setValue(this.originalValue);return this},isDirty:function(){return false}},function(){});Ext.define("Ext.field.Text",{extend:"Ext.field.Field",xtype:"textfield",alternateClassName:"Ext.form.Text",config:{ui:"text",clearIcon:true,placeHolder:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,readOnly:null,component:{xtype:"input",type:"text"},bubbleEvents:["action"]},initialize:function(){var me=this;me.callParent();me.getComponent().on({scope:this,keyup:"onKeyUp",change:"onChange",focus:"onFocus",blur:"onBlur",paste:"onPaste",mousedown:"onMouseDown",clearicontap:"onClearIconTap"});me.originalValue=me.originalValue||"";me.getComponent().originalValue=me.originalValue;me.syncEmptyCls()},syncEmptyCls:function(){var empty=(this._value)?this._value.length:false,cls=Ext.baseCSSPrefix+"empty";if(empty){this.removeCls(cls)}else{this.addCls(cls)}},updateValue:function(newValue){var component=this.getComponent(),valueValid=newValue!==undefined&&newValue!==null&&newValue!=="";if(component){component.setValue(newValue)}this[valueValid?"showClearIcon":"hideClearIcon"]();this.syncEmptyCls()},getValue:function(){var me=this;me._value=me.getComponent().getValue();me.syncEmptyCls();return me._value},updatePlaceHolder:function(newPlaceHolder){this.getComponent().setPlaceHolder(newPlaceHolder)},updateMaxLength:function(newMaxLength){this.getComponent().setMaxLength(newMaxLength)},updateAutoComplete:function(newAutoComplete){this.getComponent().setAutoComplete(newAutoComplete)},updateAutoCapitalize:function(newAutoCapitalize){this.getComponent().setAutoCapitalize(newAutoCapitalize)},updateAutoCorrect:function(newAutoCorrect){this.getComponent().setAutoCorrect(newAutoCorrect)},updateReadOnly:function(newReadOnly){if(newReadOnly){this.hideClearIcon()}else{this.showClearIcon()}this.getComponent().setReadOnly(newReadOnly)},updateInputType:function(newInputType){var component=this.getComponent();if(component){component.setType(newInputType)}},updateName:function(newName){var component=this.getComponent();if(component){component.setName(newName)}},updateTabIndex:function(newTabIndex){var component=this.getComponent();if(component){component.setTabIndex(newTabIndex)}},updateInputCls:function(newInputCls,oldInputCls){var component=this.getComponent();if(component){component.replaceCls(oldInputCls,newInputCls)}},doSetDisabled:function(disabled){var me=this;me.callParent(arguments);var component=me.getComponent();if(component){component.setDisabled(disabled)}if(disabled){me.hideClearIcon()}else{me.showClearIcon()}},showClearIcon:function(){var me=this,value=me.getValue(),valueValid=value!==undefined&&value!==null&&value!=="";if(me.getClearIcon()&&!me.getDisabled()&&!me.getReadOnly()&&valueValid){me.element.addCls(Ext.baseCSSPrefix+"field-clearable")}return me},hideClearIcon:function(){if(this.getClearIcon()){this.element.removeCls(Ext.baseCSSPrefix+"field-clearable")}},onKeyUp:function(e){this.fireAction("keyup",[this,e],"doKeyUp")},doKeyUp:function(me,e){var value=me.getValue(),valueValid=value!==undefined&&value!==null&&value!=="";this[valueValid?"showClearIcon":"hideClearIcon"]();if(e.browserEvent.keyCode===13){me.fireAction("action",[me,e],"doAction")}},doAction:function(){this.blur()},onClearIconTap:function(e){this.fireAction("clearicontap",[this,e],"doClearIconTap")},doClearIconTap:function(me,e){me.setValue("");me.getValue()},onChange:function(me,value,startValue){me.fireEvent("change",this,value,startValue)},onFocus:function(e){this.isFocused=true;this.fireEvent("focus",this,e)},onBlur:function(e){var me=this;this.isFocused=false;me.fireEvent("blur",me,e);setTimeout(function(){me.isFocused=false},50)},onPaste:function(e){this.fireEvent("paste",this,e)},onMouseDown:function(e){this.fireEvent("mousedown",this,e)},focus:function(){this.getComponent().focus();return this},blur:function(){this.getComponent().blur();return this},select:function(){this.getComponent().select();return this},reset:function(){this.getComponent().reset();this.getValue();this[this._value?"showClearIcon":"hideClearIcon"]()},isDirty:function(){var component=this.getComponent();if(component){return component.isDirty()}return false}});Ext.define("Ext.field.TextAreaInput",{extend:"Ext.field.Input",xtype:"textareainput",tag:"textarea"});Ext.define("Ext.field.TextArea",{extend:"Ext.field.Text",xtype:"textareafield",requires:["Ext.field.TextAreaInput"],alternateClassName:"Ext.form.TextArea",config:{ui:"textarea",autoCapitalize:false,component:{xtype:"textareainput"},maxRows:null},updateMaxRows:function(newRows){this.getComponent().setMaxRows(newRows)},doSetHeight:function(newHeight){this.callParent(arguments);var component=this.getComponent();component.input.setHeight(newHeight)},doSetWidth:function(newWidth){this.callParent(arguments);var component=this.getComponent();component.input.setWidth(newWidth)},doKeyUp:function(me){var value=me.getValue();me[value?"showClearIcon":"hideClearIcon"]()}});Ext.define("Ext.MessageBox",{extend:"Ext.Sheet",requires:["Ext.Toolbar","Ext.field.Text","Ext.field.TextArea"],config:{ui:(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)?"plain":"dark",baseCls:Ext.baseCSSPrefix+"msgbox",iconCls:null,showAnimation:{type:"popIn",duration:250,easing:"ease-out"},hideAnimation:{type:"popOut",duration:250,easing:"ease-out"},zIndex:999,defaultTextHeight:75,title:null,buttons:null,message:null,prompt:null,modal:true,layout:{type:"vbox",pack:"center"}},statics:{OK:{text:"OK",itemId:"ok",ui:"action"},YES:{text:"Yes",itemId:"yes",ui:"action"},NO:{text:"No",itemId:"no"},CANCEL:{text:"Cancel",itemId:"cancel"},INFO:Ext.baseCSSPrefix+"msgbox-info",WARNING:Ext.baseCSSPrefix+"msgbox-warning",QUESTION:Ext.baseCSSPrefix+"msgbox-question",ERROR:Ext.baseCSSPrefix+"msgbox-error",OKCANCEL:[{text:"Cancel",itemId:"cancel"},{text:"OK",itemId:"ok",ui:"action"}],YESNOCANCEL:[{text:"Cancel",itemId:"cancel"},{text:"No",itemId:"no"},{text:"Yes",itemId:"yes",ui:"action"}],YESNO:[{text:"No",itemId:"no"},{text:"Yes",itemId:"yes",ui:"action"}]},constructor:function(config){config=config||{};if(config.hasOwnProperty("promptConfig")){Ext.Logger.deprecate("'promptConfig' config is deprecated, please use 'prompt' config instead",this);Ext.applyIf(config,{prompt:config.promptConfig});delete config.promptConfig}if(config.hasOwnProperty("multiline")||config.hasOwnProperty("multiLine")){config.prompt=config.prompt||{};Ext.applyIf(config.prompt,{multiLine:config.multiline||config.multiLine});delete config.multiline;delete config.multiLine}this.defaultAllowedConfig={};var allowedConfigs=["ui","showAnimation","hideAnimation","title","message","prompt","iconCls","buttons","defaultTextHeight"],ln=allowedConfigs.length,i,allowedConfig;for(i=0;i<ln;i++){allowedConfig=allowedConfigs[i];this.defaultAllowedConfig[allowedConfig]=this.defaultConfig[allowedConfig]}this.callParent([config])},applyTitle:function(config){if(typeof config=="string"){config={title:config}}Ext.applyIf(config,{docked:"top",minHeight:(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)?"2.1em":"1.3em",cls:this.getBaseCls()+"-title"});return Ext.factory(config,Ext.Toolbar,this.getTitle())},updateTitle:function(newTitle){if(newTitle){this.add(newTitle)}},updateButtons:function(newButtons){var me=this;newButtons=(!newButtons||newButtons.length===0)?false:newButtons;if(newButtons){if(me.buttonsToolbar){me.buttonsToolbar.show();me.buttonsToolbar.removeAll();me.buttonsToolbar.setItems(newButtons)}else{me.buttonsToolbar=Ext.create("Ext.Toolbar",{docked:"bottom",defaultType:"button",layout:{type:"hbox",pack:"center"},ui:me.getUi(),cls:me.getBaseCls()+"-buttons",items:newButtons});me.add(me.buttonsToolbar)}}else{if(me.buttonsToolbar){me.buttonsToolbar.hide()}}},applyMessage:function(config){config={html:config,cls:this.getBaseCls()+"-text"};return Ext.factory(config,Ext.Component,this._message)},updateMessage:function(newMessage){if(newMessage){this.add(newMessage)}},getMessage:function(){if(this._message){return this._message.getHtml()}return null},applyIconCls:function(config){config={xtype:"component",docked:"left",width:40,height:40,baseCls:Ext.baseCSSPrefix+"icon",hidden:(config)?false:true,cls:config};return Ext.factory(config,Ext.Component,this._iconCls)},updateIconCls:function(newIconCls,oldIconCls){var me=this;this.getTitle();this.getButtons();if(newIconCls){this.add(newIconCls)}else{this.remove(oldIconCls)}},getIconCls:function(){var icon=this._iconCls,iconCls;if(icon){iconCls=icon.getCls();return(iconCls)?iconCls[0]:null}return null},applyPrompt:function(prompt){if(prompt){var config={label:false};if(Ext.isObject(prompt)){Ext.apply(config,prompt)}if(config.multiLine){config.height=Ext.isNumber(config.multiLine)?parseFloat(config.multiLine):this.getDefaultTextHeight();return Ext.factory(config,Ext.field.TextArea,this.getPrompt())}else{return Ext.factory(config,Ext.field.Text,this.getPrompt())}}return prompt},updatePrompt:function(newPrompt,oldPrompt){if(newPrompt){this.add(newPrompt)}if(oldPrompt){this.remove(oldPrompt)}},onClick:function(button){if(button){var config=button.config.userConfig||{},initialConfig=button.getInitialConfig(),prompt=this.getPrompt();if(typeof config.fn=="function"){this.on({hiddenchange:function(){config.fn.call(config.scope||null,initialConfig.itemId||initialConfig.text,prompt?prompt.getValue():null,config)},single:true,scope:this})}if(config.input){config.input.dom.blur()}}this.hide()},show:function(initialConfig){if(!this.getParent()&&Ext.Viewport){Ext.Viewport.add(this)}if(!initialConfig){return this.callParent()}var config=Ext.Object.merge({},{value:""},initialConfig);var buttons=initialConfig.buttons||Ext.MessageBox.OK||[],buttonBarItems=[],userConfig=initialConfig;Ext.each(buttons,function(buttonConfig){if(!buttonConfig){return}buttonBarItems.push(Ext.apply({userConfig:userConfig,scope:this,handler:"onClick"},buttonConfig))},this);config.buttons=buttonBarItems;if(config.promptConfig){Ext.Logger.deprecate("'promptConfig' config is deprecated, please use 'prompt' config instead",this)}config.prompt=(config.promptConfig||config.prompt)||null;if(config.multiLine){config.prompt=config.prompt||{};config.prompt.multiLine=config.multiLine;delete config.multiLine}config=Ext.merge({},this.defaultAllowedConfig,config);this.setConfig(config);var prompt=this.getPrompt();if(prompt){prompt.setValue(initialConfig.value||"")}this.callParent();return this},alert:function(title,message,fn,scope){return this.show({title:title||null,message:message||null,buttons:Ext.MessageBox.OK,promptConfig:false,fn:function(){if(fn){fn.apply(scope,arguments)}},scope:scope})},confirm:function(title,message,fn,scope){return this.show({title:title||null,message:message||null,buttons:Ext.MessageBox.YESNO,promptConfig:false,scope:scope,fn:function(){if(fn){fn.apply(scope,arguments)}}})},prompt:function(title,message,fn,scope,multiLine,value,prompt){return this.show({title:title||null,message:message||null,buttons:Ext.MessageBox.OKCANCEL,scope:scope,prompt:prompt||true,multiLine:multiLine,value:value,fn:function(){if(fn){fn.apply(scope,arguments)}}})}},function(MessageBox){Ext.onSetup(function(){Ext.Msg=new MessageBox})});Ext.define("Ext.SegmentedButton",{extend:"Ext.Container",xtype:"segmentedbutton",requires:["Ext.Button"],config:{baseCls:Ext.baseCSSPrefix+"segmentedbutton",pressedCls:Ext.baseCSSPrefix+"button-pressed",allowMultiple:false,allowDepress:false,allowToggle:true,pressedButtons:[],layout:{type:"hbox",align:"stretch"},defaultType:"button"},initialize:function(){var me=this;me.callParent();me.on({delegate:"> button",scope:me,tap:"onButtonRelease"});me.onAfter({delegate:"> button",scope:me,hide:"onButtonHiddenChange",show:"onButtonHiddenChange"})},updateAllowMultiple:function(allowMultiple){if(!this.initialized&&!this.getInitialConfig().hasOwnProperty("allowDepress")&&allowMultiple){this.setAllowDepress(true)}},applyItems:function(){var me=this,pressedButtons=[],ln,i,item,items;me.callParent(arguments);items=this.getItems();ln=items.length;for(i=0;i<ln;i++){item=items.items[i];if(item.getInitialConfig("pressed")){pressedButtons.push(items.items[i])}}me.updateFirstAndLastCls(items);me.setPressedButtons(pressedButtons)},onButtonRelease:function(button){if(!this.getAllowToggle()){return}var me=this,pressedButtons=me.getPressedButtons()||[],buttons=[],alreadyPressed;if(!me.getDisabled()&&!button.getDisabled()){if(me.getAllowMultiple()){buttons=pressedButtons.concat(buttons)}alreadyPressed=(buttons.indexOf(button)!==-1)||(pressedButtons.indexOf(button)!==-1);if(alreadyPressed&&me.getAllowDepress()){Ext.Array.remove(buttons,button)}else{if(!alreadyPressed||!me.getAllowDepress()){buttons.push(button)}}me.setPressedButtons(buttons)}},onItemAdd:function(){this.callParent(arguments);this.updateFirstAndLastCls(this.getItems())},onItemRemove:function(){this.callParent(arguments);this.updateFirstAndLastCls(this.getItems())},onButtonHiddenChange:function(){this.updateFirstAndLastCls(this.getItems())},updateFirstAndLastCls:function(items){var ln=items.length,basePrefix=Ext.baseCSSPrefix,firstCls=basePrefix+"first",lastCls=basePrefix+"last",item,i;for(i=0;i<ln;i++){item=items.items[i];item.removeCls(firstCls);item.removeCls(lastCls)}for(i=0;i<ln;i++){item=items.items[i];if(!item.isHidden()){item.addCls(firstCls);break}}for(i=ln-1;i>=0;i--){item=items.items[i];if(!item.isHidden()){item.addCls(lastCls);break}}},applyPressedButtons:function(newButtons){var me=this,array=[],button,ln,i;if(me.getAllowToggle()){if(Ext.isArray(newButtons)){ln=newButtons.length;for(i=0;i<ln;i++){button=me.getComponent(newButtons[i]);if(button&&array.indexOf(button)===-1){array.push(button)}}}else{button=me.getComponent(newButtons);if(button&&array.indexOf(button)===-1){array.push(button)}}}return array},updatePressedButtons:function(newButtons,oldButtons){var me=this,items=me.getItems(),pressedCls=me.getPressedCls(),events=[],item,button,ln,i,e;ln=items.length;if(oldButtons&&oldButtons.length){for(i=0;i<ln;i++){item=items.items[i];if(oldButtons.indexOf(item)!=-1&&newButtons.indexOf(item)==-1){item.removeCls([pressedCls,item.getPressedCls()]);events.push({item:item,toggle:false})}}}ln=newButtons.length;for(i=0;i<ln;i++){button=newButtons[i];if(!oldButtons||oldButtons.indexOf(button)==-1){button.addCls(pressedCls);events.push({item:button,toggle:true})}}ln=events.length;if(ln&&oldButtons!==undefined){Ext.defer(function(){for(i=0;i<ln;i++){e=events[i];me.fireEvent("toggle",me,e.item,e.toggle)}},50)}},isPressed:function(button){var pressedButtons=this.getPressedButtons();return pressedButtons.indexOf(button)!=-1},doSetDisabled:function(disabled){var me=this;me.items.each(function(item){item.setDisabled(disabled)},me);me.callParent(arguments)}},function(){});Ext.define("Ext.Sortable",{mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.util.Draggable"],config:{baseCls:Ext.baseCSSPrefix+"sortable",delay:0},direction:"vertical",cancelSelector:null,constrain:window,group:"base",revert:true,itemSelector:null,handleSelector:null,disabled:false,sorting:false,vertical:false,constructor:function(el,config){config=config||{};Ext.apply(this,config);this.addEvents("sortstart","sortend","sortchange");this.el=Ext.get(el);this.callParent();this.mixins.observable.constructor.call(this);if(this.direction=="horizontal"){this.horizontal=true}else{if(this.direction=="vertical"){this.vertical=true}else{this.horizontal=this.vertical=true}}this.el.addCls(this.baseCls);this.startEventName=(this.getDelay()>0)?"taphold":"tapstart";if(!this.disabled){this.enable()}},onStart:function(e,t){if(this.cancelSelector&&e.getTarget(this.cancelSelector)){return}if(this.handleSelector&&!e.getTarget(this.handleSelector)){return}if(!this.sorting){this.onSortStart(e,t)}},onSortStart:function(e,t){this.sorting=true;var draggable=Ext.create("Ext.util.Draggable",t,{threshold:0,revert:this.revert,direction:this.direction,constrain:this.constrain===true?this.el:this.constrain,animationDuration:100});draggable.on({drag:this.onDrag,dragend:this.onDragEnd,scope:this});this.dragEl=t;this.calculateBoxes();if(!draggable.dragging){draggable.onStart(e)}this.fireEvent("sortstart",this,e)},calculateBoxes:function(){this.items=[];var els=this.el.select(this.itemSelector,false),ln=els.length,i,item,el,box;for(i=0;i<ln;i++){el=els[i];if(el!=this.dragEl){item=Ext.fly(el).getPageBox(true);item.el=el;this.items.push(item)}}},onDrag:function(draggable,e){var items=this.items,ln=items.length,region=draggable.region,sortChange=false,i,intersect,overlap,item;for(i=0;i<ln;i++){item=items[i];intersect=region.intersect(item);if(intersect){if(this.vertical&&Math.abs(intersect.top-intersect.bottom)>(region.bottom-region.top)/2){if(region.bottom>item.top&&item.top>region.top){draggable.el.insertAfter(item.el)}else{draggable.el.insertBefore(item.el)}sortChange=true}else{if(this.horizontal&&Math.abs(intersect.left-intersect.right)>(region.right-region.left)/2){if(region.right>item.left&&item.left>region.left){draggable.el.insertAfter(item.el)}else{draggable.el.insertBefore(item.el)}sortChange=true}}if(sortChange){draggable.reset();draggable.moveTo(region.left,region.top);this.calculateBoxes();this.fireEvent("sortchange",this,draggable.el,this.el.select(this.itemSelector,false).indexOf(draggable.el.dom));return}}}},onDragEnd:function(draggable,e){draggable.destroy();this.sorting=false;this.fireEvent("sortend",this,draggable,e)},enable:function(){this.el.on(this.startEventName,this.onStart,this,{delegate:this.itemSelector,holdThreshold:this.getDelay()});this.disabled=false},disable:function(){this.el.un(this.startEventName,this.onStart,this);this.disabled=true},isDisabled:function(){return this.disabled},isSorting:function(){return this.sorting},isVertical:function(){return this.vertical},isHorizontal:function(){return this.horizontal}});(function(){var lastTime=0,vendors=["ms","moz","webkit","o"],ln=vendors.length,i,vendor;for(i=0;i<ln&&!window.requestAnimationFrame;++i){vendor=vendors[i];window.requestAnimationFrame=window[vendor+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendor+"CancelAnimationFrame"]||window[vendor+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){clearTimeout(id)}}}());Ext.define("Ext.TaskQueue",{singleton:true,pending:false,mode:true,constructor:function(){this.readQueue=[];this.writeQueue=[];this.run=Ext.Function.bind(this.run,this)},requestRead:function(fn,scope,args){this.request(true);this.readQueue.push(arguments)},requestWrite:function(fn,scope,args){this.request(false);this.writeQueue.push(arguments)},request:function(mode){if(!this.pending){this.pending=true;this.mode=mode;requestAnimationFrame(this.run)}},run:function(){this.pending=false;var readQueue=this.readQueue,writeQueue=this.writeQueue,request=null,queue;if(this.mode){queue=readQueue;if(writeQueue.length>0){request=false}}else{queue=writeQueue;if(readQueue.length>0){request=true}}var tasks=queue.slice(),i,ln,task,fn,scope;queue.length=0;for(i=0,ln=tasks.length;i<ln;i++){task=tasks[i];fn=task[0];scope=task[1];if(typeof fn=="string"){fn=scope[fn]}if(task.length>2){fn.apply(scope,task[2])}else{fn.call(scope)}}tasks.length=0;if(request!==null){this.request(request)}}});Ext.define("Ext.TitleBar",{extend:"Ext.Container",xtype:"titlebar",requires:["Ext.Button","Ext.Title","Ext.Spacer"],isToolbar:true,config:{baseCls:Ext.baseCSSPrefix+"toolbar",cls:Ext.baseCSSPrefix+"navigation-bar",ui:"dark",title:null,defaultType:"button",height:"2.6em",layout:{type:"hbox"},items:[]},maxButtonWidth:"40%",constructor:function(){this.refreshTitlePosition=Ext.Function.createThrottled(this.refreshTitlePosition,50,this);this.callParent(arguments)},beforeInitialize:function(){this.applyItems=this.applyInitialItems},initialize:function(){delete this.applyItems;this.add(this.initialItems);delete this.initialItems;this.on({painted:"refreshTitlePosition",single:true})},applyInitialItems:function(items){var me=this,defaults=me.getDefaults()||{};me.initialItems=items;me.leftBox=me.add({xtype:"container",style:"position: relative",layout:{type:"hbox",align:"center"},listeners:{resize:"refreshTitlePosition",scope:me}});me.spacer=me.add({xtype:"component",style:"position: relative",flex:1,listeners:{resize:"refreshTitlePosition",scope:me}});me.rightBox=me.add({xtype:"container",style:"position: relative",layout:{type:"hbox",align:"center"},listeners:{resize:"refreshTitlePosition",scope:me}});me.titleComponent=me.add({xtype:"title",hidden:defaults.hidden,centered:true});me.doAdd=me.doBoxAdd;me.remove=me.doBoxRemove;me.doInsert=me.doBoxInsert},doBoxAdd:function(item){if(item.config.align=="right"){this.rightBox.add(item)}else{this.leftBox.add(item)}},doBoxRemove:function(item){if(item.config.align=="right"){this.rightBox.remove(item)}else{this.leftBox.remove(item)}},doBoxInsert:function(index,item){if(item.config.align=="right"){this.rightBox.add(item)}else{this.leftBox.add(item)}},getMaxButtonWidth:function(){var value=this.maxButtonWidth;if(Ext.isString(this.maxButtonWidth)){value=parseInt(value.replace("%",""),10);value=Math.round((this.element.getWidth()/100)*value)}return value},refreshTitlePosition:function(){if(this.isDestroyed){return}var titleElement=this.titleComponent.renderElement;titleElement.setWidth(null);titleElement.setLeft(null);var leftBox=this.leftBox,leftButton=leftBox.down("button"),singleButton=leftBox.getItems().getCount()==1,leftBoxWidth,maxButtonWidth;if(leftButton&&singleButton){if(leftButton.getWidth()==null){leftButton.renderElement.setWidth("auto")}leftBoxWidth=leftBox.renderElement.getWidth();maxButtonWidth=this.getMaxButtonWidth();if(leftBoxWidth>maxButtonWidth){leftButton.renderElement.setWidth(maxButtonWidth)}}var spacerBox=this.spacer.renderElement.getPageBox(),titleBox=titleElement.getPageBox(),widthDiff=titleBox.width-spacerBox.width,titleLeft=titleBox.left,titleRight=titleBox.right,halfWidthDiff,leftDiff,rightDiff;if(widthDiff>0){titleElement.setWidth(spacerBox.width);halfWidthDiff=widthDiff/2;titleLeft+=halfWidthDiff;titleRight-=halfWidthDiff}leftDiff=spacerBox.left-titleLeft;rightDiff=titleRight-spacerBox.right;if(leftDiff>0){titleElement.setLeft(leftDiff)}else{if(rightDiff>0){titleElement.setLeft(-rightDiff)}}titleElement.repaint()},updateTitle:function(newTitle){this.titleComponent.setTitle(newTitle);if(this.isPainted()){this.refreshTitlePosition()}}});Ext.define("Ext.Video",{extend:"Ext.Media",xtype:"video",config:{posterUrl:null,cls:Ext.baseCSSPrefix+"video"},template:[{reference:"ghost",classList:[Ext.baseCSSPrefix+"video-ghost"]},{tag:"video",reference:"media",classList:[Ext.baseCSSPrefix+"media"]}],initialize:function(){var me=this;me.callParent();me.media.hide();me.onBefore({erased:"onErased",scope:me});me.ghost.on({tap:"onGhostTap",scope:me});me.media.on({pause:"onPause",scope:me});if(Ext.os.is.Android4||Ext.os.is.iPad){this.isInlineVideo=true}},applyUrl:function(url){return[].concat(url)},updateUrl:function(newUrl){var me=this,media=me.media,newLn=newUrl.length,existingSources=media.query("source"),oldLn=existingSources.length,i;for(i=0;i<oldLn;i++){Ext.fly(existingSources[i]).destroy()}for(i=0;i<newLn;i++){media.appendChild(Ext.Element.create({tag:"source",src:newUrl[i]}))}if(me.isPlaying()){me.play()}},onErased:function(){this.pause();this.media.setTop(-2000);this.ghost.show()},onGhostTap:function(){var me=this,media=this.media,ghost=this.ghost;media.show();if(Ext.os.is.Android2){setTimeout(function(){me.play();setTimeout(function(){media.hide()},10)},10)}else{ghost.hide();me.play()}},onPause:function(){this.callParent(arguments);if(!this.isInlineVideo){this.media.setTop(-2000);this.ghost.show()}},onPlay:function(){this.callParent(arguments);this.media.setTop(0)},updatePosterUrl:function(newUrl){var ghost=this.ghost;if(ghost){ghost.setStyle("background-image","url("+newUrl+")")}}});Ext.define("Ext.app.Action",{config:{scope:null,application:null,controller:null,action:null,args:[],url:undefined,data:{},title:null,beforeFilters:[],currentFilterIndex:-1},constructor:function(config){this.initConfig(config);this.getUrl()},execute:function(){this.resume()},resume:function(){var index=this.getCurrentFilterIndex()+1,filters=this.getBeforeFilters(),controller=this.getController(),nextFilter=filters[index];if(nextFilter){this.setCurrentFilterIndex(index);nextFilter.call(controller,this)}else{controller[this.getAction()].apply(controller,this.getArgs())}},applyUrl:function(url){if(url===null||url===undefined){url=this.urlEncode()}return url},applyController:function(controller){var app=this.getApplication(),profile=app.getCurrentProfile();if(Ext.isString(controller)){controller=app.getController(controller,profile?profile.getNamespace():null)}return controller},urlEncode:function(){var controller=this.getController(),splits;if(controller instanceof Ext.app.Controller){splits=controller.$className.split(".");controller=splits[splits.length-1]}return controller+"/"+this.getAction()}});Ext.define("Ext.app.Controller",{mixins:{observable:"Ext.mixin.Observable"},config:{refs:{},routes:{},control:{},before:{},application:{},stores:[],models:[],views:[]},constructor:function(config){this.initConfig(config);this.mixins.observable.constructor.call(this,config)},init:Ext.emptyFn,launch:Ext.emptyFn,redirectTo:function(place){return this.getApplication().redirectTo(place)},execute:function(action,skipFilters){action.setBeforeFilters(this.getBefore()[action.getAction()]);action.execute()},applyBefore:function(before){var filters,name,length,i;for(name in before){filters=Ext.Array.from(before[name]);length=filters.length;for(i=0;i<length;i++){filters[i]=this[filters[i]]}before[name]=filters}return before},applyControl:function(config){this.control(config,this);return config},applyRefs:function(refs){if(Ext.isArray(refs)){Ext.Logger.deprecate("In Sencha Touch 2 the refs config accepts an object but you have passed it an array.")}this.ref(refs);return refs},applyRoutes:function(routes){var app=this instanceof Ext.app.Application?this:this.getApplication(),router=app.getRouter(),route,url,config;for(url in routes){route=routes[url];config={controller:this.$className};if(Ext.isString(route)){config.action=route}else{Ext.apply(config,route)}router.connect(url,config)}return routes},applyStores:function(stores){return this.getFullyQualified(stores,"store")},applyModels:function(models){return this.getFullyQualified(models,"model")},applyViews:function(views){return this.getFullyQualified(views,"view")},getFullyQualified:function(items,namespace){var length=items.length,appName=this.getApplication().getName(),name,i;for(i=0;i<length;i++){name=items[i];if(Ext.isString(name)&&(Ext.Loader.getPrefix(name)===""||name===appName)){items[i]=appName+"."+namespace+"."+name}}return items},control:function(selectors){this.getApplication().control(selectors,this)},ref:function(refs){var me=this,refName,getterName,selector,info;for(refName in refs){selector=refs[refName];getterName="get"+Ext.String.capitalize(refName);if(!this[getterName]){if(Ext.isString(refs[refName])){info={ref:refName,selector:selector}}else{info=refs[refName]}this[getterName]=function(refName,info){var args=[refName,info];return function(){return me.getRef.apply(me,args.concat.apply(args,arguments))}}(refName,info)}this.references=this.references||[];this.references.push(refName.toLowerCase())}},getRef:function(ref,info,config){this.refCache=this.refCache||{};info=info||{};config=config||{};Ext.apply(info,config);if(info.forceCreate){return Ext.ComponentManager.create(info,"component")}var me=this,cached=me.refCache[ref];if(!cached){me.refCache[ref]=cached=Ext.ComponentQuery.query(info.selector)[0];if(!cached&&info.autoCreate){me.refCache[ref]=cached=Ext.ComponentManager.create(info,"component")}if(cached){cached.on("destroy",function(){me.refCache[ref]=null})}}return cached},hasRef:function(ref){return this.references&&this.references.indexOf(ref.toLowerCase())!==-1}},function(){});Ext.define("Ext.app.History",{mixins:["Ext.mixin.Observable"],config:{actions:[],updateUrl:true,token:""},constructor:function(config){if(Ext.feature.has.History){window.addEventListener("hashchange",Ext.bind(this.detectStateChange,this))}else{setInterval(Ext.bind(this.detectStateChange,this),100)}this.initConfig(config);if(config&&Ext.isEmpty(config.token)){this.setToken(window.location.hash.substr(1))}},add:function(action,silent){this.getActions().push(Ext.factory(action,Ext.app.Action));var url=action.getUrl();if(this.getUpdateUrl()){this.setToken(url);window.location.hash=url}if(silent!==true){this.fireEvent("change",url)}this.setToken(url)},back:function(){var actions=this.getActions(),previousAction=actions[actions.length-2];if(previousAction){actions.pop();previousAction.getController().getApplication().redirectTo(previousAction.getUrl())}else{actions[actions.length-1].getController().getApplication().redirectTo("")}},applyToken:function(token){return token[0]=="#"?token.substr(1):token},detectStateChange:function(){var newToken=this.applyToken(window.location.hash),oldToken=this.getToken();if(newToken!=oldToken){this.onStateChange();this.setToken(newToken)}},onStateChange:function(){this.fireEvent("change",window.location.hash.substr(1))}});Ext.define("Ext.app.Profile",{mixins:{observable:"Ext.mixin.Observable"},config:{namespace:"auto",name:"auto",controllers:[],models:[],views:[],stores:[],application:null},constructor:function(config){this.initConfig(config);this.mixins.observable.constructor.apply(this,arguments)},isActive:function(){return false},launch:Ext.emptyFn,applyNamespace:function(name){if(name=="auto"){name=this.getName()}return name.toLowerCase()},applyName:function(name){if(name=="auto"){var pieces=this.$className.split(".");name=pieces[pieces.length-1]}return name},getDependencies:function(){var allClasses=[],format=Ext.String.format,appName=this.getApplication().getName(),namespace=this.getNamespace(),map={model:this.getModels(),view:this.getViews(),controller:this.getControllers(),store:this.getStores()},classType,classNames,fullyQualified;for(classType in map){classNames=[];Ext.each(map[classType],function(className){if(Ext.isString(className)){if(Ext.isString(className)&&(Ext.Loader.getPrefix(className)===""||className===appName)){className=appName+"."+classType+"."+namespace+"."+className}classNames.push(className);allClasses.push(className)}},this);map[classType]=classNames}map.all=allClasses;return map}});Ext.define("Ext.app.Route",{config:{conditions:{},url:null,controller:null,action:null,initialized:false},constructor:function(config){this.initConfig(config)},recognize:function(url){if(!this.getInitialized()){this.initialize()}if(this.recognizes(url)){var matches=this.matchesFor(url),args=url.match(this.matcherRegex);args.shift();return Ext.applyIf(matches,{controller:this.getController(),action:this.getAction(),historyUrl:url,args:args})}},initialize:function(){this.paramMatchingRegex=new RegExp(/:([0-9A-Za-z\_]*)/g);this.paramsInMatchString=this.getUrl().match(this.paramMatchingRegex)||[];this.matcherRegex=this.createMatcherRegex(this.getUrl());this.setInitialized(true)},recognizes:function(url){return this.matcherRegex.test(url)},matchesFor:function(url){var params={},keys=this.paramsInMatchString,values=url.match(this.matcherRegex),length=keys.length,i;values.shift();for(i=0;i<length;i++){params[keys[i].replace(":","")]=values[i]}return params},argsFor:function(url){var args=[],keys=this.paramsInMatchString,values=url.match(this.matcherRegex),length=keys.length,i;values.shift();for(i=0;i<length;i++){args.push(keys[i].replace(":",""));params[keys[i].replace(":","")]=values[i]}return params},urlFor:function(config){var url=this.getUrl();for(var key in config){url=url.replace(":"+key,config[key])}return url},createMatcherRegex:function(url){var paramsInMatchString=this.paramsInMatchString,length=paramsInMatchString.length,i,cond,matcher;for(i=0;i<length;i++){cond=this.getConditions()[paramsInMatchString[i]];matcher=Ext.util.Format.format("({0})",cond||"[%a-zA-Z0-9-\\_\\s,]+");url=url.replace(new RegExp(paramsInMatchString[i]),matcher)}return new RegExp("^"+url+"$")}});Ext.define("Ext.app.Router",{requires:["Ext.app.Route"],config:{routes:[],defaults:{action:"index"}},constructor:function(config){this.initConfig(config)},connect:function(url,params){params=Ext.apply({url:url},params||{},this.getDefaults());var route=Ext.create("Ext.app.Route",params);this.getRoutes().push(route);return route},recognize:function(url){var routes=this.getRoutes(),length=routes.length,i,result;for(i=0;i<length;i++){result=routes[i].recognize(url);if(result!==undefined){return result}}return undefined},draw:function(fn){fn.call(this,this)},clear:function(){this.setRoutes([])}},function(){});Ext.define("Ext.app.Application",{extend:"Ext.app.Controller",requires:["Ext.app.History","Ext.app.Profile","Ext.app.Router","Ext.app.Action"],config:{profiles:[],controllers:[],history:{},name:null,appFolder:"app",router:{},controllerInstances:[],profileInstances:[],currentProfile:null,launch:Ext.emptyFn,enableLoader:true,requires:[]},constructor:function(config){config=config||{};Ext.applyIf(config,{application:this});this.initConfig(config);for(var key in config){this[key]=config[key]}Ext.Loader.setConfig({enabled:true});Ext.require(this.getRequires(),function(){if(this.getEnableLoader()!==false){Ext.require(this.getProfiles(),this.onProfilesLoaded,this)}},this)},dispatch:function(action,addToHistory){action=action||{};Ext.applyIf(action,{application:this});action=Ext.factory(action,Ext.app.Action);if(action){var profile=this.getCurrentProfile(),profileNS=profile?profile.getNamespace():undefined,controller=this.getController(action.getController(),profileNS);if(controller){if(addToHistory!==false){this.getHistory().add(action,true)}controller.execute(action)}}},redirectTo:function(url){if(Ext.data&&Ext.data.Model&&url instanceof Ext.data.Model){var record=url;url=record.toUrl()}var decoded=this.getRouter().recognize(url);if(decoded){decoded.url=url;if(record){decoded.data={};decoded.data.record=record}return this.dispatch(decoded)}},control:function(selectors,controller){controller=controller||this;var dispatcher=this.getEventDispatcher(),refs=(controller)?controller.getRefs():{},selector,eventName,listener,listeners,ref;for(selector in selectors){if(selectors.hasOwnProperty(selector)){listeners=selectors[selector];ref=refs[selector];if(ref){selector=ref.selector||ref}for(eventName in listeners){listener=listeners[eventName];if(Ext.isString(listener)){listener=controller[listener]}dispatcher.addListener("component",selector,eventName,listener,controller)}}}},getController:function(name,profileName){var instances=this.getControllerInstances(),appName=this.getName(),format=Ext.String.format,topLevelName;if(name instanceof Ext.app.Controller){return name}if(instances[name]){return instances[name]}else{topLevelName=format("{0}.controller.{1}",appName,name);profileName=format("{0}.controller.{1}.{2}",appName,profileName,name);return instances[profileName]||instances[topLevelName]}},onProfilesLoaded:function(){var profiles=this.getProfiles(),length=profiles.length,instances=[],requires=this.gatherDependencies(),current,i,profileDeps;for(i=0;i<length;i++){instances[i]=Ext.create(profiles[i],{application:this});profileDeps=instances[i].getDependencies();requires=requires.concat(profileDeps.all);if(instances[i].isActive()&&!current){current=instances[i];this.setCurrentProfile(current);this.setControllers(this.getControllers().concat(profileDeps.controller));this.setModels(this.getModels().concat(profileDeps.model));this.setViews(this.getViews().concat(profileDeps.view));this.setStores(this.getStores().concat(profileDeps.store))}}this.setProfileInstances(instances);Ext.require(requires,this.loadControllerDependencies,this)},loadControllerDependencies:function(){this.instantiateControllers();var controllers=this.getControllerInstances(),classes=[],stores=[],i,controller,controllerStores,name;for(name in controllers){controller=controllers[name];controllerStores=controller.getStores();stores=stores.concat(controllerStores);classes=classes.concat(controller.getModels().concat(controller.getViews()).concat(controllerStores))}this.setStores(this.getStores().concat(stores));Ext.require(classes,this.onDependenciesLoaded,this)},onDependenciesLoaded:function(){var me=this,profile=this.getCurrentProfile(),launcher=this.getLaunch(),controllers,name;this.instantiateStores();controllers=this.getControllerInstances();for(name in controllers){controllers[name].init(this)}if(profile){profile.launch()}launcher.call(me);for(name in controllers){if(controllers[name]&&!(controllers[name] instanceof Ext.app.Controller)){Ext.Logger.warn("The controller '"+name+"' doesn't have a launch method. Are you sure it extends from Ext.app.Controller?")}else{controllers[name].launch(this)}}me.redirectTo(window.location.hash.substr(1))},gatherDependencies:function(){var classes=this.getModels().concat(this.getViews()).concat(this.getControllers());Ext.each(this.getStores(),function(storeName){if(Ext.isString(storeName)){classes.push(storeName)}},this);return classes},instantiateStores:function(){var stores=this.getStores(),length=stores.length,store,storeClass,storeName,splits,i;for(i=0;i<length;i++){store=stores[i];if(Ext.data&&Ext.data.Store&&!(store instanceof Ext.data.Store)){if(Ext.isString(store)){storeName=store;storeClass=Ext.ClassManager.classes[store];store={xclass:store};if(storeClass.prototype.defaultConfig.storeId===undefined){splits=storeName.split(".");store.id=splits[splits.length-1]}}stores[i]=Ext.factory(store,Ext.data.Store)}}this.setStores(stores)},instantiateControllers:function(){var controllerNames=this.getControllers(),instances={},length=controllerNames.length,name,i;for(i=0;i<length;i++){name=controllerNames[i];instances[name]=Ext.create(name,{application:this})}return this.setControllerInstances(instances)},applyControllers:function(controllers){return this.getFullyQualified(controllers,"controller")},applyProfiles:function(profiles){return this.getFullyQualified(profiles,"profile")},applyName:function(name){var oldName;if(name&&name.match(/ /g)){oldName=name;name=name.replace(/ /g,"");Ext.Logger.warn('Attempting to create an application with a name which contains whitespace ("'+oldName+'"). Renamed to "'+name+'".')}return name},updateName:function(newName){Ext.ClassManager.setNamespace(newName+".app",this);if(!Ext.Loader.config.paths[newName]){Ext.Loader.setPath(newName,this.getAppFolder())}},applyRouter:function(config){return Ext.factory(config,Ext.app.Router,this.getRouter())},applyHistory:function(config){var history=Ext.factory(config,Ext.app.History,this.getHistory());history.on("change",this.onHistoryChange,this);return history},onHistoryChange:function(url){this.dispatch(this.getRouter().recognize(url),false)}},function(){});Ext.define("Ext.bb.CrossCut",{extend:"Ext.Sheet",xtype:"crosscut",requires:["Ext.Button"],config:{top:0,right:0,bottom:0,left:null,enter:"right",exit:"right",hideOnMaskTap:true,baseCls:"bb-crosscut",scrollable:true,layout:{type:"vbox",pack:"middle"},defaultType:"button",showAnimation:{preserveEndState:true,to:{width:250}},hideAnimation:{preserveEndState:true,to:{width:68}}}});Ext.define("Ext.carousel.Item",{extend:"Ext.Decorator",config:{baseCls:"x-carousel-item",component:null,translatable:true}});Ext.define("Ext.carousel.Indicator",{extend:"Ext.Component",xtype:"carouselindicator",alternateClassName:"Ext.Carousel.Indicator",config:{baseCls:Ext.baseCSSPrefix+"carousel-indicator",direction:"horizontal"},initialize:function(){this.callParent();this.indicators=[];this.element.on({tap:"onTap",scope:this})},updateDirection:function(newDirection,oldDirection){var baseCls=this.getBaseCls();this.element.replaceCls(oldDirection,newDirection,baseCls);if(newDirection==="horizontal"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:"span"}))},removeIndicator:function(){var indicators=this.indicators;if(indicators.length>0){indicators.pop().destroy()}},setActiveIndex:function(index){var indicators=this.indicators,currentActiveIndex=this.activeIndex,currentActiveItem=indicators[currentActiveIndex],activeItem=indicators[index],baseCls=this.getBaseCls();if(currentActiveItem){currentActiveItem.removeCls(baseCls,null,"active")}if(activeItem){activeItem.addCls(baseCls,null,"active")}this.activeIndex=index;return this},onTap:function(e){var touch=e.touch,box=this.element.getPageBox(),centerX=box.left+(box.width/2),centerY=box.top+(box.height/2),direction=this.getDirection();if((direction==="horizontal"&&touch.pageX>=centerX)||(direction==="vertical"&&touch.pageY>=centerY)){this.fireEvent("next",this)}else{this.fireEvent("previous",this)}},destroy:function(){var indicators=this.indicators,i,ln,indicator;for(i=0,ln=indicators.length;i<ln;i++){indicator=indicators[i];indicator.destroy()}indicators.length=0;this.callParent()}});Ext.define("Ext.util.TranslatableGroup",{extend:"Ext.util.translatable.Abstract",config:{items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(items){return Ext.Array.from(items)},doTranslate:function(x,y){var items=this.getItems(),activeIndex=this.getActiveIndex(),itemLength=this.getItemLength(),itemLengthX=itemLength.x,itemLengthY=itemLength.y,useX=typeof x=="number",useY=typeof y=="number",offset,i,ln,item,translateX,translateY;for(i=0,ln=items.length;i<ln;i++){item=items[i];if(item){offset=(i-activeIndex);if(useX){translateX=x+offset*itemLengthX}if(useY){translateY=y+offset*itemLengthY}item.translate(translateX,translateY)}}}});Ext.define("Ext.carousel.Carousel",{extend:"Ext.Container",alternateClassName:"Ext.Carousel",xtype:"carousel",requires:["Ext.fx.easing.EaseOut","Ext.carousel.Item","Ext.carousel.Indicator","Ext.util.TranslatableGroup"],config:{baseCls:"x-carousel",direction:"horizontal",directionLock:false,animation:{duration:250,easing:{type:"ease-out"}},indicator:true,ui:"dark",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1,beforeInitialize:function(){this.element.on({dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",scope:this});this.element.on("resize","onSizeChange",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(size){var ItemClass=Ext.carousel.Item,total=size*2+1,isRendered=this.isRendered(),innerElement=this.innerElement,items=this.carouselItems,ln=items.length,itemConfig=this.getItemConfig(),itemLength=this.getItemLength(),direction=this.getDirection(),setterName=direction==="horizontal"?"setWidth":"setHeight",i,item;for(i=ln;i<total;i++){item=Ext.factory(itemConfig,ItemClass);if(itemLength){item[setterName].call(item,itemLength)}item.setLayoutSizeFlags(this.LAYOUT_BOTH);items.push(item);innerElement.append(item.renderElement);if(isRendered&&item.setRendered(true)){item.fireEvent("renderedchange",this,item,true)}}this.getTranslatable().setActiveIndex(size)},setRendered:function(rendered){var wasRendered=this.rendered;if(rendered!==wasRendered){this.rendered=rendered;var items=this.items.items,carouselItems=this.carouselItems,i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];if(!item.isInnerItem()){item.setRendered(rendered)}}for(i=0,ln=carouselItems.length;i<ln;i++){carouselItems[i].setRendered(rendered)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(item,index){this.callParent(arguments);var innerIndex=this.getInnerItems().indexOf(item),indicator=this.getIndicator();if(indicator&&item.isInnerItem()){indicator.addIndicator()}if(innerIndex<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(innerIndex)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(item){if(item.isInnerItem()){return}this.callParent(arguments)},onItemRemove:function(item,index){this.callParent(arguments);var innerIndex=this.getInnerItems().indexOf(item),indicator=this.getIndicator(),carouselItems=this.carouselItems,i,ln,carouselItem;if(item.isInnerItem()&&indicator){indicator.removeIndicator()}if(innerIndex<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(innerIndex)){for(i=0,ln=carouselItems.length;i<ln;i++){carouselItem=carouselItems[i];if(carouselItem.getComponent()===item){carouselItem.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(item){if(item.isInnerItem()){return}this.callParent(arguments)},onInnerItemMove:function(item,toIndex,fromIndex){if((this.isIndexDirty(toIndex)||this.isIndexDirty(fromIndex))){this.refreshActiveItem()}},doItemLayoutMove:function(item){if(item.isInnerItem()){return}this.callParent(arguments)},isIndexDirty:function(index){var activeIndex=this.getActiveIndex(),bufferSize=this.getBufferSize();return(index>=activeIndex-bufferSize&&index<=activeIndex+bufferSize)},getTranslatable:function(){var translatable=this.translatable;if(!translatable){this.translatable=translatable=new Ext.util.TranslatableGroup;translatable.setItems(this.orderedCarouselItems);translatable.on("animationend","onAnimationEnd",this)}return translatable},onDragStart:function(e){var direction=this.getDirection(),absDeltaX=e.absDeltaX,absDeltaY=e.absDeltaY,directionLock=this.getDirectionLock();this.isDragging=true;if(directionLock){if((direction==="horizontal"&&absDeltaX>absDeltaY)||(direction==="vertical"&&absDeltaY>absDeltaX)){e.stopPropagation()}else{this.isDragging=false;return}}this.getTranslatable().stopAnimation();this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(e){if(!this.isDragging){return}var startOffset=this.dragStartOffset,direction=this.getDirection(),delta=direction==="horizontal"?e.deltaX:e.deltaY,lastOffset=this.offset,flickStartTime=this.flickStartTime,dragDirection=this.dragDirection,now=Ext.Date.now(),currentActiveIndex=this.getActiveIndex(),maxIndex=this.getMaxItemIndex(),lastDragDirection=dragDirection,offset;if((currentActiveIndex===0&&delta>0)||(currentActiveIndex===maxIndex&&delta<0)){delta*=0.5}offset=startOffset+delta;if(offset>lastOffset){dragDirection=1}else{if(offset<lastOffset){dragDirection=-1}}if(dragDirection!==lastDragDirection||(now-flickStartTime)>300){this.flickStartOffset=lastOffset;this.flickStartTime=now}this.dragDirection=dragDirection;this.setOffset(offset)},onDragEnd:function(e){if(!this.isDragging){return}this.onDrag(e);this.isDragging=false;var now=Ext.Date.now(),itemLength=this.itemLength,threshold=itemLength/2,offset=this.offset,activeIndex=this.getActiveIndex(),maxIndex=this.getMaxItemIndex(),animationDirection=0,flickDistance=offset-this.flickStartOffset,flickDuration=now-this.flickStartTime,indicator=this.getIndicator(),velocity;if(flickDuration>0&&Math.abs(flickDistance)>=10){velocity=flickDistance/flickDuration;if(Math.abs(velocity)>=1){if(velocity<0&&activeIndex<maxIndex){animationDirection=-1}else{if(velocity>0&&activeIndex>0){animationDirection=1}}}}if(animationDirection===0){if(activeIndex<maxIndex&&offset<-threshold){animationDirection=-1}else{if(activeIndex>0&&offset>threshold){animationDirection=1}}}if(indicator){indicator.setActiveIndex(activeIndex-animationDirection)}this.animationDirection=animationDirection;this.setOffsetAnimated(animationDirection*itemLength)},applyAnimation:function(animation){animation.easing=Ext.factory(animation.easing,Ext.fx.easing.EaseOut);return animation},updateDirection:function(direction){var indicator=this.getIndicator();this.currentAxis=(direction==="horizontal")?"x":"y";if(indicator){indicator.setDirection(direction)}},setOffset:function(offset){this.offset=offset;this.getTranslatable().translateAxis(this.currentAxis,offset+this.itemOffset);return this},setOffsetAnimated:function(offset){var indicator=this.getIndicator();if(indicator){indicator.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=offset;this.getTranslatable().translateAxis(this.currentAxis,offset+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(translatable){var currentActiveIndex=this.getActiveIndex(),animationDirection=this.animationDirection,axis=this.currentAxis,currentOffset=translatable[axis],itemLength=this.itemLength,offset;if(animationDirection===-1){offset=itemLength+currentOffset}else{if(animationDirection===1){offset=currentOffset-itemLength}else{offset=currentOffset}}offset-=this.itemOffset;this.offset=offset;this.setActiveItem(currentActiveIndex-animationDirection)},refresh:function(){this.refreshSizing();this.refreshActiveItem()},refreshSizing:function(){var element=this.element,itemLength=this.getItemLength(),translatableItemLength={x:0,y:0},itemOffset,containerSize;if(this.getDirection()==="horizontal"){containerSize=element.getWidth()}else{containerSize=element.getHeight()}this.hiddenTranslation=-containerSize;if(itemLength===null){itemLength=containerSize;itemOffset=0}else{itemOffset=(containerSize-itemLength)/2}this.itemLength=itemLength;this.itemOffset=itemOffset;translatableItemLength[this.currentAxis]=itemLength;this.getTranslatable().setItemLength(translatableItemLength)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var items=this.carouselItems,i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];item.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var items=this.inactiveCarouselItems,hiddenTranslation=this.hiddenTranslation,axis=this.currentAxis,i,ln,item;for(i=0,ln=items.length;i<ln;i++){item=items[i];item.translateAxis(axis,hiddenTranslation)}},getMaxItemIndex:function(){return this.innerItems.length-1},getInnerItemIndex:function(item){return this.innerItems.indexOf(item)},getInnerItemAt:function(index){return this.innerItems[index]},applyActiveItem:function(){var activeItem=this.callParent(arguments),activeIndex;if(activeItem){activeIndex=this.getInnerItemIndex(activeItem);if(activeIndex!==-1){this.activeIndex=activeIndex;return activeItem}}},doSetActiveItem:function(activeItem){var activeIndex=this.getActiveIndex(),maxIndex=this.getMaxItemIndex(),indicator=this.getIndicator(),bufferSize=this.getBufferSize(),carouselItems=this.carouselItems.slice(),orderedCarouselItems=this.orderedCarouselItems,visibleIndexes={},visibleItems={},visibleItem,component,id,i,index,ln,carouselItem;if(carouselItems.length===0){return}this.callParent(arguments);orderedCarouselItems.length=0;if(activeItem){id=activeItem.getId();visibleItems[id]=activeItem;visibleIndexes[id]=bufferSize;if(activeIndex>0){for(i=1;i<=bufferSize;i++){index=activeIndex-i;if(index>=0){visibleItem=this.getInnerItemAt(index);id=visibleItem.getId();visibleItems[id]=visibleItem;visibleIndexes[id]=bufferSize-i}else{break}}}if(activeIndex<maxIndex){for(i=1;i<=bufferSize;i++){index=activeIndex+i;if(index<=maxIndex){visibleItem=this.getInnerItemAt(index);id=visibleItem.getId();visibleItems[id]=visibleItem;visibleIndexes[id]=bufferSize+i}else{break}}}for(i=0,ln=carouselItems.length;i<ln;i++){carouselItem=carouselItems[i];component=carouselItem.getComponent();if(component){id=component.getId();if(visibleIndexes.hasOwnProperty(id)){carouselItems.splice(i,1);i--;ln--;delete visibleItems[id];orderedCarouselItems[visibleIndexes[id]]=carouselItem}}}for(id in visibleItems){if(visibleItems.hasOwnProperty(id)){visibleItem=visibleItems[id];carouselItem=carouselItems.pop();carouselItem.setComponent(visibleItem);orderedCarouselItems[visibleIndexes[id]]=carouselItem}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=carouselItems;this.refreshOffset();this.refreshInactiveCarouselItems();if(indicator){indicator.setActiveIndex(activeIndex)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicator:function(indicator,currentIndicator){return Ext.factory(indicator,Ext.carousel.Indicator,currentIndicator)},updateIndicator:function(indicator){if(indicator){this.insertFirst(indicator);indicator.setUi(this.getUi());indicator.on({next:"next",previous:"previous",scope:this})}},destroy:function(){var carouselItems=this.carouselItems.slice();this.carouselItems.length=0;Ext.destroy(carouselItems,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems}},function(){});Ext.define("Ext.carousel.Infinite",{extend:"Ext.carousel.Carousel",config:{indicator:null,maxItemIndex:Infinity,innerItemConfig:{}},applyIndicator:function(indicator){if(indicator){Ext.Logger.error("'indicator' in Infinite Carousel implementation is not currently supported",this)}return},updateBufferSize:function(size){this.callParent(arguments);var total=size*2+1,ln=this.innerItems.length,innerItemConfig=this.getInnerItemConfig(),i;this.isItemsInitializing=true;for(i=ln;i<total;i++){this.doAdd(this.factoryItem(innerItemConfig))}this.isItemsInitializing=false;this.rebuildInnerIndexes();this.refreshActiveItem()},updateMaxItemIndex:function(maxIndex,oldMaxIndex){if(oldMaxIndex!==undefined){var activeIndex=this.getActiveIndex();if(activeIndex>maxIndex){this.setActiveItem(maxIndex)}else{this.rebuildInnerIndexes(activeIndex);this.refreshActiveItem()}}},rebuildInnerIndexes:function(activeIndex){var indexToItem=this.innerIndexToItem,idToIndex=this.innerIdToIndex,items=this.innerItems.slice(),ln=items.length,bufferSize=this.getBufferSize(),maxIndex=this.getMaxItemIndex(),changedIndexes=[],i,oldIndex,index,id,item;if(activeIndex===undefined){this.innerIndexToItem=indexToItem={};this.innerIdToIndex=idToIndex={};for(i=0;i<ln;i++){item=items[i];id=item.getId();idToIndex[id]=i;indexToItem[i]=item;this.fireEvent("itemindexchange",this,item,i,-1)}}else{for(i=activeIndex-bufferSize;i<=activeIndex+bufferSize;i++){if(i>=0&&i<=maxIndex){if(indexToItem.hasOwnProperty(i)){Ext.Array.remove(items,indexToItem[i]);continue}changedIndexes.push(i)}}for(i=0,ln=changedIndexes.length;i<ln;i++){item=items[i];id=item.getId();index=changedIndexes[i];oldIndex=idToIndex[id];delete indexToItem[oldIndex];idToIndex[id]=index;indexToItem[index]=item;this.fireEvent("itemindexchange",this,item,index,oldIndex)}}},reset:function(){this.rebuildInnerIndexes();this.setActiveItem(0)},refreshItems:function(){var items=this.innerItems,idToIndex=this.innerIdToIndex,index,item,i,ln;for(i=0,ln=items.length;i<ln;i++){item=items[i];index=idToIndex[item.getId()];this.fireEvent("itemindexchange",this,item,index,-1)}},getInnerItemIndex:function(item){var index=this.innerIdToIndex[item.getId()];return(typeof index=="number")?index:-1},getInnerItemAt:function(index){return this.innerIndexToItem[index]},applyActiveItem:function(activeItem){this.getItems();this.getBufferSize();var maxIndex=this.getMaxItemIndex(),currentActiveIndex=this.getActiveIndex();if(typeof activeItem=="number"){activeItem=Math.max(0,Math.min(activeItem,maxIndex));if(activeItem===currentActiveIndex){return}this.activeIndex=activeItem;this.rebuildInnerIndexes(activeItem);activeItem=this.getInnerItemAt(activeItem)}if(activeItem){return this.callParent([activeItem])}}});(function(){if(!Ext.global.Float32Array){var Float32Array=function(array){if(typeof array==="number"){this.length=array}else{if("length" in array){this.length=array.length;for(var i=0,len=array.length;i<len;i++){this[i]=+array[i]}}}};Float32Array.prototype=[];Ext.global.Float32Array=Float32Array}})();Ext.define("Ext.draw.Draw",{singleton:true,radian:Math.PI/180,pi2:Math.PI*2,reflectFn:function(a){return a},rad:function(degrees){return degrees%360*Math.PI/180},degrees:function(radian){return radian*180/Math.PI%360},isBBoxIntersect:function(bbox1,bbox2,padding){padding=padding||0;return(Math.max(bbox1.x,bbox2.x)-padding>Math.min(bbox1.x+bbox1.width,bbox2.x+bbox2.width))||(Math.max(bbox1.y,bbox2.y)-padding>Math.min(bbox1.y+bbox1.height,bbox2.y+bbox2.height))},spline:function(points){var i,j,ln=points.length,nd,d,y,ny,r=0,zs=new Float32Array(points.length),result=new Float32Array(points.length*3-2);zs[0]=0;zs[ln-1]=0;for(i=1;i<ln-1;i++){zs[i]=(points[i+1]+points[i-1]-2*points[i])-zs[i-1];r=1/(4-r);zs[i]*=r}for(i=ln-2;i>0;i--){r=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(0.07179676972449123,i));zs[i]-=zs[i+1]*r}ny=points[0];nd=ny-zs[0];for(i=0,j=0;i<ln-1;j+=3){y=ny;d=nd;i++;ny=points[i];nd=ny-zs[i];result[j]=y;result[j+1]=(nd+2*d)/3;result[j+2]=(nd*2+d)/3}result[j]=ny;return result},updateIOS:Ext.os.is.iOS?function(){Ext.getBody().createChild({id:"frame-workaround",style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"});Ext.draw.Animator.schedule(function(){Ext.get("frame-workaround").destroy()})}:Ext.emptyFn});Ext.define("Ext.draw.LimitedCache",{config:{limit:40,feeder:function(){return 0},scope:null},cache:null,constructor:function(config){this.cache={};this.cache.list=[];this.cache.tail=0;this.initConfig(config)},get:function(id){var cache=this.cache,limit=this.getLimit(),feeder=this.getFeeder(),scope=this.getScope()||this;if(cache[id]){return cache[id].value}if(cache.list[cache.tail]){delete cache[cache.list[cache.tail].cacheId]}cache[id]=cache.list[cache.tail]={value:feeder.apply(scope,Array.prototype.slice.call(arguments,1)),cacheId:id};cache.tail++;if(cache.tail===limit){cache.tail=0}return cache[id].value},clear:function(){this.cache={};this.cache.list=[];this.cache.tail=0}});Ext.define("Ext.draw.gradient.Gradient",{requires:["Ext.draw.LimitedCache"],mixins:{identifiable:"Ext.mixin.Identifiable"},identifiablePrefix:"ext-gradient-",isGradient:true,statics:{gradientCache:null},config:{stops:[]},applyStops:function(newStops){var stops=[],ln=newStops.length,i,stop,color;for(i=0;i<ln;i++){stop=newStops[i];color=Ext.draw.Color.fly(stop.color||"none");stops.push({offset:Math.min(1,Math.max(0,"offset" in stop?stop.offset:stop.position||0)),color:color.toString()})}stops.sort(function(a,b){return a.offset-b.offset});return stops},onClassExtended:function(subClass,member){if(!member.alias&&member.type){member.alias="gradient."+member.type}},constructor:function(config){config=config||{};this.gradientCache=new Ext.draw.LimitedCache({feeder:function(gradient,ctx,bbox){return gradient.generateGradient(ctx,bbox)},scope:this});this.initConfig(config);this.id=config.id;this.getId()},generateGradient:Ext.emptyFn,getGradient:function(ctx,bbox){return this.gradientCache.get(this.id+","+bbox.x+","+bbox.y+","+bbox.width+","+bbox.height,this,ctx,bbox)},clearCache:function(){this.gradientCache.clear()}});(function(){Ext.define("Ext.draw.Color",{statics:{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbToHexRe:/\s*rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbaToHexRe:/\s*rgba\((\d+),\s*(\d+),\s*(\d+),\s*([\.\d]+)\)/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/},isColor:true,lightnessFactor:0.2,constructor:function(red,green,blue,alpha){this.setRGB(red,green,blue,alpha)},setRGB:function(red,green,blue,alpha){var me=this;me.r=Math.min(255,Math.max(0,red));me.g=Math.min(255,Math.max(0,green));me.b=Math.min(255,Math.max(0,blue));if(alpha===undefined){me.a=1}else{me.a=Math.min(1,Math.max(0,alpha))}},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},getHSL:function(target){var me=this,r=me.r/255,g=me.g/255,b=me.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),delta=max-min,h,s=0,l=0.5*(max+min);if(min!==max){s=(l<0.5)?delta/(max+min):delta/(2-max-min);if(r===max){h=60*(g-b)/delta}else{if(g===max){h=120+60*(b-r)/delta}else{h=240+60*(r-g)/delta}}if(h<0){h+=360}if(h>=360){h-=360}}if(target){target[0]=h;target[1]=s;target[2]=l}else{target=[h,s,l]}return target},setHSL:function(h,s,l){var c,x,m,abs=Math.abs,floor=Math.floor;h=(h%360+360)%360;s=s>1?1:s<0?0:s;l=l>1?1:l<0?0:l;if(s===0||h===null){l*=255;this.setRGB(l,l,l)}else{h/=60;c=s*(1-abs(2*l-1));x=c*(1-abs(h-2*floor(h/2)-1));m=l-c/2;m*=255;c*=255;x*=255;switch(floor(h)){case 0:this.setRGB(c+m,x+m,m);break;case 1:this.setRGB(x+m,c+m,m);break;case 2:this.setRGB(m,c+m,x+m);break;case 3:this.setRGB(m,x+m,c+m);break;case 4:this.setRGB(x+m,m,c+m);break;case 5:this.setRGB(c+m,m,x+m);break}}return this},createLighter:function(factor){var hsl=this.getHSL();factor=factor||this.lightnessFactor;hsl[2]=hsl[2]+factor;if(hsl[2]>1){hsl[2]=1}else{if(hsl[2]<0){hsl[2]=0}}return Ext.draw.Color.fromHSL(hsl[0],hsl[1],hsl[2])},createDarker:function(factor){factor=factor||this.lightnessFactor;return this.createLighter(-factor)},toString:function(){if(this.a===1){var me=this,round=Math.round,r=round(me.r).toString(16),g=round(me.g).toString(16),b=round(me.b).toString(16);r=(r.length===1)?"0"+r:r;g=(g.length===1)?"0"+g:g;b=(b.length===1)?"0"+b:b;return["#",r,g,b].join("")}else{return"rgba("+[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a.toFixed(15)].join(",")+")"}},toHex:function(color){if(Ext.isArray(color)){color=color[0]}if(!Ext.isString(color)){return""}if(color.substr(0,1)==="#"){return color}var digits=Ext.draw.Color.colorToHexRe.exec(color);if(Ext.isArray(digits)){var red=parseInt(digits[2],10),green=parseInt(digits[3],10),blue=parseInt(digits[4],10),rgb=blue|(green<<8)|(red<<16);return digits[1]+"#"+("000000"+rgb.toString(16)).slice(-6)}else{return""}},setFromString:function(str){var values,r,g,b,a=1,parse=parseInt;if(str==="none"){this.r=this.g=this.b=this.a=0;return this}if((str.length===4||str.length===7)&&str.substr(0,1)==="#"){values=str.match(Ext.draw.Color.hexRe);if(values){r=parse(values[1],16)>>0;g=parse(values[2],16)>>0;b=parse(values[3],16)>>0;if(str.length===4){r+=(r*16);g+=(g*16);b+=(b*16)}}}else{if((values=str.match(Ext.draw.Color.rgbToHexRe))){r=+values[1];g=+values[2];b=+values[3]}else{if((values=str.match(Ext.draw.Color.rgbaToHexRe))){r=+values[1];g=+values[2];b=+values[3];a=+values[4]}else{if(Ext.draw.Color.ColorList.hasOwnProperty(str.toLowerCase())){return this.setFromString(Ext.draw.Color.ColorList[str.toLowerCase()])}}}}if(typeof r==="undefined"){return this}this.r=r;this.g=g;this.b=b;this.a=a;return this}},function(){var flyColor=new this();this.addStatics({fly:function(r,g,b,a){switch(arguments.length){case 1:flyColor.setFromString(r);break;case 3:case 4:flyColor.setRGB(r,g,b,a);break;default:return null}return flyColor},ColorList:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fromHSL:function(h,s,l){return(new this(0,0,0,0)).setHSL(h,s,l)},fromString:function(string){return(new this(0,0,0,0)).setFromString(string)},create:function(arg){if(arg instanceof this){return arg}else{if(Ext.isArray(arg)){return new Ext.draw.Color(arg[0],arg[1],arg[2],arg[3])}else{if(Ext.isString(arg)){return Ext.draw.Color.fromString(arg)}else{if(arguments.length>2){return new Ext.draw.Color(arguments[0],arguments[1],arguments[2],arguments[3])}else{return new Ext.draw.Color(0,0,0,0)}}}}}})})})();Ext.define("Ext.draw.sprite.AttributeParser",{singleton:true,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,requires:["Ext.draw.Color"],"default":function(n){return n},string:function(n){return String(n)},number:function(n){if(!isNaN(n)){return n}},angle:function(n){if(!isNaN(n)){n%=Math.PI*2;if(n<-Math.PI){n+=Math.PI*2}if(n>Math.PI){n-=Math.PI*2}return n}},data:function(n){if(Ext.isArray(n)){return n.slice()}else{if(n instanceof Float32Array){return new Float32Array(n)}}},bool:function(n){return !!n},color:function(n){if(n instanceof Ext.draw.Color){return n.toString()}else{if(n instanceof Ext.draw.gradient.Gradient){return n}else{if(!n){return"none"}else{if(Ext.isString(n)){return n}else{if(n.type==="linear"){return Ext.create("Ext.draw.gradient.Linear",n)}else{if(n.type==="radial"){return Ext.create("Ext.draw.gradient.Radial",n)}else{if(n.type==="pattern"){return Ext.create("Ext.draw.gradient.Pattern",n)}}}}}}}},limited:function(low,hi){return(function(n){return isNaN(n)?undefined:Math.min(Math.max(+n,low),hi)})},limited01:function(n){return isNaN(n)?undefined:Math.min(Math.max(+n,0),1)},enums:function(){var enums={},args=Array.prototype.slice.call(arguments,0),i,ln;for(i=0,ln=args.length;i<ln;i++){enums[args[i]]=true}return(function(n){return n in enums?n:undefined})}});(function(){function compute(from,to,delta){return from+(to-from)*delta}Ext.define("Ext.draw.sprite.AnimationParser",{singleton:true,attributeRe:/^url\(#([a-zA-Z\-]+)\)$/,requires:["Ext.draw.Color"],color:{parseInitial:function(color1,color2){if(Ext.isString(color1)){color1=Ext.draw.Color.create(color1)}if(Ext.isString(color2)){color2=Ext.draw.Color.create(color2)}if((color1 instanceof Ext.draw.Color)&&(color2 instanceof Ext.draw.Color)){return[[color1.r,color1.g,color1.b,color1.a],[color2.r,color2.g,color2.b,color2.a]]}else{return[color1||color2,color2||color1]}},compute:function(from,to,delta){if(!Ext.isArray(from)||!Ext.isArray(to)){return to||from}else{return[compute(from[0],to[0],delta),compute(from[1],to[1],delta),compute(from[2],to[2],delta),compute(from[3],to[3],delta)]}},serve:function(array){var color=Ext.draw.Color.fly(array[0],array[1],array[2],array[3]);return color.toString()}},number:{parse:function(n){return n===null?null:+n},compute:function(from,to,delta){if(!Ext.isNumber(from)||!Ext.isNumber(to)){return to||from}else{return compute(from,to,delta)}}},angle:{parseInitial:function(from,to){if(to-from>Math.PI){to-=Math.PI*2}else{if(to-from<-Math.PI){to+=Math.PI*2}}return[from,to]},compute:function(from,to,delta){if(!Ext.isNumber(from)||!Ext.isNumber(to)){return to||from}else{return compute(from,to,delta)}}},path:{parseInitial:function(from,to){var fromStripes=from.toStripes(),toStripes=to.toStripes(),i,j,fromLength=fromStripes.length,toLength=toStripes.length,fromStripe,toStripe,length,lastStripe=toStripes[toLength-1],endPoint=[lastStripe[lastStripe.length-2],lastStripe[lastStripe.length-1]];for(i=fromLength;i<toLength;i++){fromStripes.push(fromStripes[fromLength-1].slice(0))}for(i=toLength;i<fromLength;i++){toStripes.push(endPoint.slice(0))}length=fromStripes.length;toStripes.path=to;toStripes.temp=new Ext.draw.Path();for(i=0;i<length;i++){fromStripe=fromStripes[i];toStripe=toStripes[i];fromLength=fromStripe.length;toLength=toStripe.length;toStripes.temp.types.push("M");for(j=toLength;j<fromLength;j+=6){toStripe.push(endPoint[0],endPoint[1],endPoint[0],endPoint[1],endPoint[0],endPoint[1])}lastStripe=toStripes[toStripes.length-1];endPoint=[lastStripe[lastStripe.length-2],lastStripe[lastStripe.length-1]];for(j=fromLength;j<toLength;j+=6){fromStripe.push(endPoint[0],endPoint[1],endPoint[0],endPoint[1],endPoint[0],endPoint[1])}for(i=0;i<toStripe.length;i++){toStripe[i]-=fromStripe[i]}for(i=2;i<toStripe.length;i+=6){toStripes.temp.types.push("C")}}return[fromStripes,toStripes]},compute:function(fromStripes,toStripes,delta){if(delta>=1){return toStripes.path}var i=0,ln=fromStripes.length,j=0,ln2,from,to,temp=toStripes.temp.coords,pos=0;for(;i<ln;i++){from=fromStripes[i];to=toStripes[i];ln2=from.length;for(j=0;j<ln2;j++){temp[pos++]=to[j]*delta+from[j]}}return toStripes.temp}},data:{compute:function(from,to,delta,target){var lf=from.length-1,lt=to.length-1,len=Math.max(lf,lt),f,t,i;if(!target||target===from){target=[]}target.length=len+1;for(i=0;i<=len;i++){f=from[Math.min(i,lf)];t=to[Math.min(i,lt)];if(isNaN(f)){target[i]=t}else{target[i]=(t-f)*delta+f}}return target}},text:{compute:function(from,to,delta){return from.substr(0,Math.round(from.length*(1-delta)))+to.substr(Math.round(to.length*(1-delta)))}},limited:"number",limited01:"number"})})();Ext.define("Ext.draw.sprite.AttributeDefinition",{requires:["Ext.draw.sprite.AttributeParser","Ext.draw.sprite.AnimationParser"],config:{defaults:{},aliases:{},animationProcessors:{},processors:{},dirtyTriggers:{},updaters:{}},inheritableStatics:{processorRe:/^(\w+)\(([\w\-,]*)\)$/},constructor:function(config){var me=this;me.initConfig(config)},applyDefaults:function(defaults,oldDefaults){oldDefaults=Ext.apply(oldDefaults||{},this.normalize(defaults));return oldDefaults},applyAliases:function(aliases,oldAliases){return Ext.apply(oldAliases||{},aliases)},applyProcessors:function(processors,oldProcessors){this.getAnimationProcessors();var name,result=oldProcessors||{},defaultProcessor=Ext.draw.sprite.AttributeParser,processorRe=this.self.processorRe,animationProcessors={},anyAnimationProcessors,match,fn;for(name in processors){fn=processors[name];if(!Ext.isFunction(fn)){if(Ext.isString(fn)){match=fn.match(processorRe);if(match){fn=defaultProcessor[match[1]].apply(defaultProcessor,match[2].split(","))}else{animationProcessors[name]=fn;anyAnimationProcessors=true;fn=defaultProcessor[fn]}}else{continue}}result[name]=fn}if(anyAnimationProcessors){this.setAnimationProcessors(animationProcessors)}return result},applyAnimationProcessors:function(animationProcessors,oldAnimationProcessors){var parser=Ext.draw.sprite.AnimationParser,item;if(!oldAnimationProcessors){oldAnimationProcessors={}}for(var name in animationProcessors){item=animationProcessors[name];if(item==="none"){oldAnimationProcessors[name]=null}else{if(Ext.isString(item)&&!(name in oldAnimationProcessors)){if(item in parser){while(Ext.isString(parser[item])){item=parser[item]}oldAnimationProcessors[name]=parser[item]}}else{if(Ext.isObject(item)){oldAnimationProcessors[name]=item}}}}return oldAnimationProcessors},applyDirtyTriggers:function(dirtyTriggers,oldDirtyTrigger){if(!oldDirtyTrigger){oldDirtyTrigger={}}for(var name in dirtyTriggers){oldDirtyTrigger[name]=dirtyTriggers[name].split(",")}return oldDirtyTrigger},applyUpdaters:function(updaters,oldUpdaters){return Ext.apply(oldUpdaters||{},updaters)},batchedNormalize:function(batchedChanges,reserveUnrecognized){if(!batchedChanges){return{}}var definition=this,processors=definition.getProcessors(),aliases=definition.getAliases(),normalized={},i,ln,undef,name,val,translation,rotation,scaling,matrix,subVal,split;if("rotation" in batchedChanges){rotation=batchedChanges.rotation}else{rotation=("rotate" in batchedChanges)?batchedChanges.rotate:undef}if("scaling" in batchedChanges){scaling=batchedChanges.scaling}else{scaling=("scale" in batchedChanges)?batchedChanges.scale:undef}if("translation" in batchedChanges){translation=batchedChanges.translation}else{translation=("translate" in batchedChanges)?batchedChanges.translate:undef}if(typeof scaling!=="undefined"){if(Ext.isNumber(scaling)){normalized.scalingX=scaling;normalized.scalingY=scaling}else{if("x" in scaling){normalized.scalingX=scaling.x}if("y" in scaling){normalized.scalingY=scaling.y}if("centerX" in scaling){normalized.scalingCenterX=scaling.centerX}if("centerY" in scaling){normalized.scalingCenterY=scaling.centerY}}}if(typeof rotation!=="undefined"){if(Ext.isNumber(rotation)){rotation=Ext.draw.Draw.rad(rotation);normalized.rotationRads=rotation}else{if("rads" in rotation){normalized.rotationRads=rotation.rads}else{if("degrees" in rotation){if(Ext.isArray(rotation.degrees)){normalized.rotationRads=rotation.degrees.map(function(deg){return Ext.draw.Draw.rad(deg)})}else{normalized.rotationRads=Ext.draw.Draw.rad(rotation.degrees)}}}if("centerX" in rotation){normalized.rotationCenterX=rotation.centerX}if("centerY" in rotation){normalized.rotationCenterY=rotation.centerY}}}if(typeof translation!=="undefined"){if("x" in translation){normalized.translationX=translation.x}if("y" in translation){normalized.translationY=translation.y}}if("matrix" in batchedChanges){matrix=Ext.draw.Matrix.create(batchedChanges.matrix);split=matrix.split();normalized.matrix=matrix;normalized.rotationRads=split.rotation;normalized.rotationCenterX=0;normalized.rotationCenterY=0;normalized.scalingX=split.scaleX;normalized.scalingY=split.scaleY;normalized.scalingCenterX=0;normalized.scalingCenterY=0;normalized.translationX=split.translateX;normalized.translationY=split.translateY}for(name in batchedChanges){val=batchedChanges[name];if(typeof val==="undefined"){continue}else{if(Ext.isArray(val)){if(name in aliases){name=aliases[name]}if(name in processors){normalized[name]=[];for(i=0,ln=val.length;i<ln;i++){subVal=processors[name].call(this,val[i]);if(typeof val!=="undefined"){normalized[name][i]=subVal}}}else{if(reserveUnrecognized){normalized[name]=val}}}else{if(name in aliases){name=aliases[name]}if(name in processors){val=processors[name].call(this,val);if(typeof val!=="undefined"){normalized[name]=val}}else{if(reserveUnrecognized){normalized[name]=val}}}}}return normalized},normalize:function(changes,reserveUnrecognized){if(!changes){return{}}var definition=this,processors=definition.getProcessors(),aliases=definition.getAliases(),translation=changes.translation||changes.translate,normalized={},name,val,rotation,scaling,matrix,split;if("rotation" in changes){rotation=changes.rotation}else{rotation=("rotate" in changes)?changes.rotate:undefined}if("scaling" in changes){scaling=changes.scaling}else{scaling=("scale" in changes)?changes.scale:undefined}if(translation){if("x" in translation){normalized.translationX=translation.x}if("y" in translation){normalized.translationY=translation.y}}if(typeof scaling!=="undefined"){if(Ext.isNumber(scaling)){normalized.scalingX=scaling;normalized.scalingY=scaling}else{if("x" in scaling){normalized.scalingX=scaling.x}if("y" in scaling){normalized.scalingY=scaling.y}if("centerX" in scaling){normalized.scalingCenterX=scaling.centerX}if("centerY" in scaling){normalized.scalingCenterY=scaling.centerY}}}if(typeof rotation!=="undefined"){if(Ext.isNumber(rotation)){rotation=Ext.draw.Draw.rad(rotation);normalized.rotationRads=rotation}else{if("rads" in rotation){normalized.rotationRads=rotation.rads}else{if("degrees" in rotation){normalized.rotationRads=Ext.draw.Draw.rad(rotation.degrees)}}if("centerX" in rotation){normalized.rotationCenterX=rotation.centerX}if("centerY" in rotation){normalized.rotationCenterY=rotation.centerY}}}if("matrix" in changes){matrix=Ext.draw.Matrix.create(changes.matrix);split=matrix.split();normalized.matrix=matrix;normalized.rotationRads=split.rotation;normalized.rotationCenterX=0;normalized.rotationCenterY=0;normalized.scalingX=split.scaleX;normalized.scalingY=split.scaleY;normalized.scalingCenterX=0;normalized.scalingCenterY=0;normalized.translationX=split.translateX;normalized.translationY=split.translateY}for(name in changes){val=changes[name];if(typeof val==="undefined"){continue}if(name in aliases){name=aliases[name]}if(name in processors){val=processors[name].call(this,val);if(typeof val!=="undefined"){normalized[name]=val}}else{if(reserveUnrecognized){normalized[name]=val}}}return normalized},setBypassingNormalization:function(attr,modifierStack,changes){return modifierStack.pushDown(attr,changes)},set:function(attr,modifierStack,changes){changes=this.normalize(changes);return this.setBypassingNormalization(attr,modifierStack,changes)}});Ext.define("Ext.draw.modifier.Modifier",{config:{previous:null,next:null,sprite:null},constructor:function(config){this.initConfig(config)},updateNext:function(next){if(next){next.setPrevious(this)}},updatePrev:function(prev){if(prev){prev.setNext(this)}},prepareAttributes:function(attr){if(this._previous){this._previous.prepareAttributes(attr)}},popUp:function(attributes,changes){if(this._next){this._next.popUp(attributes,changes)}else{Ext.apply(attributes,changes)}},pushDown:function(attr,changes){if(this._previous){return this._previous.pushDown(attr,changes)}else{for(var name in changes){if(changes[name]===attr[name]){delete changes[name]}}return changes}}});Ext.define("Ext.draw.modifier.Target",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.target",statics:{uniqueId:0},prepareAttributes:function(attr){if(this._previous){this._previous.prepareAttributes(attr)}attr.attributeId="attribute-"+Ext.draw.modifier.Target.uniqueId++;if(!attr.hasOwnProperty("canvasAttributes")){attr.bbox={plain:{dirty:true},transform:{dirty:true}};attr.dirty=true;attr.dirtyFlags={};attr.canvasAttributes={};attr.matrix=new Ext.draw.Matrix();attr.inverseMatrix=new Ext.draw.Matrix()}},setDirtyFlags:function(attr,changes){Ext.apply(attr,changes);var sprite=this._sprite,dirtyTriggers=sprite.self.def._dirtyTriggers,name,dirtyFlags=attr.dirtyFlags,flags,any=false,triggers,trigger,i,ln,canvasNames;for(name in changes){if((triggers=dirtyTriggers[name])){i=0;while((trigger=triggers[i++])){if(!(flags=dirtyFlags[trigger])){flags=dirtyFlags[trigger]=[]}flags.push(name)}}}for(name in changes){any=true;break}if(!any){return}if(dirtyFlags.canvas){canvasNames=dirtyFlags.canvas;delete dirtyFlags.canvas;for(i=0,ln=canvasNames.length;i<ln;i++){name=canvasNames[i];attr.canvasAttributes[name]=attr[name]}}if(attr.hasOwnProperty("children")){for(i=0,ln=attr.children.length;i<ln;i++){Ext.apply(attr.children[i].dirtyFlags,dirtyFlags);sprite.updateDirtyFlags(attr.children[i])}}sprite.setDirty(true)},popUp:function(attributes,changes){this.setDirtyFlags(attributes,changes);this._sprite.updateDirtyFlags(attributes)},pushDown:function(attr,changes){if(this._previous){changes=this._previous.pushDown(attr,changes)}this.setDirtyFlags(attr,changes);this._sprite.updateDirtyFlags(attr);return changes}});(function(){var pow=Math.pow,sin=Math.sin,cos=Math.cos,sqrt=Math.sqrt,pi=Math.PI,easings,addEasing,poly,createPoly,easing,i,l;poly=["quad","cubic","quart","quint"];easings={pow:function(p,x){return pow(p,x[0]||6)},expo:function(p){return pow(2,8*(p-1))},circ:function(p){return 1-sqrt(1-p*p)},sine:function(p){return 1-sin((1-p)*pi/2)},back:function(p,n){n=n||1.616;return p*p*((n+1)*p-n)},bounce:function(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-pow((11-6*a-11*p)/4,2);break}}return value},elastic:function(p,x){return pow(2,10*--p)*cos(20*p*pi*(x||1)/3)}};addEasing=function(easing,params){params=params&&params.length?params:[params];return Ext.apply(easing,{easeIn:function(pos){return easing(pos,params)},easeOut:function(pos){return 1-easing(1-pos,params)},easeInOut:function(pos){return(pos<=0.5)?easing(2*pos,params)/2:(2-easing(2*(1-pos),params))/2}})};createPoly=function(times){return function(p){return pow(p,times)}};for(i=0,l=poly.length;i<l;++i){easings[poly[i]]=createPoly(i+2)}easings.linear=function(x){return x};for(easing in easings){if(easings.hasOwnProperty(easing)){addEasing(easings[easing])}}Ext.define("Ext.draw.TimingFunctions",{singleton:true,easingMap:{linear:easings.linear,easeIn:easings.quad.easeIn,easeOut:easings.quad.easeOut,easeInOut:easings.quad.easeInOut,backIn:easings.back,backOut:function(x,n){return 1-easings.back(1-x,n)},backInOut:function(x,n){if(x<0.5){return easings.back(x*2,n)*0.5}else{return 1-easings.back((1-x)*2,n)*0.5}},elasticIn:function(x,n){return 1-easings.elastic(1-x,n)},elasticOut:easings.elastic,bounceIn:easings.bounce,bounceOut:function(x){return 1-easings.bounce(1-x)}}},function(){Ext.apply(this,easings)})})();Ext.define("Ext.draw.Animator",{uses:["Ext.draw.Draw"],singleton:true,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.frameStartTime,animations:[],animationTime:function(){return Ext.frameStartTime-this.frameStartTimeOffset},add:function(animation){if(!this.contains(animation)){this.animations.push(animation);Ext.draw.Animator.ignite();if("fireEvent" in animation){animation.fireEvent("animationstart",animation)}}},remove:function(animation){var me=this,animations=me.animations,i=0,l=animations.length;for(;i<l;++i){if(animations[i]===animation){animations.splice(i,1);if("fireEvent" in animation){animation.fireEvent("animationend",animation)}return}}},contains:function(animation){return this.animations.indexOf(animation)>-1},empty:function(){return this.animations.length===0},step:function(frameTime){var me=this,animations=me.animations.slice(),animation,i=0,j=0,l=animations.length;for(;i<l;++i){animation=animations[i];animation.step(frameTime);if(animation.animating){animations[j++]=animation}else{me.animations.splice(j,1);if(animation.fireEvent){animation.fireEvent("animationend")}}}},schedule:function(callback,scope){scope=scope||this;var id="frameCallback"+(this.frameCallbackId++);if(Ext.isString(callback)){callback=scope[callback]}Ext.draw.Animator.frameCallbacks[id]={fn:callback,scope:scope,once:true};this.scheduled++;Ext.draw.Animator.ignite();return id},cancel:function(id){if(Ext.draw.Animator.frameCallbacks[id]&&Ext.draw.Animator.frameCallbacks[id].once){this.scheduled--;delete Ext.draw.Animator.frameCallbacks[id]}},addFrameCallback:function(callback,scope){scope=scope||this;if(Ext.isString(callback)){callback=scope[callback]}var id="frameCallback"+(this.frameCallbackId++);Ext.draw.Animator.frameCallbacks[id]={fn:callback,scope:scope};return id},removeFrameCallback:function(id){delete Ext.draw.Animator.frameCallbacks[id]},fireFrameCallbacks:function(){var callbacks=this.frameCallbacks,once=[],id,i,ln,fn,cb;for(id in callbacks){cb=callbacks[id];fn=cb.fn;if(Ext.isString(fn)){fn=cb.scope[fn]}fn.call(cb.scope);if(cb.once){once.push(id)}}for(i=0,ln=once.length;i<ln;i++){this.scheduled--;delete callbacks[once[i]]}}},function(){var looping=false,frame=Ext.draw.Animator,requestAnimationFramePolyfill=(function(global){return global.requestAnimationFrame||global.webkitRequestAnimationFrame||global.mozAnimationFrame||global.oAnimationFrame||global.msAnimationFrame||function(callback){setTimeout(callback,1)}})(Ext.global),animationStartTimePolyfill=(function(global){return(global.animationStartTime?function(){return global.animationStartTime}:null)||(global.webkitAnimationStartTime?function(){return global.webkitAnimationStartTime}:null)||(global.mozAnimationStartTime?function(){return global.mozAnimationStartTime}:null)||(global.oAnimationStartTime?function(){return global.oAnimationStartTime}:null)||(global.msAnimationStartTime?function(){return global.msAnimationStartTime}:null)||(Date.now?function(){return Date.now()}:function(){return +new Date()})})(Ext.global);var startLooping,frames;function animationLoop(){Ext.frameStartTime=animationStartTimePolyfill();if(startLooping===undefined){startLooping=Ext.frameStartTime}frame.step(frame.animationTime());frame.fireFrameCallbacks();if(frame.scheduled||!frame.empty()){requestAnimationFramePolyfill(animationLoop);frames++}else{looping=false;startLooping=undefined}frame.framerate=frames*1000/(frame.animationTime()-startLooping)}frame.clearCounter=function(){startLooping=frame.animationTime();frames=0};frame.ignite=function(){if(!looping){frames=0;looping=true;requestAnimationFramePolyfill(animationLoop);Ext.draw.Draw.updateIOS()}}});Ext.define("Ext.draw.modifier.Animation",{mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.draw.TimingFunctions","Ext.draw.Animator"],extend:"Ext.draw.modifier.Modifier",alias:"modifier.animation",config:{easing:function(x){return x},duration:0,customEasings:{},customDuration:{}},constructor:function(){this.anyAnimation=false;this.anySpecialAnimations=false;this.animating=0;this.animatingPool=[];this.callSuper(arguments)},prepareAttributes:function(attr){if(!attr.hasOwnProperty("timers")){attr.animating=false;attr.timers={};attr.animationOriginal=Ext.Object.chain(attr);attr.animationOriginal.upperLevel=attr}if(this._previous){this._previous.prepareAttributes(attr.animationOriginal)}},updateSprite:function(sprite){this.setConfig(sprite.config.fx)},updateDuration:function(duration){this.anyAnimation=duration>0},applyEasing:function(easing){if(typeof easing==="string"){return Ext.draw.TimingFunctions.easingMap[easing]}else{return easing}},applyCustomEasings:function(newCustomEasing,oldCustomEasing){oldCustomEasing=oldCustomEasing||{};var attr,attrs,easing,i,ln;for(attr in newCustomEasing){easing=newCustomEasing[attr];attrs=attr.split(",");if(typeof easing==="string"){easing=Ext.draw.TimingFunctions.easingMap[easing]}for(i=0,ln=attrs.length;i<ln;i++){oldCustomEasing[attrs[i]]=easing}}return oldCustomEasing},setEasingOn:function(attrs,easing){attrs=Ext.Array.from(attrs).slice();var customEasing={},i=0,ln=attrs.length;for(;i<ln;i++){customEasing[attrs[i]]=easing}this.setDurationEasings(customEasing)},clearEasingOn:function(attrs){attrs=Ext.Array.from(attrs,true);var i=0,ln=attrs.length;for(;i<ln;i++){delete this._customEasing[attrs[i]]}},applyCustomDuration:function(newCustomDuration,oldCustomDuration){oldCustomDuration=oldCustomDuration||{};var attr,duration,attrs,i,ln,anySpecialAnimations=this.anySpecialAnimations;for(attr in newCustomDuration){duration=newCustomDuration[attr];attrs=attr.split(",");anySpecialAnimations=true;for(i=0,ln=attrs.length;i<ln;i++){oldCustomDuration[attrs[i]]=duration}}this.anySpecialAnimations=anySpecialAnimations;return oldCustomDuration},setDurationOn:function(attrs,duration){attrs=Ext.Array.from(attrs).slice();var customDurations={},i=0,ln=attrs.length;for(;i<ln;i++){customDurations[attrs[i]]=duration}this.setCustomDuration(customDurations)},clearDurationOn:function(attrs){attrs=Ext.Array.from(attrs,true);var i=0,ln=attrs.length;for(;i<ln;i++){delete this._customDuration[attrs[i]]}},setAnimating:function(attributes,animating){var me=this,i,j;if(attributes.animating!==animating){attributes.animating=animating;if(animating){me.animatingPool.push(attributes);if(me.animating===0){Ext.draw.Animator.add(me)}me.animating++}else{for(i=0,j=0;i<me.animatingPool.length;i++){if(me.animatingPool[i]!==attributes){me.animatingPool[j++]=me.animatingPool[i]}}me.animating=me.animatingPool.length=j}}},setAttrs:function(attr,changes){var timers=attr.timers,parsers=this._sprite.self.def._animationProcessors,defaultEasing=this._easing,defaultDuration=this._duration,customDuration=this._customDuration,customEasings=this._customEasings,anySpecial=this.anySpecialAnimations,any=this.anyAnimation||anySpecial,original=attr.animationOriginal,ignite=false,timer,name,newValue,startValue,parser,easing,duration;if(!any){for(name in changes){if(attr[name]===changes[name]){delete changes[name]}else{attr[name]=changes[name]}delete original[name];delete timers[name]}return changes}else{for(name in changes){newValue=changes[name];startValue=attr[name];if(newValue!==startValue&&any&&startValue!==undefined&&startValue!==null&&(parser=parsers[name])){easing=defaultEasing;duration=defaultDuration;if(anySpecial){if(name in customEasings){easing=customEasings[name]}if(name in customDuration){duration=customDuration[name]}}if(duration){if(!timers[name]){timers[name]={}}timer=timers[name];timer.start=0;timer.easing=easing;timer.duration=duration;timer.compute=parser.compute;timer.serve=parser.serve||Ext.draw.Draw.reflectFn;if(parser.parseInitial){var initial=parser.parseInitial(startValue,newValue);timer.source=initial[0];timer.target=initial[1]}else{if(parser.parse){timer.source=parser.parse(startValue);timer.target=parser.parse(newValue)}else{timer.source=startValue;timer.target=newValue}}timers[name]=timer;original[name]=newValue;delete changes[name];ignite=true;continue}else{delete original[name]}}else{delete original[name]}delete timers[name]}}if(ignite&&!attr.animating){this.setAnimating(attr,true)}return changes},updateAttributes:function(attr){if(!attr.animating){return{}}var changes={},change,any=false,original=attr.animationOriginal,timers=attr.timers,now=Ext.draw.Animator.animationTime(),name,timer,delta;if(attr.lastUpdate===now){return{}}for(name in timers){timer=timers[name];if(!timer.start){timer.start=now;delta=0}else{delta=(now-timer.start)/timer.duration}if(delta>=1){changes[name]=original[name];delete original[name];delete timers[name]}else{changes[name]=timer.serve(timer.compute(timer.source,timer.target,timer.easing(delta),attr[name]));any=true}}attr.lastUpdate=now;this.setAnimating(attr,any);return changes},pushDown:function(attr,changes){changes=Ext.draw.modifier.Modifier.prototype.pushDown.call(this,attr.animationOriginal,changes);return this.setAttrs(attr,changes)},popUp:function(attr,changes){attr=attr.upperLevel;changes=this.setAttrs(attr,changes);if(this._next){return this._next.popUp(attr,changes)}else{return Ext.apply(attr,changes)}},step:function(){var me=this,pool=me.animatingPool.slice(),attributes,i,ln;for(i=0,ln=pool.length;i<ln;i++){attributes=pool[i];var changes=this.updateAttributes(attributes),name;for(name in changes){if(this._next){this._next.popUp(attributes,changes)}break}}},stop:function(){this.step();var me=this,pool=me.animatingPool,i,ln;for(i=0,ln=pool.length;i<ln;i++){pool[i].animating=false}me.animatingPool.length=0;me.animating=0;Ext.draw.Animator.remove(me)},destroy:function(){var me=this;me.animatingPool.length=0;me.animating=0}});Ext.define("Ext.draw.modifier.Highlight",{extend:"Ext.draw.modifier.Modifier",alias:"modifier.highlight",config:{enabled:false,highlightStyle:null},preFx:true,applyHighlightStyle:function(style,oldStyle){oldStyle=oldStyle||{};if(this.getSprite()){Ext.apply(oldStyle,this.getSprite().self.def.normalize(style))}else{Ext.apply(oldStyle,style)}return oldStyle},prepareAttributes:function(attr){if(!attr.hasOwnProperty("highlightOriginal")){attr.highlighted=false;attr.highlightOriginal=Ext.Object.chain(attr)}if(this._previous){this._previous.prepareAttributes(attr.highlightOriginal)}},updateSprite:function(sprite,oldSprite){if(sprite){if(this.getHighlightStyle()){this._highlightStyle=sprite.self.def.normalize(this.getHighlightStyle())}this.setHighlightStyle(sprite.config.highlightCfg)}var def=sprite.self.def;this.setSprite(sprite);def.setConfig({defaults:{highlighted:false},processors:{highlighted:"bool"},aliases:{highlight:"highlighted",highlighting:"highlighted"},dirtyFlags:{},updaters:{}})},filterChanges:function(attr,changes){var me=this,name,original=attr.highlightOriginal,style=me.getHighlightStyle();if(attr.highlighted){for(name in changes){if(style.hasOwnProperty(name)){original[name]=changes[name];delete changes[name]}}}for(name in changes){if(name!=="highlighted"&&original[name]===changes[name]){delete changes[name]}}return changes},pushDown:function(attr,changes){var style=this.getHighlightStyle(),original=attr.highlightOriginal,oldHighlighted,name;if(changes.hasOwnProperty("highlighted")){oldHighlighted=changes.highlighted;delete changes.highlighted;if(this._previous){changes=this._previous.pushDown(original,changes)}changes=this.filterChanges(attr,changes);if(oldHighlighted!==attr.highlighted){if(oldHighlighted){for(name in style){if(name in changes){original[name]=changes[name]}else{original[name]=attr[name]}if(original[name]!==style[name]){changes[name]=style[name]}}}else{for(name in style){if(!(name in changes)){changes[name]=original[name]}delete original[name]}}changes.highlighted=oldHighlighted}}else{if(this._previous){changes=this._previous.pushDown(original,changes)}changes=this.filterChanges(attr,changes)}return changes},popUp:function(attr,changes){changes=this.filterChanges(attr,changes);Ext.draw.modifier.Modifier.prototype.popUp.call(this,attr,changes)}});Ext.define("Ext.draw.sprite.Sprite",{alias:"sprite.sprite",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.draw.Draw","Ext.draw.gradient.Gradient","Ext.draw.sprite.AttributeDefinition","Ext.draw.sprite.AttributeParser","Ext.draw.modifier.Target","Ext.draw.modifier.Animation","Ext.draw.modifier.Highlight"],isSprite:true,inheritableStatics:{def:{processors:{strokeStyle:"color",fillStyle:"color",strokeOpacity:"limited01",fillOpacity:"limited01",lineWidth:"number",lineCap:"enums(butt,round,square)",lineJoin:"enums(round,bevel,miter)",miterLimit:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",shadowBlur:"number",globalAlpha:"limited01",globalCompositeOperation:"enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)",hidden:"bool",transformFillStroke:"bool",zIndex:"number",translationX:"number",translationY:"number",rotationRads:"number",rotationCenterX:"number",rotationCenterY:"number",scalingX:"number",scalingY:"number",scalingCenterX:"number",scalingCenterY:"number",constrainGradients:"bool"},aliases:{stroke:"strokeStyle",fill:"fillStyle",color:"fillStyle","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","text-anchor":"textAlign",opacity:"globalAlpha",translateX:"translationX",translateY:"translationY",rotateRads:"rotationRads",rotateCenterX:"rotationCenterX",rotateCenterY:"rotationCenterY",scaleX:"scalingX",scaleY:"scalingY",scaleCenterX:"scalingCenterX",scaleCenterY:"scalingCenterY"},defaults:{hidden:false,zIndex:0,strokeStyle:"none",fillStyle:"none",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:1,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:false,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:false},dirtyTriggers:{hidden:"canvas",zIndex:"zIndex",globalAlpha:"canvas",globalCompositeOperation:"canvas",transformFillStroke:"canvas",strokeStyle:"canvas",fillStyle:"canvas",strokeOpacity:"canvas",fillOpacity:"canvas",lineWidth:"canvas",lineCap:"canvas",lineJoin:"canvas",miterLimit:"canvas",shadowColor:"canvas",shadowOffsetX:"canvas",shadowOffsetY:"canvas",shadowBlur:"canvas",translationX:"transform",translationY:"transform",rotationRads:"transform",rotationCenterX:"transform",rotationCenterY:"transform",scalingX:"transform",scalingY:"transform",scalingCenterX:"transform",scalingCenterY:"transform",constrainGradients:"canvas"},updaters:{bbox:function(attrs){attrs.bbox.plain.dirty=true;attrs.bbox.transform.dirty=true;if(attrs.rotationRads!==0&&(attrs.rotationCenterX===null||attrs.rotationCenterY===null)||((attrs.scalingX!==1||attrs.scalingY!==1)&&(attrs.scalingCenterX===null||attrs.scalingCenterY===null))){if(!attrs.dirtyFlags.transform){attrs.dirtyFlags.transform=[]}}},zIndex:function(attrs){attrs.dirtyZIndex=true},transform:function(attrs){attrs.dirtyTransform=true;attrs.bbox.transform.dirty=true}}}},config:{parent:null},onClassExtended:function(Class,member){var initCfg=Class.superclass.self.def.initialConfig,cfg;if(member.inheritableStatics&&member.inheritableStatics.def){cfg=Ext.merge({},initCfg,member.inheritableStatics.def);Class.def=Ext.create("Ext.draw.sprite.AttributeDefinition",cfg);delete member.inheritableStatics.def}else{Class.def=Ext.create("Ext.draw.sprite.AttributeDefinition",initCfg)}},constructor:function(config){if(this.$className==="Ext.draw.sprite.Sprite"){throw"Ext.draw.sprite.Sprite is an abstract class"}config=config||{};var me=this,groups=[].concat(config.group||[]),i,ln;me.id=config.id||Ext.id(null,"ext-sprite-");me.group=new Array(groups.length);for(i=0,ln=groups.length;i<ln;i++){me.group[i]=groups[i].id||groups[i].toString()}me.attr={};me.initConfig(config);var modifiers=Ext.Array.from(config.modifiers,true);me.prepareModifiers(modifiers);me.initializeAttributes();me.setAttributes(me.self.def.getDefaults(),true);me.setAttributes(config)},getDirty:function(){return this.attr.dirty},setDirty:function(dirty){if((this.attr.dirty=dirty)){if(this._parent){this._parent.setDirty(true)}}},addModifier:function(modifier,reinitializeAttributes){var me=this;if(!(modifier instanceof Ext.draw.modifier.Modifier)){modifier=Ext.factory(modifier,null,null,"modifier")}modifier.setSprite(this);if(modifier.preFx||modifier.config&&modifier.config.preFx){if(me.fx.getPrevious()){me.fx.getPrevious().setNext(modifier)}modifier.setNext(me.fx)}else{me.topModifier.getPrevious().setNext(modifier);modifier.setNext(me.topModifier)}if(reinitializeAttributes){me.initializeAttributes()}return modifier},prepareModifiers:function(additionalModifiers){var me=this,modifier,i,ln;me.topModifier=new Ext.draw.modifier.Target({sprite:me});me.fx=new Ext.draw.modifier.Animation({sprite:me});me.fx.setNext(me.topModifier);for(i=0,ln=additionalModifiers.length;i<ln;i++){me.addModifier(additionalModifiers[i],false)}},initializeAttributes:function(){var me=this;me.topModifier.prepareAttributes(me.attr)},updateDirtyFlags:function(attrs){var me=this,dirtyFlags=attrs.dirtyFlags,flags,updaters=me.self.def._updaters,any=false,dirty=false,flag;do{any=false;for(flag in dirtyFlags){me.updateDirtyFlags=Ext.emptyFn;flags=dirtyFlags[flag];delete dirtyFlags[flag];if(updaters[flag]){updaters[flag].call(me,attrs,flags)}any=true;delete me.updateDirtyFlags}dirty=dirty||any}while(any);if(dirty){me.setDirty(true)}},setAttributes:function(changes,bypassNormalization,avoidCopy){var attributes=this.attr;if(bypassNormalization){if(avoidCopy){this.topModifier.pushDown(attributes,changes)}else{this.topModifier.pushDown(attributes,Ext.apply({},changes))}}else{this.topModifier.pushDown(attributes,this.self.def.normalize(changes))}},setAttributesBypassingNormalization:function(changes,avoidCopy){return this.setAttributes(changes,true,avoidCopy)},getBBox:function(isWithoutTransform){var me=this,attr=me.attr,bbox=attr.bbox,plain=bbox.plain,transform=bbox.transform;if(plain.dirty){me.updatePlainBBox(plain);plain.dirty=false}if(isWithoutTransform){return plain}else{me.applyTransformations();if(transform.dirty){me.updateTransformedBBox(transform,plain);transform.dirty=false}return transform}},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(transform,plain){this.attr.matrix.transformBBox(plain,0,transform)},getBBoxCenter:function(isWithoutTransform){var bbox=this.getBBox(isWithoutTransform);if(bbox){return[bbox.x+bbox.width*0.5,bbox.y+bbox.height*0.5]}else{return[0,0]}},hide:function(){this.attr.hidden=true;this.setDirty(true);return this},show:function(){this.attr.hidden=false;this.setDirty(true);return this},useAttributes:function(ctx,region){this.applyTransformations();var attrs=this.attr,canvasAttributes=attrs.canvasAttributes,strokeStyle=canvasAttributes.strokeStyle,fillStyle=canvasAttributes.fillStyle,id;if(strokeStyle){if(strokeStyle.isGradient){ctx.strokeStyle="black";ctx.strokeGradient=strokeStyle}else{ctx.strokeGradient=false}}if(fillStyle){if(fillStyle.isGradient){ctx.fillStyle="black";ctx.fillGradient=fillStyle}else{ctx.fillGradient=false}}for(id in canvasAttributes){if(canvasAttributes[id]!==undefined&&canvasAttributes[id]!==ctx[id]){ctx[id]=canvasAttributes[id]}}if(attrs.constrainGradients){ctx.setGradientBBox({x:region[0],y:region[1],width:region[2],height:region[3]})}else{ctx.setGradientBBox(this.getBBox(attrs.transformFillStroke))}},applyTransformations:function(force){if(!force&&!this.attr.dirtyTransform){return}var me=this,attr=me.attr,center=me.getBBoxCenter(true),centerX=center[0],centerY=center[1],x=attr.translationX,y=attr.translationY,sx=attr.scalingX,sy=attr.scalingY===null?attr.scalingX:attr.scalingY,scx=attr.scalingCenterX===null?centerX:attr.scalingCenterX,scy=attr.scalingCenterY===null?centerY:attr.scalingCenterY,rad=attr.rotationRads,rcx=attr.rotationCenterX===null?centerX:attr.rotationCenterX,rcy=attr.rotationCenterY===null?centerY:attr.rotationCenterY,cos=Math.cos(rad),sin=Math.sin(rad);if(sx===1&&sy===1){scx=0;scy=0}if(rad===0){rcx=0;rcy=0}attr.matrix.elements=[cos*sx,sin*sy,-sin*sx,cos*sy,scx+(rcx-cos*rcx-scx+rcy*sin)*sx+x,scy+(rcy-cos*rcy-scy+rcx*-sin)*sy+y];attr.matrix.inverse(attr.inverseMatrix);attr.dirtyTransform=false;attr.bbox.transform.dirty=true},preRender:Ext.emptyFn,render:Ext.emptyFn,repaint:function(){var parent=this.getParent();while(parent&&!(parent instanceof Ext.draw.Surface)){parent=parent.getParent()}if(parent){parent.renderFrame()}},destroy:function(){var me=this,modifier=me.topModifier,curr;while(modifier){curr=modifier;modifier=modifier.getPrevious();curr.destroy()}delete me.attr;me.destroy=Ext.emptyFn;if(me.fireEvent("beforedestroy",me)!==false){me.fireEvent("destroy",me)}this.callSuper()}},function(){this.def=Ext.create("Ext.draw.sprite.AttributeDefinition",this.def)});(function(){var PI2_3=2.0943951023931953,abs=Math.abs,sin=Math.cos,cos=Math.cos,acos=Math.acos,sqrt=Math.sqrt,exp=Math.exp,log=Math.log;Ext.define("Ext.draw.Solver",{singleton:true,cubicRoot:function(number){if(number>0){return exp(log(number)/3)}else{if(number<0){return -exp(log(-number)/3)}else{return 0}}},linearFunction:function(a,b){var result;if(a===0){result=function(t){return b};result.solve=function(y){return[]}}else{result=function(t){return a*t+b};result.solve=function(y){return[(y-b)/a]}}return result},quadraticFunction:function(a,b,c){var result;if(a===0){return this.linearFunction(b,c)}else{result=function(t){return(a*t+b)*t+c};var delta0temp=b*b-4*a*c,delta=function(y){return delta0temp+4*a*y},solveTemp0=1/a*0.5,solveTemp1=-solveTemp0*b;solveTemp0=abs(solveTemp0);result.solve=function(y){var deltaTemp=delta(y);if(deltaTemp<0){return[]}deltaTemp=sqrt(deltaTemp);return[solveTemp1-deltaTemp*solveTemp0,solveTemp1+deltaTemp*solveTemp0]}}return result},cubicFunction:function(a,b,c,d){var result;if(a===0){return this.quadraticFunction(b,c,d)}else{result=function(t){return((a*t+b)*t+c)*t+d};var b_a_3=b/a/3,c_a=c/a,d_a=d/a,b2=b_a_3*b_a_3,deltaTemp0=(b_a_3*c_a-d_a)*0.5-b_a_3*b2,deltaTemp1=b2-c_a/3,deltaTemp13=deltaTemp1*deltaTemp1*deltaTemp1;if(deltaTemp1===0){result.solve=function(y){return[-b_a_3+this.cubicRoot(deltaTemp0*2+y/a)]}}else{if(deltaTemp1>0){var deltaTemp1_2=sqrt(deltaTemp1),deltaTemp13_2=deltaTemp1_2*deltaTemp1_2*deltaTemp1_2;deltaTemp1_2+=deltaTemp1_2}result.solve=function(y){y/=a;var d0=deltaTemp0+y*0.5,deltaTemp=d0*d0-deltaTemp13;if(deltaTemp>0){deltaTemp=sqrt(deltaTemp);return[-b_a_3+this.cubicRoot(d0+deltaTemp)+this.cubicRoot(d0-deltaTemp)]}else{if(deltaTemp===0){var cr=this.cubicRoot(d0),root0=-b_a_3-cr;if(d0>=0){return[root0,root0,-b_a_3+2*cr]}else{return[-b_a_3+2*cr,root0,root0]}}else{var theta=acos(d0/deltaTemp13_2)/3,ra=deltaTemp1_2*cos(theta)-b_a_3,rb=deltaTemp1_2*cos(theta+PI2_3)-b_a_3,rc=deltaTemp1_2*cos(theta-PI2_3)-b_a_3;if(ra<rb){if(rb<rc){return[ra,rb,rc]}else{if(ra<rc){return[ra,rc,rb]}else{return[rc,ra,rb]}}}else{if(ra<rc){return[rb,ra,rc]}else{if(rb<rc){return[rb,rc,ra]}else{return[rc,rb,ra]}}}}}}}}return result},createBezierSolver:function(a,b,c,d){return this.cubicFunction(3*(b-c)+d-a,3*(a-2*b+c),3*(b-a),a)}})})();Ext.define("Ext.draw.Path",{requires:["Ext.draw.Draw","Ext.draw.Solver"],statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\s|,/g},svgString:"",constructor:function(pathString){var me=this;me.coords=[];me.types=[];me.cursor=null;me.startX=0;me.startY=0;me.solvers={};if(pathString){me.fromSvgString(pathString)}},clear:function(){var me=this;me.coords.length=0;me.types.length=0;me.cursor=null;me.startX=0;me.startY=0;me.solvers={};me.dirt()},dirt:function(){this.svgString=""},moveTo:function(x,y){var me=this;if(!me.cursor){me.cursor=[x,y]}me.coords.push(x,y);me.types.push("M");me.startX=x;me.startY=y;me.cursor[0]=x;me.cursor[1]=y;me.dirt()},lineTo:function(x,y){var me=this;if(!me.cursor){me.cursor=[x,y];me.coords.push(x,y);me.types.push("M")}else{me.coords.push(x,y);me.types.push("L")}me.cursor[0]=x;me.cursor[1]=y;me.dirt()},bezierCurveTo:function(cx1,cy1,cx2,cy2,x,y){var me=this;if(!me.cursor){me.moveTo(cx1,cy1)}me.coords.push(cx1,cy1,cx2,cy2,x,y);me.types.push("C");me.cursor[0]=x;me.cursor[1]=y;me.dirt()},quadraticCurveTo:function(cx,cy,x,y){var me=this;if(!me.cursor){me.moveTo(cx,cy)}me.bezierCurveTo((me.cursor[0]*2+cx)/3,(me.cursor[1]*2+cy)/3,(x*2+cx)/3,(y*2+cy)/3,x,y)},closePath:function(){var me=this;if(me.cursor){me.types.push("Z");me.dirt()}},arcTo:function(x1,y1,x2,y2,rx,ry,rotation){var me=this;if(ry===undefined){ry=rx}if(rotation===undefined){rotation=0}if(!me.cursor){me.moveTo(x1,y1);return}if(rx===0||ry===0){me.lineTo(x1,y1);return}x2-=x1;y2-=y1;var x0=me.cursor[0]-x1,y0=me.cursor[1]-y1,area=x2*y0-y2*x0,cos,sin,xx,yx,xy,yy,l0=Math.sqrt(x0*x0+y0*y0),l2=Math.sqrt(x2*x2+y2*y2),dist,cx,cy;if(area===0){me.lineTo(x1,y1);return}if(ry!==rx){cos=Math.cos(rotation);sin=Math.sin(rotation);xx=cos/rx;yx=sin/ry;xy=-sin/rx;yy=cos/ry;var temp=xx*x0+yx*y0;y0=xy*x0+yy*y0;x0=temp;temp=xx*x2+yx*y2;y2=xy*x2+yy*y2;x2=temp}else{x0/=rx;y0/=ry;x2/=rx;y2/=ry}cx=x0*l2+x2*l0;cy=y0*l2+y2*l0;dist=1/(Math.sin(Math.asin(Math.abs(area)/(l0*l2))*0.5)*Math.sqrt(cx*cx+cy*cy));cx*=dist;cy*=dist;var k0=(cx*x0+cy*y0)/(x0*x0+y0*y0),k2=(cx*x2+cy*y2)/(x2*x2+y2*y2);var cosStart=x0*k0-cx,sinStart=y0*k0-cy,cosEnd=x2*k2-cx,sinEnd=y2*k2-cy,startAngle=Math.atan2(sinStart,cosStart),endAngle=Math.atan2(sinEnd,cosEnd);if(area>0){if(endAngle<startAngle){endAngle+=Math.PI*2}}else{if(startAngle<endAngle){startAngle+=Math.PI*2}}if(ry!==rx){cx=cos*cx*rx-sin*cy*ry+x1;cy=sin*cy*ry+cos*cy*ry+y1;me.lineTo(cos*rx*cosStart-sin*ry*sinStart+cx,sin*rx*cosStart+cos*ry*sinStart+cy);me.ellipse(cx,cy,rx,ry,rotation,startAngle,endAngle,area<0)}else{cx=cx*rx+x1;cy=cy*ry+y1;me.lineTo(rx*cosStart+cx,ry*sinStart+cy);me.ellipse(cx,cy,rx,ry,rotation,startAngle,endAngle,area<0)}},ellipse:function(cx,cy,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise){var me=this,coords=me.coords,start=coords.length,count,i,j;if(endAngle-startAngle>=Math.PI*2){me.ellipse(cx,cy,radiusX,radiusY,rotation,startAngle,startAngle+Math.PI,anticlockwise);me.ellipse(cx,cy,radiusX,radiusY,rotation,startAngle+Math.PI,endAngle,anticlockwise);return}if(!anticlockwise){if(endAngle<startAngle){endAngle+=Math.PI*2}count=me.approximateArc(coords,cx,cy,radiusX,radiusY,rotation,startAngle,endAngle)}else{if(startAngle<endAngle){startAngle+=Math.PI*2}count=me.approximateArc(coords,cx,cy,radiusX,radiusY,rotation,endAngle,startAngle);for(i=start,j=coords.length-2;i<j;i+=2,j-=2){var temp=coords[i];coords[i]=coords[j];coords[j]=temp;temp=coords[i+1];coords[i+1]=coords[j+1];coords[j+1]=temp}}if(!me.cursor){me.cursor=[coords[coords.length-2],coords[coords.length-1]];me.types.push("M")}else{me.cursor[0]=coords[coords.length-2];me.cursor[1]=coords[coords.length-1];me.types.push("L")}for(i=2;i<count;i+=6){me.types.push("C")}me.dirt()},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.ellipse(x,y,radius,radius,0,startAngle,endAngle,anticlockwise)},rect:function(x,y,width,height){var me=this;me.moveTo(x,y);me.lineTo(x+width,y);me.lineTo(x+width,y+height);me.lineTo(x,y+height);me.closePath()},approximateArc:function(result,cx,cy,rx,ry,phi,theta1,theta2){var cosPhi=Math.cos(phi),sinPhi=Math.sin(phi),cosTheta1=Math.cos(theta1),sinTheta1=Math.sin(theta1),xx=cosPhi*cosTheta1*rx-sinPhi*sinTheta1*ry,yx=-cosPhi*sinTheta1*rx-sinPhi*cosTheta1*ry,xy=sinPhi*cosTheta1*rx+cosPhi*sinTheta1*ry,yy=-sinPhi*sinTheta1*rx+cosPhi*cosTheta1*ry,rightAngle=Math.PI/2,count=2,exx=xx,eyx=yx,exy=xy,eyy=yy,rho=0.547443256150549,temp,y1,x3,y3,x2,y2;theta2-=theta1;if(theta2<0){theta2+=Math.PI*2}result.push(xx+cx,xy+cy);while(theta2>=rightAngle){result.push(exx+eyx*rho+cx,exy+eyy*rho+cy,exx*rho+eyx+cx,exy*rho+eyy+cy,eyx+cx,eyy+cy);count+=6;theta2-=rightAngle;temp=exx;exx=eyx;eyx=-temp;temp=exy;exy=eyy;eyy=-temp}if(theta2){y1=(0.3294738052815987+0.012120855841304373*theta2)*theta2;x3=Math.cos(theta2);y3=Math.sin(theta2);x2=x3+y1*y3;y2=y3-y1*x3;result.push(exx+eyx*y1+cx,exy+eyy*y1+cy,exx*x2+eyx*y2+cx,exy*x2+eyy*y2+cy,exx*x3+eyx*y3+cx,exy*x3+eyy*y3+cy);count+=6}return count},arcSvg:function(rx,ry,rotation,fA,fS,x2,y2){if(rx<0){rx=-rx}if(ry<0){ry=-ry}var me=this,x1=me.cursor[0],y1=me.cursor[1],hdx=(x1-x2)/2,hdy=(y1-y2)/2,cosPhi=Math.cos(rotation),sinPhi=Math.sin(rotation),xp=hdx*cosPhi+hdy*sinPhi,yp=-hdx*sinPhi+hdy*cosPhi,ratX=xp/rx,ratY=yp/ry,lambda=ratX*ratX+ratY*ratY,cx=(x1+x2)*0.5,cy=(y1+y2)*0.5,cpx=0,cpy=0;if(lambda>=1){lambda=Math.sqrt(lambda);rx*=lambda;ry*=lambda}else{lambda=Math.sqrt(1/lambda-1);if(fA===fS){lambda=-lambda}cpx=lambda*rx*ratY;cpy=-lambda*ry*ratX;cx+=cosPhi*cpx-sinPhi*cpy;cy+=sinPhi*cpx+cosPhi*cpy}var theta1=Math.atan2((yp-cpy)/ry,(xp-cpx)/rx),deltaTheta=Math.atan2((-yp-cpy)/ry,(-xp-cpx)/rx)-theta1;if(fS){if(deltaTheta<=0){deltaTheta+=Math.PI*2}}else{if(deltaTheta>=0){deltaTheta-=Math.PI*2}}me.ellipse(cx,cy,rx,ry,rotation,theta1,theta1+deltaTheta,1-fS)},fromSvgString:function(pathString){if(!pathString){return}var me=this,parts,paramCounts={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},lastCommand="",lastControlX,lastControlY,lastX=0,lastY=0,part=false,i,partLength,relative;if(Ext.isString(pathString)){parts=pathString.replace(Ext.draw.Path.pathRe," $1 ").replace(Ext.draw.Path.pathRe2," -").split(Ext.draw.Path.pathSplitRe)}else{if(Ext.isArray(pathString)){parts=pathString.join(",").split(Ext.draw.Path.pathSplitRe)}}for(i=0,partLength=0;i<parts.length;i++){if(parts[i]!==""){parts[partLength++]=parts[i]}}parts.length=partLength;me.clear();for(i=0;i<parts.length;){lastCommand=part;part=parts[i];relative=(part.toUpperCase()!==part);i++;switch(part){case"M":me.moveTo(lastX=+parts[i],lastY=+parts[i+1]);i+=2;while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX=+parts[i],lastY=+parts[i+1]);i+=2}break;case"L":me.lineTo(lastX=+parts[i],lastY=+parts[i+1]);i+=2;while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX=+parts[i],lastY=+parts[i+1]);i+=2}break;case"A":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.arcSvg(+parts[i],+parts[i+1],+parts[i+2]*Math.PI/180,+parts[i+3],+parts[i+4],lastX=+parts[i+5],lastY=+parts[i+6]);i+=7}break;case"C":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.bezierCurveTo(+parts[i],+parts[i+1],lastControlX=+parts[i+2],lastControlY=+parts[i+3],lastX=+parts[i+4],lastY=+parts[i+5]);i+=6}break;case"Z":me.closePath();break;case"m":me.moveTo(lastX+=+parts[i],lastY+=+parts[i+1]);i+=2;while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]);i+=2}break;case"l":me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]);i+=2;while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX+=+parts[i],lastY+=+parts[i+1]);i+=2}break;case"a":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.arcSvg(+parts[i],+parts[i+1],+parts[i+2]*Math.PI/180,+parts[i+3],+parts[i+4],lastX+=+parts[i+5],lastY+=+parts[i+6]);i+=7}break;case"c":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.bezierCurveTo(lastX+(+parts[i]),lastY+(+parts[i+1]),lastControlX=lastX+(+parts[i+2]),lastControlY=lastY+(+parts[i+3]),lastX+=+parts[i+4],lastY+=+parts[i+5]);i+=6}break;case"z":me.closePath();break;case"s":if(!(lastCommand==="c"||lastCommand==="C"||lastCommand==="s"||lastCommand==="S")){lastControlX=lastX;lastControlY=lastY}while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.bezierCurveTo(lastX+lastX-lastControlX,lastY+lastY-lastControlY,lastControlX=lastX+(+parts[i]),lastControlY=lastY+(+parts[i+1]),lastX+=+parts[i+2],lastY+=+parts[i+3]);i+=4}break;case"S":if(!(lastCommand==="c"||lastCommand==="C"||lastCommand==="s"||lastCommand==="S")){lastControlX=lastX;lastControlY=lastY}while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.bezierCurveTo(lastX+lastX-lastControlX,lastY+lastY-lastControlY,lastControlX=+parts[i],lastControlY=+parts[i+1],lastX=(+parts[i+2]),lastY=(+parts[i+3]));i+=4}break;case"q":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.quadraticCurveTo(lastControlX=lastX+(+parts[i]),lastControlY=lastY+(+parts[i+1]),lastX+=+parts[i+2],lastY+=+parts[i+3]);i+=4}break;case"Q":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.quadraticCurveTo(lastControlX=+parts[i],lastControlY=+parts[i+1],lastX=+parts[i+2],lastY=+parts[i+3]);i+=4}break;case"t":if(!(lastCommand==="q"||lastCommand==="Q"||lastCommand==="t"||lastCommand==="T")){lastControlX=lastX;lastControlY=lastY}while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.quadraticCurveTo(lastControlX=lastX+lastX-lastControlX,lastControlY=lastY+lastY-lastControlY,lastX+=+parts[i+1],lastY+=+parts[i+2]);i+=2}break;case"T":if(!(lastCommand==="q"||lastCommand==="Q"||lastCommand==="t"||lastCommand==="T")){lastControlX=lastX;lastControlY=lastY}while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.quadraticCurveTo(lastControlX=lastX+lastX-lastControlX,lastControlY=lastY+lastY-lastControlY,lastX=(+parts[i+1]),lastY=(+parts[i+2]));i+=2}break;case"h":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX+=+parts[i],lastY);i++}break;case"H":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX=+parts[i],lastY);i++}break;case"v":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX,lastY+=+parts[i]);i++}break;case"V":while(i<partLength&&!paramCounts.hasOwnProperty(parts[i])){me.lineTo(lastX,lastY=+parts[i]);i++}break}}},rayTestLine:function(x1,y1,x2,y2,x,y){var cx;if(y1===y2){if(y===y1){if(Math.min(x1,x2)<=x&&x<=Math.max(x1,x2)){return -1}}else{return 0}}if(y1<y&&y<y2||y2<y&&y<y1){cx=(y-y1)*(x2-x1)/(y2-y1)+x1;if(cx===x){return -1}else{if(cx<x){return 0}else{return 1}}}else{return 0}},rayTestCubicBezier:function(x1,y1,x2,y2,x3,y3,x4,y4,x,y,idx){if(Math.min(x1,x2,x3,x4)<=x&&x<=Math.max(x1,x2,x3,x4)){if(Math.min(y1,y2,y3,y4)<=y&&y<=Math.max(y1,y2,y3,y4)){var me=this,solver=me.solvers[idx]||(me.solvers[idx]=Ext.draw.Solver.createBezierSolver(x1,x2,x3,x4)),result=solver.solve(y);return(+(x<=result[0]&&0<=result[0]&&result[0]<=1))+(+(x<=result[1]&&0<=result[1]&&result[1]<=1))+(+(x<=result[2]&&0<=result[2]&&result[2]<=1))}}return 0},isPointInPath:function(x,y){var me=this,i,j,count=0,test=0,types=me.types,coords=me.coords,ln=types.length,firstX=null,firstY=null,lastX=0,lastY=0;for(i=0,j=0;i<ln;i++){switch(types[i]){case"M":if(firstX!==null){test=me.rayTestLine(firstX,firstY,lastX,lastY,x,y);if(test<0){count+=1}else{count+=test}}firstX=lastX=coords[j];firstY=lastY=coords[j+1];j+=2;break;case"L":test=me.rayTestLine(lastX,lastY,coords[j],coords[j+1],x,y);if(test<0){return true}count+=test;lastX=coords[j];lastY=coords[j+1];j+=2;break;case"C":test=me.rayTestCubicBezier(lastX,lastY,coords[j],coords[j+1],coords[j+2],coords[j+3],coords[j+4],coords[j+5],x,y,i);if(test<0){return true}count+=test;lastX=coords[j+4];lastY=coords[j+5];j+=6;break;case"Z":break}}return count%2===1},clone:function(){var me=this,path=new Ext.draw.Path();path.coords=me.coords.slice(0);path.types=me.types.slice(0);path.cursor=me.cursor?me.cursor.slice(0):null;path.startX=me.startX;path.startY=me.startY;path.svgString=me.svgString;return path},transform:function(matrix){if(matrix.isIdentity()){return}var xx=matrix.getXX(),yx=matrix.getYX(),dx=matrix.getDX(),xy=matrix.getXY(),yy=matrix.getYY(),dy=matrix.getDY(),coords=this.coords,i=0,ln=coords.length,x,y;for(;i<ln;i+=2){x=coords[i];y=coords[i+1];coords[i]=x*xx+y*yx+dx;coords[i+1]=x*xy+y*yy+dy}this.dirt()},getDimension:function(target){if(!target){target={}}if(!this.types||!this.types.length){target.x=0;target.y=0;target.width=0;target.height=0;return target}target.left=Infinity;target.top=Infinity;target.right=-Infinity;target.bottom=-Infinity;var i=0,j=0,types=this.types,coords=this.coords,ln=types.length,x,y;for(;i<ln;i++){switch(types[i]){case"M":case"L":x=coords[j];y=coords[j+1];target.left=Math.min(x,target.left);target.top=Math.min(y,target.top);target.right=Math.max(x,target.right);target.bottom=Math.max(y,target.bottom);j+=2;break;case"C":this.expandDimension(target,x,y,coords[j],coords[j+1],coords[j+2],coords[j+3],x=coords[j+4],y=coords[j+5]);j+=6;break}}target.x=target.left;target.y=target.top;target.width=target.right-target.left;target.height=target.bottom-target.top;return target},getDimensionWithTransform:function(matrix,target){if(!this.types||!this.types.length){if(!target){target={}}target.x=0;target.y=0;target.width=0;target.height=0;return target}target.left=Infinity;target.top=Infinity;target.right=-Infinity;target.bottom=-Infinity;var xx=matrix.getXX(),yx=matrix.getYX(),dx=matrix.getDX(),xy=matrix.getXY(),yy=matrix.getYY(),dy=matrix.getDY(),i=0,j=0,types=this.types,coords=this.coords,ln=types.length,x,y;for(;i<ln;i++){switch(types[i]){case"M":case"L":x=coords[j]*xx+coords[j+1]*yx+dx;y=coords[j]*xy+coords[j+1]*yy+dy;target.left=Math.min(x,target.left);target.top=Math.min(y,target.top);target.right=Math.max(x,target.right);target.bottom=Math.max(y,target.bottom);j+=2;break;case"C":this.expandDimension(target,x,y,coords[j]*xx+coords[j+1]*yx+dx,coords[j]*xy+coords[j+1]*yy+dy,coords[j+2]*xx+coords[j+3]*yx+dx,coords[j+2]*xy+coords[j+3]*yy+dy,x=coords[j+4]*xx+coords[j+5]*yx+dx,y=coords[j+4]*xy+coords[j+5]*yy+dy);j+=6;break}}if(!target){target={}}target.x=target.left;target.y=target.top;target.width=target.right-target.left;target.height=target.bottom-target.top;return target},expandDimension:function(target,x1,y1,cx1,cy1,cx2,cy2,x2,y2){var me=this,l=target.left,r=target.right,t=target.top,b=target.bottom,dim=me.dim||(me.dim=[]);me.curveDimension(x1,cx1,cx2,x2,dim);l=Math.min(l,dim[0]);r=Math.max(r,dim[1]);me.curveDimension(y1,cy1,cy2,y2,dim);t=Math.min(t,dim[0]);b=Math.max(b,dim[1]);target.left=l;target.right=r;target.top=t;target.bottom=b},curveDimension:function(a,b,c,d,dim){var qa=3*(-a+3*(b-c)+d),qb=6*(a-2*b+c),qc=-3*(a-b),x,y,min=Math.min(a,d),max=Math.max(a,d),delta;if(qa===0){if(qb===0){dim[0]=min;dim[1]=max;return}else{x=-qc/qb;if(0<x&&x<1){y=this.interpolate(a,b,c,d,x);min=Math.min(min,y);max=Math.max(max,y)}}}else{delta=qb*qb-4*qa*qc;if(delta>=0){delta=Math.sqrt(delta);x=(delta-qb)/2/qa;if(0<x&&x<1){y=this.interpolate(a,b,c,d,x);min=Math.min(min,y);max=Math.max(max,y)}if(delta>0){x-=delta/qa;if(0<x&&x<1){y=this.interpolate(a,b,c,d,x);min=Math.min(min,y);max=Math.max(max,y)}}}}dim[0]=min;dim[1]=max},interpolate:function(a,b,c,d,t){if(t===0){return a}if(t===1){return d}var rate=(1-t)/t;return t*t*t*(d+rate*(3*c+rate*(3*b+rate*a)))},fromStripes:function(stripes){var me=this,i=0,ln=stripes.length,j,ln2,stripe;me.clear();for(;i<ln;i++){stripe=stripes[i];me.coords.push.apply(me.coords,stripe);me.types.push("M");for(j=2,ln2=stripe.length;j<ln2;j+=6){me.types.push("C")}}if(!me.cursor){me.cursor=[]}me.cursor[0]=me.coords[me.coords.length-2];me.cursor[1]=me.coords[me.coords.length-1];me.dirt()},toStripes:function(target){var stripes=target||[],curr,x,y,lastX,lastY,startX,startY,i,j,types=this.types,coords=this.coords,ln=types.length;for(i=0,j=0;i<ln;i++){switch(types[i]){case"M":curr=[startX=lastX=coords[j++],startY=lastY=coords[j++]];stripes.push(curr);break;case"L":x=coords[j++];y=coords[j++];curr.push((lastX+lastX+x)/3,(lastY+lastY+y)/3,(lastX+x+x)/3,(lastY+y+y)/3,lastX=x,lastY=y);break;case"C":curr.push(coords[j++],coords[j++],coords[j++],coords[j++],lastX=coords[j++],lastY=coords[j++]);break;case"Z":x=startX;y=startY;curr.push((lastX+lastX+x)/3,(lastY+lastY+y)/3,(lastX+x+x)/3,(lastY+y+y)/3,lastX=x,lastY=y);break}}return stripes},updateSvgString:function(){var result=[],types=this.types,coords=this.coords,ln=types.length,i=0,j=0;for(;i<ln;i++){switch(types[i]){case"M":result.push("M"+coords[j]+","+coords[j+1]);j+=2;break;case"L":result.push("L"+coords[j]+","+coords[j+1]);j+=2;break;case"C":result.push("C"+coords[j]+","+coords[j+1]+" "+coords[j+2]+","+coords[j+3]+" "+coords[j+4]+","+coords[j+5]);j+=6;break;case"Z":result.push("Z");break}}this.svgString=result.join("")},toString:function(){if(!this.svgString){this.updateSvgString()}return this.svgString}});Ext.define("Ext.draw.sprite.Path",{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.Draw","Ext.draw.Path"],alias:"sprite.path",type:"path",inheritableStatics:{def:{processors:{path:function(n,o){if(!(n instanceof Ext.draw.Path)){n=new Ext.draw.Path(n)}return n}},aliases:{d:"path"},dirtyTriggers:{path:"bbox"},updaters:{path:function(attr){var path=attr.path;if(!path||path.bindAttr!==attr){path=new Ext.draw.Path();path.bindAttr=attr;attr.path=path}path.clear();this.updatePath(path,attr);attr.dirtyFlags.bbox=["path"]}}}},updatePlainBBox:function(plain){if(this.attr.path){this.attr.path.getDimension(plain)}},updateTransformedBBox:function(transform){if(this.attr.path){this.attr.path.getDimensionWithTransform(this.attr.matrix,transform)}},render:function(surface,ctx){var mat=this.attr.matrix,attr=this.attr;if(!attr.path||attr.path.coords.length===0){return}mat.toContext(ctx);ctx.appendPath(attr.path);ctx.fillStroke(attr)},updatePath:function(path,attr){}});Ext.define("Ext.draw.sprite.Circle",{extend:"Ext.draw.sprite.Path",alias:"sprite.circle",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",r:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy"},defaults:{cx:0,cy:0,r:0},dirtyTriggers:{cx:"path",cy:"path",r:"path"}}},updatePlainBBox:function(plain){var attr=this.attr,cx=attr.cx,cy=attr.cy,r=attr.r;plain.x=cx-r;plain.y=cy-r;plain.width=r+r;plain.height=r+r},updateTransformedBBox:function(transform){var attr=this.attr,cx=attr.cx,cy=attr.cy,r=attr.r,matrix=attr.matrix,scalesX=matrix.getScaleX(),scalesY=matrix.getScaleY(),w,h;w=scalesX*r;h=scalesY*r;transform.x=matrix.x(cx,cy)-w;transform.y=matrix.y(cx,cy)-h;transform.width=w+w;transform.height=h+h},updatePath:function(path,attr){path.arc(attr.cx,attr.cy,attr.r,0,Math.PI*2,false)}});Ext.define("Ext.draw.sprite.Ellipse",{extend:"Ext.draw.sprite.Path",alias:"sprite.ellipse",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",rx:"number",ry:"number",axisRotation:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy",radiusX:"rx",radiusY:"ry"},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},dirtyTriggers:{cx:"path",cy:"path",rx:"path",ry:"path",axisRotation:"path"}}},updatePlainBBox:function(plain){var attr=this.attr,cx=attr.cx,cy=attr.cy,rx=attr.rx,ry=attr.ry;plain.x=cx-rx;plain.y=cy-ry;plain.width=rx+rx;plain.height=ry+ry},updateTransformedBBox:function(transform){var attr=this.attr,cx=attr.cx,cy=attr.cy,rx=attr.rx,ry=attr.ry,rxy=ry/rx,matrix=attr.matrix.clone(),xx,xy,yx,yy,dx,dy,w,h;matrix.append(1,0,0,rxy,0,cy*(1-rxy));xx=matrix.getXX();yx=matrix.getYX();dx=matrix.getDX();xy=matrix.getXY();yy=matrix.getYY();dy=matrix.getDY();w=Math.sqrt(xx*xx+yx*yx)*rx;h=Math.sqrt(xy*xy+yy*yy)*rx;transform.x=cx*xx+cy*yx+dx-w;transform.y=cx*xy+cy*yy+dy-h;transform.width=w+w;transform.height=h+h},updatePath:function(path,attr){path.ellipse(attr.cx,attr.cy,attr.rx,attr.ry,attr.axisRotation,0,Math.PI*2,false)}});Ext.define("Ext.draw.TextMeasurer",{singleton:true,uses:["Ext.draw.engine.Canvas"],measureDiv:null,measureCache:{},actualMeasureText:function(text,font){var me=Ext.draw.TextMeasurer,measureDiv=me.measureDiv,FARAWAY=100000,size;if(!measureDiv){var parent=Ext.Element.create({style:{overflow:"hidden",position:"relative","float":"left",width:0,height:0}});me.measureDiv=measureDiv=Ext.Element.create({});measureDiv.setStyle({position:"absolute",x:FARAWAY,y:FARAWAY,"z-index":-FARAWAY,"white-space":"nowrap",display:"block",padding:0,margin:0});Ext.getBody().appendChild(parent);parent.appendChild(measureDiv)}if(font){measureDiv.setStyle({font:font,lineHeight:"normal"})}measureDiv.setText("("+text+")");size=measureDiv.getSize();measureDiv.setText("()");size.width-=measureDiv.getSize().width;return size},measureTextSingleLine:function(text,font){text=text.toString();var cache=this.measureCache,chars=text.split(""),width=0,height=0,cachedItem,charactor,i,ln,size;if(!cache[font]){cache[font]={}}cache=cache[font];if(cache[text]){return cache[text]}for(i=0,ln=chars.length;i<ln;i++){charactor=chars[i];if(!(cachedItem=cache[charactor])){size=this.actualMeasureText(charactor,font);cachedItem=cache[charactor]=size}width+=cachedItem.width;height=Math.max(height,cachedItem.height)}return cache[text]={width:width,height:height}},measureText:function(text,font){var lines=text.split("\n"),ln=lines.length,height=0,width=0,line,i;if(ln===1){return this.measureTextSingleLine(text,font)}for(i=0;i<ln;i++){line=this.measureTextSingleLine(lines[i],font);height+=line.height;width=Math.max(width,line.width)}return{width:width,height:height}}});Ext.define("Ext.draw.sprite.Text",{extend:"Ext.draw.sprite.Sprite",requires:["Ext.draw.TextMeasurer"],alias:"sprite.text",type:"text",lineBreakRe:/\n/g,inheritableStatics:{shortHand1Re:/'(.*)'/g,shortHand2Re:/ /g,shortHand3Re:/\s*,\s*/g,shortHand4Re:/\$\$\$\$/g,def:{processors:{x:"number",y:"number",text:"string",fontSize:function(n){if(!isNaN(n)){return +n+"px"}else{if(n.match(Ext.dom.Element.unitRe)){return n}}},fontStyle:"enums(,italic,oblique)",fontVariant:"enums(,small-caps)",fontWeight:(function(fontWeights){return function(n){if(!n){return""}else{if(n==="normal"){return""}else{if(!isNaN(n)){n=+n;if(100<=n&&n<=900){return n}}else{if(n in fontWeights){return n}}}}}})({normal:true,bold:true,bolder:true,lighter:true}),fontFamily:"string",textAlign:(function(textAligns){return function(n){if(n==="middle"){return"center"}else{if(!n){return"center"}else{if(!Ext.isString(n)){return undefined}else{if(n in textAligns){return n}}}}}})({left:true,right:true,center:true,start:true,end:true}),textBaseline:(function(textBaselines){return function(n){if(n===false){return"alphabetic"}else{if(n in textBaselines){return n}else{if(n==="center"){return"middle"}}}}})({top:true,hanging:true,middle:true,alphabetic:true,ideographic:true,bottom:true}),font:"string"},aliases:{"font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-variant":"fontVariant","text-anchor":"textAlign"},defaults:{fontStyle:"",fontVariant:"",fontWeight:"",fontSize:"10px",fontFamily:"sans-serif",font:"10px sans-serif",textBaseline:"alphabetic",textAlign:"start",strokeStyle:"none",divBased:true,fillStyle:"#000",x:0,y:0,text:""},dirtyTriggers:{fontStyle:"font,bbox",fontVariant:"font,bbox",fontWeight:"font,bbox",fontSize:"font,bbox",fontFamily:"font,bbox",font:"font-short-hand,bbox,canvas",textBaseline:"bbox",textAlign:"bbox",x:"bbox",y:"bbox",text:"bbox"},updaters:{"font-short-hand":(function(dispatcher){return function(attrs){var value=attrs.font,parts,part,i,ln,dispKey;value=value.replace(Ext.draw.sprite.Text.shortHand1Re,function(a,arg1){return arg1.replace(Ext.draw.sprite.Text.shortHand2Re,"$$$$")});value=value.replace(Ext.draw.sprite.Text.shortHand3Re,",");parts=value.split(" ");attrs={};for(i=0,ln=parts.length;i<ln;i++){part=parts[i];dispKey=dispatcher[part];if(dispKey){attrs[dispKey]=part}else{if(part.match(Ext.dom.Element.unitRe)){attrs.fontSize=part}else{attrs.fontFamily=part.replace(Ext.draw.sprite.Text.shortHand4Re," ")}}}this.setAttributesBypassingNormalization(attrs)}})({italic:"fontStyles",oblique:"fontStyles",bold:"fontWeights",bolder:"fontWeights",lighter:"fontWeights","100":"fontWeights","200":"fontWeights","300":"fontWeights","400":"fontWeights","500":"fontWeights","600":"fontWeights","700":"fontWeights","800":"fontWeights","900":"fontWeights","small-caps":"fontVariant"}),font:function(attrs){var font="";if(attrs.fontWeight){font+=attrs.fontWeight+" "}if(attrs.fontVariant){font+=attrs.fontVariant+" "}if(attrs.fontSize){font+=attrs.fontSize+" "}if(attrs.fontFamily){font+=attrs.fontFamily+" "}this.setAttributesBypassingNormalization({font:font.substr(0,font.length-1)})}}}},constructor:function(config){Ext.draw.sprite.Sprite.prototype.constructor.call(this,config)},updatePlainBBox:function(plain){var me=this,attr=me.attr,x=attr.x,y=attr.y,font=attr.font,text=attr.text,baseline=attr.textBaseline,alignment=attr.textAlign,size=Ext.draw.TextMeasurer.measureText(text,font),height=size.height,width=size.width;switch(baseline){case"hanging":case"top":break;case"ideographic":case"bottom":y-=height;break;case"alphabetic":y-=height*0.8;break;case"middle":case"center":y-=height*0.5;break}switch(alignment){case"end":case"right":x-=width;break;case"middle":case"center":x-=width*0.5;break}plain.x=x;plain.y=y;plain.width=width;plain.height=height},setText:function(text){this.setAttributesBypassingNormalization({text:text})},setElementStyles:function(element,styles){var stylesCache=element.stylesCache||(element.stylesCache={}),style=element.dom.style,name;for(name in styles){if(stylesCache[name]!==styles[name]){stylesCache[name]=style[name]=styles[name]}}},render:function(surface,ctx){var attr=this.attr,mat=Ext.draw.Matrix.fly(attr.matrix.elements.slice(0)),bbox=this.getBBox(true),x,y,i,lines;if(attr.text.length===0){return}lines=attr.text.split("\n");x=attr.bbox.plain.x;y=attr.bbox.plain.y;mat.toContext(ctx);for(i=0;i<lines.length;i++){if(ctx.fillStyle!=="rgba(0, 0, 0, 0)"){ctx.fillText(lines[i],x,y+bbox.height/lines.length*i)}if(ctx.strokeStyle!=="rgba(0, 0, 0, 0)"){ctx.strokeText(lines[i],x,y+bbox.height/lines.length*i)}}}});Ext.define("Ext.draw.sprite.EllipticalArc",{extend:"Ext.draw.sprite.Ellipse",alias:"sprite.ellipticalArc",type:"ellipticalArc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:Math.PI*2,anticlockwise:false},dirtyTriggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(path,attr){path.ellipse(attr.cx,attr.cy,attr.rx,attr.ry,attr.axisRotation,attr.startAngle,attr.endAngle,attr.anticlockwise)}});Ext.define("Ext.draw.sprite.Sector",{extend:"Ext.draw.sprite.Path",alias:"sprite.sector",type:"sector",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number"},aliases:{rho:"endRho"},dirtyTriggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,bbox",endAngle:"path,bbox",startRho:"path,bbox",endRho:"path,bbox",margin:"path,bbox"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:"M 0,0"}}},updatePath:function(path,attr){var startAngle=Math.min(attr.startAngle,attr.endAngle),endAngle=Math.max(attr.startAngle,attr.endAngle),midAngle=(startAngle+endAngle)*0.5,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,startRho=Math.min(attr.startRho,attr.endRho),endRho=Math.max(attr.startRho,attr.endRho);if(margin){centerX+=margin*Math.cos(midAngle);centerY+=margin*Math.sin(midAngle)}path.moveTo(centerX+startRho*Math.cos(startAngle),centerY+startRho*Math.sin(startAngle));path.lineTo(centerX+endRho*Math.cos(startAngle),centerY+endRho*Math.sin(startAngle));path.arc(centerX,centerY,endRho,startAngle,endAngle,false);path.lineTo(centerX+startRho*Math.cos(endAngle),centerY+startRho*Math.sin(endAngle));path.arc(centerX,centerY,startRho,endAngle,startAngle,true)}});Ext.define("Ext.draw.sprite.Composite",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.composite",type:"composite",constructor:function(){this.callSuper(arguments);this.sprites=[];this.sprites.map={}},add:function(sprite){if(!(sprite instanceof Ext.draw.sprite.Sprite)){sprite=Ext.create("sprite."+sprite.type,sprite);sprite.setParent(this)}var oldTransformations=sprite.applyTransformations,me=this,attr=me.attr;sprite.applyTransformations=function(){if(sprite.attr.dirtyTransform){attr.dirtyTransform=true;attr.bbox.plain.dirty=true;attr.bbox.transform.dirty=true}oldTransformations.call(sprite)};this.sprites.push(sprite);this.sprites.map[sprite.id]=sprite.getId();attr.bbox.plain.dirty=true;attr.bbox.transform.dirty=true},updatePlainBBox:function(plain){var me=this,left=Infinity,right=-Infinity,top=Infinity,bottom=-Infinity,sprite,bbox,i,ln;for(i=0,ln=me.sprites.length;i<ln;i++){sprite=me.sprites[i];sprite.applyTransformations();bbox=sprite.getBBox();if(left>bbox.x){left=bbox.x}if(right<bbox.x+bbox.width){right=bbox.x+bbox.width}if(top>bbox.y){top=bbox.y}if(bottom<bbox.y+bbox.height){bottom=bbox.y+bbox.height}}plain.x=left;plain.y=top;plain.width=right-left;plain.height=bottom-top},render:function(surface,ctx,region){var mat=this.attr.matrix,i,ln;mat.toContext(ctx);for(i=0,ln=this.sprites.length;i<ln;i++){surface.renderSprite(this.sprites[i],region)}}});Ext.define("Ext.draw.sprite.Arc",{extend:"Ext.draw.sprite.Circle",alias:"sprite.arc",type:"arc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:Math.PI*2,anticlockwise:false},dirtyTriggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(path,attr){path.arc(attr.cx,attr.cy,attr.r,attr.startAngle,attr.endAngle,attr.anticlockwise)}});Ext.define("Ext.draw.sprite.Rect",{extend:"Ext.draw.sprite.Path",alias:"sprite.rect",type:"rect",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",radius:"number"},aliases:{},dirtyTriggers:{x:"path",y:"path",width:"path",height:"path",radius:"path"},defaults:{x:0,y:0,width:1,height:1,radius:0}}},updatePlainBBox:function(plain){var attr=this.attr;plain.x=attr.x;plain.y=attr.y;plain.width=attr.width;plain.height=attr.height},updateTransformedBBox:function(transform,plain){this.attr.matrix.transformBBox(plain,this.attr.radius,transform)},updatePath:function(path,attr){var x=attr.x,y=attr.y,width=attr.width,height=attr.height,radius=Math.min(attr.radius,Math.abs(attr.height)*0.5,Math.abs(attr.width)*0.5);if(radius===0){path.rect(x,y,width,height)}else{path.moveTo(x+radius,y);path.arcTo(x+width,y,x+width,y+height,radius);path.arcTo(x+width,y+height,x,y+height,radius);path.arcTo(x,y+height,x,y,radius);path.arcTo(x,y,x+radius,y,radius)}}});Ext.define("Ext.draw.sprite.Image",{extend:"Ext.draw.sprite.Rect",alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},defaults:{src:"",width:null,height:null}}},render:function(surface,ctx){var me=this,attr=me.attr,mat=attr.matrix,src=attr.src,x=attr.x,y=attr.y,width=attr.width,height=attr.height,loadingStub=Ext.draw.sprite.Image.imageLoaders[src],imageLoader,i;if(loadingStub&&loadingStub.done){mat.toContext(ctx);ctx.drawImage(loadingStub.image,x,y,width||loadingStub.width,height||loadingStub.width)}else{if(!loadingStub){imageLoader=new Image();loadingStub=Ext.draw.sprite.Image.imageLoaders[src]={image:imageLoader,done:false,pendingSprites:[me],pendingSurfaces:[surface]};imageLoader.width=width;imageLoader.height=height;imageLoader.onload=function(){if(!loadingStub.done){loadingStub.done=true;for(i=0;i<loadingStub.pendingSprites.length;i++){loadingStub.pendingSprites[i].setDirty(true)}for(i in loadingStub.pendingSurfaces){loadingStub.pendingSurfaces[i].renderFrame()}}};imageLoader.src=src}else{Ext.Array.include(loadingStub.pendingSprites,me);Ext.Array.include(loadingStub.pendingSurfaces,surface)}}}});Ext.define("Ext.draw.sprite.Instancing",{extend:"Ext.draw.sprite.Sprite",alias:"sprite.instancing",type:"instancing",config:{template:null},instances:null,constructor:function(config){this.instances=[];this.callSuper([config]);if(config&&config.template){this.setTemplate(config.template)}},applyTemplate:function(template){if(!(template instanceof Ext.draw.sprite.Sprite)){template=Ext.create(template.xclass||"sprite."+template.type,template)}template.setParent(this);template.attr.children=[];this.instances=[];this.position=0;return template},createInstance:function(config,data,bypassNormalization,avoidCopy){var template=this.getTemplate(),originalAttr=template.attr,attr=Ext.Object.chain(originalAttr);template.topModifier.prepareAttributes(attr);template.attr=attr;template.setAttributes(config,bypassNormalization,avoidCopy);attr.data=data;this.instances.push(attr);template.attr=originalAttr;this.position++;originalAttr.children.push(attr);return attr},getBBox:function(){return null},getBBoxFor:function(index,isWithoutTransform){var template=this.getTemplate(),originalAttr=template.attr,bbox;template.attr=this.instances[index];bbox=template.getBBox(isWithoutTransform);template.attr=originalAttr;return bbox},render:function(surface,ctx,clipRegion,region){var me=this,mat=me.attr.matrix,template=me.getTemplate(),originalAttr=template.attr,instances=me.instances,i,ln=me.position;mat.toContext(ctx);template.preRender(surface,ctx,clipRegion,region);template.useAttributes(ctx,region);for(i=0;i<ln;i++){if(instances[i].dirtyZIndex){break}}for(i=0;i<ln;i++){if(instances[i].hidden){continue}ctx.save();template.attr=instances[i];template.applyTransformations();template.useAttributes(ctx,region);template.render(surface,ctx,clipRegion,region);ctx.restore()}template.attr=originalAttr},setAttributesFor:function(index,changes,bypassNormalization){var template=this.getTemplate(),originalAttr=template.attr,attr=this.instances[index];template.attr=attr;try{if(bypassNormalization){changes=Ext.apply({},changes)}else{changes=template.self.def.normalize(changes)}template.topModifier.pushDown(attr,changes);template.updateDirtyFlags(attr)}finally{template.attr=originalAttr}},destroy:function(){this.callSuper();this.instances.length=0;this.instances=null;if(this.getTemplate()){this.getTemplate().destroy()}}});Ext.define("Ext.draw.gradient.Linear",{extend:"Ext.draw.gradient.Gradient",type:"linear",config:{degrees:0},setAngle:function(angle){this.setDegrees(angle)},updateDegrees:function(){this.clearCache()},updateStops:function(){this.clearCache()},generateGradient:function(ctx,bbox){var angle=Ext.draw.Draw.rad(this.getDegrees()),cos=Math.cos(angle),sin=Math.sin(angle),w=bbox.width,h=bbox.height,cx=bbox.x+w*0.5,cy=bbox.y+h*0.5,stops=this.getStops(),ln=stops.length,gradient,l,i;if(!isNaN(cx)&&!isNaN(cy)&&h>0&&w>0){l=(Math.sqrt(h*h+w*w)*Math.abs(Math.cos(angle-Math.atan(h/w))))/2;gradient=ctx.createLinearGradient(cx+cos*l,cy+sin*l,cx-cos*l,cy-sin*l);for(i=0;i<ln;i++){gradient.addColorStop(stops[i].offset,stops[i].color)}return gradient}return"none"}});Ext.define("Ext.draw.gradient.Radial",{extend:"Ext.draw.gradient.Gradient",type:"radial",config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(newStart,oldStart){if(!oldStart){return newStart}var circle={x:oldStart.x,y:oldStart.y,r:oldStart.r};if("x" in newStart){circle.x=newStart.x}else{if("centerX" in newStart){circle.x=newStart.centerX}}if("y" in newStart){circle.y=newStart.y}else{if("centerY" in newStart){circle.y=newStart.centerY}}if("r" in newStart){circle.r=newStart.r}else{if("radius" in newStart){circle.r=newStart.radius}}return circle},applyEnd:function(newEnd,oldEnd){if(!oldEnd){return newEnd}var circle={x:oldEnd.x,y:oldEnd.y,r:oldEnd.r};if("x" in newEnd){circle.x=newEnd.x}else{if("centerX" in newEnd){circle.x=newEnd.centerX}}if("y" in newEnd){circle.y=newEnd.y}else{if("centerY" in newEnd){circle.y=newEnd.centerY}}if("r" in newEnd){circle.r=newEnd.r}else{if("radius" in newEnd){circle.r=newEnd.radius}}return circle},generateGradient:function(ctx,bbox){var start=this.getStart(),end=this.getEnd(),w=bbox.width*0.5,h=bbox.height*0.5,x=bbox.x+w,y=bbox.y+h,gradient=ctx.createRadialGradient(x+start.x*w,y+start.y*h,start.r*Math.max(w,h),x+end.x*w,y+end.y*h,end.r*Math.max(w,h)),stops=this.getStops(),ln=stops.length,i;for(i=0;i<ln;i++){gradient.addColorStop(stops[i].offset,stops[i].color)}return gradient}});Ext.define("Ext.draw.Matrix",{statics:{createAffineMatrixFromTwoPair:function(x0,y0,x1,y1,x0p,y0p,x1p,y1p){var dx=x1-x0,dy=y1-y0,dxp=x1p-x0p,dyp=y1p-y0p,r=1/(dx*dx+dy*dy),a=dx*dxp+dy*dyp,b=dxp*dy-dx*dyp,c=-a*x0-b*y0,f=b*x0-a*y0;return new this(a*r,-b*r,b*r,a*r,c*r+x0p,f*r+y0p)},createPanZoomFromTwoPair:function(x0,y0,x1,y1,x0p,y0p,x1p,y1p){if(arguments.length===2){return this.createPanZoomFromTwoPair.apply(this,x0.concat(y0))}var dx=x1-x0,dy=y1-y0,cx=(x0+x1)*0.5,cy=(y0+y1)*0.5,dxp=x1p-x0p,dyp=y1p-y0p,cxp=(x0p+x1p)*0.5,cyp=(y0p+y1p)*0.5,r=dx*dx+dy*dy,rp=dxp*dxp+dyp*dyp,scale=Math.sqrt(rp/r);return new this(scale,0,0,scale,cxp-scale*cx,cyp-scale*cy)},fly:(function(){var flyMatrix=null,simplefly=function(elements){flyMatrix.elements=elements;return flyMatrix};return function(elements){if(!flyMatrix){flyMatrix=new Ext.draw.Matrix()}flyMatrix.elements=elements;Ext.draw.Matrix.fly=simplefly;return flyMatrix}})(),create:function(mat){if(mat instanceof this){return mat}return new this(mat)}},constructor:function(xx,xy,yx,yy,dx,dy){if(xx&&xx.length===6){this.elements=xx.slice()}else{if(xx!==undefined){this.elements=[xx,xy,yx,yy,dx,dy]}else{this.elements=[1,0,0,1,0,0]}}},prepend:function(xx,xy,yx,yy,dx,dy){var elements=this.elements,xx0=elements[0],xy0=elements[1],yx0=elements[2],yy0=elements[3],dx0=elements[4],dy0=elements[5];elements[0]=xx*xx0+yx*xy0;elements[1]=xy*xx0+yy*xy0;elements[2]=xx*yx0+yx*yy0;elements[3]=xy*yx0+yy*yy0;elements[4]=xx*dx0+yx*dy0+dx;elements[5]=xy*dx0+yy*dy0+dy;return this},prependMatrix:function(matrix){return this.prepend.apply(this,matrix.elements)},append:function(xx,xy,yx,yy,dx,dy){var elements=this.elements,xx0=elements[0],xy0=elements[1],yx0=elements[2],yy0=elements[3],dx0=elements[4],dy0=elements[5];elements[0]=xx*xx0+xy*yx0;elements[1]=xx*xy0+xy*yy0;elements[2]=yx*xx0+yy*yx0;elements[3]=yx*xy0+yy*yy0;elements[4]=dx*xx0+dy*yx0+dx0;elements[5]=dx*xy0+dy*yy0+dy0;return this},appendMatrix:function(matrix){return this.append.apply(this,matrix.elements)},set:function(xx,xy,yx,yy,dx,dy){var elements=this.elements;elements[0]=xx;elements[1]=xy;elements[2]=yx;elements[3]=yy;elements[4]=dx;elements[5]=dy;return this},inverse:function(target){var elements=this.elements,a=elements[0],b=elements[1],c=elements[2],d=elements[3],e=elements[4],f=elements[5],rDim=1/(a*d-b*c);a*=rDim;b*=rDim;c*=rDim;d*=rDim;if(target){target.set(d,-b,-c,a,c*f-d*e,b*e-a*f);return target}else{return new Ext.draw.Matrix(d,-b,-c,a,c*f-d*e,b*e-a*f)}},translate:function(x,y,prepend){if(prepend){return this.prepend(1,0,0,1,x,y)}else{return this.append(1,0,0,1,x,y)}},scale:function(sx,sy,scx,scy,prepend){var me=this;if(sy==null){sy=sx}if(scx===undefined){scx=0}if(scy===undefined){scy=0}if(prepend){return me.prepend(sx,0,0,sy,scx-scx*sx,scy-scy*sy)}else{return me.append(sx,0,0,sy,scx-scx*sx,scy-scy*sy)}},rotate:function(angle,rcx,rcy,prepend){var me=this,cos=Math.cos(angle),sin=Math.sin(angle);rcx=rcx||0;rcy=rcy||0;if(prepend){return me.prepend(cos,sin,-sin,cos,rcx-cos*rcx+rcy*sin,rcy-cos*rcy-rcx*sin)}else{return me.append(cos,sin,-sin,cos,rcx-cos*rcx+rcy*sin,rcy-cos*rcy-rcx*sin)}},rotateFromVector:function(x,y,prepend){var me=this,d=Math.sqrt(x*x+y*y),cos=x/d,sin=y/d;if(prepend){return me.prepend(cos,sin,-sin,cos,0,0)}else{return me.append(cos,sin,-sin,cos,0,0)}},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(angle){return this.append(1,Math.tan(angle),0,-1,0,0)},skewY:function(angle){return this.append(1,0,Math.tan(angle),-1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(devicePixelRatio,comp){var elements=this.elements,x2x=elements[0],x2y=elements[1],y2x=elements[2],y2y=elements[3],newDx=elements[4],newDy=elements[5],r=x2y*y2x-x2x*y2y;comp.b=devicePixelRatio*x2y/x2x;comp.c=devicePixelRatio*y2x/y2y;comp.d=devicePixelRatio;comp.xx=x2x/devicePixelRatio;comp.yy=y2y/devicePixelRatio;comp.dx=(newDy*x2x*y2x-newDx*x2x*y2y)/r/devicePixelRatio;comp.dy=(newDx*x2y*y2y-newDy*x2x*y2y)/r/devicePixelRatio},precisionCompensateRect:function(devicePixelRatio,comp){var elements=this.elements,x2x=elements[0],x2y=elements[1],y2x=elements[2],y2y=elements[3],newDx=elements[4],newDy=elements[5],yxOnXx=y2x/x2x;comp.b=devicePixelRatio*x2y/x2x;comp.c=devicePixelRatio*yxOnXx;comp.d=devicePixelRatio*y2y/x2x;comp.xx=x2x/devicePixelRatio;comp.yy=x2x/devicePixelRatio;comp.dx=(newDy*y2x-newDx*y2y)/(x2y*yxOnXx-y2y)/devicePixelRatio;comp.dy=-(newDy*x2x-newDx*x2y)/(x2y*yxOnXx-y2y)/devicePixelRatio},x:function(x,y){var elements=this.elements;return x*elements[0]+y*elements[2]+elements[4]},y:function(x,y){var elements=this.elements;return x*elements[1]+y*elements[3]+elements[5]},get:function(i,j){return +this.elements[i+j*2].toFixed(4)},transformPoint:function(point){var elements=this.elements;return[point[0]*elements[0]+point[1]*elements[2]+elements[4],point[0]*elements[1]+point[1]*elements[3]+elements[5]]},transformBBox:function(bbox,radius,target){var elements=this.elements,l=bbox.x,t=bbox.y,w0=bbox.width*0.5,h0=bbox.height*0.5,xx=elements[0],xy=elements[1],yx=elements[2],yy=elements[3],cx=l+w0,cy=t+h0,w,h,scales;if(radius){w0-=radius;h0-=radius;scales=[Math.sqrt(elements[0]*elements[0]+elements[2]*elements[2]),Math.sqrt(elements[1]*elements[1]+elements[3]*elements[3])];w=Math.abs(w0*xx)+Math.abs(h0*yx)+Math.abs(scales[0]*radius);h=Math.abs(w0*xy)+Math.abs(h0*yy)+Math.abs(scales[1]*radius)}else{w=Math.abs(w0*xx)+Math.abs(h0*yx);h=Math.abs(w0*xy)+Math.abs(h0*yy)}if(!target){target={}}target.x=cx*xx+cy*yx+elements[4]-w;target.y=cx*xy+cy*yy+elements[5]-h;target.width=w+w;target.height=h+h;return target},transformList:function(list){var elements=this.elements,xx=elements[0],yx=elements[2],dx=elements[4],xy=elements[1],yy=elements[3],dy=elements[5],ln=list.length,p,i;for(i=0;i<ln;i++){p=list[i];list[i]=[p[0]*xx+p[1]*yx+dx,p[0]*xy+p[1]*yy+dy]}return list},isIdentity:function(){var elements=this.elements;return elements[0]===1&&elements[1]===0&&elements[2]===0&&elements[3]===1&&elements[4]===0&&elements[5]===0},equals:function(matrix){var elements=this.elements,elements2=matrix.elements;return elements[0]===elements2[0]&&elements[1]===elements2[1]&&elements[2]===elements2[2]&&elements[3]===elements2[3]&&elements[4]===elements2[4]&&elements[5]===elements2[5]},toArray:function(){var elements=this.elements;return[elements[0],elements[2],elements[4],elements[1],elements[3],elements[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){var me=this;return[me.get(0,0),me.get(0,1),me.get(1,0),me.get(1,1),me.get(2,0),me.get(2,1)].join(",")},toContext:function(ctx){ctx.transform.apply(ctx,this.elements);return this},toSvg:function(){var elements=this.elements;return"matrix("+elements[0].toFixed(9)+","+elements[1].toFixed(9)+","+elements[2].toFixed(9)+","+elements[3].toFixed(9)+","+elements[4].toFixed(9)+","+elements[5].toFixed(9)+")"},getScaleX:function(){var elements=this.elements;return Math.sqrt(elements[0]*elements[0]+elements[2]*elements[2])},getScaleY:function(){var elements=this.elements;return Math.sqrt(elements[1]*elements[1]+elements[3]*elements[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var el=this.elements,xx=el[0],xy=el[1],yx=el[2],yy=el[3],out={translateX:el[4],translateY:el[5]};out.scaleX=Math.sqrt(xx*xx+yx*yx);out.shear=(xx*xy+yx*yy)/out.scaleX;xy-=out.shear*xx;yy-=out.shear*yx;out.scaleY=Math.sqrt(xy*xy+yy*yy);out.shear/=out.scaleY;out.rotation=-Math.atan2(yx/out.scaleX,xy/out.scaleY);out.isSimple=Math.abs(out.shear)<1e-9&&(!out.rotation||Math.abs(out.scaleX-out.scaleY)<1e-9);return out}},function(){function registerName(properties,name,i){properties[name]={get:function(){return this.elements[i]},set:function(val){this.elements[i]=val}}}if(Object.defineProperties){var properties={};registerName(properties,"a",0);registerName(properties,"b",1);registerName(properties,"c",2);registerName(properties,"d",3);registerName(properties,"e",4);registerName(properties,"f",5);Object.defineProperties(this.prototype,properties)}this.prototype.multiply=this.prototype.appendMatrix});Ext.define("Ext.draw.Group",{mixins:{observable:"Ext.mixin.Observable"},config:{surface:null},statics:{createRelayEvent:function(name){return(function(e){this.fireEvent(name,e)})},createDispatcherMethod:function(name){return function(){var args=Array.prototype.slice.call(arguments,0),items=this.items,i=0,ln=items.length,item;while(i<ln){item=items[i++];item[name].apply(item,args)}}}},autoDestroy:false,constructor:function(config){this.initConfig(config);this.map={};this.items=[];this.length=0},add:function(sprite){var id=sprite.getId(),oldSprite=this.map[id];if(!oldSprite){sprite.group.push(this.id);this.map[id]=sprite;this.items.push(sprite);this.length++}else{if(sprite!==oldSprite){Ext.Logger.error("Sprite with duplicated id.")}}},remove:function(sprite,destroySprite){var id=sprite.getId(),oldSprite=this.map[id];destroySprite=destroySprite||this.autoDestroy;if(oldSprite){if(oldSprite===sprite){delete this.map[id];this.length--;Ext.Array.remove(this.items,sprite);if(destroySprite){oldSprite.destroy()}else{Ext.Array.remove(sprite.group,this)}}else{if(sprite!==oldSprite){Ext.Logger.error("Sprite with duplicated id.")}}}},addAll:function(sprites){if(sprites.isSprite){this.add(sprites)}else{if(Ext.isArray(sprites)){var i=0;while(i<sprites.length){this.add(sprites[i++])}}}},each:function(fn){var i=0,items=this.items,ln=items.length;while(i<ln){if(false===fn(items[i])){return}}},clear:function(destroySprite){var i,ln,sprite,items;if(destroySprite||this.autoDestroy){items=this.items.slice(0);for(i=0,ln=items.length;i<ln;i++){items[i].destroy()}}else{items=this.items.slice(0);for(i=0,ln=items.length;i<ln;i++){sprite=items[i];Ext.Array.remove(sprite.group,this)}}this.length=0;this.map={};this.items.length=0},getAt:function(index){return this.items[index]},get:function(id){return this.map[id]||this.items[id]},destroy:function(){this.clear();this.getSurface().getGroups().remove(this)}},function(){this.addMembers({setAttributes:this.createDispatcherMethod("setAttributes"),show:this.createDispatcherMethod("show"),hide:this.createDispatcherMethod("hide"),setDirty:this.createDispatcherMethod("setDirty"),getBBox:function(isWithTransform){if(this.length===0){return{x:0,y:0,width:0,height:0}}var i,ln,l=Infinity,r=-Infinity,t=Infinity,b=-Infinity,bbox;for(i=0,ln=this.items.length;i<ln;i++){bbox=this.items[i].getBBox(isWithTransform);if(!bbox){continue}if(bbox.x+bbox.width>r){r=bbox.x+bbox.width}if(bbox.x<l){l=bbox.x}if(bbox.y+bbox.height>b){b=bbox.y+bbox.height}if(bbox.y<t){t=bbox.y}}return{x:l,y:t,height:b-t,width:r-l}}})});Ext.define("Ext.draw.Surface",{extend:"Ext.Component",xtype:"surface",requires:["Ext.draw.sprite.*","Ext.draw.gradient.*","Ext.draw.sprite.AttributeDefinition","Ext.draw.Matrix","Ext.draw.Draw","Ext.draw.Group"],uses:["Ext.draw.engine.Canvas"],defaultIdPrefix:"ext-surface-",devicePixelRatio:window.devicePixelRatio,statics:{stableSort:function(list){if(list.length<2){return}var keys={},sortedKeys,result=[],i,ln,zIndex;for(i=0,ln=list.length;i<ln;i++){zIndex=list[i].attr.zIndex;if(!keys[zIndex]){keys[zIndex]=[list[i]]}else{keys[zIndex].push(list[i])}}sortedKeys=Object.keys(keys).sort(function(a,b){return a-b});for(i=0,ln=sortedKeys.length;i<ln;i++){result.push.apply(result,keys[sortedKeys[i]])}for(i=0,ln=list.length;i<ln;i++){list[i]=result[i]}}},config:{region:null,background:null,items:[],groups:[],dirty:false},dirtyPredecessor:0,constructor:function(config){var me=this;me.predecessors=[];me.successors=[];me.pendingRenderFrame=false;me.callSuper([config]);me.matrix=new Ext.draw.Matrix();me.inverseMatrix=me.matrix.inverse(me.inverseMatrix);me.resetTransform()},roundPixel:function(num){return Math.round(this.devicePixelRatio*num)/this.devicePixelRatio},waitFor:function(surface){var me=this,predecessors=me.predecessors;if(!Ext.Array.contains(predecessors,surface)){predecessors.push(surface);surface.successors.push(me);if(surface._dirty){me.dirtyPredecessor++}}},setDirty:function(dirty){if(this._dirty!==dirty){var successors=this.successors,successor,i,ln=successors.length;for(i=0;i<ln;i++){successor=successors[i];if(dirty){successor.dirtyPredecessor++;successor.setDirty(true)}else{successor.dirtyPredecessor--;if(successor.dirtyPredecessor===0&&successor.pendingRenderFrame){successor.renderFrame()}}}this._dirty=dirty}},applyElement:function(newElement,oldElement){if(oldElement){oldElement.set(newElement)}else{oldElement=Ext.Element.create(newElement)}this.setDirty(true);return oldElement},applyBackground:function(background,oldBackground){this.setDirty(true);if(Ext.isString(background)){background={fillStyle:background}}return Ext.factory(background,Ext.draw.sprite.Rect,oldBackground)},applyRegion:function(region,oldRegion){if(oldRegion&&region[0]===oldRegion[0]&&region[1]===oldRegion[1]&&region[2]===oldRegion[2]&&region[3]===oldRegion[3]){return}if(Ext.isArray(region)){return[region[0],region[1],region[2],region[3]]}else{if(Ext.isObject(region)){return[region.x||region.left,region.y||region.top,region.width||(region.right-region.left),region.height||(region.bottom-region.top)]}}},updateRegion:function(region){var me=this,l=region[0],t=region[1],r=l+region[2],b=t+region[3],background=this.getBackground(),element=me.element;element.setBox({top:Math.floor(t),left:Math.floor(l),width:Math.ceil(r-Math.floor(l)),height:Math.ceil(b-Math.floor(t))});if(background){background.setAttributes({x:0,y:0,width:Math.ceil(r-Math.floor(l)),height:Math.ceil(b-Math.floor(t))})}me.setDirty(true)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0);this.inverseMatrix.set(1,0,0,1,0,0);this.setDirty(true)},updateComponent:function(component,oldComponent){if(component){component.element.dom.appendChild(this.element.dom)}},add:function(){var me=this,args=Array.prototype.slice.call(arguments),argIsArray=Ext.isArray(args[0]),sprite,items,i,ln,results,group,groups;items=argIsArray?args[0]:args;results=[];for(i=0,ln=items.length;i<ln;i++){sprite=items[i];if(!items[i]){continue}sprite=me.prepareItems(args[0])[0];groups=sprite.group;if(groups.length){for(i=0,ln=groups.length;i<ln;i++){group=groups[i];me.getGroup(group).add(sprite)}}me.getItems().add(sprite);results.push(sprite);sprite.setParent(this);me.onAdd(sprite)}me.dirtyZIndex=true;me.setDirty(true);if(!argIsArray&&results.length===1){return results[0]}else{return results}},onAdd:Ext.emptyFn,remove:function(sprite,destroySprite){if(sprite){if(destroySprite===true){sprite.destroy()}else{this.getGroups().each(function(item){item.remove(sprite)});this.getItems().remove(sprite)}this.dirtyZIndex=true;this.setDirty(true)}},removeAll:function(){this.getItems().clear();this.dirtyZIndex=true},applyItems:function(items,oldItems){var result;if(items instanceof Ext.draw.Group){result=items}else{result=new Ext.draw.Group({surface:this});result.autoDestroy=true;result.addAll(this.prepareItems(items))}this.setDirty(true);return result},prepareItems:function(items){items=[].concat(items);var me=this,item,i,ln,j,removeSprite=function(sprite){this.remove(sprite,false)};for(i=0,ln=items.length;i<ln;i++){item=items[i];if(!(item instanceof Ext.draw.sprite.Sprite)){item=items[i]=me.createItem(item)}for(j=0;j<item.group.length;j++){me.getGroup(item.group[i]).add(item)}item.on("beforedestroy",removeSprite,me)}return items},applyGroups:function(groups,oldGroups){var result;if(groups instanceof Ext.util.MixedCollection){result=groups}else{result=new Ext.util.MixedCollection();result.addAll(groups)}if(oldGroups){oldGroups.each(function(group){if(!result.contains()){group.destroy()}});oldGroups.destroy()}this.setDirty(true);return result},getGroup:function(id){var group;if(typeof id==="string"){group=this.getGroups().get(id);if(!group){group=this.createGroup(id)}}else{group=id}return group},createGroup:function(id){var group=this.getGroups().get(id);if(!group){group=new Ext.draw.Group({surface:this});group.id=id||Ext.id(null,"ext-surface-group-");this.getGroups().add(group)}this.setDirty(true);return group},removeGroup:function(group){if(Ext.isString(group)){group=this.getGroups().get(group)}if(group){this.getGroups().remove(group);group.destroy()}this.setDirty(true)},createItem:function(config){var sprite=Ext.create(config.xclass||"sprite."+config.type,config);return sprite},getBBox:function(sprite,isWithoutTransform){return sprite.getBBox(isWithoutTransform)},clear:Ext.emptyFn,orderByZIndex:function(){var me=this,items=me.getItems().items,dirtyZIndex=false,i,ln;if(me.getDirty()){for(i=0,ln=items.length;i<ln;i++){if(items[i].attr.dirtyZIndex){dirtyZIndex=true;break}}if(dirtyZIndex){Ext.draw.Surface.stableSort(items);this.setDirty(true)}for(i=0,ln=items.length;i<ln;i++){items[i].attr.dirtyZIndex=false}}},repaint:function(){var me=this;me.repaint=Ext.emptyFn;setTimeout(function(){delete me.repaint;me.element.repaint()},1)},renderFrame:function(){if(!this.element){return}if(this.dirtyPredecessor>0){this.pendingRenderFrame=true}var me=this,region=this.getRegion(),background=me.getBackground(),items=me.getItems().items,item,i,ln;if(!region){return}me.orderByZIndex();if(me.getDirty()){me.clear();me.clearTransform();if(background){me.renderSprite(background)}for(i=0,ln=items.length;i<ln;i++){item=items[i];item.applyTransformations();if(false===me.renderSprite(item)){return}item.attr.textPositionCount=me.textPosition}me.setDirty(false)}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,getDirty:function(){return this._dirty},destroy:function(){var me=this;me.removeAll();me.setBackground(null);me.setGroups([]);me.getGroups().destroy();me.predecessors=null;me.successors=null;me.callSuper()}});Ext.define("Ext.draw.engine.SvgContext",{toSave:["strokeOpacity","strokeStyle","fillOpacity","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","position"],strokeOpacity:1,strokeStyle:"none",fillOpacity:1,fillStyle:"none",globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"none",globalCompositeOperation:"src",constructor:function(SvgSurface){this.surface=SvgSurface;this.status=[];this.matrix=new Ext.draw.Matrix();this.path=null;this.clear()},clear:function(){this.group=this.surface.mainGroup;this.position=0;this.path=null},getElement:function(tag){return this.surface.getSvgElement(this.group,tag,this.position++)},save:function(){var toSave=this.toSave,obj={},group=this.getElement("g");for(var i=0;i<toSave.length;i++){if(toSave[i] in this){obj[toSave[i]]=this[toSave[i]]}}this.position=0;obj.matrix=this.matrix.clone();this.status.push(obj);this.group=group;return group},restore:function(){var toSave=this.toSave,obj=this.status.pop(),children=this.group.dom.childNodes;while(children.length>this.position){Ext.fly(children[children.length-1]).destroy()}for(var i=0;i<toSave.length;i++){if(toSave[i] in obj){this[toSave[i]]=obj[toSave[i]]}else{delete this[toSave[i]]}}this.setTransform.apply(this,obj.matrix.elements);this.group=this.group.getParent()},transform:function(xx,yx,xy,yy,dx,dy){if(this.path){var inv=Ext.draw.Matrix.fly([xx,yx,xy,yy,dx,dy]).inverse();this.path.transform(inv)}this.matrix.append(xx,yx,xy,yy,dx,dy)},setTransform:function(xx,yx,xy,yy,dx,dy){if(this.path){this.path.transform(this.matrix)}this.matrix.reset();this.transform(xx,yx,xy,yy,dx,dy)},setGradientBBox:function(bbox){this.bbox=bbox},beginPath:function(){this.path=new Ext.draw.Path()},moveTo:function(x,y){if(!this.path){this.beginPath()}this.path.moveTo(x,y);this.path.element=null},lineTo:function(x,y){if(!this.path){this.beginPath()}this.path.lineTo(x,y);this.path.element=null},rect:function(x,y,width,height){this.moveTo(x,y);this.lineTo(x+width,y);this.lineTo(x+width,y+height);this.lineTo(x,y+height);this.closePath()},strokeRect:function(x,y,width,height){this.beginPath();this.rect(x,y,width,height);this.stroke()},fillRect:function(x,y,width,height){this.beginPath();this.rect(x,y,width,height);this.fill()},closePath:function(){if(!this.path){this.beginPath()}this.path.closePath();this.path.element=null},arcSvg:function(r1,r2,rotation,large,swipe,x2,y2){if(!this.path){this.beginPath()}this.path.arcSvg(r1,r2,rotation,large,swipe,x2,y2);this.path.element=null},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){if(!this.path){this.beginPath()}this.path.arc(x,y,radius,startAngle,endAngle,anticlockwise);this.path.element=null},ellipse:function(x,y,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise){if(!this.path){this.beginPath()}this.path.ellipse(x,y,radiusX,radiusY,rotation,startAngle,endAngle,anticlockwise);this.path.element=null},arcTo:function(x1,y1,x2,y2,radiusX,radiusY,rotation){if(!this.path){this.beginPath()}this.path.arcTo(x1,y1,x2,y2,radiusX,radiusY,rotation);this.path.element=null},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){if(!this.path){this.beginPath()}this.path.bezierCurveTo(x1,y1,x2,y2,x3,y3);this.path.element=null},strokeText:function(text,x,y){text=String(text);if(this.strokeStyle){var element=this.getElement("text"),tspan=this.surface.getSvgElement(element,"tspan",0);this.surface.setElementAttributes(element,{x:x,y:y,transform:this.matrix.toSvg(),stroke:this.strokeStyle,fill:"none",opacity:this.globalAlpha,"stroke-opacity":this.strokeOpacity,style:"font: "+this.font});if(tspan.dom.firstChild){tspan.dom.removeChild(tspan.dom.firstChild)}tspan.appendChild(document.createTextNode(Ext.String.htmlDecode(text)))}},fillText:function(text,x,y){text=String(text);if(this.fillStyle){var element=this.getElement("text"),tspan=this.surface.getSvgElement(element,"tspan",0);this.surface.setElementAttributes(element,{x:x,y:y,transform:this.matrix.toSvg(),fill:this.fillStyle,opacity:this.globalAlpha,"fill-opacity":this.fillOpacity,style:"font: "+this.font});if(tspan.dom.firstChild){tspan.dom.removeChild(tspan.dom.firstChild)}this.surface.setElementAttributes(tspan,{"alignment-baseline":"middle","baseline-shift":"-50%"});tspan.appendChild(document.createTextNode(Ext.String.htmlDecode(text)))}},drawImage:function(image,sx,sy,sw,sh,dx,dy,dw,dh){var me=this,element=me.getElement("image"),x=sx,y=sy,width=typeof sw==="undefined"?image.width:sw,height=typeof sh==="undefined"?image.height:sh,viewBox=null;if(typeof dh!=="undefined"){viewBox=sx+" "+sy+" "+sw+" "+sh;x=dx;y=dy;width=dw;height=dh}element.dom.setAttributeNS("http://www.w3.org/1999/xlink","href",image.src);me.surface.setElementAttributes(element,{viewBox:viewBox,x:x,y:y,width:width,height:height,opacity:me.globalAlpha,transform:me.matrix.toSvg()})},fill:function(){if(!this.path){return}if(this.fillStyle){var path,fillGradient=this.fillGradient,bbox=this.bbox,element=this.path.element;if(!element){path=this.path.toString();element=this.path.element=this.getElement("path");this.surface.setElementAttributes(element,{d:path,transform:this.matrix.toSvg()})}this.surface.setElementAttributes(element,{fill:fillGradient&&bbox?fillGradient.getGradient(this,bbox):this.fillStyle,"fill-opacity":this.fillOpacity*this.globalAlpha})}},stroke:function(){if(!this.path){return}if(this.strokeStyle){var path,strokeGradient=this.strokeGradient,bbox=this.bbox,element=this.path.element;if(!element||!this.path.svgString){path=this.path.toString();element=this.path.element=this.getElement("path");this.surface.setElementAttributes(element,{fill:"none",d:path,transform:this.matrix.toSvg()})}this.surface.setElementAttributes(element,{stroke:strokeGradient&&bbox?strokeGradient.getGradient(this,bbox):this.strokeStyle,"stroke-linecap":this.lineCap,"stroke-linejoin":this.lineJoin,"stroke-width":this.lineWidth,"stroke-opacity":this.strokeOpacity*this.globalAlpha})}},fillStroke:function(attr,transformFillStroke){var ctx=this,fillStyle=ctx.fillStyle,strokeStyle=ctx.strokeStyle,fillOpacity=ctx.fillOpacity,strokeOpacity=ctx.strokeOpacity;if(transformFillStroke===undefined){transformFillStroke=attr.transformFillStroke}if(!transformFillStroke){attr.inverseMatrix.toContext(ctx)}if(fillStyle&&fillOpacity!==0){ctx.fill()}if(strokeStyle&&strokeOpacity!==0){ctx.stroke()}},appendPath:function(path){this.path=path.clone()},createLinearGradient:function(x0,y0,x1,y1){var element=this.surface.getNextDef("linearGradient");this.surface.setElementAttributes(element,{x1:x0,y1:y0,x2:x1,y2:y1,gradientUnits:"userSpaceOnUse"});return new Ext.draw.engine.SvgContext.Gradient(this,this.surface,element)},createRadialGradient:function(x0,y0,r0,x1,y1,r1){var element=this.surface.getNextDef("radialGradient");this.surface.setElementAttributes(element,{fx:x0,fy:y0,cx:x1,cy:y1,r:r1,gradientUnits:"userSpaceOnUse"});return new Ext.draw.engine.SvgContext.Gradient(this,this.surface,element,r0/r1)}});Ext.define("Ext.draw.engine.SvgContext.Gradient",{constructor:function(ctx,surface,element,compression){this.ctx=ctx;this.surface=surface;this.element=element;this.position=0;this.compression=compression||0},addColorStop:function(offset,color){var stop=this.surface.getSvgElement(this.element,"stop",this.position++),compression=this.compression;this.surface.setElementAttributes(stop,{offset:(((1-compression)*offset+compression)*100).toFixed(2)+"%","stop-color":color,"stop-opacity":Ext.draw.Color.fly(color).a.toFixed(15)})},toString:function(){return"url(#"+this.element.getId()+")"}});Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.engine.SvgContext"],statics:{BBoxTextCache:{}},config:{highPrecision:false},getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"},children:[{tag:"svg",reference:"svgElement",namespace:"http://www.w3.org/2000/svg",version:1.1,cls:"x-surface"}]}]}},constructor:function(config){var me=this;me.callSuper([config]);me.mainGroup=me.createSvgNode("g");me.defElement=me.createSvgNode("defs");me.svgElement.appendChild(me.mainGroup);me.svgElement.appendChild(me.defElement);me.ctx=new Ext.draw.engine.SvgContext(me)},createSvgNode:function(type){var node=document.createElementNS("http://www.w3.org/2000/svg",type);return Ext.get(node)},getSvgElement:function(group,tag,position){var element;if(group.dom.childNodes.length>position){element=group.dom.childNodes[position];if(element.tagName===tag){return Ext.get(element)}else{Ext.destroy(element)}}element=Ext.get(this.createSvgNode(tag));if(position===0){group.insertFirst(element)}else{element.insertAfter(Ext.fly(group.dom.childNodes[position-1]))}element.cache={};return element},setElementAttributes:function(element,attributes){var dom=element.dom,cache=element.cache,name,value;for(name in attributes){value=attributes[name];if(cache[name]!==value){cache[name]=value;dom.setAttribute(name,value)}}},getNextDef:function(tagName){return this.getSvgElement(this.defElement,tagName,this.defPosition++)},clearTransform:function(){var me=this;me.mainGroup.set({transform:me.matrix.toSvg()})},clear:function(){this.ctx.clear();this.defPosition=0},renderSprite:function(sprite){var me=this,region=me.getRegion(),ctx=me.ctx;if(sprite.attr.hidden||sprite.attr.opacity===0){ctx.save();ctx.restore();return}try{sprite.element=ctx.save();sprite.preRender(this);sprite.applyTransformations();sprite.useAttributes(ctx,region);if(false===sprite.render(this,ctx,[0,0,region[2],region[3]])){return false}sprite.setDirty(false)}finally{ctx.restore()}},destroy:function(path,matrix,band){var me=this;me.ctx.destroy();me.mainGroup.destroy();delete me.mainGroup;delete me.ctx;me.callSuper(arguments)},remove:function(sprite,destroySprite){if(sprite&&sprite.element){sprite.element.destroy();sprite.element=null}this.callSuper(arguments)}});Ext.define("Ext.draw.engine.Canvas",{extend:"Ext.draw.Surface",config:{highPrecision:false},requires:["Ext.draw.Animator"],statics:{contextOverrides:{setGradientBBox:function(bbox){this.bbox=bbox},fill:function(){var fillStyle=this.fillStyle,fillGradient=this.fillGradient,fillOpacity=this.fillOpacity,rgba="rgba(0, 0, 0, 0)",rgba0="rgba(0, 0, 0, 0.0)",bbox=this.bbox,alpha=this.globalAlpha;if(fillStyle!==rgba&&fillStyle!==rgba0&&fillOpacity!==0){if(fillGradient&&bbox){this.fillStyle=fillGradient.getGradient(this,bbox)}if(fillOpacity!==1){this.globalAlpha=alpha*fillOpacity}this.$fill();if(fillOpacity!==1){this.globalAlpha=alpha}if(fillGradient&&bbox){this.fillStyle=fillStyle}}},stroke:function(transformFillStroke){var strokeStyle=this.strokeStyle,strokeGradient=this.strokeGradient,strokeOpacity=this.strokeOpacity,rgba="rgba(0, 0, 0, 0)",rgba0="rgba(0, 0, 0, 0.0)",bbox=this.bbox,alpha=this.globalAlpha;if(strokeStyle!==rgba&&strokeStyle!==rgba0&&strokeOpacity!==0){if(strokeGradient&&bbox){this.strokeStyle=strokeGradient.getGradient(this,bbox)}if(strokeOpacity!==1){this.globalAlpha=alpha*strokeOpacity}this.$stroke();if(strokeOpacity!==1){this.globalAlpha=alpha}if(strokeGradient&&bbox){this.strokeStyle=strokeStyle}}},fillStroke:function(attr,transformFillStroke){var ctx=this,fillStyle=this.fillStyle,fillOpacity=this.fillOpacity,strokeStyle=this.strokeStyle,strokeOpacity=this.strokeOpacity,shadowColor=ctx.shadowColor,shadowBlur=ctx.shadowBlur,rgba="rgba(0, 0, 0, 0)",rgba0="rgba(0, 0, 0, 0.0)";if(transformFillStroke===undefined){transformFillStroke=attr.transformFillStroke}if(!transformFillStroke){attr.inverseMatrix.toContext(ctx)}if(fillStyle!==rgba&&fillStyle!==rgba0&&fillOpacity!==0){ctx.fill();ctx.shadowColor="rgba(0,0,0,0)";ctx.shadowBlur=0}if(strokeStyle!==rgba&&strokeStyle!==rgba0&&strokeOpacity!==0){ctx.stroke()}ctx.shadowColor=shadowColor;ctx.shadowBlur=shadowBlur},ellipse:function(cx,cy,rx,ry,rotation,start,end,anticlockwise){var cos=Math.cos(rotation),sin=Math.sin(rotation);this.transform(cos*rx,sin*rx,-sin*ry,cos*ry,cx,cy);this.arc(0,0,1,start,end,anticlockwise);this.transform(cos/rx,-sin/ry,sin/rx,cos/ry,-(cos*cx+sin*cy)/rx,(sin*cx-cos*cy)/ry)},appendPath:function(path){var me=this,i=0,j=0,types=path.types,coords=path.coords,ln=path.types.length;me.beginPath();for(;i<ln;i++){switch(types[i]){case"M":me.moveTo(coords[j],coords[j+1]);j+=2;break;case"L":me.lineTo(coords[j],coords[j+1]);j+=2;break;case"C":me.bezierCurveTo(coords[j],coords[j+1],coords[j+2],coords[j+3],coords[j+4],coords[j+5]);j+=6;break;case"Z":me.closePath();break;default:}}}}},splitThreshold:1800,getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"innerElement",style:{width:"100%",height:"100%",position:"relative"}}]}},createCanvas:function(){var canvas=Ext.Element.create({tag:"canvas",cls:"x-surface"}),name,overrides=Ext.draw.engine.Canvas.contextOverrides,ctx=canvas.dom.getContext("2d"),backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;this.devicePixelRatio/=backingStoreRatio;if(ctx.ellipse){delete overrides.ellipse}for(name in overrides){ctx["$"+name]=ctx[name]}Ext.apply(ctx,overrides);if(this.getHighPrecision()){this.enablePrecisionCompensation(ctx)}else{this.disablePrecisionCompensation(ctx)}this.innerElement.appendChild(canvas);this.canvases.push(canvas);this.contexts.push(ctx)},initElement:function(){this.callSuper();this.canvases=[];this.contexts=[];this.createCanvas();this.activeCanvases=0},updateHighPrecision:function(pc){var contexts=this.contexts,ln=contexts.length,i,context;for(i=0;i<ln;i++){context=contexts[i];if(pc){this.enablePrecisionCompensation(context)}else{this.disablePrecisionCompensation(context)}}},precisionMethods:{rect:false,fillRect:false,strokeRect:false,clearRect:false,moveTo:false,lineTo:false,arc:false,arcTo:false,save:false,restore:false,updatePrecisionCompensate:false,setTransform:false,transform:false,scale:false,translate:false,rotate:false,quadraticCurveTo:false,bezierCurveTo:false,createLinearGradient:false,createRadialGradient:false,fillText:false,strokeText:false,drawImage:false},disablePrecisionCompensation:function(ctx){var precisionMethods=this.precisionMethods,name;for(name in precisionMethods){delete ctx[name]}this.setDirty(true)},enablePrecisionCompensation:function(ctx){var surface=this,xx=1,yy=1,dx=0,dy=0,matrix=new Ext.draw.Matrix(),transStack=[],comp={},originalCtx=ctx.constructor.prototype;var override={rect:function(x,y,w,h){return originalCtx.rect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy)},fillRect:function(x,y,w,h){this.updatePrecisionCompensateRect();originalCtx.fillRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy);this.updatePrecisionCompensate()},strokeRect:function(x,y,w,h){this.updatePrecisionCompensateRect();originalCtx.strokeRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy);this.updatePrecisionCompensate()},clearRect:function(x,y,w,h){return originalCtx.clearRect.call(this,x*xx+dx,y*yy+dy,w*xx,h*yy)},moveTo:function(x,y){return originalCtx.moveTo.call(this,x*xx+dx,y*yy+dy)},lineTo:function(x,y){return originalCtx.lineTo.call(this,x*xx+dx,y*yy+dy)},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.updatePrecisionCompensateRect();originalCtx.arc.call(this,x*xx+dx,y*xx+dy,radius*xx,startAngle,endAngle,anticlockwise);this.updatePrecisionCompensate()},arcTo:function(x1,y1,x2,y2,radius){this.updatePrecisionCompensateRect();originalCtx.arcTo.call(this,x1*xx+dx,y1*yy+dy,x2*xx+dx,y2*yy+dy,radius*xx);this.updatePrecisionCompensate()},save:function(){transStack.push(matrix);matrix=matrix.clone();return originalCtx.save.call(this)},restore:function(){matrix=transStack.pop();originalCtx.restore.call(this);this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){matrix.precisionCompensate(surface.devicePixelRatio,comp);xx=comp.xx;yy=comp.yy;dx=comp.dx;dy=comp.dy;return originalCtx.setTransform.call(this,surface.devicePixelRatio,comp.b,comp.c,comp.d,0,0)},updatePrecisionCompensateRect:function(){matrix.precisionCompensateRect(surface.devicePixelRatio,comp);xx=comp.xx;yy=comp.yy;dx=comp.dx;dy=comp.dy;return originalCtx.setTransform.call(this,surface.devicePixelRatio,comp.b,comp.c,comp.d,0,0)},setTransform:function(x2x,x2y,y2x,y2y,newDx,newDy){matrix.set(x2x,x2y,y2x,y2y,newDx,newDy);this.updatePrecisionCompensate()},transform:function(x2x,x2y,y2x,y2y,newDx,newDy){matrix.append(x2x,x2y,y2x,y2y,newDx,newDy);this.updatePrecisionCompensate()},scale:function(sx,sy){return this.transform(sx,0,0,sy,0,0)},translate:function(dx,dy){return this.transform(1,0,0,1,dx,dy)},rotate:function(radians){var cos=Math.cos(radians),sin=Math.sin(radians);return this.transform(cos,sin,-sin,cos,0,0)},quadraticCurveTo:function(cx,cy,x,y){return originalCtx.quadraticCurveTo.call(this,cx*xx+dx,cy*yy+dy,x*xx+dx,y*yy+dy)},bezierCurveTo:function(c1x,c1y,c2x,c2y,x,y){return originalCtx.bezierCurveTo.call(this,c1x*xx+dx,c1y*yy+dy,c2x*xx+dx,c2y*yy+dy,x*xx+dx,y*yy+dy)},createLinearGradient:function(x0,y0,x1,y1){this.updatePrecisionCompensateRect();var grad=originalCtx.createLinearGradient.call(this,x0*xx+dx,y0*yy+dy,x1*xx+dx,y1*yy+dy);this.updatePrecisionCompensate();return grad},createRadialGradient:function(x0,y0,r0,x1,y1,r1){this.updatePrecisionCompensateRect();var grad=originalCtx.createLinearGradient.call(this,x0*xx+dx,y0*xx+dy,r0*xx,x1*xx+dx,y1*xx+dy,r1*xx);this.updatePrecisionCompensate();return grad},fillText:function(text,x,y,maxWidth){originalCtx.setTransform.apply(this,matrix.elements);if(typeof maxWidth==="undefined"){originalCtx.fillText.call(this,text,x,y)}else{originalCtx.fillText.call(this,text,x,y,maxWidth)}this.updatePrecisionCompensate()},strokeText:function(text,x,y,maxWidth){originalCtx.setTransform.apply(this,matrix.elements);if(typeof maxWidth==="undefined"){originalCtx.strokeText.call(this,text,x,y)}else{originalCtx.strokeText.call(this,text,x,y,maxWidth)}this.updatePrecisionCompensate()},fill:function(){this.updatePrecisionCompensateRect();originalCtx.fill.call(this);this.updatePrecisionCompensate()},stroke:function(){this.updatePrecisionCompensateRect();originalCtx.stroke.call(this);this.updatePrecisionCompensate()},drawImage:function(img_elem,arg1,arg2,arg3,arg4,dst_x,dst_y,dw,dh){switch(arguments.length){case 3:return originalCtx.drawImage.call(this,img_elem,arg1*xx+dx,arg2*yy+dy);case 5:return originalCtx.drawImage.call(this,img_elem,arg1*xx+dx,arg2*yy+dy,arg3*xx,arg4*yy);case 9:return originalCtx.drawImage.call(this,img_elem,arg1,arg2,arg3,arg4,dst_x*xx+dx,dst_y*yy*dy,dw*xx,dh*yy)}}};Ext.apply(ctx,override);this.setDirty(true)},updateRegion:function(region){this.callSuper([region]);var me=this,l=Math.floor(region[0]),t=Math.floor(region[1]),r=Math.ceil(region[0]+region[2]),b=Math.ceil(region[1]+region[3]),devicePixelRatio=me.devicePixelRatio,w=r-l,h=b-t,splitThreshold=Math.round(me.splitThreshold/devicePixelRatio),splits=Math.ceil(w/splitThreshold),activeCanvases=me.activeCanvases,i,offsetX,dom,leftWidth;for(i=0,offsetX=0;i<splits;i++,offsetX+=splitThreshold){if(i>=me.canvases.length){me.createCanvas()}dom=me.canvases[i].dom;dom.style.left=offsetX+"px";if(h*devicePixelRatio!==dom.height){dom.height=h*devicePixelRatio;dom.style.height=h+"px"}leftWidth=Math.min(splitThreshold,w-offsetX);if(leftWidth*devicePixelRatio!==dom.width){dom.width=leftWidth*devicePixelRatio;dom.style.width=leftWidth+"px"}me.applyDefaults(me.contexts[i])}for(;i<activeCanvases;i++){dom=me.canvases[i].dom;dom.width=0;dom.height=0}me.activeCanvases=splits;me.clear()},clearTransform:function(){var me=this,activeCanvases=me.activeCanvases,i,ctx;for(i=0;i<activeCanvases;i++){ctx=me.contexts[i];ctx.translate(-me.splitThreshold*i,0);ctx.scale(me.devicePixelRatio,me.devicePixelRatio);me.matrix.toContext(ctx)}},renderSprite:function(sprite){var me=this,region=me._region,surfaceMatrix=me.matrix,parent=sprite._parent,matrix=Ext.draw.Matrix.fly([1,0,0,1,0,0]),bbox,i,offsetX,ctx,width,left=0,top,right=region[2],bottom;while(parent&&(parent!==me)){matrix.prependMatrix(parent.matrix||parent.attr&&parent.attr.matrix);parent=parent.getParent()}matrix.prependMatrix(surfaceMatrix);bbox=sprite.getBBox();if(bbox){bbox=matrix.transformBBox(bbox)}sprite.preRender(me);if(sprite.attr.hidden||sprite.attr.globalAlpha===0){sprite.setDirty(false);return}top=0;bottom=top+region[3];for(i=0,offsetX=0;i<me.activeCanvases;i++,offsetX+=me.splitThreshold/me.devicePixelRatio){ctx=me.contexts[i];width=Math.min(region[2]-offsetX,me.splitThreshold/me.devicePixelRatio);left=offsetX;right=left+width;if(bbox){if(bbox.x>right||bbox.x+bbox.width<left||bbox.y>bottom||bbox.y+bbox.height<top){continue}}try{ctx.save();sprite.useAttributes(ctx,region);if(false===sprite.render(me,ctx,[left,top,width,bottom-top],region)){return false}}finally{ctx.restore()}}sprite.setDirty(false)},applyDefaults:function(ctx){ctx.strokeStyle="rgba(0,0,0,0)";ctx.fillStyle="rgba(0,0,0,0)";ctx.textAlign="start";ctx.textBaseline="top";ctx.miterLimit=1},clear:function(){var me=this,activeCanvases=this.activeCanvases,i,canvas,ctx,width,height;for(i=0;i<activeCanvases;i++){canvas=me.canvases[i].dom;ctx=me.contexts[i];width=canvas.width;height=canvas.height;if(Ext.os.is.Android&&!Ext.os.is.Android4){canvas.width=canvas.width;me.applyDefaults(ctx)}else{ctx.setTransform(1,0,0,1,0,0);ctx.clearRect(0,0,width,height)}}me.setDirty(true)},destroy:function(){var me=this,i,ln=me.canvases.length;for(i=0;i<ln;i++){me.contexts[i]=null;me.canvases[i].destroy();me.canvases[i]=null}delete me.contexts;delete me.canvases;me.callSuper(arguments)}},function(){if(Ext.os.is.Android4&&Ext.browser.is.Chrome){this.prototype.splitThreshold=3000}else{if(Ext.os.is.Android){this.prototype.splitThreshold=10000000000}}});Ext.define("Ext.draw.Component",{extend:"Ext.Container",xtype:"draw",defaultType:"surface",requires:["Ext.draw.Surface","Ext.draw.engine.Svg","Ext.draw.engine.Canvas"],engine:"Ext.draw.engine.Canvas",statics:{WATERMARK:'Powered by <span style="color:#22E962; font-weight: 900">Sencha Touch</span> <span style="color:#75cdff; font-weight: 900">GPLv3</span>'},config:{cls:"x-draw-component",autoSize:false,viewBox:false,fitSurface:true,resizeHandler:null,background:null,sprites:null},constructor:function(config){config=config||{};if(config.items){config.sprites=config.items;delete config.items}this.callSuper(arguments);this.frameCallbackId=Ext.draw.Animator.addFrameCallback("renderFrame",this)},initialize:function(){var me=this;me.callSuper();me.element.on("resize","onResize",this)},applySprites:function(sprites){if(!sprites){return}sprites=Ext.Array.from(sprites);var ln=sprites.length,i,surface;for(i=0;i<ln;i++){if(sprites[i].surface instanceof Ext.draw.Surface){surface=sprites[i].surface}else{if(Ext.isString(sprites[i].surface)){surface=this.getSurface(sprites[i].surface)}else{surface=this.getSurface("main")}}surface.add(sprites[i])}},getElementConfig:function(){return{reference:"element",className:"x-container",children:[{reference:"innerElement",className:"x-inner",children:[{reference:"watermarkElement",cls:"x-chart-watermark",html:Ext.draw.Component.WATERMARK,style:Ext.draw.Component.WATERMARK?"":"display: none"}]}]}},updateBackground:function(background){this.element.setStyle({background:background})},onPlaceWatermark:function(){},onResize:function(){var me=this,size=me.element.getSize();me.fireEvent("resize",me,size);if(me.getResizeHandler()){me.getResizeHandler().call(me,size)}else{me.resizeHandler(size)}me.renderFrame();me.onPlaceWatermark()},resizeHandler:function(size){var me=this;me.getItems().each(function(surface){surface.setRegion([0,0,size.width,size.height])})},getSurface:function(id){id=this.getId()+"-"+(id||"main");var me=this,surfaces=me.getItems(),surface=surfaces.get(id),size;if(!surface){surface=me.add({xclass:me.engine,id:id});if(me.getFitSurface()){size=me.element.getSize();surface.setRegion([0,0,size.width,size.height])}surface.renderFrame()}return surface},renderFrame:function(){var me=this,i,ln,bbox,surfaces=me.getItems();for(i=0,ln=surfaces.length;i<ln;i++){surfaces.items[i].renderFrame()}},destroy:function(){Ext.draw.Animator.removeFrameCallback(this.frameCallbackId);this.callSuper()}},function(){if(location.search.match("svg")){Ext.draw.Component.prototype.engine="Ext.draw.engine.Svg"}else{if((Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)||(Ext.os.is.Android4&&(Ext.os.version.getMinor()===1||Ext.os.version.getMinor()===2))){Ext.draw.Component.prototype.engine="Ext.draw.engine.Svg"}}});Ext.define("Ext.chart.Markers",{extend:"Ext.draw.sprite.Instancing",revisions:0,constructor:function(){this.callSuper(arguments);this.map={};this.revisions={}},clear:function(category){category=category||"default";if(!(category in this.revisions)){this.revisions[category]=1}else{this.revisions[category]++}},putMarkerFor:function(category,markerAttr,index,canonical,keepRevision){category=category||"default";var me=this,map=me.map[category]||(me.map[category]={});if(index in map){me.setAttributesFor(map[index],markerAttr,canonical)}else{map[index]=me.instances.length;me.createInstance(markerAttr,null,canonical)}me.instances[map[index]].category=category;if(!keepRevision){me.instances[map[index]].revision=me.revisions[category]||(me.revisions[category]=1)}},getMarkerBBoxFor:function(category,index,isWithoutTransform){if(category in this.map){if(index in this.map[category]){return this.getBBoxFor(this.map[category][index],isWithoutTransform)}}},getBBox:function(){return null},render:function(surface,ctx,clipRegion){var me=this,revisions=me.revisions,mat=me.attr.matrix,template=me.getTemplate(),originalAttr=template.attr,instances=me.instances,i,ln=me.instances.length;mat.toContext(ctx);template.preRender(surface,ctx,clipRegion);template.useAttributes(ctx);for(i=0;i<ln;i++){if(instances[i].hidden||instances[i].revision!==revisions[instances[i].category]){continue}ctx.save();template.attr=instances[i];template.applyTransformations();template.useAttributes(ctx);template.render(surface,ctx,clipRegion);ctx.restore()}template.attr=originalAttr}});Ext.define("Ext.chart.label.Callout",{extend:"Ext.draw.modifier.Modifier",prepareAttributes:function(attr){if(!attr.hasOwnProperty("calloutOriginal")){attr.calloutOriginal=Ext.Object.chain(attr)}if(this._previous){this._previous.prepareAttributes(attr.calloutOriginal)}},setAttrs:function(attr,changes){var callout=attr.callout,origin=attr.calloutOriginal,bbox=attr.bbox.plain,width=(bbox.width||0)+attr.labelOverflowPadding,height=(bbox.height||0)+attr.labelOverflowPadding,dx,dy,r;if("callout" in changes){callout=changes.callout}if("callout" in changes||"calloutPlaceX" in changes||"calloutPlaceY" in changes||"x" in changes||"y" in changes){var rotationRads="rotationRads" in changes?origin.rotationRads=changes.rotationRads:origin.rotationRads,x="x" in changes?(origin.x=changes.x):origin.x,y="y" in changes?(origin.y=changes.y):origin.y,calloutPlaceX="calloutPlaceX" in changes?changes.calloutPlaceX:attr.calloutPlaceX,calloutPlaceY="calloutPlaceY" in changes?changes.calloutPlaceY:attr.calloutPlaceY,calloutVertical="calloutVertical" in changes?changes.calloutVertical:attr.calloutVertical,temp;rotationRads%=Math.PI*2;if(Math.cos(rotationRads)<0){rotationRads=(rotationRads+Math.PI)%(Math.PI*2)}if(rotationRads>Math.PI){rotationRads-=Math.PI*2}if(calloutVertical){rotationRads=rotationRads*(1-callout)+Math.PI/2*callout;temp=width;width=height;height=temp}else{rotationRads=rotationRads*(1-callout)}changes.rotationRads=rotationRads;changes.x=x*(1-callout)+calloutPlaceX*callout;changes.y=y*(1-callout)+calloutPlaceY*callout;dx=calloutPlaceX-x;dy=calloutPlaceY-y;if(Math.abs(dy*width)>Math.abs(height*dx)){if(dy>0){changes.calloutEndX=changes.x-(height/(dy*2)*dx)*callout;changes.calloutEndY=changes.y-height/2*callout}else{changes.calloutEndX=changes.x+(height/(dy*2)*dx)*callout;changes.calloutEndY=changes.y+height/2*callout}}else{if(dx>0){changes.calloutEndX=changes.x-width/2;changes.calloutEndY=changes.y-(width/(dx*2)*dy)*callout}else{changes.calloutEndX=changes.x+width/2;changes.calloutEndY=changes.y+(width/(dx*2)*dy)*callout}}}return changes},pushDown:function(attr,changes){changes=Ext.draw.modifier.Modifier.prototype.pushDown.call(this,attr.calloutOriginal,changes);return this.setAttrs(attr,changes)},popUp:function(attr,changes){attr=attr.__proto__;changes=this.setAttrs(attr,changes);if(this._next){return this._next.popUp(attr,changes)}else{return Ext.apply(attr,changes)}}});Ext.define("Ext.chart.label.Label",{extend:"Ext.draw.sprite.Text",requires:["Ext.chart.label.Callout"],inheritableStatics:{def:{processors:{callout:"limited01",calloutPlaceX:"number",calloutPlaceY:"number",calloutStartX:"number",calloutStartY:"number",calloutEndX:"number",calloutEndY:"number",calloutColor:"color",calloutVertical:"bool",labelOverflowPadding:"number"},defaults:{callout:0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutVertical:false,calloutColor:"black",labelOverflowPadding:5},dirtyTriggers:{callout:"transform",calloutPlaceX:"transform",calloutPlaceY:"transform",labelOverflowPadding:"transform",calloutRotation:"transform"}}},config:{fx:{customDuration:{callout:200}}},prepareModifiers:function(){this.callSuper(arguments);this.calloutModifier=new Ext.chart.label.Callout({sprite:this});this.fx.setNext(this.calloutModifier);this.calloutModifier.setNext(this.topModifier)},render:function(surface,ctx,clipRegion){var me=this,attr=me.attr;ctx.save();ctx.globalAlpha*=Math.max(0,attr.callout-0.5)*2;if(ctx.globalAlpha>0){ctx.strokeStyle=attr.calloutColor;ctx.fillStyle=attr.calloutColor;ctx.beginPath();ctx.moveTo(me.attr.calloutStartX,me.attr.calloutStartY);ctx.lineTo(me.attr.calloutEndX,me.attr.calloutEndY);ctx.stroke();ctx.beginPath();ctx.arc(me.attr.calloutStartX,me.attr.calloutStartY,1,0,2*Math.PI,true);ctx.fill();ctx.beginPath();ctx.arc(me.attr.calloutEndX,me.attr.calloutEndY,1,0,2*Math.PI,true);ctx.fill()}ctx.restore();Ext.draw.sprite.Text.prototype.render.apply(this,arguments)}});Ext.define("Ext.chart.series.Series",{requires:["Ext.chart.Markers","Ext.chart.label.Label"],mixins:{observable:"Ext.mixin.Observable"},type:null,seriesType:"sprite",identifiablePrefix:"ext-line-",observableType:"series",config:{chart:null,title:null,renderer:function(sprite,record,attributes,index,store){return attributes},showInLegend:true,triggerAfterDraw:false,themeStyle:{},style:{},subStyle:{},colors:null,store:null,label:{textBaseline:"middle",textAlign:"center",font:"14px Helvetica"},labelOverflowPadding:5,labelField:null,marker:null,markerSubStyle:null,itemInstancing:null,background:null,highlightItem:null,surface:null,overlaySurface:null,hidden:false,highlightCfg:null,animate:null},directions:[],sprites:null,getFields:function(fieldCategory){var me=this,fields=[],fieldsItem,i,ln;for(i=0,ln=fieldCategory.length;i<ln;i++){fieldsItem=me["get"+fieldCategory[i]+"Field"]();fields.push(fieldsItem)}return fields},updateAnimate:function(animate){var sprites=this.getSprites(),i=-1,ln=sprites.length;while(++i<ln){sprites[i].fx.setConfig(animate)}},updateTitle:function(newTitle){if(newTitle){var chart=this.getChart(),series=chart.getSeries(),legendStore=chart.getLegendStore(),index,rec;if(series){index=Ext.Array.indexOf(series,this);if(index!==-1){rec=legendStore.getAt(index);rec.set("name",newTitle)}}}},updateColors:function(colorSet){this.setSubStyle({fillStyle:colorSet});this.doUpdateStyles()},applyHighlightCfg:function(highlight,oldHighlight){return Ext.apply(oldHighlight||{},highlight)},applyItemInstancing:function(instancing,oldInstancing){return Ext.merge(oldInstancing||{},instancing)},setAttributesForItem:function(item,change){if(item&&item.sprite){if(item.sprite.itemsMarker&&item.category==="items"){item.sprite.putMarker(item.category,change,item.index,false,true)}if(item.sprite.isMarkerHolder&&item.category==="markers"){item.sprite.putMarker(item.category,change,item.index,false,true)}else{if(item.sprite instanceof Ext.draw.sprite.Instancing){item.sprite.setAttributesFor(item.index,change)}else{item.sprite.setAttributes(change)}}}},applyHighlightItem:function(newHighlightItem,oldHighlightItem){if(newHighlightItem===oldHighlightItem){return}if(Ext.isObject(newHighlightItem)&&Ext.isObject(oldHighlightItem)){if(newHighlightItem.sprite===oldHighlightItem.sprite&&newHighlightItem.index===oldHighlightItem.index){return}}return newHighlightItem},updateHighlightItem:function(newHighlightItem,oldHighlightItem){this.setAttributesForItem(oldHighlightItem,{highlighted:false});this.setAttributesForItem(newHighlightItem,{highlighted:true})},constructor:function(config){var me=this;me.getId();me.sprites=[];me.dataRange=[];Ext.ComponentManager.register(me);me.mixins.observable.constructor.apply(me,arguments)},applyStore:function(store){return Ext.StoreManager.lookup(store)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(newStore,oldStore){var me=this,chartStore=this.getChart()&&this.getChart().getStore();newStore=newStore||chartStore;oldStore=oldStore||chartStore;if(oldStore){oldStore.un("updaterecord","onUpdateRecord",me);oldStore.un("refresh","refresh",me)}if(newStore){newStore.on("updaterecord","onUpdateRecord",me);newStore.on("refresh","refresh",me);me.refresh()}},onStoreChanged:function(store,oldStore){if(!this._store){this.updateStore(store,oldStore)}},coordinateStacked:function(direction,directionOffset,directionCount){var me=this,store=me.getStore(),items=store.getData().items,axis=me["get"+direction+"Axis"](),hidden=me.getHidden(),range={min:0,max:0},directions=me["fieldCategory"+direction],fieldCategoriesItem,i,j,k,fields,field,data,dataStart=[],style={},stacked=me.getStacked(),sprites=me.getSprites();if(sprites.length>0){for(i=0;i<directions.length;i++){fieldCategoriesItem=directions[i];fields=me.getFields([fieldCategoriesItem]);for(j=0;j<items.length;j++){dataStart[j]=0}for(j=0;j<fields.length;j++){style={};field=fields[j];if(hidden[j]){style["dataStart"+fieldCategoriesItem]=dataStart;style["data"+fieldCategoriesItem]=dataStart;sprites[j].setAttributes(style);continue}data=me.coordinateData(items,field,axis);if(stacked){style["dataStart"+fieldCategoriesItem]=dataStart;dataStart=dataStart.slice(0);for(k=0;k<items.length;k++){dataStart[k]+=data[k]}style["data"+fieldCategoriesItem]=dataStart}else{style["dataStart"+fieldCategoriesItem]=dataStart;style["data"+fieldCategoriesItem]=data}sprites[j].setAttributes(style);if(stacked){me.getRangeOfData(dataStart,range)}else{me.getRangeOfData(data,range)}}}me.dataRange[directionOffset]=range.min;me.dataRange[directionOffset+directionCount]=range.max;style={};style["dataMin"+direction]=range.min;style["dataMax"+direction]=range.max;for(i=0;i<sprites.length;i++){sprites[i].setAttributes(style)}}},coordinate:function(direction,directionOffset,directionCount){var me=this,store=me.getStore(),items=store.getData().items,axis=me["get"+direction+"Axis"](),range={min:Infinity,max:-Infinity},fieldCategory=me["fieldCategory"+direction]||[direction],fields=me.getFields(fieldCategory),i,field,data,style={},sprites=me.getSprites();if(sprites.length>0){for(i=0;i<fieldCategory.length;i++){field=fields[i];data=me.coordinateData(items,field,axis);me.getRangeOfData(data,range);style["data"+fieldCategory[i]]=data}me.dataRange[directionOffset]=range.min;me.dataRange[directionOffset+directionCount]=range.max;style["dataMin"+direction]=range.min;style["dataMax"+direction]=range.max;for(i=0;i<sprites.length;i++){sprites[i].setAttributes(style)}}},coordinateData:function(items,field,axis){var data=[],length=items.length,layout=axis&&axis.getLayout(),coord=axis?function(x,field,idx,items){return layout.getCoordFor(x,field,idx,items)}:function(x){return +x},i;for(i=0;i<length;i++){data[i]=coord(items[i].data[field],field,i,items)}return data},getRangeOfData:function(data,range){var i,length=data.length,value,min=range.min,max=range.max;for(i=0;i<length;i++){value=data[i];if(value<min){min=value}if(value>max){max=value}}range.min=min;range.max=max},updateLabelData:function(){var me=this,store=me.getStore(),items=store.getData().items,sprites=me.getSprites(),labelField=me.getLabelField(),i,ln,labels;if(sprites.length>0&&labelField){labels=[];for(i=0,ln=items.length;i<ln;i++){labels.push(items[i].get(labelField))}for(i=0,ln=sprites.length;i<ln;i++){sprites[i].setAttributes({labels:labels})}}},processData:function(){if(!this.getStore()){return}var me=this,directions=this.directions,i,ln=directions.length,fieldCategory,axis;for(i=0;i<ln;i++){fieldCategory=directions[i];if(me["get"+fieldCategory+"Axis"]){axis=me["get"+fieldCategory+"Axis"]();if(axis){axis.processData(me);continue}}if(me["coordinate"+fieldCategory]){me["coordinate"+fieldCategory]()}}me.updateLabelData()},applyBackground:function(background){if(this.getChart()){this.getSurface().setBackground(background);return this.getSurface().getBackground()}else{return background}},updateChart:function(newChart,oldChart){var me=this;if(oldChart){oldChart.un("axeschanged","onAxesChanged",me);me.sprites=[];me.setSurface(null);me.setOverlaySurface(null);me.onChartDetached(oldChart)}if(newChart){me.setSurface(newChart.getSurface("series-surface","series"));me.setOverlaySurface(newChart.getSurface("overlay-surface","overlay"));newChart.on("axeschanged","onAxesChanged",me);if(newChart.getAxes()){me.onAxesChanged(newChart)}me.onChartAttached(newChart)}me.updateStore(me._store,null)},onAxesChanged:function(chart){var me=this,axes=chart.getAxes(),axis,directionMap={},directionMapItem,fieldMap={},fieldMapItem,needHighPrecision=false,directions=this.directions,direction,i,ln,j,ln2,k,ln3;for(i=0,ln=directions.length;i<ln;i++){direction=directions[i];fieldMap[direction]=me.getFields(me["fieldCategory"+direction])}for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];if(!directionMap[axis.getDirection()]){directionMap[axis.getDirection()]=[axis]}else{directionMap[axis.getDirection()].push(axis)}}for(i=0,ln=directions.length;i<ln;i++){direction=directions[i];if(directionMap[direction]){directionMapItem=directionMap[direction];for(j=0,ln2=directionMapItem.length;j<ln2;j++){axis=directionMapItem[j];if(axis.getFields().length===0){me["set"+direction+"Axis"](axis);if(axis.getNeedHighPrecision()){needHighPrecision=true}}else{fieldMapItem=fieldMap[direction];if(fieldMapItem){for(k=0,ln3=fieldMapItem.length;k<ln3;k++){if(axis.fieldsMap[fieldMapItem[k]]){me["set"+direction+"Axis"](axis);if(axis.getNeedHighPrecision()){needHighPrecision=true}break}}}}}}}this.getSurface().setHighPrecision(needHighPrecision)},onChartDetached:function(oldChart){this.fireEvent("chartdetached",oldChart);oldChart.un("storechanged","onStoreChanged",this)},onChartAttached:function(chart){var me=this;me.setBackground(me.getBackground());me.fireEvent("chartattached",chart);chart.on("storechanged","onStoreChanged",me);me.processData()},updateOverlaySurface:function(overlaySurface){var me=this;if(overlaySurface){if(me.getLabel()){me.getOverlaySurface().add(me.getLabel())}}},applyLabel:function(newLabel,oldLabel){if(!oldLabel){oldLabel=new Ext.chart.Markers({zIndex:10});oldLabel.setTemplate(new Ext.chart.label.Label(newLabel))}else{oldLabel.getTemplate().setAttributes(newLabel)}return oldLabel},createItemInstancingSprite:function(sprite,itemInstancing){var me=this,template,markers=new Ext.chart.Markers();markers.setAttributes({zIndex:Number.MAX_VALUE});var config=Ext.apply({},itemInstancing);if(me.getHighlightCfg()){config.highlightCfg=me.getHighlightCfg();config.modifiers=["highlight"]}markers.setTemplate(config);template=markers.getTemplate();template.setAttributes(me.getStyle());template.fx.on("animationstart","onSpriteAnimationStart",this);template.fx.on("animationend","onSpriteAnimationEnd",this);sprite.bindMarker("items",markers);me.getSurface().add(markers);return markers},getDefaultSpriteConfig:function(){return{type:this.seriesType}},createSprite:function(){var me=this,surface=me.getSurface(),itemInstancing=me.getItemInstancing(),marker,config,sprite=surface.add(me.getDefaultSpriteConfig());sprite.setAttributes(this.getStyle());if(itemInstancing){sprite.itemsMarker=me.createItemInstancingSprite(sprite,itemInstancing)}if(sprite.bindMarker){if(me.getMarker()){marker=new Ext.chart.Markers();config=Ext.merge({},me.getMarker());if(me.getHighlightCfg()){config.highlightCfg=me.getHighlightCfg();config.modifiers=["highlight"]}marker.setTemplate(config);marker.getTemplate().fx.setCustomDuration({translationX:0,translationY:0});sprite.dataMarker=marker;sprite.bindMarker("markers",marker);me.getOverlaySurface().add(marker)}if(me.getLabelField()){sprite.bindMarker("labels",me.getLabel())}}if(sprite.setDataItems){sprite.setDataItems(me.getStore().getData())}sprite.fx.on("animationstart","onSpriteAnimationStart",me);sprite.fx.on("animationend","onSpriteAnimationEnd",me);me.sprites.push(sprite);return sprite},getSprites:Ext.emptyFn,onUpdateRecord:function(){this.processData()},refresh:function(){this.processData()},isXType:function(xtype){return xtype==="series"},getItemId:function(){return this.getId()},applyStyle:function(style,oldStyle){var cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));if(cls&&cls.def){style=cls.def.normalize(style)}return Ext.apply(oldStyle||Ext.Object.chain(this.getThemeStyle()),style)},applyMarker:function(marker,oldMarker){var type=(marker&&marker.type)||(oldMarker&&oldMarker.type)||this.seriesType,cls;if(type){cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+type));if(cls&&cls.def){marker=cls.def.normalize(marker,true);marker.type=type;return Ext.merge(oldMarker||{},marker)}return Ext.merge(oldMarker||{},marker)}},applyMarkerSubStyle:function(marker,oldMarker){var type=(marker&&marker.type)||(oldMarker&&oldMarker.type)||this.seriesType,cls;if(type){cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+type));if(cls&&cls.def){marker=cls.def.batchedNormalize(marker,true);return Ext.merge(oldMarker||{},marker)}return Ext.merge(oldMarker||{},marker)}},applySubStyle:function(subStyle,oldSubStyle){var cls=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+this.seriesType));if(cls&&cls.def){subStyle=cls.def.batchedNormalize(subStyle,true);return Ext.merge(oldSubStyle||{},subStyle)}return Ext.merge(oldSubStyle||{},subStyle)},updateHidden:function(hidden){this.getColors();this.getSubStyle();this.setSubStyle({hidden:hidden});this.processData();this.doUpdateStyles()},setHiddenByIndex:function(index,value){if(Ext.isArray(this.getHidden())){this.getHidden()[index]=value;this.updateHidden(this.getHidden())}else{this.setHidden(value)}},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){var sprites=this.sprites,itemInstancing=this.getItemInstancing(),i=0,ln=sprites&&sprites.length,markerCfg=this.getMarker(),style;for(;i<ln;i++){style=this.getStyleByIndex(i);if(itemInstancing){sprites[i].itemsMarker.getTemplate().setAttributes(style)}else{sprites[i].setAttributes(style)}if(markerCfg&&sprites[i].dataMarker){sprites[i].dataMarker.getTemplate().setAttributes(this.getMarkerStyleByIndex(i))}}},getMarkerStyleByIndex:function(i){return this.getOverriddenStyleByIndex(i,this.getOverriddenStyleByIndex(i,this.getMarkerSubStyle(),this.getMarker()),this.getStyleByIndex(i))},getStyleByIndex:function(i){return this.getOverriddenStyleByIndex(i,this.getSubStyle(),this.getStyle())},getOverriddenStyleByIndex:function(i,subStyle,baseStyle){var subStyleItem,result=Ext.Object.chain(baseStyle||{});for(var name in subStyle){subStyleItem=subStyle[name];if(Ext.isArray(subStyleItem)){result[name]=subStyleItem[i%subStyle[name].length]}else{result[name]=subStyleItem}}return result},getItemForPoint:Ext.emptyFn,onSpriteAnimationStart:function(sprite){this.fireEvent("animationstart",sprite)},onSpriteAnimationEnd:function(sprite){this.fireEvent("animationend",sprite)},provideLegendInfo:function(target){target.push({name:this.getTitle()||this.getId(),mark:"black",disabled:false,series:this.getId(),index:0})},destroy:function(){Ext.ComponentManager.unregister(this);var store=this.getStore();if(store&&store.getAutoDestroy()){Ext.destroy(store)}this.setStore(null);this.callSuper()}});Ext.define("Ext.chart.interactions.Abstract",{xtype:"interaction",mixins:{observable:"Ext.mixin.Observable"},config:{gesture:"tap",chart:null,enabled:true},throttleGap:0,stopAnimationBeforeSync:false,constructor:function(config){var me=this;me.initConfig(config);Ext.ComponentManager.register(this)},initialize:Ext.emptyFn,updateChart:function(newChart,oldChart){var me=this,gestures=me.getGestures();if(oldChart===newChart){return}if(oldChart){me.removeChartListener(oldChart)}if(newChart){me.addChartListener()}},getGestures:function(){var gestures={};gestures[this.getGesture()]=this.onGesture;return gestures},onGesture:Ext.emptyFn,getItemForEvent:function(e){var me=this,chart=me.getChart(),chartXY=chart.getEventXY(e);return chart.getItemForPoint(chartXY[0],chartXY[1])},getItemsForEvent:function(e){var me=this,chart=me.getChart(),chartXY=chart.getEventXY(e);return chart.getItemsForPoint(chartXY[0],chartXY[1])},addChartListener:function(){var me=this,chart=me.getChart(),gestures=me.getGestures(),gesture,fn;me.listeners=me.listeners||{};function insertGesture(name,fn){chart.on(name,me.listeners[name]=function(e){var locks=me.getLocks(),result;if(!(name in locks)||locks[name]===me){result=(Ext.isFunction(fn)?fn:me[fn]).apply(this,arguments);if(result===false&&e&&e.stopPropagation){e.stopPropagation()}return result}},me)}for(gesture in gestures){insertGesture(gesture,gestures[gesture])}},removeChartListener:function(chart){var me=this,gestures=me.getGestures(),gesture,fn;function removeGesture(name){chart.un(name,me.listeners[name]);delete me.listeners[name]}for(gesture in gestures){removeGesture(gesture)}},lockEvents:function(){var me=this,locks=me.getLocks(),args=Array.prototype.slice.call(arguments),i=args.length;while(i--){locks[args[i]]=me}},unlockEvents:function(){var locks=this.getLocks(),args=Array.prototype.slice.call(arguments),i=args.length;while(i--){delete locks[args[i]]}},getLocks:function(){var chart=this.getChart();return chart.lockedEvents||(chart.lockedEvents={})},isMultiTouch:function(){return !(Ext.os.is.MultiTouch===false||(Ext.os.is.Android3||Ext.os.is.Android2)||Ext.os.is.Desktop)},initializeDefaults:Ext.emptyFn,doSync:function(){var chart=this.getChart();if(this.syncTimer){clearTimeout(this.syncTimer);this.syncTimer=null}if(this.stopAnimationBeforeSync){chart.resizing=true}chart.redraw();if(this.stopAnimationBeforeSync){chart.resizing=false}this.syncThrottle=+new Date()+this.throttleGap},sync:function(){var me=this;if(me.throttleGap&&Ext.frameStartTime<me.syncThrottle){if(me.syncTimer){return}me.syncTimer=setTimeout(function(){me.doSync()},me.throttleGap)}else{me.doSync()}},getItemId:function(){return this.getId()},isXType:function(xtype){return xtype==="interaction"},destroy:function(){Ext.ComponentManager.unregister(this);this.listeners=[];this.callSuper()}},function(){if(Ext.os.is.Android2){this.prototype.throttleGap=20}else{if(Ext.os.is.Android4){this.prototype.throttleGap=40}}});Ext.define("Ext.chart.MarkerHolder",{extend:"Ext.mixin.Mixin",mixinConfig:{id:"markerHolder",hooks:{constructor:"constructor",preRender:"preRender"}},isMarkerHolder:true,constructor:function(){this.boundMarkers={};this.cleanRedraw=false},bindMarker:function(name,marker){if(marker){if(!this.boundMarkers[name]){this.boundMarkers[name]=[]}Ext.Array.include(this.boundMarkers[name],marker)}},getBoundMarker:function(name){return this.boundMarkers[name]},preRender:function(){var boundMarkers=this.boundMarkers,boundMarkersItem,name,i,ln,id=this.getId(),parent=this.getParent(),matrix=this.surfaceMatrix?this.surfaceMatrix.set(1,0,0,1,0,0):(this.surfaceMatrix=new Ext.draw.Matrix());this.cleanRedraw=!this.attr.dirty;if(!this.cleanRedraw){for(name in this.boundMarkers){if(boundMarkers[name]){for(boundMarkersItem=boundMarkers[name],i=0,ln=boundMarkersItem.length;i<ln;i++){boundMarkersItem[i].clear(id)}}}}while(parent&&parent.attr&&parent.attr.matrix){matrix.prependMatrix(parent.attr.matrix);parent=parent.getParent()}matrix.prependMatrix(parent.matrix);this.surfaceMatrix=matrix;this.inverseSurfaceMatrix=matrix.inverse(this.inverseSurfaceMatrix)},putMarker:function(name,markerAttr,index,canonical,keepRevision){var boundMarkersItem,i,ln,id=this.getId();if(this.boundMarkers[name]){for(boundMarkersItem=this.boundMarkers[name],i=0,ln=boundMarkersItem.length;i<ln;i++){boundMarkersItem[i].putMarkerFor(id,markerAttr,index,canonical)}}},getMarkerBBox:function(name,index,isWithoutTransform){var boundMarkersItem,i,ln,id=this.getId();if(this.boundMarkers[name]){for(boundMarkersItem=this.boundMarkers[name],i=0,ln=boundMarkersItem.length;i<ln;i++){return boundMarkersItem[i].getMarkerBBoxFor(id,index,isWithoutTransform)}}}});Ext.define("Ext.chart.axis.sprite.Axis",{extend:"Ext.draw.sprite.Sprite",mixins:{markerHolder:"Ext.chart.MarkerHolder"},requires:["Ext.draw.sprite.Text"],inheritableStatics:{def:{processors:{grid:"bool",axisLine:"bool",minorTicks:"bool",minorTickSize:"number",majorTicks:"bool",majorTickSize:"number",length:"number",startGap:"number",endGap:"number",dataMin:"number",dataMax:"number",visibleMin:"number",visibleMax:"number",position:"enums(left,right,top,bottom,angular,radial)",minStepSize:"number",estStepSize:"number",titleOffset:"number",textPadding:"number",min:"number",max:"number",centerX:"number",centerY:"number",radius:"number",baseRotation:"number",data:"default",enlargeEstStepSizeByText:"bool"},defaults:{grid:false,axisLine:true,minorTicks:false,minorTickSize:3,majorTicks:true,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:"",minStepSize:0,estStepSize:42,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:5,scalingCenterY:0,scalingCenterX:0,strokeStyle:"black",enlargeEstStepSizeByText:false},dirtyTriggers:{minorTickSize:"bbox",majorTickSize:"bbox",position:"bbox,layout",axisLine:"bbox,layout",min:"layout",max:"layout",length:"layout",minStepSize:"layout",estStepSize:"layout",data:"layout",dataMin:"layout",dataMax:"layout",visibleMin:"layout",visibleMax:"layout",enlargeEstStepSizeByText:"layout"},updaters:{layout:function(){this.doLayout()}}}},config:{label:null,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},doLayout:function(){var me=this,attr=me.attr,layout=me.getLayout(),min=attr.dataMin+(attr.dataMax-attr.dataMin)*attr.visibleMin,max=attr.dataMin+(attr.dataMax-attr.dataMin)*attr.visibleMax,context={attr:attr,segmenter:me.getSegmenter()};if(attr.position==="left"||attr.position==="right"){attr.translationX=0;attr.translationY=max*attr.length/(max-min);attr.scalingX=1;attr.scalingY=-attr.length/(max-min);attr.scalingCenterY=0;attr.scalingCenterX=0;me.applyTransformations(true)}else{if(attr.position==="top"||attr.position==="bottom"){attr.translationX=-min*attr.length/(max-min);attr.translationY=0;attr.scalingX=attr.length/(max-min);attr.scalingY=1;attr.scalingCenterY=0;attr.scalingCenterX=0;me.applyTransformations(true)}}if(layout){layout.calculateLayout(context);me.setLayoutContext(context)}},iterate:function(snaps,fn){var i,position;if(snaps.getLabel){if(snaps.min<snaps.from){fn.call(this,snaps.min,snaps.getLabel(snaps.min),-1,snaps)}for(i=0;i<=snaps.steps;i++){fn.call(this,snaps.get(i),snaps.getLabel(i),i,snaps)}if(snaps.max>snaps.to){fn.call(this,snaps.max,snaps.getLabel(snaps.max),snaps.steps+1,snaps)}}else{if(snaps.min<snaps.from){fn.call(this,snaps.min,snaps.min,-1,snaps)}for(i=0;i<=snaps.steps;i++){position=snaps.get(i);fn.call(this,position,position,i,snaps)}if(snaps.max>snaps.to){fn.call(this,snaps.max,snaps.max,snaps.steps+1,snaps)}}},renderTicks:function(surface,ctx,layout,clipRegion){var me=this,attr=me.attr,docked=attr.position,matrix=attr.matrix,halfLineWidth=0.5*attr.lineWidth,xx=matrix.getXX(),dx=matrix.getDX(),yy=matrix.getYY(),dy=matrix.getDY(),majorTicks=layout.majorTicks,majorTickSize=attr.majorTickSize,minorTicks=layout.minorTicks,minorTickSize=attr.minorTickSize;if(majorTicks){switch(docked){case"right":me.iterate(majorTicks,function(position,labelText,i){position=surface.roundPixel(position*yy+dy)+halfLineWidth;ctx.moveTo(0,position);ctx.lineTo(majorTickSize,position)});break;case"left":me.iterate(majorTicks,function(position,labelText,i){position=surface.roundPixel(position*yy+dy)+halfLineWidth;ctx.moveTo(clipRegion[2]-majorTickSize,position);ctx.lineTo(clipRegion[2],position)});break;case"bottom":me.iterate(majorTicks,function(position,labelText,i){position=surface.roundPixel(position*xx+dx)-halfLineWidth;ctx.moveTo(position,0);ctx.lineTo(position,majorTickSize)});break;case"top":me.iterate(majorTicks,function(position,labelText,i){position=surface.roundPixel(position*xx+dx)-halfLineWidth;ctx.moveTo(position,clipRegion[3]);ctx.lineTo(position,clipRegion[3]-majorTickSize)});break;case"angular":me.iterate(majorTicks,function(position,labelText,i){position=position/(attr.max+1)*Math.PI*2+attr.baseRotation;ctx.moveTo(attr.centerX+(attr.length)*Math.cos(position),attr.centerY+(attr.length)*Math.sin(position));ctx.lineTo(attr.centerX+(attr.length+majorTickSize)*Math.cos(position),attr.centerY+(attr.length+majorTickSize)*Math.sin(position))});break}}},renderLabels:function(surface,ctx,layout,clipRegion){var me=this,attr=me.attr,halfLineWidth=0.5*attr.lineWidth,docked=attr.position,matrix=attr.matrix,textPadding=attr.textPadding,xx=matrix.getXX(),dx=matrix.getDX(),yy=matrix.getYY(),dy=matrix.getDY(),thickness=0,majorTicks=layout.majorTicks,padding=Math.max(attr.majorTickSize,attr.minorTickSize)+attr.lineWidth,label=this.getLabel(),font,lastLabelText=null,textSize=0,textCount=0,segmenter=layout.segmenter,renderer=this.getRenderer(),labelInverseMatrix,lastBBox=null,bbox,fly,text;if(majorTicks&&label&&!label.attr.hidden){font=label.attr.font;if(ctx.font!==font){ctx.font=font}label.setAttributes({translationX:0,translationY:0},true,true);label.applyTransformations();labelInverseMatrix=label.attr.inverseMatrix.elements.slice(0);switch(docked){case"left":label.setAttributes({textAlign:"center",textBaseline:"middle",translationX:surface.roundPixel(clipRegion[2]-padding+dx)-halfLineWidth-me.thickness/2},true,true);break;case"right":label.setAttributes({textAlign:"center",textBaseline:"middle",translationX:surface.roundPixel(padding+dx)-halfLineWidth+me.thickness/2},true,true);break;case"top":label.setAttributes({textAlign:"center",textBaseline:"middle",translationY:surface.roundPixel(clipRegion[3]-padding)-halfLineWidth-me.thickness/2},true,true);break;case"bottom":label.setAttributes({textAlign:"center",textBaseline:"middle",translationY:surface.roundPixel(padding)-halfLineWidth+me.thickness/2},true,true);break;case"radial":label.setAttributes({textAlign:"center",textBaseline:"middle",translationX:attr.centerX},true,true);break;case"angular":label.setAttributes({textAlign:"center",textBaseline:"middle",translationY:attr.centerY},true,true);break}if(docked==="left"||docked==="right"){me.iterate(majorTicks,function(position,labelText,i){if(labelText===undefined){return}text=renderer?renderer.call(this,labelText,layout,lastLabelText):segmenter.renderer(labelText,layout,lastLabelText);lastLabelText=labelText;label.setAttributes({text:String(text),translationY:surface.roundPixel(position*yy+dy)},true,true);label.applyTransformations();thickness=Math.max(thickness,label.getBBox().width+padding);if(thickness<=me.thickness){fly=Ext.draw.Matrix.fly(label.attr.matrix.elements.slice(0));bbox=fly.prepend.apply(fly,labelInverseMatrix).transformBBox(label.getBBox(true));if(lastBBox&&!Ext.draw.Draw.isBBoxIntersect(bbox,lastBBox,textPadding)){return}surface.renderSprite(label);lastBBox=bbox;textSize+=bbox.height;textCount++}})}else{if(docked==="top"||docked==="bottom"){me.iterate(majorTicks,function(position,labelText,i){if(labelText===undefined){return}text=renderer?renderer.call(this,labelText,layout,lastLabelText):segmenter.renderer(labelText,layout,lastLabelText);lastLabelText=labelText;label.setAttributes({text:String(text),translationX:surface.roundPixel(position*xx+dx)},true,true);label.applyTransformations();thickness=Math.max(thickness,label.getBBox().height+padding);if(thickness<=me.thickness){fly=Ext.draw.Matrix.fly(label.attr.matrix.elements.slice(0));bbox=fly.prepend.apply(fly,labelInverseMatrix).transformBBox(label.getBBox(true));if(lastBBox&&!Ext.draw.Draw.isBBoxIntersect(bbox,lastBBox,textPadding)){return}surface.renderSprite(label);lastBBox=bbox;textSize+=bbox.width;textCount++}})}else{if(docked==="radial"){me.iterate(majorTicks,function(position,labelText,i){if(labelText===undefined){return}text=renderer?renderer.call(this,labelText,layout,lastLabelText):segmenter.renderer(labelText,layout,lastLabelText);lastLabelText=labelText;if(typeof text!=="undefined"){label.setAttributes({text:String(text),translationY:attr.centerY-surface.roundPixel(position)/attr.max*attr.length},true,true);label.applyTransformations();bbox=label.attr.matrix.transformBBox(label.getBBox(true));if(lastBBox&&!Ext.draw.Draw.isBBoxIntersect(bbox,lastBBox)){return}surface.renderSprite(label);lastBBox=bbox;textSize+=bbox.width;textCount++}})}else{if(docked==="angular"){me.iterate(majorTicks,function(position,labelText,i){if(labelText===undefined){return}text=renderer?renderer.call(this,labelText,layout,lastLabelText):segmenter.renderer(labelText,layout,lastLabelText);lastLabelText=labelText;if(typeof text!=="undefined"){var angle=position/(attr.max+1)*Math.PI*2+attr.baseRotation;label.setAttributes({text:String(text),translationX:attr.centerX+(attr.length+10)*Math.cos(angle),translationY:attr.centerY+(attr.length+10)*Math.sin(angle)},true,true);label.applyTransformations();bbox=label.attr.matrix.transformBBox(label.getBBox(true));if(lastBBox&&!Ext.draw.Draw.isBBoxIntersect(bbox,lastBBox)){return}surface.renderSprite(label);lastBBox=bbox;textSize+=bbox.width;textCount++}})}}}}if(attr.enlargeEstStepSizeByText&&textCount){textSize/=textCount;textSize+=padding;textSize*=2;if(attr.estStepSize<textSize){attr.estStepSize=textSize}}if(Math.abs(me.thickness-(thickness))>1){me.thickness=thickness;attr.bbox.plain.dirty=true;attr.bbox.transform.dirty=true;me.doThicknessChanged();return false}}},renderAxisLine:function(surface,ctx,layout,clipRegion){var me=this,attr=me.attr,halfWidth=attr.lineWidth*0.5,docked=attr.position;if(attr.axisLine){switch(docked){case"left":ctx.moveTo(clipRegion[2]-halfWidth,-attr.endGap);ctx.lineTo(clipRegion[2]-halfWidth,attr.length+attr.startGap);break;case"right":ctx.moveTo(halfWidth,-attr.endGap);ctx.lineTo(halfWidth,attr.length+attr.startGap);break;case"bottom":ctx.moveTo(-attr.startGap,halfWidth);ctx.lineTo(attr.length+attr.endGap,halfWidth);break;case"top":ctx.moveTo(-attr.startGap,clipRegion[3]-halfWidth);ctx.lineTo(attr.length+attr.endGap,clipRegion[3]-halfWidth);break;case"angular":ctx.moveTo(attr.centerX+attr.length,attr.centerY);ctx.arc(attr.centerX,attr.centerY,attr.length,0,Math.PI*2,true);break}}},renderGridLines:function(surface,ctx,layout,clipRegion){var me=this,attr=me.attr,matrix=attr.matrix,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),position=attr.position,majorTicks=layout.majorTicks,anchor,j,lastAnchor;if(attr.grid){if(majorTicks){if(position==="left"||position==="right"){lastAnchor=attr.min*yy+dy;me.iterate(majorTicks,function(position,labelText,i){anchor=position*yy+dy;me.putMarker("horizontal-"+(i%2?"odd":"even"),{y:anchor,height:lastAnchor-anchor},j=i,true);lastAnchor=anchor});j++;anchor=0;me.putMarker("horizontal-"+(j%2?"odd":"even"),{y:anchor,height:lastAnchor-anchor},j,true)}else{if(position==="top"||position==="bottom"){lastAnchor=attr.min*xx+dx;me.iterate(majorTicks,function(position,labelText,i){anchor=position*xx+dx;me.putMarker("vertical-"+(i%2?"odd":"even"),{x:anchor,width:lastAnchor-anchor},j=i,true);lastAnchor=anchor});j++;anchor=attr.length;me.putMarker("vertical-"+(j%2?"odd":"even"),{x:anchor,width:lastAnchor-anchor},j,true)}else{if(position==="radial"){me.iterate(majorTicks,function(position,labelText,i){anchor=position/attr.max*attr.length;me.putMarker("circular-"+(i%2?"odd":"even"),{scalingX:anchor,scalingY:anchor},i,true);lastAnchor=anchor})}else{if(position==="angular"){me.iterate(majorTicks,function(position,labelText,i){anchor=position/(attr.max+1)*Math.PI*2+attr.baseRotation;me.putMarker("radial-"+(i%2?"odd":"even"),{rotationRads:anchor,rotationCenterX:0,rotationCenterY:0,scalingX:attr.length,scalingY:attr.length},i,true);lastAnchor=anchor})}}}}}}},doThicknessChanged:function(){var axis=this.getAxis();if(axis){axis.onThicknessChanged()}},render:function(surface,ctx,clipRegion){var me=this,layout=me.getLayoutContext();if(layout){if(false===me.renderLabels(surface,ctx,layout,clipRegion)){return false}ctx.beginPath();me.renderTicks(surface,ctx,layout,clipRegion);me.renderAxisLine(surface,ctx,layout,clipRegion);me.renderGridLines(surface,ctx,layout,clipRegion);ctx.stroke()}}});Ext.define("Ext.chart.axis.segmenter.Segmenter",{config:{axis:null},constructor:function(config){this.initConfig(config)},renderer:function(value,context){return String(value)},from:function(value){return value},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn});Ext.define("Ext.chart.axis.segmenter.Names",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.names",renderer:function(value,context){return value},diff:function(min,max,unit){return Math.floor(max-min)},align:function(value,step,unit){return Math.floor(value)},add:function(value,step,unit){return value+step},preferredStep:function(min,estStepSize,minIdx,data){return{unit:1,step:1}}});Ext.define("Ext.chart.axis.segmenter.Time",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.time",config:{step:null},renderer:function(value,context){var ExtDate=Ext.Date;switch(context.majorTicks.unit){case"y":return ExtDate.format(value,"Y");case"mo":return ExtDate.format(value,"Y-m");case"d":return ExtDate.format(value,"Y-m-d")}return ExtDate.format(value,"Y-m-d\nH:i:s")},from:function(value){return new Date(value)},diff:function(min,max,unit){var ExtDate=Ext.Date;if(isFinite(min)){min=new Date(min)}if(isFinite(max)){max=new Date(max)}return ExtDate.diff(min,max,unit)},align:function(date,step,unit){if(unit==="d"&&step>=7){date=Ext.Date.align(date,"d",step);date.setDate(date.getDate()-date.getDay()+1);return date}else{return Ext.Date.align(date,unit,step)}},add:function(value,step,unit){return Ext.Date.add(new Date(value),unit,step)},preferredStep:function(min,estStepSize){if(this.getStep()){return this.getStep()}var from=new Date(+min),to=new Date(+min+Math.ceil(estStepSize)),ExtDate=Ext.Date,units=[[ExtDate.YEAR,1,2,5,10,20,50,100,200,500],[ExtDate.MONTH,1,3,6],[ExtDate.DAY,1,7,14],[ExtDate.HOUR,1,6,12],[ExtDate.MINUTE,1,5,15,30],[ExtDate.SECOND,1,5,15,30],[ExtDate.MILLI,1,2,5,10,20,50,100,200,500]],result;for(var i=0;i<units.length;i++){var unit=units[i][0],diff=this.diff(from,to,unit);if(diff>0){for(var j=1;j<units[i].length;j++){if(diff<=units[i][j]){result={unit:unit,step:units[i][j]};break}}if(!result){i--;result={unit:units[i][0],step:1}}break}}if(!result){result={unit:ExtDate.DAY,step:1}}return result}});Ext.define("Ext.chart.axis.segmenter.Numeric",{extend:"Ext.chart.axis.segmenter.Segmenter",alias:"segmenter.numeric",renderer:function(value,context){return value.toFixed(Math.max(0,context.majorTicks.unit.fixes))},diff:function(min,max,unit){return Math.floor((max-min)/unit.scale)},align:function(value,step,unit){return Math.floor(value/(unit.scale*step))*unit.scale*step},add:function(value,step,unit){return value+step*(unit.scale)},preferredStep:function(min,estStepSize){var logs=Math.floor(Math.log(estStepSize)*Math.LOG10E),scale=Math.pow(10,logs);estStepSize/=scale;if(estStepSize<2){estStepSize=2}else{if(estStepSize<5){estStepSize=5}else{if(estStepSize<10){estStepSize=10;logs++}}}return{unit:{fixes:-logs,scale:scale},step:estStepSize}}});Ext.define("Ext.chart.axis.layout.Layout",{config:{axis:null},constructor:function(config){this.initConfig()},processData:function(series){var me=this,axis=me.getAxis(),direction=axis.getDirection(),boundSeries=axis.boundSeries,i,ln,item;if(series){series["coordinate"+direction]()}else{for(i=0,ln=boundSeries.length;i<ln;i++){item=boundSeries[i];if(item["get"+direction+"Axis"]()===axis){item["coordinate"+direction]()}}}},calculateMajorTicks:function(context){var me=this,attr=context.attr,range=attr.max-attr.min,zoom=range/Math.max(1,attr.length)*(attr.visibleMax-attr.visibleMin),viewMin=attr.min+range*attr.visibleMin,viewMax=attr.min+range*attr.visibleMax,estStepSize=attr.estStepSize*zoom,out=me.snapEnds(context,attr.min,attr.max,estStepSize);if(out){me.trimByRange(context,out,viewMin-zoom*(1+attr.startGap),viewMax+zoom*(1+attr.endGap));context.majorTicks=out}},calculateMinorTicks:function(context){},calculateLayout:function(context){var me=this,attr=context.attr,majorTicks=attr.majorTicks,minorTicks=attr.minorTicks;if(attr.length===0){return null}if(majorTicks){this.calculateMajorTicks(context);if(minorTicks){this.calculateMinorTicks(context)}}},snapEnds:Ext.emptyFn,trimByRange:function(context,out,trimMin,trimMax){var segmenter=context.segmenter,unit=out.unit,beginIdx=segmenter.diff(out.from,trimMin,unit),endIdx=segmenter.diff(out.from,trimMax,unit),begin=Math.max(0,Math.ceil(beginIdx/out.step)),end=Math.min(out.steps,Math.floor(endIdx/out.step));if(end<out.steps){out.to=segmenter.add(out.from,end*out.step,unit)}if(out.max>trimMax){out.max=out.to}if(out.from<trimMin){out.from=segmenter.add(out.from,begin*out.step,unit);while(out.from<trimMin){begin++;out.from=segmenter.add(out.from,out.step,unit)}}if(out.min<trimMin){out.min=out.from}out.steps=end-begin}});Ext.define("Ext.chart.axis.layout.Discrete",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.discrete",processData:function(){var me=this,axis=me.getAxis(),boundSeries=axis.boundSeries,direction=axis.getDirection(),i,ln,item;this.labels=[];this.labelMap={};for(i=0,ln=boundSeries.length;i<ln;i++){item=boundSeries[i];if(item["get"+direction+"Axis"]()===axis){item["coordinate"+direction]()}}},calculateLayout:function(context){context.data=this.labels;this.callSuper([context])},calculateMajorTicks:function(context){var me=this,attr=context.attr,data=context.data,range=attr.max-attr.min,zoom=range/Math.max(1,attr.length)*(attr.visibleMax-attr.visibleMin),viewMin=attr.min+range*attr.visibleMin,viewMax=attr.min+range*attr.visibleMax,estStepSize=attr.estStepSize*zoom;var out=me.snapEnds(context,Math.max(0,attr.min),Math.min(attr.max,data.length-1),estStepSize);if(out){me.trimByRange(context,out,viewMin-zoom*(1+attr.startGap),viewMax+zoom*(1+attr.endGap));context.majorTicks=out}},snapEnds:function(context,min,max,estStepSize){estStepSize=Math.ceil(estStepSize);var steps=Math.floor((max-min)/estStepSize),data=context.data;return{min:min,max:max,from:min,to:steps*estStepSize+min,step:estStepSize,steps:steps,unit:1,getLabel:function(current){return data[this.from+this.step*current]},get:function(current){return this.from+this.step*current}}},trimByRange:function(context,out,trimMin,trimMax){var unit=out.unit,beginIdx=Math.ceil((trimMin-out.from)/unit)*unit,endIdx=Math.floor((trimMax-out.from)/unit)*unit,begin=Math.max(0,Math.ceil(beginIdx/out.step)),end=Math.min(out.steps,Math.floor(endIdx/out.step));if(end<out.steps){out.to=end}if(out.max>trimMax){out.max=out.to}if(out.from<trimMin&&out.step>0){out.from=out.from+begin*out.step*unit;while(out.from<trimMin){begin++;out.from+=out.step*unit}}if(out.min<trimMin){out.min=out.from}out.steps=end-begin},getCoordFor:function(value,field,idx,items){this.labels.push(value);return this.labels.length-1}});Ext.define("Ext.chart.axis.layout.Continuous",{extend:"Ext.chart.axis.layout.Layout",alias:"axisLayout.continuous",config:{adjustMinimumByMajorUnit:false,adjustMaximumByMajorUnit:false},getCoordFor:function(value,field,idx,items){return +value},snapEnds:function(context,min,max,estStepSize){var segmenter=context.segmenter,out=context.segmenter.preferredStep(min,estStepSize),unit=out.unit,step=out.step,from=segmenter.align(min,step,unit),steps=segmenter.diff(min,max,unit)+1;return{min:segmenter.from(min),max:segmenter.from(max),from:from,to:segmenter.add(from,steps*step,unit),step:step,steps:steps,unit:unit,get:function(current){return segmenter.add(this.from,this.step*current,unit)}}}});Ext.define("Ext.chart.axis.layout.CombineDuplicate",{extend:"Ext.chart.axis.layout.Discrete",alias:"axisLayout.combineDuplicate",getCoordFor:function(value,field,idx,items){if(!(value in this.labelMap)){var result=this.labelMap[value]=this.labels.length;this.labels.push(value);return result}return this.labelMap[value]}});Ext.define("Ext.chart.axis.Axis",{xtype:"axis",mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.chart.axis.sprite.Axis","Ext.chart.axis.segmenter.*","Ext.chart.axis.layout.*"],config:{position:"bottom",fields:[],label:{x:0,y:0,textBaseline:"middle",textAlign:"center",fontSize:12,fontFamily:"Helvetica"},grid:false,renderer:null,chart:null,style:null,titleMargin:4,background:null,minimum:NaN,maximum:NaN,minZoom:1,maxZoom:10000,layout:"continuous",segmenter:"numeric",hidden:false,majorTickSteps:false,minorTickSteps:false,adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,title:{fontSize:18,fontFamily:"Helvetica"},increment:0.5,length:0,center:null,radius:null,rotation:null,labelInSpan:null,visibleRange:[0,1],needHighPrecision:false},observableType:"component",titleOffset:0,animating:0,prevMin:0,prevMax:1,boundSeries:[],sprites:null,range:null,xValues:[],yValues:[],applyRotation:function(rotation){var twoPie=Math.PI*2;return(rotation%twoPie+Math.PI)%twoPie-Math.PI},updateRotation:function(rotation){var sprites=this.getSprites(),position=this.getPosition();if(!this.getHidden()&&position==="angular"&&sprites[0]){sprites[0].setAttributes({baseRotation:rotation})}},applyTitle:function(title,oldTitle){var surface;if(Ext.isString(title)){title={text:title}}if(!oldTitle){oldTitle=Ext.create("sprite.text",title);if((surface=this.getSurface())){surface.add(oldTitle)}}else{oldTitle.setAttributes(title)}return oldTitle},constructor:function(config){var me=this;me.sprites=[];this.labels=[];this.initConfig(config);me.getId();me.mixins.observable.constructor.apply(me,arguments);Ext.ComponentManager.register(me)},getAlignment:function(){switch(this.getPosition()){case"left":case"right":return"vertical";case"top":case"bottom":return"horizontal";case"radial":return"radial";case"angular":return"angular"}},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal";case"top":case"bottom":return"vertical";case"radial":return"circular";case"angular":return"radial"}},getSurface:function(){if(!this.surface){var chart=this.getChart();if(!chart){return null}var surface=this.surface=chart.getSurface(this.getId(),"axis"),gridSurface=this.gridSurface=chart.getSurface("main"),sprites=this.getSprites(),sprite=sprites[0],grid=this.getGrid(),gridAlignment=this.getGridAlignment(),gridSprite;if(grid){gridSprite=this.gridSpriteEven=new Ext.chart.Markers();gridSprite.setTemplate({xclass:"grid."+gridAlignment});if(Ext.isObject(grid)){gridSprite.getTemplate().setAttributes(grid);if(Ext.isObject(grid.even)){gridSprite.getTemplate().setAttributes(grid.even)}}gridSurface.add(gridSprite);sprite.bindMarker(gridAlignment+"-even",gridSprite);gridSprite=this.gridSpriteOdd=new Ext.chart.Markers();gridSprite.setTemplate({xclass:"grid."+gridAlignment});if(Ext.isObject(grid)){gridSprite.getTemplate().setAttributes(grid);if(Ext.isObject(grid.odd)){gridSprite.getTemplate().setAttributes(grid.odd)}}gridSurface.add(gridSprite);sprite.bindMarker(gridAlignment+"-odd",gridSprite);gridSurface.waitFor(surface)}}return this.surface},getCoordFor:function(value,field,idx,items){return this.getLayout().getCoordFor(value,field,idx,items)},applyPosition:function(pos){return pos.toLowerCase()},applyLabel:function(newText,oldText){if(!oldText){oldText=new Ext.draw.sprite.Text({})}oldText.setAttributes(newText);return oldText},applyLayout:function(layout,oldLayout){layout=Ext.factory(layout,null,oldLayout,"axisLayout");layout.setAxis(this);return layout},applySegmenter:function(segmenter,oldSegmenter){segmenter=Ext.factory(segmenter,null,oldSegmenter,"segmenter");segmenter.setAxis(this);return segmenter},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(true);this.setLabel({hidden:true})},showLabels:function(){this.getSprites()[0].setDirty(true);this.setLabel({hidden:false})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(newChart,oldChart){var me=this,surface;if(oldChart){oldChart.un("serieschanged",me.onSeriesChanged,me)}if(newChart){newChart.on("serieschanged",me.onSeriesChanged,me);if(newChart.getSeries()){me.onSeriesChanged(newChart)}me.surface=null;surface=me.getSurface();surface.add(me.getSprites());surface.add(me.getTitle())}},applyBackground:function(background){var rect=Ext.ClassManager.getByAlias("sprite.rect");return rect.def.normalize(background)},processData:function(){this.getLayout().processData();this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var position=this.getPosition();return position==="left"||position==="right"},applyFields:function(fields){return[].concat(fields)},updateFields:function(fields){this.fieldsMap={};for(var i=0;i<fields.length;i++){this.fieldsMap[fields[i]]=true}},applyVisibleRange:function(visibleRange,oldVisibleRange){if(visibleRange[0]>visibleRange[1]){var temp=visibleRange[0];visibleRange[0]=visibleRange[1];visibleRange[0]=temp}if(visibleRange[1]===visibleRange[0]){visibleRange[1]+=1/this.getMaxZoom()}if(visibleRange[1]>visibleRange[0]+1){visibleRange[0]=0;visibleRange[1]=1}else{if(visibleRange[0]<0){visibleRange[1]-=visibleRange[0];visibleRange[0]=0}else{if(visibleRange[1]>1){visibleRange[0]-=visibleRange[1]-1;visibleRange[1]=1}}}if(oldVisibleRange&&visibleRange[0]===oldVisibleRange[0]&&visibleRange[1]===oldVisibleRange[1]){return undefined}return visibleRange},updateVisibleRange:function(visibleRange){this.fireEvent("transformed",this,visibleRange)},onSeriesChanged:function(chart){var me=this,series=chart.getSeries(),getAxisMethod="get"+me.getDirection()+"Axis",boundSeries=[],i,ln=series.length;for(i=0;i<ln;i++){if(this===series[i][getAxisMethod]()){boundSeries.push(series[i])}}me.boundSeries=boundSeries;me.getLayout().processData()},applyRange:function(newRange){if(!newRange){return this.dataRange.slice(0)}else{return[newRange[0]===null?this.dataRange[0]:newRange[0],newRange[1]===null?this.dataRange[1]:newRange[1]]}},getRange:function(){var me=this,getRangeMethod="get"+me.getDirection()+"Range";if(me.range){return me.range}if(!isNaN(me.getMinimum())&&!isNaN(me.getMaximum())){return this.range=[me.getMinimum(),me.getMaximum()]}var min=Infinity,max=-Infinity,boundSeries=me.boundSeries,series,i,ln;for(i=0,ln=boundSeries.length;i<ln;i++){series=boundSeries[i];var minMax=series[getRangeMethod]();if(minMax){if(minMax[0]<min){min=minMax[0]}if(minMax[1]>max){max=minMax[1]}}}if(!isFinite(max)){max=me.prevMax}if(!isFinite(min)){min=me.prevMin}if(this.getLabelInSpan()||min===max){max+=this.getIncrement();min-=this.getIncrement()}if(!isNaN(me.getMinimum())){min=me.getMinimum()}else{me.prevMin=min}if(!isNaN(me.getMaximum())){max=me.getMaximum()}else{me.prevMax=max}return this.range=[min,max]},applyStyle:function(style,oldStyle){var cls=Ext.ClassManager.getByAlias("sprite."+this.seriesType);if(cls&&cls.def){style=cls.def.normalize(style)}oldStyle=Ext.apply(oldStyle||{},style);return oldStyle},updateCenter:function(center){var sprites=this.getSprites(),axisSprite=sprites[0],centerX=center[0],centerY=center[1];if(axisSprite){axisSprite.setAttributes({centerX:centerX,centerY:centerY})}if(this.gridSpriteEven){this.gridSpriteEven.getTemplate().setAttributes({translationX:centerX,translationY:centerY,rotationCenterX:centerX,rotationCenterY:centerY})}if(this.gridSpriteOdd){this.gridSpriteOdd.getTemplate().setAttributes({translationX:centerX,translationY:centerY,rotationCenterX:centerX,rotationCenterY:centerY})}},getSprites:function(){if(!this.getChart()){return}var me=this,range=me.getRange(),position=me.getPosition(),chart=me.getChart(),animation=chart.getAnimate(),baseSprite,style,gridAlignment=me.getGridAlignment(),length=me.getLength();if(animation===false){animation={duration:0}}if(range){style=Ext.applyIf({position:position,axis:me,min:range[0],max:range[1],length:length,grid:me.getGrid(),hidden:me.getHidden(),titleOffset:me.titleOffset,layout:me.getLayout(),segmenter:me.getSegmenter(),label:me.getLabel()},me.getStyle());if(!me.sprites.length){baseSprite=new Ext.chart.axis.sprite.Axis(style);baseSprite.fx.setCustomDuration({baseRotation:0});baseSprite.fx.on("animationstart","onAnimationStart",me);baseSprite.fx.on("animationend","onAnimationEnd",me);me.sprites.push(baseSprite);me.updateTitleSprite()}else{baseSprite=me.sprites[0];baseSprite.fx.setConfig(animation);baseSprite.setAttributes(style);baseSprite.setLayout(me.getLayout());baseSprite.setSegmenter(me.getSegmenter());baseSprite.setLabel(me.getLabel())}if(me.getRenderer()){baseSprite.setRenderer(me.getRenderer())}}return me.sprites},updateTitleSprite:function(){if(!this.sprites[0]){return}var me=this,thickness=this.sprites[0].thickness,surface=me.getSurface(),title=this.getTitle(),position=me.getPosition(),titleMargin=me.getTitleMargin(),length=me.getLength(),anchor=surface.roundPixel(length/2);if(title){switch(position){case"top":title.setAttributes({x:anchor,y:titleMargin/2,textBaseline:"top",textAlign:"center"},true,true);title.applyTransformations();me.titleOffset=title.getBBox().height+titleMargin;break;case"bottom":title.setAttributes({x:anchor,y:thickness+titleMargin,textBaseline:"top",textAlign:"center"},true,true);title.applyTransformations();me.titleOffset=title.getBBox().height+titleMargin;break;case"left":title.setAttributes({x:titleMargin/2,y:anchor,textBaseline:"top",textAlign:"center",rotationCenterX:titleMargin/2,rotationCenterY:anchor,rotationRads:-Math.PI/2},true,true);title.applyTransformations();me.titleOffset=title.getBBox().width+titleMargin;break;case"right":title.setAttributes({x:thickness-titleMargin/2,y:anchor,textBaseline:"bottom",textAlign:"center",rotationCenterX:thickness,rotationCenterY:anchor,rotationRads:Math.PI/2},true,true);title.applyTransformations();me.titleOffset=title.getBBox().width+titleMargin;break}}},onThicknessChanged:function(){var me=this;me.getChart().onThicknessChanged()},getThickness:function(){if(this.getHidden()){return 0}return(this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset},onAnimationStart:function(){this.animating++;if(this.animating===1){this.fireEvent("animationstart")}},onAnimationEnd:function(){this.animating--;if(this.animating===0){this.fireEvent("animationend")}},getItemId:function(){return this.getId()},getAncestorIds:function(){return[this.getChart().getId()]},isXType:function(xtype){return xtype==="axis"},destroy:function(){Ext.ComponentManager.unregister(this);this.callSuper()}});Ext.define("Ext.mixin.Sortable",{extend:"Ext.mixin.Mixin",requires:["Ext.util.Sorter"],mixinConfig:{id:"sortable"},config:{sorters:null,defaultSortDirection:"ASC",sortRoot:null},dirtySortFn:false,sortFn:null,sorted:false,applySorters:function(sorters,collection){if(!collection){collection=this.createSortersCollection()}collection.clear();this.sorted=false;if(sorters){this.addSorters(sorters)}return collection},createSortersCollection:function(){this._sorters=Ext.create("Ext.util.Collection",function(sorter){return sorter.getId()});return this._sorters},addSorter:function(sorter,defaultDirection){this.addSorters([sorter],defaultDirection)},addSorters:function(sorters,defaultDirection){var currentSorters=this.getSorters();return this.insertSorters(currentSorters?currentSorters.length:0,sorters,defaultDirection)},insertSorter:function(index,sorter,defaultDirection){return this.insertSorters(index,[sorter],defaultDirection)},insertSorters:function(index,sorters,defaultDirection){if(!Ext.isArray(sorters)){sorters=[sorters]}var ln=sorters.length,direction=defaultDirection||this.getDefaultSortDirection(),sortRoot=this.getSortRoot(),currentSorters=this.getSorters(),newSorters=[],sorterConfig,i,sorter,currentSorter;if(!currentSorters){currentSorters=this.createSortersCollection()}for(i=0;i<ln;i++){sorter=sorters[i];sorterConfig={direction:direction,root:sortRoot};if(typeof sorter==="string"){currentSorter=currentSorters.get(sorter);if(!currentSorter){sorterConfig.property=sorter}else{if(defaultDirection){currentSorter.setDirection(defaultDirection)}else{currentSorter.toggle()}continue}}else{if(Ext.isFunction(sorter)){sorterConfig.sorterFn=sorter}else{if(Ext.isObject(sorter)){if(!sorter.isSorter){if(sorter.fn){sorter.sorterFn=sorter.fn;delete sorter.fn}sorterConfig=Ext.apply(sorterConfig,sorter)}else{newSorters.push(sorter);if(!sorter.getRoot()){sorter.setRoot(sortRoot)}continue}}else{Ext.Logger.warn("Invalid sorter specified:",sorter)}}}sorter=Ext.create("Ext.util.Sorter",sorterConfig);newSorters.push(sorter)}for(i=0,ln=newSorters.length;i<ln;i++){currentSorters.insert(index+i,newSorters[i])}this.dirtySortFn=true;if(currentSorters.length){this.sorted=true}return currentSorters},removeSorter:function(sorter){return this.removeSorters([sorter])},removeSorters:function(sorters){if(!Ext.isArray(sorters)){sorters=[sorters]}var ln=sorters.length,currentSorters=this.getSorters(),i,sorter;for(i=0;i<ln;i++){sorter=sorters[i];if(typeof sorter==="string"){currentSorters.removeAtKey(sorter)}else{if(typeof sorter==="function"){currentSorters.each(function(item){if(item.getSorterFn()===sorter){currentSorters.remove(item)}})}else{if(sorter.isSorter){currentSorters.remove(sorter)}}}}if(!currentSorters.length){this.sorted=false}},updateSortFn:function(){var sorters=this.getSorters().items;this.sortFn=function(r1,r2){var ln=sorters.length,result,i;for(i=0;i<ln;i++){result=sorters[i].sort.call(this,r1,r2);if(result!==0){break}}return result};this.dirtySortFn=false;return this.sortFn},getSortFn:function(){if(this.dirtySortFn){return this.updateSortFn()}return this.sortFn},sort:function(data){Ext.Array.sort(data,this.getSortFn());return data},findInsertionIndex:function(items,item,sortFn){var start=0,end=items.length-1,sorterFn=sortFn||this.getSortFn(),middle,comparison;while(start<=end){middle=(start+end)>>1;comparison=sorterFn(item,items[middle]);if(comparison>=0){start=middle+1}else{if(comparison<0){end=middle-1}}}return start}});Ext.define("Ext.mixin.Filterable",{extend:"Ext.mixin.Mixin",requires:["Ext.util.Filter"],mixinConfig:{id:"filterable"},config:{filters:null,filterRoot:null},dirtyFilterFn:false,filterFn:null,filtered:false,applyFilters:function(filters,collection){if(!collection){collection=this.createFiltersCollection()}collection.clear();this.filtered=false;this.dirtyFilterFn=true;if(filters){this.addFilters(filters)}return collection},createFiltersCollection:function(){this._filters=Ext.create("Ext.util.Collection",function(filter){return filter.getId()});return this._filters},addFilter:function(filter){this.addFilters([filter])},addFilters:function(filters){var currentFilters=this.getFilters();return this.insertFilters(currentFilters?currentFilters.length:0,filters)},insertFilter:function(index,filter){return this.insertFilters(index,[filter])},insertFilters:function(index,filters){if(!Ext.isArray(filters)){filters=[filters]}var ln=filters.length,filterRoot=this.getFilterRoot(),currentFilters=this.getFilters(),newFilters=[],filterConfig,i,filter;if(!currentFilters){currentFilters=this.createFiltersCollection()}for(i=0;i<ln;i++){filter=filters[i];filterConfig={root:filterRoot};if(Ext.isFunction(filter)){filterConfig.filterFn=filter}else{if(Ext.isObject(filter)){if(!filter.isFilter){if(filter.fn){filter.filterFn=filter.fn;delete filter.fn}filterConfig=Ext.apply(filterConfig,filter)}else{newFilters.push(filter);if(!filter.getRoot()){filter.setRoot(filterRoot)}continue}}else{Ext.Logger.warn("Invalid filter specified:",filter)}}filter=Ext.create("Ext.util.Filter",filterConfig);newFilters.push(filter)}for(i=0,ln=newFilters.length;i<ln;i++){currentFilters.insert(index+i,newFilters[i])}this.dirtyFilterFn=true;if(currentFilters.length){this.filtered=true}return currentFilters},removeFilters:function(filters){if(!Ext.isArray(filters)){filters=[filters]}var ln=filters.length,currentFilters=this.getFilters(),i,filter;for(i=0;i<ln;i++){filter=filters[i];if(typeof filter==="string"){currentFilters.each(function(item){if(item.getProperty()===filter){currentFilters.remove(item)}})}else{if(typeof filter==="function"){currentFilters.each(function(item){if(item.getFilterFn()===filter){currentFilters.remove(item)}})}else{if(filter.isFilter){currentFilters.remove(filter)}else{if(filter.property!==undefined&&filter.value!==undefined){currentFilters.each(function(item){if(item.getProperty()===filter.property&&item.getValue()===filter.value){currentFilters.remove(item)}})}}}}}if(!currentFilters.length){this.filtered=false}},updateFilterFn:function(){var filters=this.getFilters().items;this.filterFn=function(item){var isMatch=true,length=filters.length,i;for(i=0;i<length;i++){var filter=filters[i],fn=filter.getFilterFn(),scope=filter.getScope()||this;isMatch=isMatch&&fn.call(scope,item)}return isMatch};this.dirtyFilterFn=false;return this.filterFn},filter:function(data){return this.getFilters().length?Ext.Array.filter(data,this.getFilterFn()):data},isFiltered:function(item){return this.getFilters().length?!this.getFilterFn()(item):false},getFilterFn:function(){if(this.dirtyFilterFn){return this.updateFilterFn()}return this.filterFn}});Ext.define("Ext.util.Collection",{config:{autoFilter:true,autoSort:true},mixins:{sortable:"Ext.mixin.Sortable",filterable:"Ext.mixin.Filterable"},constructor:function(keyFn,config){var me=this;me.all=[];me.items=[];me.keys=[];me.indices={};me.map={};me.length=0;if(keyFn){me.getKey=keyFn}this.initConfig(config)},updateAutoSort:function(autoSort,oldAutoSort){if(oldAutoSort===false&&autoSort&&this.items.length){this.sort()}},updateAutoFilter:function(autoFilter,oldAutoFilter){if(oldAutoFilter===false&&autoFilter&&this.all.length){this.filter()}},insertSorters:function(){this.mixins.sortable.insertSorters.apply(this,arguments);if(this.getAutoSort()&&this.items.length){this.sort()}return this},removeSorters:function(sorters){this.mixins.sortable.removeSorters.call(this,sorters);if(this.sorted&&this.getAutoSort()&&this.items.length){this.sort()}return this},applyFilters:function(filters){var collection=this.mixins.filterable.applyFilters.call(this,filters);if(!filters&&this.all.length&&this.getAutoFilter()){this.filter()}return collection},addFilters:function(filters){this.mixins.filterable.addFilters.call(this,filters);if(this.items.length&&this.getAutoFilter()){this.filter()}return this},removeFilters:function(filters){this.mixins.filterable.removeFilters.call(this,filters);if(this.filtered&&this.all.length&&this.getAutoFilter()){this.filter()}return this},filter:function(property,value,anyMatch,caseSensitive){if(property){if(Ext.isString(property)){this.addFilters({property:property,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive});return this.items}else{this.addFilters(property);return this.items}}this.items=this.mixins.filterable.filter.call(this,this.all.slice());this.updateAfterFilter();if(this.sorted&&this.getAutoSort()){this.sort()}},updateAfterFilter:function(){var items=this.items,keys=this.keys,indices=this.indices={},ln=items.length,i,item,key;keys.length=0;for(i=0;i<ln;i++){item=items[i];key=this.getKey(item);indices[key]=i;keys[i]=key}this.length=items.length;this.dirtyIndices=false},sort:function(sorters,defaultDirection){var items=this.items,keys=this.keys,indices=this.indices,ln=items.length,i,item,key;if(sorters){this.addSorters(sorters,defaultDirection);return this.items}for(i=0;i<ln;i++){items[i]._current_key=keys[i]}this.handleSort(items);for(i=0;i<ln;i++){item=items[i];key=item._current_key;keys[i]=key;indices[key]=i;delete item._current_key}this.dirtyIndices=true},handleSort:function(items){this.mixins.sortable.sort.call(this,items)},add:function(key,item){var me=this,filtered=this.filtered,sorted=this.sorted,all=this.all,items=this.items,keys=this.keys,indices=this.indices,filterable=this.mixins.filterable,currentLength=items.length,index=currentLength;if(arguments.length==1){item=key;key=me.getKey(item)}if(typeof key!="undefined"&&key!==null){if(typeof me.map[key]!="undefined"){return me.replace(key,item)}me.map[key]=item}all.push(item);if(filtered&&this.getAutoFilter()&&filterable.isFiltered.call(me,item)){return null}me.length++;if(sorted&&this.getAutoSort()){index=this.findInsertionIndex(items,item)}if(index!==currentLength){this.dirtyIndices=true;Ext.Array.splice(keys,index,0,key);Ext.Array.splice(items,index,0,item)}else{indices[key]=currentLength;keys.push(key);items.push(item)}return item},getKey:function(item){return item.id},replace:function(oldKey,item){var me=this,sorted=me.sorted,filtered=me.filtered,filterable=me.mixins.filterable,items=me.items,keys=me.keys,all=me.all,map=me.map,returnItem=null,oldItemsLn=items.length,oldItem,index,newKey;if(arguments.length==1){item=oldKey;oldKey=newKey=me.getKey(item)}else{newKey=me.getKey(item)}oldItem=map[oldKey];if(typeof oldKey=="undefined"||oldKey===null||typeof oldItem=="undefined"){return me.add(newKey,item)}me.map[newKey]=item;if(newKey!==oldKey){delete me.map[oldKey]}if(sorted&&me.getAutoSort()){Ext.Array.remove(items,oldItem);Ext.Array.remove(keys,oldKey);Ext.Array.remove(all,oldItem);all.push(item);me.dirtyIndices=true;if(filtered&&me.getAutoFilter()){if(filterable.isFiltered.call(me,item)){if(oldItemsLn!==items.length){me.length--}return null}else{if(oldItemsLn===items.length){me.length++;returnItem=item}}}index=this.findInsertionIndex(items,item);Ext.Array.splice(keys,index,0,newKey);Ext.Array.splice(items,index,0,item)}else{if(filtered){if(me.getAutoFilter()&&filterable.isFiltered.call(me,item)){if(items.indexOf(oldItem)!==-1){Ext.Array.remove(items,oldItem);Ext.Array.remove(keys,oldKey);me.length--;me.dirtyIndices=true}return null}else{if(items.indexOf(oldItem)===-1){items.push(item);keys.push(newKey);me.indices[newKey]=me.length;me.length++;return item}}}index=me.items.indexOf(oldItem);keys[index]=newKey;items[index]=item;this.dirtyIndices=true}return returnItem},addAll:function(addItems){var me=this,filtered=me.filtered,sorted=me.sorted,all=me.all,items=me.items,keys=me.keys,map=me.map,autoFilter=me.getAutoFilter(),autoSort=me.getAutoSort(),newKeys=[],newItems=[],filterable=me.mixins.filterable,addedItems=[],ln,key,i,item;if(Ext.isObject(addItems)){for(key in addItems){if(addItems.hasOwnProperty(key)){newItems.push(items[key]);newKeys.push(key)}}}else{newItems=addItems;ln=addItems.length;for(i=0;i<ln;i++){newKeys.push(me.getKey(addItems[i]))}}for(i=0;i<ln;i++){key=newKeys[i];item=newItems[i];if(typeof key!="undefined"&&key!==null){if(typeof map[key]!="undefined"){me.replace(key,item);continue}map[key]=item}all.push(item);if(filtered&&autoFilter&&filterable.isFiltered.call(me,item)){continue}me.length++;keys.push(key);items.push(item);addedItems.push(item)}if(addedItems.length){me.dirtyIndices=true;if(sorted&&autoSort){me.sort()}return addedItems}return null},each:function(fn,scope){var items=this.items.slice(),i=0,len=items.length,item;for(;i<len;i++){item=items[i];if(fn.call(scope||item,item,i,len)===false){break}}},eachKey:function(fn,scope){var keys=this.keys,items=this.items,ln=keys.length,i;for(i=0;i<ln;i++){fn.call(scope||window,keys[i],items[i],i,ln)}},findBy:function(fn,scope){var keys=this.keys,items=this.items,i=0,len=items.length;for(;i<len;i++){if(fn.call(scope||window,items[i],keys[i])){return items[i]}}return null},filterBy:function(fn,scope){var me=this,newCollection=new this.self(),keys=me.keys,items=me.all,length=items.length,i;newCollection.getKey=me.getKey;for(i=0;i<length;i++){if(fn.call(scope||me,items[i],me.getKey(items[i]))){newCollection.add(keys[i],items[i])}}return newCollection},insert:function(index,key,item){var me=this,sorted=this.sorted,map=this.map,filtered=this.filtered;if(arguments.length==2){item=key;key=me.getKey(item)}if(index>=me.length||(sorted&&me.getAutoSort())){return me.add(key,item)}if(typeof key!="undefined"&&key!==null){if(typeof map[key]!="undefined"){me.replace(key,item);return false}map[key]=item}this.all.push(item);if(filtered&&this.getAutoFilter()&&this.mixins.filterable.isFiltered.call(me,item)){return null}me.length++;Ext.Array.splice(me.items,index,0,item);Ext.Array.splice(me.keys,index,0,key);me.dirtyIndices=true;return item},insertAll:function(index,insertItems){if(index>=this.items.length||(this.sorted&&this.getAutoSort())){return this.addAll(insertItems)}var me=this,filtered=this.filtered,sorted=this.sorted,all=this.all,items=this.items,keys=this.keys,map=this.map,autoFilter=this.getAutoFilter(),autoSort=this.getAutoSort(),newKeys=[],newItems=[],addedItems=[],filterable=this.mixins.filterable,insertedUnfilteredItem=false,ln,key,i,item;if(sorted&&this.getAutoSort()){Ext.Logger.error("Inserting a collection of items into a sorted Collection is invalid. Please just add these items or remove the sorters.")}if(Ext.isObject(insertItems)){for(key in insertItems){if(insertItems.hasOwnProperty(key)){newItems.push(items[key]);newKeys.push(key)}}}else{newItems=insertItems;ln=insertItems.length;for(i=0;i<ln;i++){newKeys.push(me.getKey(insertItems[i]))}}for(i=0;i<ln;i++){key=newKeys[i];item=newItems[i];if(typeof key!="undefined"&&key!==null){if(typeof map[key]!="undefined"){me.replace(key,item);continue}map[key]=item}all.push(item);if(filtered&&autoFilter&&filterable.isFiltered.call(me,item)){continue}me.length++;Ext.Array.splice(items,index+i,0,item);Ext.Array.splice(keys,index+i,0,key);insertedUnfilteredItem=true;addedItems.push(item)}if(insertedUnfilteredItem){this.dirtyIndices=true;if(sorted&&autoSort){this.sort()}return addedItems}return null},remove:function(item){var index=this.items.indexOf(item);if(index===-1){Ext.Array.remove(this.all,item);if(typeof this.getKey=="function"){var key=this.getKey(item);if(key!==undefined){delete this.map[key]}}return item}return this.removeAt(this.items.indexOf(item))},removeAll:function(items){if(items){var ln=items.length,i;for(i=0;i<ln;i++){this.remove(items[i])}}return this},removeAt:function(index){var me=this,items=me.items,keys=me.keys,all=me.all,item,key;if(index<me.length&&index>=0){item=items[index];key=keys[index];if(typeof key!="undefined"){delete me.map[key]}Ext.Array.erase(items,index,1);Ext.Array.erase(keys,index,1);Ext.Array.remove(all,item);delete me.indices[key];me.length--;this.dirtyIndices=true;return item}return false},removeAtKey:function(key){return this.removeAt(this.indexOfKey(key))},getCount:function(){return this.length},indexOf:function(item){if(this.dirtyIndices){this.updateIndices()}var index=this.indices[this.getKey(item)];return(index===undefined)?-1:index},indexOfKey:function(key){if(this.dirtyIndices){this.updateIndices()}var index=this.indices[key];return(index===undefined)?-1:index},updateIndices:function(){var items=this.items,ln=items.length,indices=this.indices={},i,item,key;for(i=0;i<ln;i++){item=items[i];key=this.getKey(item);indices[key]=i}this.dirtyIndices=false},get:function(key){var me=this,fromMap=me.map[key],item;if(fromMap!==undefined){item=fromMap}else{if(typeof key=="number"){item=me.items[key]}}return typeof item!="function"||me.getAllowFunctions()?item:null},getAt:function(index){return this.items[index]},getByKey:function(key){return this.map[key]},contains:function(item){var key=this.getKey(item);if(key){return this.containsKey(key)}else{return Ext.Array.contains(this.items,item)}},containsKey:function(key){return typeof this.map[key]!="undefined"},clear:function(){var me=this;me.length=0;me.items.length=0;me.keys.length=0;me.all.length=0;me.dirtyIndices=true;me.indices={};me.map={}},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},getRange:function(start,end){var me=this,items=me.items,range=[],i;if(items.length<1){return range}start=start||0;end=Math.min(typeof end=="undefined"?me.length-1:end,me.length-1);if(start<=end){for(i=start;i<=end;i++){range[range.length]=items[i]}}else{for(i=start;i>=end;i--){range[range.length]=items[i]}}return range},findIndexBy:function(fn,scope,start){var me=this,keys=me.keys,items=me.items,i=start||0,ln=items.length;for(;i<ln;i++){if(fn.call(scope||me,items[i],keys[i])){return i}}return -1},clone:function(){var me=this,copy=new this.self(),keys=me.keys,items=me.items,i=0,ln=items.length;for(;i<ln;i++){copy.add(keys[i],items[i])}copy.getKey=me.getKey;return copy},destroy:function(){this.callSuper();this.clear()}});Ext.define("Ext.data.StoreManager",{extend:"Ext.util.Collection",alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:true,uses:["Ext.data.ArrayStore","Ext.data.Store"],register:function(){for(var i=0,s;(s=arguments[i]);i++){this.add(s)}},unregister:function(){for(var i=0,s;(s=arguments[i]);i++){this.remove(this.lookup(s))}},lookup:function(store){if(Ext.isArray(store)){var fields=["field1"],expand=!Ext.isArray(store[0]),data=store,i,len;if(expand){data=[];for(i=0,len=store.length;i<len;++i){data.push([store[i]])}}else{for(i=2,len=store[0].length;i<=len;++i){fields.push("field"+i)}}return Ext.create("Ext.data.ArrayStore",{data:data,fields:fields,autoDestroy:true,autoCreated:true,expanded:expand})}if(Ext.isString(store)){return this.get(store)}else{if(store instanceof Ext.data.Store){return store}else{return Ext.factory(store,Ext.data.Store,null,"store")}}},getKey:function(o){return o.getStoreId()}},function(){Ext.regStore=function(name,config){var store;if(Ext.isObject(name)){config=name}else{if(config instanceof Ext.data.Store){config.setStoreId(name)}else{config.storeId=name}}if(config instanceof Ext.data.Store){store=config}else{store=Ext.create("Ext.data.Store",config)}return Ext.data.StoreManager.register(store)};Ext.getStore=function(name){return Ext.data.StoreManager.lookup(name)}});Ext.define("Ext.dataview.component.DataItem",{extend:"Ext.Container",xtype:"dataitem",config:{baseCls:Ext.baseCSSPrefix+"data-item",defaultType:"component",record:null,itemCls:null,dataMap:{},dataview:null,items:[{xtype:"component"}]},updateBaseCls:function(newBaseCls,oldBaseCls){var me=this;me.callParent(arguments)},updateItemCls:function(newCls,oldCls){if(oldCls){this.removeCls(oldCls)}if(newCls){this.addCls(newCls)}},doMapData:function(dataMap,data,item){var componentName,component,setterMap,setterName;for(componentName in dataMap){setterMap=dataMap[componentName];component=this[componentName]();if(component){for(setterName in setterMap){if(data&&component[setterName]&&data[setterMap[setterName]]!==undefined&&data[setterMap[setterName]]!==null){component[setterName](data[setterMap[setterName]])}}}}if(item){item.updateData(data)}},updateRecord:function(newRecord){if(!newRecord){return}this._record=newRecord;var me=this,dataview=me.dataview||this.getDataview(),data=dataview.prepareData(newRecord.getData(true),dataview.getStore().indexOf(newRecord),newRecord),items=me.getItems(),item=items.first(),dataMap=me.getDataMap();if(!item){return}if(dataMap){this.doMapData(dataMap,data,item)}me.fireEvent("updatedata",me,data)}});Ext.define("Ext.dataview.component.Container",{extend:"Ext.Container",requires:["Ext.dataview.component.DataItem"],constructor:function(){this.itemCache=[];this.callParent(arguments)},doInitialize:function(){this.innerElement.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",touchmove:"onItemTouchMove",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"> ."+Ext.baseCSSPrefix+"data-item",scope:this})},initialize:function(){this.callParent();this.doInitialize()},onItemTouchStart:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);item.on({touchmove:"onItemTouchMove",scope:me,single:true});me.fireEvent("itemtouchstart",me,item,me.indexOf(item),e)},onItemTouchMove:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemtouchmove",me,item,me.indexOf(item),e)},onItemTouchEnd:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);item.un({touchmove:"onItemTouchMove",scope:me});me.fireEvent("itemtouchend",me,item,me.indexOf(item),e)},onItemTap:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemtap",me,item,me.indexOf(item),e)},onItemTapHold:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemtaphold",me,item,me.indexOf(item),e)},onItemSingleTap:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemsingletap",me,item,me.indexOf(item),e)},onItemDoubleTap:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemdoubletap",me,item,me.indexOf(item),e)},onItemSwipe:function(e){var me=this,target=e.getTarget(),item=Ext.getCmp(target.id);me.fireEvent("itemswipe",me,item,me.indexOf(item),e)},moveItemsToCache:function(from,to){var me=this,dataview=me.dataview,maxItemCache=dataview.getMaxItemCache(),items=me.getViewItems(),itemCache=me.itemCache,cacheLn=itemCache.length,pressedCls=dataview.getPressedCls(),selectedCls=dataview.getSelectedCls(),i=to-from,item;for(;i>=0;i--){item=items[from+i];if(cacheLn!==maxItemCache){me.remove(item,false);item.removeCls([pressedCls,selectedCls]);itemCache.push(item);cacheLn++}else{item.destroy()}}if(me.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(records){var me=this,dataview=me.dataview,store=dataview.getStore(),ln=records.length,xtype=dataview.getDefaultType(),itemConfig=dataview.getItemConfig(),itemCache=me.itemCache,cacheLn=itemCache.length,items=[],i,item,record;if(ln){dataview.hideEmptyText()}for(i=0;i<ln;i++){records[i]._tmpIndex=store.indexOf(records[i])}Ext.Array.sort(records,function(record1,record2){return record1._tmpIndex>record2._tmpIndex?1:-1});for(i=0;i<ln;i++){record=records[i];if(cacheLn){cacheLn--;item=itemCache.pop();this.updateListItem(record,item)}else{item=me.getDataItemConfig(xtype,record,itemConfig)}item=this.insert(record._tmpIndex,item);delete record._tmpIndex}return items},getViewItems:function(){return this.getInnerItems()},updateListItem:function(record,item){if(item.updateRecord){if(item.getRecord()===record){item.updateRecord(record)}else{item.setRecord(record)}}},getDataItemConfig:function(xtype,record,itemConfig){var dataview=this.dataview,dataItemConfig={xtype:xtype,record:record,itemCls:dataview.getItemCls(),defaults:itemConfig,dataview:dataview};return Ext.merge(dataItemConfig,itemConfig)},doRemoveItemCls:function(cls){var items=this.getViewItems(),ln=items.length,i=0;for(;i<ln;i++){items[i].removeCls(cls)}},doAddItemCls:function(cls){var items=this.getViewItems(),ln=items.length,i=0;for(;i<ln;i++){items[i].addCls(cls)}},updateAtNewIndex:function(oldIndex,newIndex,record){this.moveItemsToCache(oldIndex,oldIndex);this.moveItemsFromCache([record])},destroy:function(){var me=this,itemCache=me.itemCache,ln=itemCache.length,i=0;for(;i<ln;i++){itemCache[i].destroy()}this.callParent()}});Ext.define("Ext.dataview.element.Container",{extend:"Ext.Component",doInitialize:function(){this.element.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",touchmove:"onItemTouchMove",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"> div",scope:this})},initialize:function(){this.callParent();this.doInitialize()},updateBaseCls:function(newBaseCls,oldBaseCls){var me=this;me.callParent([newBaseCls+"-container",oldBaseCls])},onItemTouchStart:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);Ext.get(target).on({touchmove:"onItemTouchMove",scope:me,single:true});me.fireEvent("itemtouchstart",me,Ext.get(target),index,e)},onItemTouchEnd:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);Ext.get(target).un({touchmove:"onItemTouchMove",scope:me});me.fireEvent("itemtouchend",me,Ext.get(target),index,e)},onItemTouchMove:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemtouchmove",me,Ext.get(target),index,e)},onItemTap:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemtap",me,Ext.get(target),index,e)},onItemTapHold:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemtaphold",me,Ext.get(target),index,e)},onItemDoubleTap:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemdoubletap",me,Ext.get(target),index,e)},onItemSingleTap:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemsingletap",me,Ext.get(target),index,e)},onItemSwipe:function(e){var me=this,target=e.getTarget(),index=me.getViewItems().indexOf(target);me.fireEvent("itemswipe",me,Ext.get(target),index,e)},updateListItem:function(record,item){var me=this,dataview=me.dataview,store=dataview.getStore(),index=store.indexOf(record),data=dataview.prepareData(record.getData(true),index,record);data.xcount=store.getCount();data.xindex=typeof data.xindex==="number"?data.xindex:index;item.innerHTML=dataview.getItemTpl().apply(data)},addListItem:function(index,record){var me=this,dataview=me.dataview,store=dataview.getStore(),data=dataview.prepareData(record.getData(true),index,record),element=me.element,childNodes=element.dom.childNodes,ln=childNodes.length,wrapElement;data.xcount=typeof data.xcount==="number"?data.xcount:store.getCount();data.xindex=typeof data.xindex==="number"?data.xindex:index;wrapElement=Ext.Element.create(this.getItemElementConfig(index,data));if(!ln||index==ln){wrapElement.appendTo(element)}else{wrapElement.insertBefore(childNodes[index])}},getItemElementConfig:function(index,data){var dataview=this.dataview,itemCls=dataview.getItemCls(),cls=dataview.getBaseCls()+"-item";if(itemCls){cls+=" "+itemCls}return{cls:cls,html:dataview.getItemTpl().apply(data)}},doRemoveItemCls:function(cls){var elements=this.getViewItems(),ln=elements.length,i=0;for(;i<ln;i++){Ext.fly(elements[i]).removeCls(cls)}},doAddItemCls:function(cls){var elements=this.getViewItems(),ln=elements.length,i=0;for(;i<ln;i++){Ext.fly(elements[i]).addCls(cls)}},moveItemsToCache:function(from,to){var me=this,items=me.getViewItems(),i=to-from,item;for(;i>=0;i--){item=items[from+i];Ext.get(item).destroy()}if(me.getViewItems().length==0){this.dataview.showEmptyText()}},moveItemsFromCache:function(records){var me=this,dataview=me.dataview,store=dataview.getStore(),ln=records.length,i,record;if(ln){dataview.hideEmptyText()}for(i=0;i<ln;i++){records[i]._tmpIndex=store.indexOf(records[i])}Ext.Array.sort(records,function(record1,record2){return record1._tmpIndex>record2._tmpIndex?1:-1});for(i=0;i<ln;i++){record=records[i];me.addListItem(record._tmpIndex,record);delete record._tmpIndex}},getViewItems:function(){return Array.prototype.slice.call(this.element.dom.childNodes)},updateAtNewIndex:function(oldIndex,newIndex,record){this.moveItemsToCache(oldIndex,oldIndex);this.moveItemsFromCache([record])},destroy:function(){var elements=this.getViewItems(),ln=elements.length,i=0;for(;i<ln;i++){Ext.get(elements[i]).destroy()}this.callParent()}});Ext.define("Ext.mixin.Selectable",{extend:"Ext.mixin.Mixin",mixinConfig:{id:"selectable",hooks:{updateStore:"updateStore"}},config:{disableSelection:null,mode:"SINGLE",allowDeselect:false,lastSelected:null,lastFocused:null,deselectOnContainerClick:true},modes:{SINGLE:true,SIMPLE:true,MULTI:true},selectableEventHooks:{addrecords:"onSelectionStoreAdd",removerecords:"onSelectionStoreRemove",updaterecord:"onSelectionStoreUpdate",load:"refreshSelection",refresh:"refreshSelection"},constructor:function(){this.selected=new Ext.util.MixedCollection();this.callParent(arguments)},applyMode:function(mode){mode=mode?mode.toUpperCase():"SINGLE";return this.modes[mode]?mode:"SINGLE"},updateStore:function(newStore,oldStore){var me=this,bindEvents=Ext.apply({},me.selectableEventHooks,{scope:me});if(oldStore&&Ext.isObject(oldStore)&&oldStore.isStore){if(oldStore.autoDestroy){oldStore.destroy()}else{oldStore.un(bindEvents);if(newStore){newStore.un("clear","onSelectionStoreClear",this)}}}if(newStore){newStore.on(bindEvents);newStore.onBefore("clear","onSelectionStoreClear",this);me.refreshSelection()}},selectAll:function(silent){var me=this,selections=me.getStore().getRange(),ln=selections.length,i=0;for(;i<ln;i++){me.select(selections[i],true,silent)}},deselectAll:function(supress){var me=this,selections=me.getStore().getRange();me.deselect(selections,supress);me.selected.clear();me.setLastSelected(null);me.setLastFocused(null)},selectWithEvent:function(record){var me=this,isSelected=me.isSelected(record);switch(me.getMode()){case"MULTI":case"SIMPLE":if(isSelected){me.deselect(record)}else{me.select(record,true)}break;case"SINGLE":if(me.getAllowDeselect()&&isSelected){me.deselect(record)}else{me.select(record,false)}break}},selectRange:function(startRecord,endRecord,keepExisting){var me=this,store=me.getStore(),records=[],tmp,i;if(me.getDisableSelection()){return}if(startRecord>endRecord){tmp=endRecord;endRecord=startRecord;startRecord=tmp}for(i=startRecord;i<=endRecord;i++){records.push(store.getAt(i))}this.doMultiSelect(records,keepExisting)},select:function(records,keepExisting,suppressEvent){var me=this,record;if(me.getDisableSelection()){return}if(typeof records==="number"){records=[me.getStore().getAt(records)]}if(!records){return}if(me.getMode()=="SINGLE"&&records){record=records.length?records[0]:records;me.doSingleSelect(record,suppressEvent)}else{me.doMultiSelect(records,keepExisting,suppressEvent)}},doSingleSelect:function(record,suppressEvent){var me=this,selected=me.selected;if(me.getDisableSelection()){return}if(me.isSelected(record)){return}if(selected.getCount()>0){me.deselect(me.getLastSelected(),suppressEvent)}selected.add(record);me.setLastSelected(record);me.onItemSelect(record,suppressEvent);me.setLastFocused(record);if(!suppressEvent){me.fireSelectionChange([record])}},doMultiSelect:function(records,keepExisting,suppressEvent){if(records===null||this.getDisableSelection()){return}records=!Ext.isArray(records)?[records]:records;var me=this,selected=me.selected,ln=records.length,change=false,i=0,record;if(!keepExisting&&selected.getCount()>0){change=true;me.deselect(me.getSelection(),true)}for(;i<ln;i++){record=records[i];if(keepExisting&&me.isSelected(record)){continue}change=true;me.setLastSelected(record);selected.add(record);if(!suppressEvent){me.setLastFocused(record)}me.onItemSelect(record,suppressEvent)}if(change&&!suppressEvent){this.fireSelectionChange(records)}},deselect:function(records,suppressEvent){var me=this;if(me.getDisableSelection()){return}records=Ext.isArray(records)?records:[records];var selected=me.selected,change=false,i=0,store=me.getStore(),ln=records.length,record;for(;i<ln;i++){record=records[i];if(typeof record==="number"){record=store.getAt(record)}if(selected.remove(record)){if(me.getLastSelected()==record){me.setLastSelected(selected.last())}change=true}if(record){me.onItemDeselect(record,suppressEvent)}}if(change&&!suppressEvent){me.fireSelectionChange(records)}},updateLastFocused:function(newRecord,oldRecord){this.onLastFocusChanged(oldRecord,newRecord)},fireSelectionChange:function(records){var me=this;me.fireAction("selectionchange",[me,records],"getSelection")},getSelection:function(){return this.selected.getRange()},isSelected:function(record){record=Ext.isNumber(record)?this.getStore().getAt(record):record;return this.selected.indexOf(record)!==-1},hasSelection:function(){return this.selected.getCount()>0},refreshSelection:function(){var me=this,selections=me.getSelection();me.deselectAll(true);if(selections.length){me.select(selections,false,true)}},onSelectionStoreRemove:function(store,records){var me=this,selected=me.selected,ln=records.length,record,i;if(me.getDisableSelection()){return}for(i=0;i<ln;i++){record=records[i];if(selected.remove(record)){if(me.getLastSelected()==record){me.setLastSelected(null)}if(me.getLastFocused()==record){me.setLastFocused(null)}me.fireSelectionChange([record])}}},onSelectionStoreClear:function(store){var records=store.getData().items;this.onSelectionStoreRemove(store,records)},getSelectionCount:function(){return this.selected.getCount()},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onLastFocusChanged:Ext.emptyFn,onEditorKey:Ext.emptyFn},function(){});Ext.define("Ext.dataview.DataView",{extend:"Ext.Container",alternateClassName:"Ext.DataView",mixins:["Ext.mixin.Selectable"],xtype:"dataview",requires:["Ext.LoadMask","Ext.data.StoreManager","Ext.dataview.component.Container","Ext.dataview.element.Container"],config:{store:null,data:null,baseCls:Ext.baseCSSPrefix+"dataview",emptyText:null,deferEmptyText:true,itemTpl:"<div>{text}</div>",pressedCls:"x-item-pressed",itemCls:null,selectedCls:"x-item-selected",triggerEvent:"itemtap",triggerCtEvent:"tap",deselectOnContainerClick:true,scrollable:true,inline:null,pressedDelay:100,loadingText:"Loading...",useComponents:null,itemConfig:{},maxItemCache:20,defaultType:"dataitem",scrollToTopOnRefresh:true},constructor:function(config){var me=this,layout;me.hasLoadedStore=false;me.mixins.selectable.constructor.apply(me,arguments);me.indexOffset=0;me.callParent(arguments);layout=this.getLayout();if(layout&&!layout.isAuto){Ext.Logger.error("The base layout for a DataView must always be an Auto Layout")}},updateItemCls:function(newCls,oldCls){var container=this.container;if(container){if(oldCls){container.doRemoveItemCls(oldCls)}if(newCls){container.doAddItemCls(newCls)}}},storeEventHooks:{beforeload:"onBeforeLoad",load:"onLoad",refresh:"refresh",addrecords:"onStoreAdd",removerecords:"onStoreRemove",updaterecord:"onStoreUpdate"},initialize:function(){this.callParent();var me=this,container;me.on(me.getTriggerCtEvent(),me.onContainerTrigger,me);container=me.container=this.add(new Ext.dataview[me.getUseComponents()?"component":"element"].Container({baseCls:this.getBaseCls()}));container.dataview=me;me.on(me.getTriggerEvent(),me.onItemTrigger,me);container.on({itemtouchstart:"onItemTouchStart",itemtouchend:"onItemTouchEnd",itemtap:"onItemTap",itemtaphold:"onItemTapHold",itemtouchmove:"onItemTouchMove",itemsingletap:"onItemSingleTap",itemdoubletap:"onItemDoubleTap",itemswipe:"onItemSwipe",scope:me});if(me.getStore()){if(me.isPainted()){me.refresh()}else{me.on({painted:"refresh",single:true})}}},applyInline:function(config){if(Ext.isObject(config)){config=Ext.apply({},config)}return config},updateInline:function(newInline,oldInline){var baseCls=this.getBaseCls();if(oldInline){this.removeCls([baseCls+"-inlineblock",baseCls+"-nowrap"])}if(newInline){this.addCls(baseCls+"-inlineblock");if(Ext.isObject(newInline)&&newInline.wrap===false){this.addCls(baseCls+"-nowrap")}else{this.removeCls(baseCls+"-nowrap")}}},prepareData:function(data,index,record){return data},onContainerTrigger:function(e){var me=this;if(e.target!=me.element.dom){return}if(me.getDeselectOnContainerClick()&&me.getStore()){me.deselectAll()}},onItemTrigger:function(me,index){this.selectWithEvent(this.getStore().getAt(index))},doAddPressedCls:function(record){var me=this,item=me.getItemAt(me.getStore().indexOf(record));if(Ext.isElement(item)){item=Ext.get(item)}if(item){item.addCls(me.getPressedCls())}},onItemTouchStart:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireAction("itemtouchstart",[me,index,target,record,e],"doItemTouchStart")},doItemTouchStart:function(me,index,target,record){var pressedDelay=me.getPressedDelay();if(record){if(pressedDelay>0){me.pressedTimeout=Ext.defer(me.doAddPressedCls,pressedDelay,me,[record])}else{me.doAddPressedCls(record)}}},onItemTouchEnd:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);if(this.hasOwnProperty("pressedTimeout")){clearTimeout(this.pressedTimeout);delete this.pressedTimeout}if(record&&target){target.removeCls(me.getPressedCls())}me.fireEvent("itemtouchend",me,index,target,record,e)},onItemTouchMove:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);if(me.hasOwnProperty("pressedTimeout")){clearTimeout(me.pressedTimeout);delete me.pressedTimeout}if(record&&target){target.removeCls(me.getPressedCls())}me.fireEvent("itemtouchmove",me,index,target,record,e)},onItemTap:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireEvent("itemtap",me,index,target,record,e)},onItemTapHold:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireEvent("itemtaphold",me,index,target,record,e)},onItemSingleTap:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireEvent("itemsingletap",me,index,target,record,e)},onItemDoubleTap:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireEvent("itemdoubletap",me,index,target,record,e)},onItemSwipe:function(container,target,index,e){var me=this,store=me.getStore(),record=store&&store.getAt(index);me.fireEvent("itemswipe",me,index,target,record,e)},onItemSelect:function(record,suppressEvent){var me=this;if(suppressEvent){me.doItemSelect(me,record)}else{me.fireAction("select",[me,record],"doItemSelect")}},doItemSelect:function(me,record){if(me.container&&!me.isDestroyed){var item=me.getItemAt(me.getStore().indexOf(record));if(Ext.isElement(item)){item=Ext.get(item)}if(item){item.removeCls(me.getPressedCls());item.addCls(me.getSelectedCls())}}},onItemDeselect:function(record,suppressEvent){var me=this;if(me.container&&!me.isDestroyed){if(suppressEvent){me.doItemDeselect(me,record)}else{me.fireAction("deselect",[me,record,suppressEvent],"doItemDeselect")}}},doItemDeselect:function(me,record){var item=me.getItemAt(me.getStore().indexOf(record));if(Ext.isElement(item)){item=Ext.get(item)}if(item){item.removeCls([me.getPressedCls(),me.getSelectedCls()])}},updateData:function(data){var store=this.getStore();if(!store){this.setStore(Ext.create("Ext.data.Store",{data:data,autoDestroy:true}))}else{store.add(data)}},applyStore:function(store){var me=this,bindEvents=Ext.apply({},me.storeEventHooks,{scope:me}),proxy,reader;if(store){store=Ext.data.StoreManager.lookup(store);if(store&&Ext.isObject(store)&&store.isStore){store.on(bindEvents);proxy=store.getProxy();if(proxy){reader=proxy.getReader();if(reader){reader.on("exception","handleException",this)}}}else{Ext.Logger.warn("The specified Store cannot be found",this)}}return store},handleException:function(){this.setMasked(false)},updateStore:function(newStore,oldStore){var me=this,bindEvents=Ext.apply({},me.storeEventHooks,{scope:me}),proxy,reader;if(oldStore&&Ext.isObject(oldStore)&&oldStore.isStore){me.onStoreClear();if(oldStore.getAutoDestroy()){oldStore.destroy()}else{oldStore.un(bindEvents);proxy=oldStore.getProxy();if(proxy){reader=proxy.getReader();if(reader){reader.un("exception","handleException",this)}}}}if(newStore){if(newStore.isLoaded()){this.hasLoadedStore=true}if(newStore.isLoading()){me.onBeforeLoad()}if(me.container){me.refresh()}}},onBeforeLoad:function(){var loadingText=this.getLoadingText();if(loadingText&&this.isPainted()){this.setMasked({xtype:"loadmask",message:loadingText})}this.hideEmptyText()},updateEmptyText:function(newEmptyText,oldEmptyText){var me=this,store;if(oldEmptyText&&me.emptyTextCmp){me.remove(me.emptyTextCmp,true);delete me.emptyTextCmp}if(newEmptyText){me.emptyTextCmp=me.add({xtype:"component",cls:me.getBaseCls()+"-emptytext",html:newEmptyText,hidden:true});store=me.getStore();if(store&&me.hasLoadedStore&&!store.getCount()){this.showEmptyText()}}},onLoad:function(store){this.hasLoadedStore=true;this.setMasked(false);if(!store.getCount()){this.showEmptyText()}},refresh:function(){var me=this,container=me.container;if(!me.getStore()){if(!me.hasLoadedStore&&!me.getDeferEmptyText()){me.showEmptyText()}return}if(container){me.fireAction("refresh",[me],"doRefresh")}},applyItemTpl:function(config){return(Ext.isObject(config)&&config.isTemplate)?config:new Ext.XTemplate(config)},onAfterRender:function(){var me=this;me.callParent(arguments);me.updateStore(me.getStore())},getItemAt:function(index){return this.getViewItems()[index-this.indexOffset]},getItemIndex:function(item){var index=this.getViewItems().indexOf(item);return(index===-1)?index:this.indexOffset+index},getViewItems:function(){return this.container.getViewItems()},doRefresh:function(me){var container=me.container,store=me.getStore(),records=store.getRange(),items=me.getViewItems(),recordsLn=records.length,itemsLn=items.length,deltaLn=recordsLn-itemsLn,scrollable=me.getScrollable(),i,item;if(this.getScrollToTopOnRefresh()&&scrollable){scrollable.getScroller().scrollToTop()}if(recordsLn<1){me.onStoreClear();return}else{me.hideEmptyText()}if(deltaLn<0){container.moveItemsToCache(itemsLn+deltaLn,itemsLn-1);items=me.getViewItems();itemsLn=items.length}else{if(deltaLn>0){container.moveItemsFromCache(store.getRange(itemsLn))}}for(i=0;i<itemsLn;i++){item=items[i];container.updateListItem(records[i],item)}if(this.hasSelection()){var selection=this.getSelection(),selectionLn=this.getSelectionCount(),record;for(i=0;i<selectionLn;i++){record=selection[i];this.doItemSelect(this,record)}}},showEmptyText:function(){if(this.getEmptyText()&&(this.hasLoadedStore||!this.getDeferEmptyText())){this.emptyTextCmp.show()}},hideEmptyText:function(){if(this.getEmptyText()){this.emptyTextCmp.hide()}},destroy:function(){var store=this.getStore();if(store&&store.getAutoDestroy()){store.destroy()}this.callParent(arguments)},onStoreClear:function(){var me=this,container=me.container,items=me.getViewItems();container.moveItemsToCache(0,items.length-1);this.showEmptyText()},onStoreAdd:function(store,records){if(records){this.hideEmptyText();this.container.moveItemsFromCache(records)}},onStoreRemove:function(store,records,indices){var container=this.container,ln=records.length,i;for(i=0;i<ln;i++){container.moveItemsToCache(indices[i],indices[i])}},onStoreUpdate:function(store,record,newIndex,oldIndex){var me=this,container=me.container;oldIndex=(typeof oldIndex==="undefined")?newIndex:oldIndex;if(oldIndex!==newIndex){container.updateAtNewIndex(oldIndex,newIndex,record);if(me.isSelected(record)){me.doItemSelect(me,record)}}else{container.updateListItem(record,me.getViewItems()[newIndex])}}});Ext.define("Ext.chart.Legend",{xtype:"legend",extend:"Ext.dataview.DataView",config:{itemTpl:["<span class=\"x-legend-item-marker {[values.disabled?'x-legend-inactive':'']}\" style=\"background:{mark};\"></span>{name}"],baseCls:"x-legend",padding:5,disableSelection:true,inline:true,position:null,toggleable:true,docked:"top",horizontalHeight:48,verticalWidth:150},constructor:function(){this.callSuper(arguments);var scroller=this.getScrollable().getScroller(),onDrag=scroller.onDrag;scroller.onDrag=function(e){e.stopPropagation();onDrag.call(this,e)}},doSetDocked:function(docked){this.callSuper(arguments);if(docked==="top"||docked==="bottom"){this.setLayout({type:"hbox",pack:"center"});this.setInline(true);this.setWidth(null);this.setHeight(this.getHorizontalHeight());if(this.getScrollable()){this.setScrollable({direction:"horizontal"})}}else{this.setLayout({pack:"center"});this.setInline(false);this.setWidth(this.getVerticalWidth());this.setHeight(null);if(this.getScrollable()){this.setScrollable({direction:"vertical"})}}},setScrollable:function(scrollable){this.callSuper(arguments);if(scrollable===true){if(this.getDocked()==="top"||this.getDocked()==="bottom"){this.setScrollable({direction:"horizontal"})}else{if(this.getDocked()==="left"||this.getDocked()==="right"){this.setScrollable({direction:"vertical"})}}}},setPosition:function(position){this.setDocked(position)},getPosition:function(){return this.getDocked()},onItemTap:function(container,target,index,e){this.callSuper(arguments);if(this.getToggleable()){var me=this,store=me.getStore(),record=store&&store.getAt(index);record.beginEdit();record.set("disabled",!record.get("disabled"));record.commit()}}});Ext.define("Ext.data.Operation",{config:{synchronous:true,action:null,filters:null,sorters:null,grouper:null,start:null,limit:null,batch:null,callback:null,scope:null,resultSet:null,records:null,request:null,response:null,withCredentials:null,params:null,url:null,page:null,node:null,model:undefined,addRecords:false},started:false,running:false,complete:false,success:undefined,exception:false,error:undefined,constructor:function(config){this.initConfig(config)},applyModel:function(model){if(typeof model=="string"){model=Ext.data.ModelManager.getModel(model);if(!model){Ext.Logger.error("Model with name "+arguments[0]+" doesnt exist.")}}if(model&&!model.prototype.isModel&&Ext.isObject(model)){model=Ext.data.ModelManager.registerType(model.storeId||model.id||Ext.id(),model)}if(!model){Ext.Logger.warn("Unless you define your model using metadata, an Operation needs to have a model defined.")}return model},getRecords:function(){var resultSet=this.getResultSet();return this._records||(resultSet?resultSet.getRecords():[])},setStarted:function(){this.started=true;this.running=true},setCompleted:function(){this.complete=true;this.running=false},setSuccessful:function(){this.success=true},setException:function(error){this.exception=true;this.success=false;this.running=false;this.error=error},hasException:function(){return this.exception===true},getError:function(){return this.error},isStarted:function(){return this.started===true},isRunning:function(){return this.running===true},isComplete:function(){return this.complete===true},wasSuccessful:function(){return this.isComplete()&&this.success===true},allowWrite:function(){return this.getAction()!="read"},process:function(action,resultSet,request,response){if(resultSet.getSuccess()!==false){this.setResponse(response);this.setResultSet(resultSet);this.setCompleted();this.setSuccessful()}else{return false}return this["process"+Ext.String.capitalize(action)].call(this,resultSet,request,response)},processRead:function(resultSet){var records=resultSet.getRecords(),processedRecords=[],Model=this.getModel(),ln=records.length,i,record;for(i=0;i<ln;i++){record=records[i];processedRecords.push(new Model(record.data,record.id,record.node))}this.setRecords(processedRecords);resultSet.setRecords(processedRecords);return true},processCreate:function(resultSet){var updatedRecords=resultSet.getRecords(),currentRecords=this.getRecords(),ln=updatedRecords.length,i,currentRecord,updatedRecord;for(i=0;i<ln;i++){updatedRecord=updatedRecords[i];if(updatedRecord.clientId===null&&currentRecords.length==1&&updatedRecords.length==1){currentRecord=currentRecords[i]}else{currentRecord=this.findCurrentRecord(updatedRecord.clientId)}if(currentRecord){this.updateRecord(currentRecord,updatedRecord)}else{Ext.Logger.warn("Unable to match the record that came back from the server.")}}return true},processUpdate:function(resultSet){var updatedRecords=resultSet.getRecords(),currentRecords=this.getRecords(),ln=updatedRecords.length,i,currentRecord,updatedRecord;for(i=0;i<ln;i++){updatedRecord=updatedRecords[i];currentRecord=currentRecords[i];if(currentRecord){this.updateRecord(currentRecord,updatedRecord)}else{Ext.Logger.warn("Unable to match the updated record that came back from the server.")}}return true},processDestroy:function(resultSet){var updatedRecords=resultSet.getRecords(),ln=updatedRecords.length,i,currentRecord,updatedRecord;for(i=0;i<ln;i++){updatedRecord=updatedRecords[i];currentRecord=this.findCurrentRecord(updatedRecord.id);if(currentRecord){currentRecord.setIsErased(true);currentRecord.notifyStores("afterErase",currentRecord)}else{Ext.Logger.warn("Unable to match the destroyed record that came back from the server.")}}},findCurrentRecord:function(clientId){var currentRecords=this.getRecords(),ln=currentRecords.length,i,currentRecord;for(i=0;i<ln;i++){currentRecord=currentRecords[i];if(currentRecord.getId()===clientId){return currentRecord}}},updateRecord:function(currentRecord,updatedRecord){var recordData=updatedRecord.data,recordId=updatedRecord.id;currentRecord.beginEdit();currentRecord.set(recordData);if(recordId!==null){currentRecord.setId(recordId)}currentRecord.endEdit(true);currentRecord.commit()}});Ext.define("Ext.data.ResultSet",{config:{loaded:true,count:null,total:null,success:false,records:null,message:null},constructor:function(config){this.initConfig(config)},applyCount:function(count){if(!count&&count!==0){return this.getRecords().length}return count},updateRecords:function(records){this.setCount(records.length)}});Ext.define("Ext.data.reader.Reader",{requires:["Ext.data.ResultSet"],alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],mixins:["Ext.mixin.Observable"],isReader:true,config:{idProperty:undefined,clientIdProperty:"clientId",totalProperty:"total",successProperty:"success",messageProperty:null,rootProperty:"",implicitIncludes:true,model:undefined},constructor:function(config){this.initConfig(config)},fieldCount:0,applyModel:function(model){if(typeof model=="string"){model=Ext.data.ModelManager.getModel(model);if(!model){Ext.Logger.error("Model with name "+arguments[0]+" doesnt exist.")}}if(model&&!model.prototype.isModel&&Ext.isObject(model)){model=Ext.data.ModelManager.registerType(model.storeId||model.id||Ext.id(),model)}return model},applyIdProperty:function(idProperty){if(!idProperty&&this.getModel()){idProperty=this.getModel().getIdProperty()}return idProperty},updateModel:function(model){if(model){if(!this.getIdProperty()){this.setIdProperty(model.getIdProperty())}this.buildExtractors()}},createAccessor:Ext.emptyFn,createFieldAccessExpression:function(){return"undefined"},buildExtractors:function(){if(!this.getModel()){return}var me=this,totalProp=me.getTotalProperty(),successProp=me.getSuccessProperty(),messageProp=me.getMessageProperty();if(totalProp){me.getTotal=me.createAccessor(totalProp)}if(successProp){me.getSuccess=me.createAccessor(successProp)}if(messageProp){me.getMessage=me.createAccessor(messageProp)}me.extractRecordData=me.buildRecordDataExtractor()},buildRecordDataExtractor:function(){var me=this,model=me.getModel(),fields=model.getFields(),ln=fields.length,fieldVarName=[],clientIdProp=me.getModel().getClientIdProperty(),prefix="__field",code=["var me = this,\n","    fields = me.getModel().getFields(),\n","    idProperty = me.getIdProperty(),\n",'    idPropertyIsFn = (typeof idProperty == "function"),',"    value,\n","    internalId"],i,field,varName,fieldName;fields=fields.items;for(i=0;i<ln;i++){field=fields[i];fieldName=field.getName();if(fieldName===model.getIdProperty()){fieldVarName[i]="idField"}else{fieldVarName[i]=prefix+i}code.push(",\n    ",fieldVarName[i],' = fields.get("',field.getName(),'")')}code.push(";\n\n    return function(source) {\n        var dest = {};\n");code.push("        if (idPropertyIsFn) {\n");code.push("            idField.setMapping(idProperty);\n");code.push("        }\n");for(i=0;i<ln;i++){field=fields[i];varName=fieldVarName[i];fieldName=field.getName();if(fieldName===model.getIdProperty()&&field.getMapping()===null&&model.getIdProperty()!==this.getIdProperty()){field.setMapping(this.getIdProperty())}code.push("        try {\n");code.push("            value = ",me.createFieldAccessExpression(field,varName,"source"),";\n");code.push("            if (value !== undefined) {\n");code.push('                dest["'+field.getName()+'"] = value;\n');code.push("            }\n");code.push("        } catch(e){}\n")}if(clientIdProp){code.push("        internalId = "+me.createFieldAccessExpression(Ext.create("Ext.data.Field",{name:clientIdProp}),null,"source")+";\n");code.push("        if (internalId !== undefined) {\n");code.push('            dest["_clientId"] = internalId;\n        }\n')}code.push("        return dest;\n");code.push("    };");return Ext.functionFactory(code.join("")).call(me)},getFields:function(){return this.getModel().getFields().items},getData:function(data){return data},getResponseData:function(response){return response},getRoot:function(data){return data},read:function(response){var data=response,Model=this.getModel(),resultSet,records,i,ln,record;if(response){data=this.getResponseData(response)}if(data){resultSet=this.readRecords(data);records=resultSet.getRecords();for(i=0,ln=records.length;i<ln;i++){record=records[i];records[i]=new Model(record.data,record.id,record.node)}return resultSet}else{return this.nullResultSet}},process:function(response){var data=response;if(response){data=this.getResponseData(response)}if(data){return this.readRecords(data)}else{return this.nullResultSet}},readRecords:function(data){var me=this;me.rawData=data;data=me.getData(data);if(data.metaData){me.onMetaChange(data.metaData)}if(!me.getModel()){Ext.Logger.warn("In order to read record data, a Reader needs to have a Model defined on it.")}var isArray=Ext.isArray(data),root=isArray?data:me.getRoot(data),success=true,recordCount=0,total,value,records,message;if(isArray&&!data.length){return me.nullResultSet}if(me.getTotal){value=parseInt(me.getTotal(data),10);if(!isNaN(value)){total=value}}if(me.getSuccess){value=me.getSuccess(data);if(value===false||value==="false"){success=false}}if(me.getMessage){message=me.getMessage(data)}if(root){records=me.extractData(root);recordCount=records.length}else{recordCount=0;records=[]}return new Ext.data.ResultSet({total:total,count:recordCount,records:records,success:success,message:message})},extractData:function(root){var me=this,records=[],length=root.length,model=me.getModel(),idProperty=model.getIdProperty(),fieldsCollection=model.getFields(),node,i,data,id,clientId;if(fieldsCollection.isDirty){me.buildExtractors(true);delete fieldsCollection.isDirty}if(!root.length&&Ext.isObject(root)){root=[root];length=1}for(i=0;i<length;i++){clientId=null;id=null;node=root[i];if(node.isModel){data=node.data}else{data=me.extractRecordData(node)}if(data._clientId!==undefined){clientId=data._clientId;delete data._clientId}if(data[idProperty]!==undefined){id=data[idProperty]}if(me.getImplicitIncludes()){me.readAssociated(data,node)}records.push({clientId:clientId,id:id,data:data,node:node})}return records},readAssociated:function(record,data){var associations=this.getModel().associations.items,length=associations.length,i=0,association,associationData,associationKey;for(;i<length;i++){association=associations[i];associationKey=association.getAssociationKey();associationData=this.getAssociatedDataRoot(data,associationKey);if(associationData){record[associationKey]=associationData}}},getAssociatedDataRoot:function(data,associationName){var re=/[\[\.]/,i=String(associationName).search(re);if(i>=0){return Ext.functionFactory("obj","return obj"+(i>0?".":"")+associationName)(data)}return data[associationName]},onMetaChange:function(meta){var fields=meta.fields,me=this,newModel,config,idProperty;me.metaData=meta;if(meta.rootProperty!==undefined){me.setRootProperty(meta.rootProperty)}else{if(meta.root!==undefined){me.setRootProperty(meta.root)}}if(meta.idProperty!==undefined){me.setIdProperty(meta.idProperty)}if(meta.totalProperty!==undefined){me.setTotalProperty(meta.totalProperty)}if(meta.successProperty!==undefined){me.setSuccessProperty(meta.successProperty)}if(meta.messageProperty!==undefined){me.setMessageProperty(meta.messageProperty)}if(fields){if(me.getModel()){me.getModel().setFields(fields);me.buildExtractors()}else{idProperty=me.getIdProperty();config={fields:fields};if(idProperty){config.idProperty=idProperty}newModel=Ext.define("Ext.data.reader.MetaModel"+Ext.id(),{extend:"Ext.data.Model",config:config});me.setModel(newModel)}}else{me.buildExtractors()}}},function(){Ext.apply(this.prototype,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:false})})});Ext.define("Ext.data.reader.Json",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.JsonReader",alias:"reader.json",config:{record:null,useSimpleAccessors:false},objectRe:/[\[\.]/,getResponseData:function(response){var responseText=response;if(response&&response.responseText){responseText=response.responseText}if(typeof responseText!=="string"){return responseText}var data;try{data=Ext.decode(responseText)}catch(ex){this.fireEvent("exception",this,response,"Unable to parse the JSON returned by the server: "+ex.toString());Ext.Logger.warn("Unable to parse the JSON returned by the server: "+ex.toString())}if(!data){this.fireEvent("exception",this,response,"JSON object not found");Ext.Logger.error("JSON object not found")}return data},buildExtractors:function(){var me=this,root=me.getRootProperty();me.callParent(arguments);if(root){me.rootAccessor=me.createAccessor(root)}else{delete me.rootAccessor}},getRoot:function(data){var fieldsCollection=this.getModel().getFields();if(fieldsCollection.isDirty){this.buildExtractors(true);delete fieldsCollection.isDirty}if(this.rootAccessor){return this.rootAccessor.call(this,data)}else{return data}},extractData:function(root){var recordName=this.getRecord(),data=[],length,i;if(recordName){length=root.length;if(!length&&Ext.isObject(root)){length=1;root=[root]}for(i=0;i<length;i++){data[i]=root[i][recordName]}}else{data=root}return this.callParent([data])},createAccessor:function(){var re=/[\[\.]/;return function(expr){if(Ext.isEmpty(expr)){return Ext.emptyFn}if(Ext.isFunction(expr)){return expr}if(this.getUseSimpleAccessors()!==true){var i=String(expr).search(re);if(i>=0){return Ext.functionFactory("obj","var value; try {value = obj"+(i>0?".":"")+expr+"} catch(e) {}; return value;")}}return function(obj){return obj[expr]}}}(),createFieldAccessExpression:function(field,fieldVarName,dataName){var me=this,re=me.objectRe,hasMap=(field.getMapping()!==null),map=hasMap?field.getMapping():field.getName(),result,operatorSearch;if(typeof map==="function"){result=fieldVarName+".getMapping()("+dataName+", this)"}else{if(me.getUseSimpleAccessors()===true||((operatorSearch=String(map).search(re))<0)){if(!hasMap||isNaN(map)){map='"'+map+'"'}result=dataName+"["+map+"]"}else{result=dataName+(operatorSearch>0?".":"")+map}}return result}});Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],config:{writeAllFields:true,nameProperty:"name"},constructor:function(config){this.initConfig(config)},write:function(request){var operation=request.getOperation(),records=operation.getRecords()||[],len=records.length,i=0,data=[];for(;i<len;i++){data.push(this.getRecordData(records[i]))}return this.writeRecords(request,data)},writeDate:function(field,date){var dateFormat=field.getDateFormat()||"timestamp";switch(dateFormat){case"timestamp":return date.getTime()/1000;case"time":return date.getTime();default:return Ext.Date.format(date,dateFormat)}},getRecordData:function(record){var isPhantom=record.phantom===true,writeAll=this.getWriteAllFields()||isPhantom,nameProperty=this.getNameProperty(),fields=record.getFields(),data={},changes,name,field,key,value;if(writeAll){fields.each(function(field){if(field.getPersist()){name=field.config[nameProperty]||field.getName();value=record.get(field.getName());if(field.getType().type=="date"){value=this.writeDate(field,value)}data[name]=value}},this)}else{changes=record.getChanges();for(key in changes){if(changes.hasOwnProperty(key)){field=fields.get(key);if(field.getPersist()){name=field.config[nameProperty]||field.getName();value=changes[key];if(field.getType().type=="date"){value=this.writeDate(field,value)}data[name]=value}}}if(!isPhantom){data[record.getIdProperty()]=record.getId()}}return data}});Ext.define("Ext.data.writer.Json",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",config:{rootProperty:undefined,encode:false,allowSingle:true,encodeRequest:false},applyRootProperty:function(root){if(!root&&(this.getEncode()||this.getEncodeRequest())){root="data"}return root},writeRecords:function(request,data){var root=this.getRootProperty(),params=request.getParams(),allowSingle=this.getAllowSingle(),jsonData;if(this.getAllowSingle()&&data&&data.length==1){data=data[0]}if(this.getEncodeRequest()){jsonData=request.getJsonData()||{};if(data&&(data.length||(allowSingle&&Ext.isObject(data)))){jsonData[root]=data}request.setJsonData(Ext.apply(jsonData,params||{}));request.setParams(null);request.setMethod("POST");return request}if(!data||!(data.length||(allowSingle&&Ext.isObject(data)))){return request}if(this.getEncode()){if(root){params[root]=Ext.encode(data)}else{Ext.Logger.error("Must specify a root when using encode")}}else{jsonData=request.getJsonData()||{};if(root){jsonData[root]=data}else{jsonData=data}request.setJsonData(jsonData)}return request}});Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.mixin.Observable"},config:{autoStart:false,pauseOnException:true,proxy:null},current:-1,total:0,isRunning:false,isComplete:false,hasException:false,constructor:function(config){var me=this;me.initConfig(config);me.operations=[]},add:function(operation){this.total++;operation.setBatch(this);this.operations.push(operation)},start:function(){this.hasException=false;this.isRunning=true;this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=false},runOperation:function(index){var me=this,operations=me.operations,operation=operations[index],onProxyReturn;if(operation===undefined){me.isRunning=false;me.isComplete=true;me.fireEvent("complete",me,operations[operations.length-1])}else{me.current=index;onProxyReturn=function(operation){var hasException=operation.hasException();if(hasException){me.hasException=true;me.fireEvent("exception",me,operation)}else{me.fireEvent("operationcomplete",me,operation)}if(hasException&&me.getPauseOnException()){me.pause()}else{operation.setCompleted();me.runNextOperation()}};operation.setStarted();me.getProxy()[operation.getAction()](operation,onProxyReturn,me)}}});Ext.define("Ext.data.proxy.Proxy",{extend:"Ext.Evented",alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],requires:["Ext.data.reader.Json","Ext.data.writer.Json","Ext.data.Batch","Ext.data.Operation"],config:{batchOrder:"create,update,destroy",batchActions:true,model:null,reader:{type:"json"},writer:{type:"json"}},isProxy:true,applyModel:function(model){if(typeof model=="string"){model=Ext.data.ModelManager.getModel(model);if(!model){Ext.Logger.error("Model with name "+arguments[0]+" doesnt exist.")}}if(model&&!model.prototype.isModel&&Ext.isObject(model)){model=Ext.data.ModelManager.registerType(model.storeId||model.id||Ext.id(),model)}return model},updateModel:function(model){if(model){var reader=this.getReader();if(reader&&!reader.getModel()){reader.setModel(model)}}},applyReader:function(reader,currentReader){return Ext.factory(reader,Ext.data.Reader,currentReader,"reader")},updateReader:function(reader){if(reader){var model=this.getModel();if(!model){model=reader.getModel();if(model){this.setModel(model)}}else{reader.setModel(model)}if(reader.onMetaChange){reader.onMetaChange=Ext.Function.createSequence(reader.onMetaChange,this.onMetaChange,this)}}},onMetaChange:function(data){var model=this.getReader().getModel();if(!this.getModel()&&model){this.setModel(model)}this.fireEvent("metachange",this,data)},applyWriter:function(writer,currentWriter){return Ext.factory(writer,Ext.data.Writer,currentWriter,"writer")},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.getReader(),this.getWriter())},batch:function(options,listeners){var me=this,useBatch=me.getBatchActions(),model=me.getModel(),batch,records;if(options.operations===undefined){options={operations:options,listeners:listeners};Ext.Logger.deprecate("Passes old-style signature to Proxy.batch (operations, listeners). Please convert to single options argument syntax.")}if(options.batch&&options.batch.isBatch){batch=options.batch}else{batch=new Ext.data.Batch(options.batch||{})}batch.setProxy(me);batch.on("complete",Ext.bind(me.onBatchComplete,me,[options],0));if(options.listeners){batch.on(options.listeners)}Ext.each(me.getBatchOrder().split(","),function(action){records=options.operations[action];if(records){if(useBatch){batch.add(new Ext.data.Operation({action:action,records:records,model:model}))}else{Ext.each(records,function(record){batch.add(new Ext.data.Operation({action:action,records:[record],model:model}))})}}},me);batch.start();return batch},onBatchComplete:function(batchOptions,batch){var scope=batchOptions.scope||this;if(batch.hasException){if(Ext.isFunction(batchOptions.failure)){Ext.callback(batchOptions.failure,scope,[batch,batchOptions])}}else{if(Ext.isFunction(batchOptions.success)){Ext.callback(batchOptions.success,scope,[batch,batchOptions])}}if(Ext.isFunction(batchOptions.callback)){Ext.callback(batchOptions.callback,scope,[batch,batchOptions])}}},function(){});Ext.define("Ext.data.proxy.Client",{extend:"Ext.data.proxy.Proxy",alternateClassName:"Ext.proxy.ClientProxy",clear:function(){Ext.Logger.error("The Ext.data.proxy.Client subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}});Ext.define("Ext.data.proxy.Memory",{extend:"Ext.data.proxy.Client",alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:true,config:{data:[]},finishOperation:function(operation,callback,scope){if(operation){var i=0,recs=operation.getRecords(),len=recs.length;for(i;i<len;i++){recs[i].commit()}operation.setCompleted();operation.setSuccessful();Ext.callback(callback,scope||this,[operation])}},create:function(){this.finishOperation.apply(this,arguments)},update:function(){this.finishOperation.apply(this,arguments)},destroy:function(){this.finishOperation.apply(this,arguments)},read:function(operation,callback,scope){var me=this,reader=me.getReader();if(operation.process("read",reader.process(me.getData()))===false){this.fireEvent("exception",this,null,operation)}Ext.callback(callback,scope||me,[operation])},clear:Ext.emptyFn});Ext.define("Ext.data.SortTypes",{singleton:true,stripTagsRE:/<\/?[^>]+>/gi,none:function(value){return value},asText:function(value){return String(value).replace(this.stripTagsRE,"")},asUCText:function(value){return String(value).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(value){return String(value).toUpperCase()},asDate:function(value){if(!value){return 0}if(Ext.isDate(value)){return value.getTime()}return Date.parse(String(value))},asFloat:function(value){value=parseFloat(String(value).replace(/,/g,""));return isNaN(value)?0:value},asInt:function(value){value=parseInt(String(value).replace(/,/g,""),10);return isNaN(value)?0:value}});Ext.define("Ext.data.Types",{singleton:true,requires:["Ext.data.SortTypes"],stripRe:/[\$,%]/g,dashesRe:/-/g,iso8601TestRe:/\d\dT\d\d/,iso8601SplitRe:/[- :T\.Z\+]/},function(){var Types=this,sortTypes=Ext.data.SortTypes;Ext.apply(Types,{AUTO:{convert:function(value){return value},sortType:sortTypes.none,type:"auto"},STRING:{convert:function(value){return(value===undefined||value===null)?(this.getAllowNull()?null:""):String(value)},sortType:sortTypes.asUCString,type:"string"},INT:{convert:function(value){return(value!==undefined&&value!==null&&value!=="")?((typeof value==="number")?parseInt(value,10):parseInt(String(value).replace(Types.stripRe,""),10)):(this.getAllowNull()?null:0)},sortType:sortTypes.none,type:"int"},FLOAT:{convert:function(value){return(value!==undefined&&value!==null&&value!=="")?((typeof value==="number")?value:parseFloat(String(value).replace(Types.stripRe,""),10)):(this.getAllowNull()?null:0)},sortType:sortTypes.none,type:"float"},BOOL:{convert:function(value){if((value===undefined||value===null||value==="")&&this.getAllowNull()){return null}return value!=="false"&&!!value},sortType:sortTypes.none,type:"bool"},DATE:{convert:function(value){var dateFormat=this.getDateFormat(),parsed;if(!value){return null}if(Ext.isDate(value)){return value}if(dateFormat){if(dateFormat=="timestamp"){return new Date(value*1000)}if(dateFormat=="time"){return new Date(parseInt(value,10))}return Ext.Date.parse(value,dateFormat)}parsed=new Date(Date.parse(value));if(isNaN(parsed)){if(Types.iso8601TestRe.test(value)){parsed=value.split(Types.iso8601SplitRe);parsed=new Date(parsed[0],parsed[1]-1,parsed[2],parsed[3],parsed[4],parsed[5])}if(isNaN(parsed)){parsed=new Date(Date.parse(value.replace(Types.dashesRe,"/")));if(isNaN(parsed)){Ext.Logger.warn("Cannot parse the passed value ("+value+") into a valid date")}}}return isNaN(parsed)?null:parsed},sortType:sortTypes.asDate,type:"date"}});Ext.apply(Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})});Ext.define("Ext.data.Field",{requires:["Ext.data.Types","Ext.data.SortTypes"],alias:"data.field",isField:true,config:{name:null,type:"auto",convert:undefined,dateFormat:null,allowNull:true,defaultValue:undefined,mapping:null,sortType:undefined,sortDir:"ASC",allowBlank:true,persist:true,encode:null,decode:null,bubbleEvents:"action"},constructor:function(config){if(Ext.isString(config)){config={name:config}}this.initConfig(config)},applyType:function(type){var types=Ext.data.Types,autoType=types.AUTO;if(type){if(Ext.isString(type)){return types[type.toUpperCase()]||autoType}else{return type}}return autoType},updateType:function(newType,oldType){var convert=this.getConvert();if(oldType&&convert===oldType.convert){this.setConvert(newType.convert)}},applySortType:function(sortType){var sortTypes=Ext.data.SortTypes,type=this.getType(),defaultSortType=type.sortType;if(sortType){if(Ext.isString(sortType)){return sortTypes[sortType]||defaultSortType}else{return sortType}}return defaultSortType},applyConvert:function(convert){var defaultConvert=this.getType().convert;if(convert&&convert!==defaultConvert){this._hasCustomConvert=true;return convert}else{this._hasCustomConvert=false;return defaultConvert}},hasCustomConvert:function(){return this._hasCustomConvert}});Ext.define("Ext.data.identifier.Simple",{alias:"data.identifier.simple",statics:{AUTO_ID:1},config:{prefix:"ext-record-"},constructor:function(config){this.initConfig(config)},generate:function(record){return this._prefix+this.self.AUTO_ID++}});Ext.define("Ext.data.ModelManager",{extend:"Ext.AbstractManager",alternateClassName:["Ext.ModelMgr","Ext.ModelManager"],singleton:true,modelNamespace:null,registerType:function(name,config){var proto=config.prototype,model;if(proto&&proto.isModel){model=config}else{config={extend:config.extend||"Ext.data.Model",config:config};model=Ext.define(name,config)}this.types[name]=model;return model},onModelDefined:Ext.emptyFn,getModel:function(id){var model=id;if(typeof model=="string"){model=this.types[model];if(!model&&this.modelNamespace){model=this.types[this.modelNamespace+"."+model]}}return model},create:function(config,name,id){var con=typeof name=="function"?name:this.types[name||config.name];return new con(config,id)}},function(){Ext.regModel=function(){Ext.Logger.deprecate('Ext.regModel has been deprecated. Models can now be created by extending Ext.data.Model: Ext.define("MyModel", {extend: "Ext.data.Model", fields: []});.');return this.ModelManager.registerType.apply(this.ModelManager,arguments)}});Ext.define("Ext.data.Request",{config:{action:null,params:null,method:"GET",url:null,operation:null,proxy:null,disableCaching:false,headers:{},callbackKey:null,jsonP:null,jsonData:null,xmlData:null,withCredentials:null,username:null,password:null,callback:null,scope:null,timeout:30000,records:null,directFn:null,args:null},constructor:function(config){this.initConfig(config)}});Ext.define("Ext.data.proxy.Server",{extend:"Ext.data.proxy.Proxy",alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",requires:["Ext.data.Request"],config:{url:null,pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",directionParam:"dir",enablePagingParams:true,simpleSortMode:false,noCache:true,cacheString:"_dc",timeout:30000,api:{create:undefined,read:undefined,update:undefined,destroy:undefined},extraParams:{}},constructor:function(config){config=config||{};if(config.nocache!==undefined){config.noCache=config.nocache;Ext.Logger.warn("nocache configuration on Ext.data.proxy.Server has been deprecated. Please use noCache.")}this.callParent([config])},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(name,value){this.getExtraParams()[name]=value},buildRequest:function(operation){var me=this,params=Ext.applyIf(operation.getParams()||{},me.getExtraParams()||{}),request;params=Ext.applyIf(params,me.getParams(operation));request=Ext.create("Ext.data.Request",{params:params,action:operation.getAction(),records:operation.getRecords(),url:operation.getUrl(),operation:operation,proxy:me});request.setUrl(me.buildUrl(request));operation.setRequest(request);return request},processResponse:function(success,operation,request,response,callback,scope){var me=this,action=operation.getAction(),reader,resultSet;if(success===true){reader=me.getReader();try{resultSet=reader.process(response)}catch(e){operation.setException(e.message);me.fireEvent("exception",this,response,operation);return}if(!operation.getModel()){operation.setModel(this.getModel())}if(operation.process(action,resultSet,request,response)===false){this.fireEvent("exception",this,response,operation)}}else{me.setException(operation,response);me.fireEvent("exception",this,response,operation)}if(typeof callback=="function"){callback.call(scope||me,operation)}me.afterRequest(request,success)},setException:function(operation,response){if(Ext.isObject(response)){operation.setException({status:response.status,statusText:response.statusText})}},applyEncoding:function(value){return Ext.encode(value)},encodeSorters:function(sorters){var min=[],length=sorters.length,i=0;for(;i<length;i++){min[i]={property:sorters[i].getProperty(),direction:sorters[i].getDirection()}}return this.applyEncoding(min)},encodeFilters:function(filters){var min=[],length=filters.length,i=0;for(;i<length;i++){min[i]={property:filters[i].getProperty(),value:filters[i].getValue()}}return this.applyEncoding(min)},getParams:function(operation){var me=this,params={},grouper=operation.getGrouper(),sorters=operation.getSorters(),filters=operation.getFilters(),page=operation.getPage(),start=operation.getStart(),limit=operation.getLimit(),simpleSortMode=me.getSimpleSortMode(),pageParam=me.getPageParam(),startParam=me.getStartParam(),limitParam=me.getLimitParam(),groupParam=me.getGroupParam(),sortParam=me.getSortParam(),filterParam=me.getFilterParam(),directionParam=me.getDirectionParam();if(me.getEnablePagingParams()){if(pageParam&&page!==null){params[pageParam]=page}if(startParam&&start!==null){params[startParam]=start}if(limitParam&&limit!==null){params[limitParam]=limit}}if(groupParam&&grouper){params[groupParam]=me.encodeSorters([grouper])}if(sortParam&&sorters&&sorters.length>0){if(simpleSortMode){params[sortParam]=sorters[0].getProperty();params[directionParam]=sorters[0].getDirection()}else{params[sortParam]=me.encodeSorters(sorters)}}if(filterParam&&filters&&filters.length>0){params[filterParam]=me.encodeFilters(filters)}return params},buildUrl:function(request){var me=this,url=me.getUrl(request);if(!url){Ext.Logger.error("You are using a ServerProxy but have not supplied it with a url.")}if(me.getNoCache()){url=Ext.urlAppend(url,Ext.String.format("{0}={1}",me.getCacheString(),Ext.Date.now()))}return url},getUrl:function(request){return request?request.getUrl()||this.getApi()[request.getAction()]||this._url:this._url},doRequest:function(operation,callback,scope){Ext.Logger.error("The doRequest function has not been implemented on your Ext.data.proxy.Server subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn});Ext.define("Ext.data.proxy.Ajax",{extend:"Ext.data.proxy.Server",requires:["Ext.util.MixedCollection","Ext.Ajax"],alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],config:{withCredentials:false,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},headers:{}},doRequest:function(operation,callback,scope){var me=this,writer=me.getWriter(),request=me.buildRequest(operation);request.setConfig({headers:me.getHeaders(),timeout:me.getTimeout(),method:me.getMethod(request),callback:me.createRequestCallback(request,operation,callback,scope),scope:me,proxy:me});if(operation.getWithCredentials()||me.getWithCredentials()){request.setWithCredentials(true);request.setUsername(me.getUsername());request.setPassword(me.getPassword())}request=writer.write(request);Ext.Ajax.request(request.getCurrentConfig());return request},getMethod:function(request){return this.getActionMethods()[request.getAction()]},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(options,success,response){me.processResponse(success,operation,request,response,callback,scope)}}});Ext.define("Ext.data.association.Association",{alternateClassName:"Ext.data.Association",requires:["Ext.data.ModelManager"],config:{ownerModel:null,ownerName:undefined,associatedModel:null,associatedName:undefined,associationKey:undefined,primaryKey:"id",reader:null,type:null,name:undefined},statics:{create:function(association){if(!association.isAssociation){if(Ext.isString(association)){association={type:association}}association.type=association.type.toLowerCase();return Ext.factory(association,Ext.data.association.Association,null,"association")}return association}},constructor:function(config){this.initConfig(config)},applyName:function(name){if(!name){name=this.getAssociatedName()}return name},applyOwnerModel:function(ownerName){var ownerModel=Ext.data.ModelManager.getModel(ownerName);if(ownerModel===undefined){Ext.Logger.error("The configured ownerModel was not valid (you tried "+ownerName+")")}return ownerModel},applyOwnerName:function(ownerName){if(!ownerName){ownerName=this.getOwnerModel().modelName}ownerName=ownerName.slice(ownerName.lastIndexOf(".")+1);return ownerName},updateOwnerModel:function(ownerModel,oldOwnerModel){if(oldOwnerModel){this.setOwnerName(ownerModel.modelName)}},applyAssociatedModel:function(associatedName){var associatedModel=Ext.data.ModelManager.types[associatedName];if(associatedModel===undefined){Ext.Logger.error("The configured associatedModel was not valid (you tried "+associatedName+")")}return associatedModel},applyAssociatedName:function(associatedName){if(!associatedName){associatedName=this.getAssociatedModel().modelName}associatedName=associatedName.slice(associatedName.lastIndexOf(".")+1);return associatedName},updateAssociatedModel:function(associatedModel,oldAssociatedModel){if(oldAssociatedModel){this.setAssociatedName(associatedModel.modelName)}},applyReader:function(reader){if(reader){if(Ext.isString(reader)){reader={type:reader}}if(!reader.isReader){Ext.applyIf(reader,{type:"json"})}}return Ext.factory(reader,Ext.data.Reader,this.getReader(),"reader")},updateReader:function(reader){reader.setModel(this.getAssociatedModel())}});Ext.define("Ext.util.Inflector",{singleton:true,plurals:[[(/(quiz)$/i),"$1zes"],[(/^(ox)$/i),"$1en"],[(/([m|l])ouse$/i),"$1ice"],[(/(matr|vert|ind)ix|ex$/i),"$1ices"],[(/(x|ch|ss|sh)$/i),"$1es"],[(/([^aeiouy]|qu)y$/i),"$1ies"],[(/(hive)$/i),"$1s"],[(/(?:([^f])fe|([lr])f)$/i),"$1$2ves"],[(/sis$/i),"ses"],[(/([ti])um$/i),"$1a"],[(/(buffal|tomat|potat)o$/i),"$1oes"],[(/(bu)s$/i),"$1ses"],[(/(alias|status|sex)$/i),"$1es"],[(/(octop|vir)us$/i),"$1i"],[(/(ax|test)is$/i),"$1es"],[(/^person$/),"people"],[(/^man$/),"men"],[(/^(child)$/),"$1ren"],[(/s$/i),"s"],[(/$/),"s"]],singulars:[[(/(quiz)zes$/i),"$1"],[(/(matr)ices$/i),"$1ix"],[(/(vert|ind)ices$/i),"$1ex"],[(/^(ox)en/i),"$1"],[(/(alias|status)es$/i),"$1"],[(/(octop|vir)i$/i),"$1us"],[(/(cris|ax|test)es$/i),"$1is"],[(/(shoe)s$/i),"$1"],[(/(o)es$/i),"$1"],[(/(bus)es$/i),"$1"],[(/([m|l])ice$/i),"$1ouse"],[(/(x|ch|ss|sh)es$/i),"$1"],[(/(m)ovies$/i),"$1ovie"],[(/(s)eries$/i),"$1eries"],[(/([^aeiouy]|qu)ies$/i),"$1y"],[(/([lr])ves$/i),"$1f"],[(/(tive)s$/i),"$1"],[(/(hive)s$/i),"$1"],[(/([^f])ves$/i),"$1fe"],[(/(^analy)ses$/i),"$1sis"],[(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i),"$1$2sis"],[(/([ti])a$/i),"$1um"],[(/(n)ews$/i),"$1ews"],[(/people$/i),"person"],[(/s$/i),""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(matcher,replacer){this.singulars.unshift([matcher,replacer])},plural:function(matcher,replacer){this.plurals.unshift([matcher,replacer])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(word){return Ext.Array.indexOf(this.uncountable,word)!=-1},pluralize:function(word){if(this.isTransnumeral(word)){return word}var plurals=this.plurals,length=plurals.length,tuple,regex,i;for(i=0;i<length;i++){tuple=plurals[i];regex=tuple[0];if(regex==word||(regex.test&&regex.test(word))){return word.replace(regex,tuple[1])}}return word},singularize:function(word){if(this.isTransnumeral(word)){return word}var singulars=this.singulars,length=singulars.length,tuple,regex,i;for(i=0;i<length;i++){tuple=singulars[i];regex=tuple[0];if(regex==word||(regex.test&&regex.test(word))){return word.replace(regex,tuple[1])}}return word},classify:function(word){return Ext.String.capitalize(this.singularize(word))},ordinalize:function(number){var parsed=parseInt(number,10),mod10=parsed%10,mod100=parsed%100;if(11<=mod100&&mod100<=13){return number+"th"}else{switch(mod10){case 1:return number+"st";case 2:return number+"nd";case 3:return number+"rd";default:return number+"th"}}}},function(){var irregulars={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},singular;for(singular in irregulars){this.plural(singular,irregulars[singular]);this.singular(irregulars[singular],singular)}});Ext.define("Ext.data.association.HasMany",{extend:"Ext.data.association.Association",alternateClassName:"Ext.data.HasManyAssociation",requires:["Ext.util.Inflector"],alias:"association.hasmany",config:{foreignKey:undefined,store:undefined,storeName:undefined,filterProperty:null,autoLoad:false,autoSync:false},constructor:function(config){config=config||{};if(config.storeConfig){Ext.Logger.warn("storeConfig is deprecated on an association. Instead use the store configuration.");config.store=config.storeConfig;delete config.storeConfig}this.callParent([config])},applyName:function(name){if(!name){name=Ext.util.Inflector.pluralize(this.getAssociatedName().toLowerCase())}return name},applyStoreName:function(name){if(!name){name=this.getName()+"Store"}return name},applyForeignKey:function(foreignKey){if(!foreignKey){var inverse=this.getInverseAssociation();if(inverse){foreignKey=inverse.getForeignKey()}else{foreignKey=this.getOwnerName().toLowerCase()+"_id"}}return foreignKey},applyAssociationKey:function(associationKey){if(!associationKey){var associatedName=this.getAssociatedName();associationKey=Ext.util.Inflector.pluralize(associatedName[0].toLowerCase()+associatedName.slice(1))}return associationKey},updateForeignKey:function(foreignKey,oldForeignKey){var fields=this.getAssociatedModel().getFields(),field=fields.get(foreignKey);if(!field){field=new Ext.data.Field({name:foreignKey});fields.add(field);fields.isDirty=true}if(oldForeignKey){field=fields.get(oldForeignKey);if(field){fields.remove(field);fields.isDirty=true}}},applyStore:function(storeConfig){var me=this,association=me,associatedModel=me.getAssociatedModel(),storeName=me.getStoreName(),foreignKey=me.getForeignKey(),primaryKey=me.getPrimaryKey(),filterProperty=me.getFilterProperty(),autoLoad=me.getAutoLoad(),autoSync=me.getAutoSync();return function(){var record=this,config,filter,store,modelDefaults={},listeners={addrecords:me.onAddRecords,removerecords:me.onRemoveRecords,scope:me};if(record[storeName]===undefined){if(filterProperty){filter={property:filterProperty,value:record.get(filterProperty),exactMatch:true}}else{filter={property:foreignKey,value:record.get(primaryKey),exactMatch:true}}modelDefaults[foreignKey]=record.get(primaryKey);config=Ext.apply({},storeConfig,{model:associatedModel,filters:[filter],remoteFilter:true,autoSync:autoSync,modelDefaults:modelDefaults,listeners:listeners});store=record[storeName]=Ext.create("Ext.data.Store",config);store.boundTo=record;if(autoLoad){record[storeName].load()}}return record[storeName]}},onAddRecords:function(store,records){var ln=records.length,id=store.boundTo.getId(),i,record;for(i=0;i<ln;i++){record=records[i];record.set(this.getForeignKey(),id)}this.updateInverseInstances(store.boundTo)},onRemoveRecords:function(store,records){var ln=records.length,i,record;for(i=0;i<ln;i++){record=records[i];record.set(this.getForeignKey(),null)}},updateStore:function(store){this.getOwnerModel().prototype[this.getName()]=store},read:function(record,reader,associationData){var store=record[this.getName()](),records=reader.read(associationData).getRecords();store.add(records)},updateInverseInstances:function(record){var store=record[this.getName()](),inverse=this.getInverseAssociation();if(inverse){store.each(function(associatedRecord){associatedRecord[inverse.getInstanceName()]=record})}},getInverseAssociation:function(){var ownerName=this.getOwnerModel().modelName;return this.getAssociatedModel().associations.findBy(function(assoc){return assoc.getType().toLowerCase()==="belongsto"&&assoc.getAssociatedModel().modelName===ownerName})}});Ext.define("Ext.data.association.BelongsTo",{extend:"Ext.data.association.Association",alternateClassName:"Ext.data.BelongsToAssociation",alias:"association.belongsto",config:{foreignKey:undefined,getterName:undefined,setterName:undefined,instanceName:undefined},applyForeignKey:function(foreignKey){if(!foreignKey){foreignKey=this.getAssociatedName().toLowerCase()+"_id"}return foreignKey},updateForeignKey:function(foreignKey,oldForeignKey){var fields=this.getOwnerModel().getFields(),field=fields.get(foreignKey);if(!field){field=new Ext.data.Field({name:foreignKey});fields.add(field);fields.isDirty=true}if(oldForeignKey){field=fields.get(oldForeignKey);if(field){fields.isDirty=true;fields.remove(field)}}},applyInstanceName:function(instanceName){if(!instanceName){instanceName=this.getAssociatedName()+"BelongsToInstance"}return instanceName},applyAssociationKey:function(associationKey){if(!associationKey){var associatedName=this.getAssociatedName();associationKey=associatedName[0].toLowerCase()+associatedName.slice(1)}return associationKey},applyGetterName:function(getterName){if(!getterName){var associatedName=this.getAssociatedName();getterName="get"+associatedName[0].toUpperCase()+associatedName.slice(1)}return getterName},applySetterName:function(setterName){if(!setterName){var associatedName=this.getAssociatedName();setterName="set"+associatedName[0].toUpperCase()+associatedName.slice(1)}return setterName},updateGetterName:function(getterName,oldGetterName){var ownerProto=this.getOwnerModel().prototype;if(oldGetterName){delete ownerProto[oldGetterName]}if(getterName){ownerProto[getterName]=this.createGetter()}},updateSetterName:function(setterName,oldSetterName){var ownerProto=this.getOwnerModel().prototype;if(oldSetterName){delete ownerProto[oldSetterName]}if(setterName){ownerProto[setterName]=this.createSetter()}},createSetter:function(){var me=this,foreignKey=me.getForeignKey(),associatedModel=me.getAssociatedModel(),currentOwner,newOwner,store;return function(value,options,scope){var inverse=me.getInverseAssociation(),record=this;if(value&&value.isModel){value=value.getId()}if(Ext.isFunction(options)){options={callback:options,scope:scope||record}}delete record[me.getInstanceName()];currentOwner=Ext.data.Model.cache[Ext.data.Model.generateCacheId(associatedModel.modelName,this.get(foreignKey))];newOwner=Ext.data.Model.cache[Ext.data.Model.generateCacheId(associatedModel.modelName,value)];record.set(foreignKey,value);if(inverse){if(newOwner){if(inverse.getType().toLowerCase()==="hasmany"){store=newOwner[inverse.getName()]();store.add(record)}else{newOwner[inverse.getInstanceName()]=record}}if(currentOwner){if(inverse.getType().toLowerCase()==="hasmany"){store=currentOwner[inverse.getName()]();store.remove(record)}else{delete value[inverse.getInstanceName()]}}}if(newOwner){record[me.getInstanceName()]=newOwner}if(Ext.isObject(options)){return record.save(options)}return record}},createGetter:function(){var me=this,associatedModel=me.getAssociatedModel(),foreignKey=me.getForeignKey(),instanceName=me.getInstanceName();return function(options,scope){options=options||{};var model=this,foreignKeyId=model.get(foreignKey),success,instance,args;instance=model[instanceName];if(!instance){instance=Ext.data.Model.cache[Ext.data.Model.generateCacheId(associatedModel.modelName,foreignKeyId)];if(instance){model[instanceName]=instance}}if(options.reload===true||instance===undefined){if(typeof options=="function"){options={callback:options,scope:scope||model}}success=options.success;options.success=function(rec){model[instanceName]=rec;if(success){success.apply(this,arguments)}};associatedModel.load(foreignKeyId,options)}else{args=[instance];scope=scope||model;Ext.callback(options,scope,args);Ext.callback(options.success,scope,args);Ext.callback(options.failure,scope,args);Ext.callback(options.callback,scope,args);return instance}}},read:function(record,reader,associationData){record[this.getInstanceName()]=reader.read([associationData]).getRecords()[0]},getInverseAssociation:function(){var ownerName=this.getOwnerModel().modelName,foreignKey=this.getForeignKey();return this.getAssociatedModel().associations.findBy(function(assoc){var type=assoc.getType().toLowerCase();return(type==="hasmany"||type==="hasone")&&assoc.getAssociatedModel().modelName===ownerName&&assoc.getForeignKey()===foreignKey})}});Ext.define("Ext.data.association.HasOne",{extend:"Ext.data.association.Association",alternateClassName:"Ext.data.HasOneAssociation",alias:"association.hasone",config:{foreignKey:undefined,getterName:undefined,setterName:undefined,instanceName:undefined},applyForeignKey:function(foreignKey){if(!foreignKey){var inverse=this.getInverseAssociation();if(inverse){foreignKey=inverse.getForeignKey()}else{foreignKey=this.getAssociatedName().toLowerCase()+"_id"}}return foreignKey},updateForeignKey:function(foreignKey,oldForeignKey){var fields=this.getOwnerModel().getFields(),field=fields.get(foreignKey);if(!field){field=new Ext.data.Field({name:foreignKey});fields.add(field);fields.isDirty=true}if(oldForeignKey){field=fields.get(oldForeignKey);if(field){fields.remove(field);fields.isDirty=true}}},applyInstanceName:function(instanceName){if(!instanceName){instanceName=this.getAssociatedName()+"HasOneInstance"}return instanceName},applyAssociationKey:function(associationKey){if(!associationKey){var associatedName=this.getAssociatedName();associationKey=associatedName[0].toLowerCase()+associatedName.slice(1)}return associationKey},applyGetterName:function(getterName){if(!getterName){var associatedName=this.getAssociatedName();getterName="get"+associatedName[0].toUpperCase()+associatedName.slice(1)}return getterName},applySetterName:function(setterName){if(!setterName){var associatedName=this.getAssociatedName();setterName="set"+associatedName[0].toUpperCase()+associatedName.slice(1)}return setterName},updateGetterName:function(getterName,oldGetterName){var ownerProto=this.getOwnerModel().prototype;if(oldGetterName){delete ownerProto[oldGetterName]}if(getterName){ownerProto[getterName]=this.createGetter()}},updateSetterName:function(setterName,oldSetterName){var ownerProto=this.getOwnerModel().prototype;if(oldSetterName){delete ownerProto[oldSetterName]}if(setterName){ownerProto[setterName]=this.createSetter()}},createSetter:function(){var me=this,foreignKey=me.getForeignKey(),instanceName=me.getInstanceName(),associatedModel=me.getAssociatedModel();return function(value,options,scope){var Model=Ext.data.Model,record;if(value&&value.isModel){value=value.getId()}this.set(foreignKey,value);record=Model.cache[Model.generateCacheId(associatedModel.modelName,value)];if(record){this[instanceName]=record}if(Ext.isFunction(options)){options={callback:options,scope:scope||this}}if(Ext.isObject(options)){return this.save(options)}return this}},createGetter:function(){var me=this,associatedModel=me.getAssociatedModel(),foreignKey=me.getForeignKey(),instanceName=me.getInstanceName();return function(options,scope){options=options||{};var model=this,foreignKeyId=model.get(foreignKey),success,instance,args;if(options.reload===true||model[instanceName]===undefined){if(typeof options=="function"){options={callback:options,scope:scope||model}}success=options.success;options.success=function(rec){model[instanceName]=rec;if(success){success.call(this,arguments)}};associatedModel.load(foreignKeyId,options)}else{instance=model[instanceName];args=[instance];scope=scope||model;Ext.callback(options,scope,args);Ext.callback(options.success,scope,args);Ext.callback(options.failure,scope,args);Ext.callback(options.callback,scope,args);return instance}}},read:function(record,reader,associationData){var inverse=this.getInverseAssociation(),newRecord=reader.read([associationData]).getRecords()[0];record[this.getInstanceName()]=newRecord;if(inverse){newRecord[inverse.getInstanceName()]=record}},getInverseAssociation:function(){var ownerName=this.getOwnerModel().modelName;return this.getAssociatedModel().associations.findBy(function(assoc){return assoc.getType().toLowerCase()==="belongsto"&&assoc.getAssociatedModel().modelName===ownerName})}});Ext.define("Ext.data.Error",{config:{field:null,message:""},constructor:function(config){this.initConfig(config)}});Ext.define("Ext.data.Errors",{extend:"Ext.util.Collection",requires:"Ext.data.Error",isValid:function(){return this.length===0},getByField:function(fieldName){var errors=[],error,i;for(i=0;i<this.length;i++){error=this.items[i];if(error.getField()==fieldName){errors.push(error)}}return errors},add:function(){var obj=arguments.length==1?arguments[0]:arguments[1];if(!(obj instanceof Ext.data.Error)){obj=Ext.create("Ext.data.Error",{field:obj.field||obj.name,message:obj.error||obj.message})}return this.callParent([obj])}});Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",mixins:{observable:"Ext.mixin.Observable"},isModel:true,requires:["Ext.util.Collection","Ext.data.Field","Ext.data.identifier.Simple","Ext.data.ModelManager","Ext.data.proxy.Ajax","Ext.data.association.HasMany","Ext.data.association.BelongsTo","Ext.data.association.HasOne","Ext.data.Errors"],config:{idProperty:"id",data:null,fields:undefined,validations:null,associations:null,hasMany:null,hasOne:null,belongsTo:null,proxy:null,identifier:{type:"simple"},clientIdProperty:"clientId",isErased:false,useCache:true},staticConfigs:["idProperty","fields","validations","associations","hasMany","hasOne","belongsTo","clientIdProperty","identifier","useCache","proxy"],statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",cache:{},generateProxyMethod:function(name){return function(){var prototype=this.prototype;return prototype[name].apply(prototype,arguments)}},generateCacheId:function(record,id){var modelName;if(record&&record.isModel){modelName=record.modelName;if(id===undefined){id=record.getId()}}else{modelName=record}return modelName.replace(/\./g,"-").toLowerCase()+"-"+id}},inheritableStatics:{load:function(id,config,scope){var proxy=this.getProxy(),idProperty=this.getIdProperty(),record=null,params={},callback,operation;scope=scope||(config&&config.scope)||this;if(Ext.isFunction(config)){config={callback:config,scope:scope}}params[idProperty]=id;config=Ext.apply({},config);config=Ext.applyIf(config,{action:"read",params:params,model:this});operation=Ext.create("Ext.data.Operation",config);if(!proxy){Ext.Logger.error("You are trying to load a model that doesn't have a Proxy specified")}callback=function(operation){if(operation.wasSuccessful()){record=operation.getRecords()[0]||null;Ext.callback(config.success,scope,[record,operation])}else{Ext.callback(config.failure,scope,[record,operation])}Ext.callback(config.callback,scope,[record,operation])};proxy.read(operation,callback,this)}},editing:false,dirty:false,phantom:false,constructor:function(data,id,raw,convertedData){var me=this,cached=null,useCache=me.getUseCache(),idProperty=me.getIdProperty();me.modified={};me.raw=raw||data||{};me.stores=[];data=data||convertedData||{};if(id||id===0){data[idProperty]=me.internalId=id}id=data[idProperty];if(useCache&&(id||id===0)){cached=Ext.data.Model.cache[Ext.data.Model.generateCacheId(this,id)];if(cached){return cached.mergeData(convertedData||data||{})}}if(convertedData){me.setConvertedData(data)}else{me.setData(data)}id=me.data[idProperty];if(!id&&id!==0){me.data[idProperty]=me.internalId=me.id=me.getIdentifier().generate(me);me.phantom=true;if(this.associations.length){this.handleInlineAssociationData(data)}}else{me.id=me.getIdentifier().generate(me)}if(useCache){Ext.data.Model.cache[Ext.data.Model.generateCacheId(me)]=me}if(this.init&&typeof this.init=="function"){this.init()}},mergeData:function(rawData){var me=this,fields=me.getFields().items,ln=fields.length,modified=me.modified,data=me.data,i,field,fieldName,value,id;for(i=0;i<ln;i++){field=fields[i];fieldName=field._name;value=rawData[fieldName];if(value!==undefined&&!modified.hasOwnProperty(fieldName)){if(field._convert){value=field._convert(value,me)}data[fieldName]=value}}if(me.associations.length){me.handleInlineAssociationData(rawData)}return this},setData:function(rawData){var me=this,fields=me.fields.items,ln=fields.length,isArray=Ext.isArray(rawData),data=me._data=me.data={},i,field,name,value,convert,id;if(!rawData){return me}for(i=0;i<ln;i++){field=fields[i];name=field._name;convert=field._convert;if(isArray){value=rawData[i]}else{value=rawData[name];if(typeof value=="undefined"){value=field._defaultValue}}if(convert){value=field._convert(value,me)}data[name]=value}id=me.getId();if(me.associations.length&&(id||id===0)){me.handleInlineAssociationData(rawData)}return me},handleInlineAssociationData:function(data){var associations=this.associations.items,ln=associations.length,i,association,associationData,reader,proxy,associationKey;for(i=0;i<ln;i++){association=associations[i];associationKey=association.getAssociationKey();associationData=data[associationKey];if(associationData){reader=association.getReader();if(!reader){proxy=association.getAssociatedModel().getProxy();if(proxy){reader=proxy.getReader()}else{reader=new Ext.data.JsonReader({model:association.getAssociatedModel()})}}association.read(this,reader,associationData)}}},setId:function(id){var currentId=this.getId();this.set(this.getIdProperty(),id);this.internalId=id;if(this.getUseCache()){delete Ext.data.Model.cache[Ext.data.Model.generateCacheId(this,currentId)];Ext.data.Model.cache[Ext.data.Model.generateCacheId(this)]=this}},getId:function(){return this.get(this.getIdProperty())},setConvertedData:function(data){this._data=this.data=data;return this},get:function(fieldName){return this.data[fieldName]},set:function(fieldName,value){var me=this,fieldMap=me.fields.map,modified=me.modified,notEditing=!me.editing,modifiedCount=0,modifiedFieldNames=[],field,key,i,currentValue,ln,convert;if(arguments.length==1){for(key in fieldName){if(fieldName.hasOwnProperty(key)){field=fieldMap[key];if(field&&field.hasCustomConvert()){modifiedFieldNames.push(key);continue}if(!modifiedCount&&notEditing){me.beginEdit()}++modifiedCount;me.set(key,fieldName[key])}}ln=modifiedFieldNames.length;if(ln){if(!modifiedCount&&notEditing){me.beginEdit()}modifiedCount+=ln;for(i=0;i<ln;i++){field=modifiedFieldNames[i];me.set(field,fieldName[field])}}if(notEditing&&modifiedCount){me.endEdit(false,modifiedFieldNames)}}else{field=fieldMap[fieldName];convert=field&&field.getConvert();if(convert){value=convert.call(field,value,me)}currentValue=me.data[fieldName];me.data[fieldName]=value;if(field&&!me.isEqual(currentValue,value)){if(modified.hasOwnProperty(fieldName)){if(me.isEqual(modified[fieldName],value)){delete modified[fieldName];me.dirty=false;for(key in modified){if(modified.hasOwnProperty(key)){me.dirty=true;break}}}}else{me.dirty=true;modified[fieldName]=currentValue}}if(notEditing){me.afterEdit([fieldName],modified)}}},isEqual:function(a,b){if(Ext.isDate(a)&&Ext.isDate(b)){return a.getTime()===b.getTime()}return a===b},beginEdit:function(){var me=this;if(!me.editing){me.editing=true;me.dirtySave=me.dirty;me.dataSave=Ext.apply({},me.data);me.modifiedSave=Ext.apply({},me.modified)}},cancelEdit:function(){var me=this;if(me.editing){me.editing=false;me.modified=me.modifiedSave;me.data=me.dataSave;me.dirty=me.dirtySave;delete me.modifiedSave;delete me.dataSave;delete me.dirtySave}},endEdit:function(silent,modifiedFieldNames){var me=this;if(me.editing){me.editing=false;if(silent!==true&&(me.changedWhileEditing())){me.afterEdit(modifiedFieldNames||Ext.Object.getKeys(this.modified),this.modified)}delete me.modifiedSave;delete me.dataSave;delete me.dirtySave}},changedWhileEditing:function(){var me=this,saved=me.dataSave,data=me.data,key;for(key in data){if(data.hasOwnProperty(key)){if(!me.isEqual(data[key],saved[key])){return true}}}return false},getChanges:function(){var modified=this.modified,changes={},field;for(field in modified){if(modified.hasOwnProperty(field)){changes[field]=this.get(field)}}return changes},isModified:function(fieldName){return this.modified.hasOwnProperty(fieldName)},save:function(options,scope){var me=this,action=me.phantom?"create":"update",proxy=me.getProxy(),operation,callback;if(!proxy){Ext.Logger.error("You are trying to save a model instance that doesn't have a Proxy specified")}options=options||{};scope=scope||me;if(Ext.isFunction(options)){options={callback:options,scope:scope}}Ext.applyIf(options,{records:[me],action:action,model:me.self});operation=Ext.create("Ext.data.Operation",options);callback=function(operation){if(operation.wasSuccessful()){Ext.callback(options.success,scope,[me,operation])}else{Ext.callback(options.failure,scope,[me,operation])}Ext.callback(options.callback,scope,[me,operation])};proxy[action](operation,callback,me);return me},erase:function(options,scope){var me=this,proxy=this.getProxy(),operation,callback;if(!proxy){Ext.Logger.error("You are trying to erase a model instance that doesn't have a Proxy specified")}options=options||{};scope=scope||me;if(Ext.isFunction(options)){options={callback:options,scope:scope}}Ext.applyIf(options,{records:[me],action:"destroy",model:this.self});operation=Ext.create("Ext.data.Operation",options);callback=function(operation){if(operation.wasSuccessful()){Ext.callback(options.success,scope,[me,operation])}else{Ext.callback(options.failure,scope,[me,operation])}Ext.callback(options.callback,scope,[me,operation])};proxy.destroy(operation,callback,me);return me},reject:function(silent){var me=this,modified=me.modified,field;for(field in modified){if(modified.hasOwnProperty(field)){if(typeof modified[field]!="function"){me.data[field]=modified[field]}}}me.dirty=false;me.editing=false;me.modified={};if(silent!==true){me.afterReject()}},commit:function(silent){var me=this,modified=this.modified;me.phantom=me.dirty=me.editing=false;me.modified={};if(silent!==true){me.afterCommit(modified)}},afterEdit:function(modifiedFieldNames,modified){this.notifyStores("afterEdit",modifiedFieldNames,modified)},afterReject:function(){this.notifyStores("afterReject")},afterCommit:function(modified){this.notifyStores("afterCommit",Ext.Object.getKeys(modified||{}),modified)},notifyStores:function(fn){var args=Ext.Array.clone(arguments),stores=this.stores,ln=stores.length,i,store;args[0]=this;for(i=0;i<ln;++i){store=stores[i];if(store!==undefined&&typeof store[fn]=="function"){store[fn].apply(store,args)}}},copy:function(newId){var me=this,idProperty=me.getIdProperty(),raw=Ext.apply({},me.raw),data=Ext.apply({},me.data);delete raw[idProperty];delete data[idProperty];return new me.self(null,newId,raw,data)},getData:function(includeAssociated){var data=this.data;if(includeAssociated===true){Ext.apply(data,this.getAssociatedData())}return data},getAssociatedData:function(){return this.prepareAssociatedData(this,[],null)},prepareAssociatedData:function(record,ids,associationType){var associations=record.associations.items,associationCount=associations.length,associationData={},associatedStore,associationName,associatedRecords,associatedRecord,associatedRecordCount,association,id,i,j,type,allow;for(i=0;i<associationCount;i++){association=associations[i];associationName=association.getName();type=association.getType();allow=true;if(associationType){allow=type==associationType}if(allow&&type.toLowerCase()=="hasmany"){associatedStore=record[association.getStoreName()];associationData[associationName]=[];if(associatedStore&&associatedStore.getCount()>0){associatedRecords=associatedStore.data.items;associatedRecordCount=associatedRecords.length;for(j=0;j<associatedRecordCount;j++){associatedRecord=associatedRecords[j];id=associatedRecord.id;if(Ext.Array.indexOf(ids,id)==-1){ids.push(id);associationData[associationName][j]=associatedRecord.getData();Ext.apply(associationData[associationName][j],this.prepareAssociatedData(associatedRecord,ids,associationType))}}}}else{if(allow&&(type.toLowerCase()=="belongsto"||type.toLowerCase()=="hasone")){associatedRecord=record[association.getInstanceName()];if(associatedRecord!==undefined){id=associatedRecord.id;if(Ext.Array.indexOf(ids,id)===-1){ids.push(id);associationData[associationName]=associatedRecord.getData();Ext.apply(associationData[associationName],this.prepareAssociatedData(associatedRecord,ids,associationType))}}}}}return associationData},join:function(store){Ext.Array.include(this.stores,store)},unjoin:function(store){Ext.Array.remove(this.stores,store)},setDirty:function(){var me=this,name;me.dirty=true;me.fields.each(function(field){if(field.getPersist()){name=field.getName();me.modified[name]=me.get(name)}})},validate:function(){var errors=Ext.create("Ext.data.Errors"),validations=this.getValidations().items,validators=Ext.data.Validations,length,validation,field,valid,type,i;if(validations){length=validations.length;for(i=0;i<length;i++){validation=validations[i];field=validation.field||validation.name;type=validation.type;valid=validators[type](validation,this.get(field));if(!valid){errors.add(Ext.create("Ext.data.Error",{field:field,message:validation.message||validators.getMessage(type)}))}}}return errors},isValid:function(){return this.validate().isValid()},toUrl:function(){var pieces=this.$className.split("."),name=pieces[pieces.length-1].toLowerCase();return name+"/"+this.getId()},destroy:function(){var me=this;me.notifyStores("afterErase",me);if(me.getUseCache()){delete Ext.data.Model.cache[Ext.data.Model.generateCacheId(me)]}me.raw=me.stores=me.modified=null;me.callParent(arguments)},markDirty:function(){if(Ext.isDefined(Ext.Logger)){Ext.Logger.deprecate("Ext.data.Model: markDirty has been deprecated. Use setDirty instead.")}return this.setDirty.apply(this,arguments)},applyProxy:function(proxy,currentProxy){return Ext.factory(proxy,Ext.data.Proxy,currentProxy,"proxy")},updateProxy:function(proxy){if(proxy){proxy.setModel(this.self)}},applyAssociations:function(associations){if(associations){this.addAssociations(associations,"hasMany")}},applyBelongsTo:function(belongsTo){if(belongsTo){this.addAssociations(belongsTo,"belongsTo")}},applyHasMany:function(hasMany){if(hasMany){this.addAssociations(hasMany,"hasMany")}},applyHasOne:function(hasOne){if(hasOne){this.addAssociations(hasOne,"hasOne")}},addAssociations:function(associations,defaultType){var ln,i,association,name=this.self.modelName,associationsCollection=this.self.associations,onCreatedFn;associations=Ext.Array.from(associations);for(i=0,ln=associations.length;i<ln;i++){association=associations[i];if(!Ext.isObject(association)){association={model:association}}Ext.applyIf(association,{type:defaultType,ownerModel:name,associatedModel:association.model});delete association.model;onCreatedFn=Ext.Function.bind(function(associationName){associationsCollection.add(Ext.data.association.Association.create(this))},association);Ext.ClassManager.onCreated(onCreatedFn,this,(typeof association.associatedModel==="string")?association.associatedModel:Ext.getClassName(association.associatedModel))}},applyValidations:function(validations){if(validations){if(!Ext.isArray(validations)){validations=[validations]}this.addValidations(validations)}},addValidations:function(validations){this.self.validations.addAll(validations)},applyFields:function(fields){var superFields=this.superclass.fields;if(superFields){fields=superFields.items.concat(fields||[])}return fields||[]},updateFields:function(fields){var ln=fields.length,me=this,prototype=me.self.prototype,idProperty=this.getIdProperty(),idField,fieldsCollection,field,i;fieldsCollection=me._fields=me.fields=new Ext.util.Collection(prototype.getFieldName);for(i=0;i<ln;i++){field=fields[i];if(!field.isField){field=new Ext.data.Field(fields[i])}fieldsCollection.add(field)}idField=fieldsCollection.get(idProperty);if(!idField){fieldsCollection.add(new Ext.data.Field(idProperty))}else{idField.setType("auto")}fieldsCollection.addSorter(prototype.sortConvertFields)},applyIdentifier:function(identifier){if(typeof identifier==="string"){identifier={type:identifier}}return Ext.factory(identifier,Ext.data.identifier.Simple,this.getIdentifier(),"data.identifier")},getFieldName:function(field){return field.getName()},sortConvertFields:function(field1,field2){var f1SpecialConvert=field1.hasCustomConvert(),f2SpecialConvert=field2.hasCustomConvert();if(f1SpecialConvert&&!f2SpecialConvert){return 1}if(!f1SpecialConvert&&f2SpecialConvert){return -1}return 0},onClassExtended:function(cls,data,hooks){var onBeforeClassCreated=hooks.onBeforeCreated,Model=this,prototype=Model.prototype,configNameCache=Ext.Class.configNameCache,staticConfigs=prototype.staticConfigs.concat(data.staticConfigs||[]),defaultConfig=prototype.config,config=data.config||{},key;data.config=config;hooks.onBeforeCreated=function(cls,data){var dependencies=[],prototype=cls.prototype,statics={},config=prototype.config,staticConfigsLn=staticConfigs.length,copyMethods=["set","get"],copyMethodsLn=copyMethods.length,associations=config.associations||[],name=Ext.getClassName(cls),key,methodName,i,j,ln;for(i=0;i<staticConfigsLn;i++){key=staticConfigs[i];for(j=0;j<copyMethodsLn;j++){methodName=configNameCache[key][copyMethods[j]];if(methodName in prototype){statics[methodName]=Model.generateProxyMethod(methodName)}}}cls.addStatics(statics);cls.modelName=name;prototype.modelName=name;if(config.belongsTo){dependencies.push("association.belongsto")}if(config.hasMany){dependencies.push("association.hasmany")}if(config.hasOne){dependencies.push("association.hasone")}for(i=0,ln=associations.length;i<ln;++i){dependencies.push("association."+associations[i].type.toLowerCase())}if(config.identifier){if(typeof config.identifier==="string"){dependencies.push("data.identifier."+config.identifier)}else{if(typeof config.identifier.type==="string"){dependencies.push("data.identifier."+config.identifier.type)}}}if(config.proxy){if(typeof config.proxy==="string"){dependencies.push("proxy."+config.proxy)}else{if(typeof config.proxy.type==="string"){dependencies.push("proxy."+config.proxy.type)}}}if(config.validations){dependencies.push("Ext.data.Validations")}Ext.require(dependencies,function(){Ext.Function.interceptBefore(hooks,"onCreated",function(){Ext.data.ModelManager.registerType(name,cls);var superCls=cls.prototype.superclass;cls.prototype.associations=cls.associations=cls.prototype._associations=(superCls&&superCls.associations)?superCls.associations.clone():new Ext.util.Collection(function(association){return association.getName()});cls.prototype.validations=cls.validations=cls.prototype._validations=(superCls&&superCls.validations)?superCls.validations.clone():new Ext.util.Collection(function(validation){return validation.field?(validation.field+"-"+validation.type):(validation.name+"-"+validation.type)});cls.prototype=Ext.Object.chain(cls.prototype);cls.prototype.initConfig.call(cls.prototype,config);delete cls.prototype.initConfig});onBeforeClassCreated.call(Model,cls,data,hooks)})}}});Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",isGrouper:true,config:{groupFn:null,sortProperty:null,sorterFn:function(item1,item2){var property=this.getSortProperty(),groupFn,group1,group2,modifier;groupFn=this.getGroupFn();group1=groupFn.call(this,item1);group2=groupFn.call(this,item2);if(property){if(group1!==group2){return this.defaultSortFn.call(this,item1,item2)}else{return 0}}return(group1>group2)?1:((group1<group2)?-1:0)}},defaultSortFn:function(item1,item2){var me=this,transform=me._transform,root=me._root,value1,value2,property=me._sortProperty;if(root!==null){item1=item1[root];item2=item2[root]}value1=item1[property];value2=item2[property];if(transform){value1=transform(value1);value2=transform(value2)}return value1>value2?1:(value1<value2?-1:0)},updateProperty:function(property){this.setGroupFn(this.standardGroupFn)},standardGroupFn:function(item){var root=this.getRoot(),property=this.getProperty(),data=item;if(root){data=item[root]}return data[property]},getGroupString:function(item){var group=this.getGroupFn().call(this,item);return typeof group!="undefined"?group.toString():""}});Ext.define("Ext.data.Store",{alias:"store.store",extend:"Ext.Evented",requires:["Ext.util.Collection","Ext.data.Operation","Ext.data.proxy.Memory","Ext.data.Model","Ext.data.StoreManager","Ext.util.Grouper"],statics:{create:function(store){if(!store.isStore){if(!store.type){store.type="store"}store=Ext.createByAlias("store."+store.type,store)}return store}},isStore:true,config:{storeId:undefined,data:null,autoLoad:null,autoSync:false,model:undefined,proxy:undefined,fields:null,remoteSort:false,remoteFilter:false,remoteGroup:false,filters:null,sorters:null,grouper:null,groupField:null,groupDir:null,getGroupString:null,pageSize:25,totalCount:null,clearOnPageLoad:true,modelDefaults:{},autoDestroy:false,syncRemovedRecords:true,destroyRemovedRecords:true},currentPage:1,constructor:function(config){config=config||{};this.data=this._data=this.createDataCollection();this.data.setSortRoot("data");this.data.setFilterRoot("data");this.removed=[];if(config.id&&!config.storeId){config.storeId=config.id;delete config.id}this.initConfig(config);this.callParent(arguments)},createDataCollection:function(){return new Ext.util.Collection(function(record){return record.getId()})},applyStoreId:function(storeId){if(storeId===undefined||storeId===null){storeId=this.getUniqueId()}return storeId},updateStoreId:function(storeId,oldStoreId){if(oldStoreId){Ext.data.StoreManager.unregister(this)}if(storeId){Ext.data.StoreManager.register(this)}},applyModel:function(model){if(typeof model=="string"){var registeredModel=Ext.data.ModelManager.getModel(model);if(!registeredModel){Ext.Logger.error('Model with name "'+model+'" does not exist.')}model=registeredModel}if(model&&!model.prototype.isModel&&Ext.isObject(model)){model=Ext.data.ModelManager.registerType(model.storeId||model.id||Ext.id(),model)}if(!model){var fields=this.getFields(),data=this.config.data;if(!fields&&data&&data.length){fields=Ext.Object.getKeys(data[0])}if(fields){model=Ext.define("Ext.data.Store.ImplicitModel-"+(this.getStoreId()||Ext.id()),{extend:"Ext.data.Model",config:{fields:fields,proxy:this.getProxy()}});this.implicitModel=true}}if(!model&&this.getProxy()){model=this.getProxy().getModel()}if(!model){Ext.Logger.warn("Unless you define your model through metadata, a store needs to have a model defined on either itself or on its proxy")}return model},updateModel:function(model){var proxy=this.getProxy();if(proxy&&!proxy.getModel()){proxy.setModel(model)}},applyProxy:function(proxy,currentProxy){proxy=Ext.factory(proxy,Ext.data.Proxy,currentProxy,"proxy");if(!proxy&&this.getModel()){proxy=this.getModel().getProxy()}if(!proxy){proxy=new Ext.data.proxy.Memory({model:this.getModel()})}if(proxy.isMemoryProxy){this.setSyncRemovedRecords(false)}return proxy},updateProxy:function(proxy){if(proxy){if(!proxy.getModel()){proxy.setModel(this.getModel())}proxy.on("metachange",this.onMetaChange,this)}},applyData:function(data){var me=this,proxy;if(data){proxy=me.getProxy();if(proxy instanceof Ext.data.proxy.Memory){proxy.setData(data);me.load();return}else{me.removeAll(true);me.fireEvent("clear",me);me.suspendEvents();me.add(data);me.resumeEvents();me.dataLoaded=true}}else{me.removeAll(true);me.fireEvent("clear",me)}me.fireEvent("refresh",me,me.data)},clearData:function(){this.setData(null)},addData:function(data){var reader=this.getProxy().getReader(),resultSet=reader.read(data),records=resultSet.getRecords();this.add(records)},updateAutoLoad:function(autoLoad){var proxy=this.getProxy();if(autoLoad&&(proxy&&!proxy.isMemoryProxy)){this.load(Ext.isObject(autoLoad)?autoLoad:null)}},isAutoLoading:function(){var proxy=this.getProxy();return(this.getAutoLoad()||(proxy&&proxy.isMemoryProxy)||this.dataLoaded)},updateGroupField:function(groupField){var grouper=this.getGrouper();if(groupField){if(!grouper){this.setGrouper({property:groupField,direction:this.getGroupDir()||"ASC"})}else{grouper.setProperty(groupField)}}else{if(grouper){this.setGrouper(null)}}},updateGroupDir:function(groupDir){var grouper=this.getGrouper();if(grouper){grouper.setDirection(groupDir)}},applyGetGroupString:function(getGroupStringFn){var grouper=this.getGrouper();if(getGroupStringFn){Ext.Logger.warn("Specifying getGroupString on a store has been deprecated. Please use grouper: {groupFn: yourFunction}");if(grouper){grouper.setGroupFn(getGroupStringFn)}else{this.setGrouper({groupFn:getGroupStringFn})}}else{if(grouper){this.setGrouper(null)}}},applyGrouper:function(grouper){if(typeof grouper=="string"){grouper={property:grouper}}else{if(typeof grouper=="function"){grouper={groupFn:grouper}}}grouper=Ext.factory(grouper,Ext.util.Grouper,this.getGrouper());return grouper},updateGrouper:function(grouper,oldGrouper){var data=this.data;if(oldGrouper){data.removeSorter(oldGrouper);if(!grouper){data.getSorters().removeSorter("isGrouper")}}if(grouper){data.insertSorter(0,grouper);if(!oldGrouper){data.getSorters().addSorter({direction:"DESC",property:"isGrouper",transform:function(value){return(value===true)?1:-1}})}}},isGrouped:function(){return !!this.getGrouper()},updateSorters:function(sorters){var grouper=this.getGrouper(),data=this.data,autoSort=data.getAutoSort();data.setAutoSort(false);data.setSorters(sorters);if(grouper){data.insertSorter(0,grouper)}this.updateSortTypes();data.setAutoSort(autoSort)},updateSortTypes:function(){var model=this.getModel(),fields=model&&model.getFields(),data=this.data;if(fields){data.getSorters().each(function(sorter){var property=sorter.getProperty(),field;if(!sorter.isGrouper&&property&&!sorter.getTransform()){field=fields.get(property);if(field){sorter.setTransform(field.getSortType())}}})}},updateFilters:function(filters){this.data.setFilters(filters)},add:function(records){if(!Ext.isArray(records)){records=Array.prototype.slice.call(arguments)}return this.insert(this.data.length,records)},insert:function(index,records){if(!Ext.isArray(records)){records=Array.prototype.slice.call(arguments,1)}var me=this,sync=false,data=this.data,ln=records.length,Model=this.getModel(),modelDefaults=me.getModelDefaults(),added=false,i,record;records=records.slice();for(i=0;i<ln;i++){record=records[i];if(!record.isModel){record=new Model(record)}else{if(this.removed.indexOf(record)!=-1){Ext.Array.remove(this.removed,record)}}record.set(modelDefaults);record.join(me);records[i]=record;sync=sync||(record.phantom===true)}if(records.length===1){added=data.insert(index,records[0]);if(added){added=[added]}}else{added=data.insertAll(index,records)}if(added){me.fireEvent("addrecords",me,added)}if(me.getAutoSync()&&sync){me.sync()}return records},remove:function(records){if(records.isModel){records=[records]}var me=this,sync=false,i=0,autoSync=this.getAutoSync(),syncRemovedRecords=me.getSyncRemovedRecords(),destroyRemovedRecords=this.getDestroyRemovedRecords(),ln=records.length,indices=[],removed=[],isPhantom,items=me.data.items,record,index,j;for(;i<ln;i++){record=records[i];if(me.data.contains(record)){isPhantom=(record.phantom===true);index=items.indexOf(record);if(index!==-1){removed.push(record);indices.push(index)}record.unjoin(me);me.data.remove(record);if(destroyRemovedRecords&&!syncRemovedRecords&&!record.stores.length){record.destroy()}else{if(!isPhantom&&syncRemovedRecords){me.removed.push(record)}}sync=sync||!isPhantom}}me.fireEvent("removerecords",me,removed,indices);if(autoSync&&sync){me.sync()}},removeAt:function(index){var record=this.getAt(index);if(record){this.remove(record)}},removeAll:function(silent){if(silent!==true&&this.eventFiringSuspended!==true){this.fireAction("clear",[this],"doRemoveAll")}else{this.doRemoveAll.call(this,true)}},doRemoveAll:function(silent){var me=this,destroyRemovedRecords=this.getDestroyRemovedRecords(),syncRemovedRecords=this.getSyncRemovedRecords(),records=me.data.all.slice(),ln=records.length,i,record;for(i=0;i<ln;i++){record=records[i];record.unjoin(me);if(destroyRemovedRecords&&!syncRemovedRecords&&!record.stores.length){record.destroy()}else{if(record.phantom!==true&&syncRemovedRecords){me.removed.push(record)}}}me.data.clear();if(silent!==true){me.fireEvent("refresh",me,me.data)}if(me.getAutoSync()){this.sync()}},each:function(fn,scope){this.data.each(fn,scope)},getCount:function(){return this.data.items.length||0},getAllCount:function(){return this.data.all.length||0},getAt:function(index){return this.data.getAt(index)},getRange:function(start,end){return this.data.getRange(start,end)},getById:function(id){return this.data.findBy(function(record){return record.getId()==id})},indexOf:function(record){return this.data.indexOf(record)},indexOfId:function(id){return this.data.indexOfKey(id)},afterEdit:function(record,modifiedFieldNames,modified){var me=this,data=me.data,currentId=modified[record.getIdProperty()]||record.getId(),currentIndex=data.keys.indexOf(currentId),newIndex;if(currentIndex===-1&&data.map[currentId]===undefined){return}if(me.getAutoSync()){me.sync()}if(currentId!==record.getId()){data.replace(currentId,record)}else{data.replace(record)}newIndex=data.indexOf(record);if(currentIndex===-1&&newIndex!==-1){me.fireEvent("addrecords",me,[record])}else{if(currentIndex!==-1&&newIndex===-1){me.fireEvent("removerecords",me,[record],[currentIndex])}else{if(newIndex!==-1){me.fireEvent("updaterecord",me,record,newIndex,currentIndex,modifiedFieldNames,modified)}}}},afterReject:function(record){var index=this.data.indexOf(record);this.fireEvent("updaterecord",this,record,index,index,[],{})},afterCommit:function(record,modifiedFieldNames,modified){var me=this,data=me.data,currentId=modified[record.getIdProperty()]||record.getId(),currentIndex=data.keys.indexOf(currentId),newIndex;if(currentIndex===-1&&data.map[currentId]===undefined){return}if(currentId!==record.getId()){data.replace(currentId,record)}else{data.replace(record)}newIndex=data.indexOf(record);if(currentIndex===-1&&newIndex!==-1){me.fireEvent("addrecords",me,[record])}else{if(currentIndex!==-1&&newIndex===-1){me.fireEvent("removerecords",me,[record],[currentIndex])}else{if(newIndex!==-1){me.fireEvent("updaterecord",me,record,newIndex,currentIndex,modifiedFieldNames,modified)}}}},afterErase:function(record){var me=this,data=me.data,index=data.indexOf(record);if(index!==-1){data.remove(record);me.fireEvent("removerecords",me,[record],[index])}},updateRemoteFilter:function(remoteFilter){this.data.setAutoFilter(!remoteFilter)},updateRemoteSort:function(remoteSort){this.data.setAutoSort(!remoteSort)},sort:function(sorters,defaultDirection,where){var data=this.data,grouper=this.getGrouper(),autoSort=data.getAutoSort();if(sorters){data.setAutoSort(false);if(typeof where==="string"){if(where=="prepend"){data.insertSorters(grouper?1:0,sorters,defaultDirection)}else{data.addSorters(sorters,defaultDirection)}}else{data.setSorters(null);if(grouper){data.addSorters(grouper)}data.addSorters(sorters,defaultDirection)}this.updateSortTypes();data.setAutoSort(autoSort)}if(!this.getRemoteSort()){if(!sorters){this.data.sort()}this.fireEvent("sort",this,this.data,this.data.getSorters());if(data.length){this.fireEvent("refresh",this,this.data)}}},filter:function(property,value,anyMatch,caseSensitive){var data=this.data,filter=null;if(property){if(Ext.isFunction(property)){filter={filterFn:property}}else{if(Ext.isArray(property)||property.isFilter){filter=property}else{filter={property:property,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive,id:property}}}}if(this.getRemoteFilter()){data.addFilters(filter)}else{data.filter(filter);this.fireEvent("filter",this,data,data.getFilters());this.fireEvent("refresh",this,data)}},filterBy:function(fn,scope){var me=this,data=me.data,ln=data.length;data.filter({filterFn:function(record){return fn.call(scope||me,record,record.getId())}});this.fireEvent("filter",this,data,data.getFilters());if(data.length!==ln){this.fireEvent("refresh",this,data)}},queryBy:function(fn,scope){return this.data.filterBy(fn,scope||this)},clearFilter:function(suppressEvent){var ln=this.data.length;if(suppressEvent){this.suspendEvents()}this.data.setFilters(null);if(suppressEvent){this.resumeEvents()}else{if(ln!==this.data.length){this.fireEvent("refresh",this,this.data)}}},isFiltered:function(){return this.data.filtered},isSorted:function(){return this.data.sorted},getSorters:function(){var sorters=this.data.getSorters();return(sorters)?sorters.items:[]},getFilters:function(){var filters=this.data.getFilters();return(filters)?filters.items:[]},getGroups:function(requestGroupString){var records=this.data.items,length=records.length,grouper=this.getGrouper(),groups=[],pointers={},record,groupStr,group,i;if(!grouper){Ext.Logger.error("Trying to get groups for a store that has no grouper")}for(i=0;i<length;i++){record=records[i];groupStr=grouper.getGroupString(record);group=pointers[groupStr];if(group===undefined){group={name:groupStr,children:[]};groups.push(group);pointers[groupStr]=group}group.children.push(record)}return requestGroupString?pointers[requestGroupString]:groups},getGroupString:function(record){var grouper=this.getGrouper();if(grouper){return grouper.getGroupString(record)}return null},find:function(fieldName,value,startIndex,anyMatch,caseSensitive,exactMatch){var filter=Ext.create("Ext.util.Filter",{property:fieldName,value:value,anyMatch:anyMatch,caseSensitive:caseSensitive,exactMatch:exactMatch,root:"data"});return this.data.findIndexBy(filter.getFilterFn(),null,startIndex)},findRecord:function(){var me=this,index=me.find.apply(me,arguments);return index!==-1?me.getAt(index):null},findExact:function(fieldName,value,startIndex){return this.data.findIndexBy(function(record){return record.get(fieldName)===value},this,startIndex)},findBy:function(fn,scope,startIndex){return this.data.findIndexBy(fn,scope,startIndex)},load:function(options,scope){var me=this,operation,currentPage=me.currentPage,pageSize=me.getPageSize();options=options||{};if(Ext.isFunction(options)){options={callback:options,scope:scope||this}}if(me.getRemoteSort()){options.sorters=options.sorters||this.getSorters()}if(me.getRemoteFilter()){options.filters=options.filters||this.getFilters()}if(me.getRemoteGroup()){options.grouper=options.grouper||this.getGrouper()}Ext.applyIf(options,{page:currentPage,start:(currentPage-1)*pageSize,limit:pageSize,addRecords:false,action:"read",model:this.getModel()});operation=Ext.create("Ext.data.Operation",options);if(me.fireEvent("beforeload",me,operation)!==false){me.loading=true;me.getProxy().read(operation,me.onProxyLoad,me)}return me},isLoading:function(){return Boolean(this.loading)},isLoaded:function(){return Boolean(this.loaded)},sync:function(){var me=this,operations={},toCreate=me.getNewRecords(),toUpdate=me.getUpdatedRecords(),toDestroy=me.getRemovedRecords(),needsSync=false;if(toCreate.length>0){operations.create=toCreate;needsSync=true}if(toUpdate.length>0){operations.update=toUpdate;needsSync=true}if(toDestroy.length>0){operations.destroy=toDestroy;needsSync=true}if(needsSync&&me.fireEvent("beforesync",this,operations)!==false){me.getProxy().batch({operations:operations,listeners:me.getBatchListeners()})}return{added:toCreate,updated:toUpdate,removed:toDestroy}},first:function(){return this.data.first()},last:function(){return this.data.last()},sum:function(field){var total=0,i=0,records=this.data.items,len=records.length;for(;i<len;++i){total+=records[i].get(field)}return total},min:function(field){var i=1,records=this.data.items,len=records.length,value,min;if(len>0){min=records[0].get(field)}for(;i<len;++i){value=records[i].get(field);if(value<min){min=value}}return min},max:function(field){var i=1,records=this.data.items,len=records.length,value,max;if(len>0){max=records[0].get(field)}for(;i<len;++i){value=records[i].get(field);if(value>max){max=value}}return max},average:function(field){var i=0,records=this.data.items,len=records.length,sum=0;if(records.length>0){for(;i<len;++i){sum+=records[i].get(field)}return sum/len}return 0},getBatchListeners:function(){return{scope:this,exception:this.onBatchException,complete:this.onBatchComplete}},onBatchComplete:function(batch){var me=this,operations=batch.operations,length=operations.length,i;for(i=0;i<length;i++){me.onProxyWrite(operations[i])}},onBatchException:function(batch,operation){},onProxyLoad:function(operation){var me=this,records=operation.getRecords(),resultSet=operation.getResultSet(),successful=operation.wasSuccessful();if(resultSet){me.setTotalCount(resultSet.getTotal())}if(successful){this.fireAction("datarefresh",[this,this.data,operation],"doDataRefresh")}me.loaded=true;me.loading=false;me.fireEvent("load",this,records,successful,operation);Ext.callback(operation.getCallback(),operation.getScope()||me,[records,operation,successful])},doDataRefresh:function(store,data,operation){var records=operation.getRecords(),me=this,destroyRemovedRecords=me.getDestroyRemovedRecords(),currentRecords=data.all.slice(),ln=currentRecords.length,ln2=records.length,ids={},i,record;if(operation.getAddRecords()!==true){for(i=0;i<ln2;i++){ids[records[i].id]=true}for(i=0;i<ln;i++){record=currentRecords[i];record.unjoin(me);if(ids[record.id]!==true&&destroyRemovedRecords&&!record.stores.length){record.destroy()}}data.clear();me.fireEvent("clear",me)}if(records&&records.length){me.suspendEvents();me.add(records);me.resumeEvents()}me.fireEvent("refresh",me,data)},onProxyWrite:function(operation){var me=this,success=operation.wasSuccessful(),records=operation.getRecords();switch(operation.getAction()){case"create":me.onCreateRecords(records,operation,success);break;case"update":me.onUpdateRecords(records,operation,success);break;case"destroy":me.onDestroyRecords(records,operation,success);break}if(success){me.fireEvent("write",me,operation)}Ext.callback(operation.getCallback(),operation.getScope()||me,[records,operation,success])},onCreateRecords:function(records,operation,success){},onUpdateRecords:function(records,operation,success){},onDestroyRecords:function(records,operation,success){this.removed=[]},onMetaChange:function(data){var model=this.getProxy().getModel();if(!this.getModel()&&model){this.setModel(model)}this.fireEvent("metachange",this,data)},getNewRecords:function(){return this.data.filterBy(function(item){return item.phantom===true&&item.isValid()}).items},getUpdatedRecords:function(){return this.data.filterBy(function(item){return item.dirty===true&&item.phantom!==true&&item.isValid()}).items},getRemovedRecords:function(){return this.removed},loadPage:function(page,options,scope){if(typeof options==="function"){options={callback:options,scope:scope||this}}var me=this,pageSize=me.getPageSize(),clearOnPageLoad=me.getClearOnPageLoad();options=Ext.apply({},options);me.currentPage=page;me.load(Ext.applyIf(options,{page:page,start:(page-1)*pageSize,limit:pageSize,addRecords:!clearOnPageLoad}))},nextPage:function(options){this.loadPage(this.currentPage+1,options)},previousPage:function(options){this.loadPage(this.currentPage-1,options)},destroy:function(){Ext.data.StoreManager.unregister(this);this.callParent(arguments)}});Ext.define("Ext.chart.AbstractChart",{extend:"Ext.draw.Component",requires:["Ext.chart.series.Series","Ext.chart.interactions.Abstract","Ext.chart.axis.Axis","Ext.data.StoreManager","Ext.chart.Legend","Ext.data.Store"],version:"2.0.0",viewBox:false,delegationRegex:/^item([a-z]+)$/i,domEvents:/click|focus|blur|paste|input|mousemove|mousedown|mouseup|mouseover|mouseout|keyup|keydown|keypress|submit|pinch|pinchstart|pinchend|touchstart|touchend|rotate|rotatestart|rotateend|drag|dragstart|dragend|tap|doubletap|singletap/,config:{store:null,shadow:false,animate:true,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},innerPadding:{top:0,left:0,right:0,bottom:0},background:null,interactions:[],mainRegion:null,autoSize:false,viewBox:false,fitSurface:false,resizeHandler:null,highlightItem:null},resizing:0,animationSuspended:0,surfaceZIndexes:{main:0,grid:1,series:2,axis:3,overlay:4,events:5},animating:0,layoutSuspended:0,applyAnimate:function(newAnimate,oldAnimate){if(!newAnimate){newAnimate={duration:0}}else{if(newAnimate===true){newAnimate={easing:"easeInOut",duration:500}}}if(!oldAnimate){return newAnimate}else{oldAnimate=Ext.apply({},newAnimate,oldAnimate)}return oldAnimate},applyInsetPadding:function(padding,oldPadding){if(Ext.isNumber(padding)){return{top:padding,left:padding,right:padding,bottom:padding}}else{if(!oldPadding){return padding}else{return Ext.apply(oldPadding,padding)}}},applyInnerPadding:function(padding,oldPadding){if(Ext.isNumber(padding)){return{top:padding,left:padding,right:padding,bottom:padding}}else{if(!oldPadding){return padding}else{return Ext.apply(oldPadding,padding)}}},suspendAnimation:function(){this.animationSuspended++;if(this.animationSuspended===1){var series=this.getSeries(),i=-1,n=series.length;while(++i<n){series[i].setAnimate(this.getAnimate())}}},resumeAnimation:function(){this.animationSuspended--;if(this.animationSuspended===0){var series=this.getSeries(),i=-1,n=series.length;while(++i<n){series[i].setAnimate(this.getAnimate())}}},suspendLayout:function(){this.layoutSuspended++;if(this.layoutSuspended===1){if(this.scheduledLayoutId){this.layoutInSuspension=true;this.cancelLayout()}else{this.layoutInSuspension=false}}},resumeLayout:function(){this.layoutSuspended--;if(this.layoutSuspended===0){if(this.layoutInSuspension){this.scheduleLayout()}}},cancelLayout:function(){if(this.scheduledLayoutId){Ext.draw.Animator.cancel(this.scheduledLayoutId);this.scheduledLayoutId=null}},scheduleLayout:function(){if(!this.scheduledLayoutId){this.scheduledLayoutId=Ext.draw.Animator.schedule("doScheduleLayout",this)}},doScheduleLayout:function(){if(this.layoutSuspended){this.layoutInSuspension=true}else{this.performLayout()}},getAnimate:function(){if(this.resizing||this.animationSuspended){return{duration:0}}else{return this._animate}},constructor:function(){var me=this;me.itemListeners={};me.surfaceMap={};me.legendStore=new Ext.data.Store({storeId:this.getId()+"-legendStore",fields:["id","name","mark","disabled","series","index"]});me.suspendLayout();me.callSuper(arguments);me.refreshLegendStore();me.getLegendStore().on("updaterecord","onUpdateLegendStore",me);me.resumeLayout()},getLegendStore:function(){return this.legendStore},refreshLegendStore:function(){if(this.getLegendStore()){var i,ln,series=this.getSeries(),seriesItem,legendData=[];if(series){for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];if(seriesItem.getShowInLegend()){seriesItem.provideLegendInfo(legendData)}}}this.getLegendStore().setData(legendData)}},resetLegendStore:function(){if(this.getLegendStore()){var data=this.getLegendStore().getData().items,i,ln=data.length,record;for(i=0;i<ln;i++){record=data[i];record.beginEdit();record.set("disabled",false);record.commit()}}},onUpdateLegendStore:function(store,record){var series=this.getSeries(),seriesItem;if(record&&series){seriesItem=series.map[record.get("series")];if(seriesItem){seriesItem.setHiddenByIndex(record.get("index"),record.get("disabled"));this.redraw()}}},initialize:function(){var me=this;me.callSuper();me.getSurface("main");me.getSurface("overlay-surface","overlay").waitFor(me.getSurface("series-surface","series"))},resizeHandler:function(size){var me=this;me.scheduleLayout()},applyMainRegion:function(newRegion,region){if(!region){return newRegion}this.getSeries();this.getAxes();if(newRegion[0]===region[0]&&newRegion[1]===region[1]&&newRegion[2]===region[2]&&newRegion[3]===region[3]){return region}else{return newRegion}},getSurface:function(name,type){name=name||"main";type=type||name;var me=this,surface=this.callSuper([name]),zIndexes=me.surfaceZIndexes;if(type in zIndexes){surface.element.setStyle("zIndex",zIndexes[type])}if(!me.surfaceMap[type]){me.surfaceMap[type]=[]}surface.type=type;me.surfaceMap[type].push(surface);return surface},updateColors:function(colors){var series=this.getSeries(),seriesItem;for(var i=0;i<series.length;i++){seriesItem=series[i];if(!seriesItem.getColors()){seriesItem.updateColors(colors)}}},applyAxes:function(newAxes,oldAxes){this.resizing++;try{if(!oldAxes){oldAxes=[];oldAxes.map={}}var result=[],i,ln,axis,oldAxis,oldMap=oldAxes.map;result.map={};newAxes=Ext.Array.from(newAxes,true);for(i=0,ln=newAxes.length;i<ln;i++){axis=newAxes[i];if(!axis){continue}axis=Ext.factory(axis,null,oldAxis=oldMap[axis.getId&&axis.getId()||axis.id],"axis");axis.setChart(this);if(axis){result.push(axis);result.map[axis.getId()]=axis;if(!oldAxis){axis.on("animationstart","onAnimationStart",this);axis.on("animationend","onAnimationEnd",this)}}}for(i in oldMap){if(!result.map[oldMap[i]]){oldMap[i].destroy()}}return result}finally{this.resizing--}},updateAxes:function(newAxes){var i,ln,axis;for(i=0,ln=newAxes.length;i<ln;i++){axis=newAxes[i];axis.setChart(this)}this.scheduleLayout()},applySeries:function(newSeries,oldSeries){this.resizing++;try{this.getAxes();if(!oldSeries){oldSeries=[];oldSeries.map={}}var me=this,result=[],i,ln,series,oldMap=oldSeries.map,oldSeriesItem;result.map={};newSeries=Ext.Array.from(newSeries,true);for(i=0,ln=newSeries.length;i<ln;i++){series=newSeries[i];if(!series){continue}oldSeriesItem=oldSeries.map[series.getId&&series.getId()||series.id];if(series instanceof Ext.chart.series.Series){if(oldSeriesItem!==series){if(oldSeriesItem){oldSeriesItem.destroy()}me.addItemListenersToSeries(series)}series.setChart(this)}else{if(Ext.isObject(series)){if(oldSeriesItem){oldSeriesItem.setConfig(series);series=oldSeriesItem}else{if(Ext.isString(series)){series=Ext.create(series.xclass||("series."+series),{chart:this})}else{series.chart=this;series=Ext.create(series.xclass||("series."+series.type),series)}series.on("animationstart","onAnimationStart",this);series.on("animationend","onAnimationEnd",this);me.addItemListenersToSeries(series)}}}result.push(series);result.map[series.getId()]=series}for(i in oldMap){if(!result.map[oldMap[i].getId()]){oldMap[i].destroy()}}return result}finally{this.resizing--}},applyLegend:function(newLegend,oldLegend){return Ext.factory(newLegend,Ext.chart.Legend,oldLegend)},updateLegend:function(legend){if(legend){legend.setStore(this.getLegendStore());if(!legend.getDocked()){legend.setDocked("bottom")}if(this.getParent()){this.getParent().add(legend)}}},setParent:function(parent){this.callSuper(arguments);if(parent&&this.getLegend()){parent.add(this.getLegend())}},updateSeries:function(newSeries,oldSeries){this.resizing++;try{this.fireEvent("serieschanged",this,newSeries,oldSeries);this.refreshLegendStore();this.scheduleLayout()}finally{this.resizing--}},applyInteractions:function(interations,oldInterations){if(!oldInterations){oldInterations=[];oldInterations.map={}}var me=this,result=[],oldMap=oldInterations.map;result.map={};interations=Ext.Array.from(interations,true);for(var i=0,ln=interations.length;i<ln;i++){var interation=interations[i];if(!interation){continue}interation=Ext.factory(interation,null,oldMap[interation.getId&&interation.getId()||interation.id],"interaction");interation.setChart(me);if(interation){result.push(interation);result.map[interation.getId()]=interation}}for(i in oldMap){if(!result.map[oldMap[i]]){oldMap[i].destroy()}}return result},applyStore:function(store){return Ext.StoreManager.lookup(store)},updateStore:function(newStore,oldStore){var me=this;if(oldStore){oldStore.un("refresh","onRefresh",me,null,"after");if(oldStore.autoDestroy){oldStore.destroy()}}if(newStore){newStore.on("refresh","onRefresh",me,null,"after");me.onRefresh()}me.fireEvent("storechanged",newStore,oldStore)},redraw:function(){this.fireEvent("redraw")},performLayout:function(){this.cancelLayout()},getEventXY:function(e){e=(e.changedTouches&&e.changedTouches[0])||e.event||e.browserEvent||e;var me=this,xy=me.element.getXY(),region=me.getMainRegion();return[e.pageX-xy[0]-region[0],e.pageY-xy[1]-region[1]]},getItemForPoint:function(x,y){var me=this,i=0,items=me.getSeries(),l=items.length,series,item;for(;i<l;i++){series=items[i];item=series.getItemForPoint(x,y);if(item){return item}}return null},getItemsForPoint:function(x,y){var me=this,series=me.getSeries(),seriesItem,items=[];for(var i=0;i<series.length;i++){seriesItem=series[i];var item=seriesItem.getItemForPoint(x,y);if(item){items.push(item)}}return items},delayThicknessChanged:0,thicknessChanged:false,suspendThicknessChanged:function(){this.delayThicknessChanged++},resumeThicknessChanged:function(){this.delayThicknessChanged--;if(this.delayThicknessChanged===0&&this.thicknessChanged){this.onThicknessChanged()}},onAnimationStart:function(){this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.fireEvent("animationend",this)},onThicknessChanged:function(){if(this.delayThicknessChanged===0){this.thicknessChanged=false;this.performLayout()}else{this.thicknessChanged=true}},onRefresh:function(){var region=this.getMainRegion(),axes=this.getAxes(),store=this.getStore(),series=this.getSeries();if(!store||!axes||!series||!region){return}this.redraw()},bindStore:function(store){this.setStore(store)},applyHighlightItem:function(newHighlightItem,oldHighlightItem){if(newHighlightItem===oldHighlightItem){return}if(Ext.isObject(newHighlightItem)&&Ext.isObject(oldHighlightItem)){if(newHighlightItem.sprite===oldHighlightItem.sprite&&newHighlightItem.index===oldHighlightItem.index){return}}return newHighlightItem},updateHighlightItem:function(newHighlightItem,oldHighlightItem){if(oldHighlightItem){oldHighlightItem.series.setAttributesForItem(oldHighlightItem,{highlighted:false})}if(newHighlightItem){newHighlightItem.series.setAttributesForItem(newHighlightItem,{highlighted:true})}},addItemListenersToSeries:function(series){for(var name in this.itemListeners){var listenerMap=this.itemListeners[name],i,ln;for(i=0,ln=listenerMap.length;i<ln;i++){series.addListener.apply(series,listenerMap[i])}}},addItemListener:function(name,fn,scope,options,order){var listenerMap=this.itemListeners[name]||(this.itemListeners[name]=[]),series=this.getSeries(),seriesItem,i,ln;listenerMap.push([name,fn,scope,options,order]);if(series){for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.addListener(name,fn,scope,options,order)}}},remoteItemListener:function(name,fn,scope,options,order){var listenerMap=this.itemListeners[name],series=this.getSeries(),seriesItem,i,ln;if(listenerMap){for(i=0,ln=listenerMap.length;i<ln;i++){if(listenerMap[i].fn===fn){listenerMap.splice(i,1);if(series){for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.removeListener(name,fn,scope,options,order)}}break}}}},doAddListener:function(name,fn,scope,options,order){if(name.match(this.delegationRegex)){return this.addItemListener(name,fn,scope||this,options,order)}else{if(name.match(this.domEvents)){return this.element.doAddListener.apply(this.element,arguments)}else{return this.callSuper(arguments)}}},doRemoveListener:function(name,fn,scope,options,order){if(name.match(this.delegationRegex)){return this.remoteItemListener(name,fn,scope||this,options,order)}else{if(name.match(this.domEvents)){return this.element.doRemoveListener.apply(this.element,arguments)}else{return this.callSuper(arguments)}}},onItemRemove:function(item){this.callSuper(arguments);if(this.surfaceMap){Ext.Array.remove(this.surfaceMap[item.type],item);if(this.surfaceMap[item.type].length===0){delete this.surfaceMap[item.type]}}},destroy:function(){var me=this,emptyArray=[];me.surfaceMap=null;me.setHighlightItem(null);me.setSeries(emptyArray);me.setAxes(emptyArray);me.setInteractions(emptyArray);me.setStore(null);Ext.Viewport.un("orientationchange",me.redraw,me);me.cancelLayout();this.callSuper(arguments)},getRefItems:function(deep){var me=this,series=me.getSeries(),axes=me.getAxes(),interaction=me.getInteractions(),ans=[],i,ln;for(i=0,ln=series.length;i<ln;i++){ans.push(series[i]);if(series[i].getRefItems){ans.push.apply(ans,series[i].getRefItems(deep))}}for(i=0,ln=axes.length;i<ln;i++){ans.push(axes[i]);if(axes[i].getRefItems){ans.push.apply(ans,axes[i].getRefItems(deep))}}for(i=0,ln=interaction.length;i<ln;i++){ans.push(interaction[i]);if(interaction[i].getRefItems){ans.push.apply(ans,interaction[i].getRefItems(deep))}}return ans}});Ext.define("Ext.chart.grid.HorizontalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.horizontal",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(surface,ctx,clipRegion){var attr=this.attr,x=attr.x,y=surface.roundPixel(attr.y),w=attr.width,h=attr.height,halfLineWidth=ctx.lineWidth*0.5;ctx.beginPath();ctx.rect(clipRegion[0]-surface.matrix.getDX(),y+halfLineWidth,+clipRegion[2],attr.height);ctx.fill();ctx.beginPath();ctx.moveTo(clipRegion[0]-surface.matrix.getDX(),y+halfLineWidth);ctx.lineTo(clipRegion[0]+clipRegion[2]-surface.matrix.getDX(),y+halfLineWidth);ctx.stroke()}});Ext.define("Ext.chart.grid.VerticalGrid",{extend:"Ext.draw.sprite.Sprite",alias:"grid.vertical",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(surface,ctx,clipRegion){var attr=this.attr,x=surface.roundPixel(attr.x),halfLineWidth=ctx.lineWidth*0.5;ctx.beginPath();ctx.rect(x-halfLineWidth,clipRegion[1]-surface.matrix.getDY(),attr.width,clipRegion[3]);ctx.fill();ctx.beginPath();ctx.moveTo(x-halfLineWidth,clipRegion[1]-surface.matrix.getDY());ctx.lineTo(x-halfLineWidth,clipRegion[1]+clipRegion[3]-surface.matrix.getDY());ctx.stroke()}});Ext.define("Ext.chart.CartesianChart",{extend:"Ext.chart.AbstractChart",alternateClassName:"Ext.chart.Chart",requires:["Ext.chart.grid.HorizontalGrid","Ext.chart.grid.VerticalGrid"],config:{flipXY:false,innerRegion:[0,0,1,1]},xtype:"chart",alias:"Ext.chart.Chart",getDirectionForAxis:function(position){var flipXY=this.getFlipXY();if(position==="left"||position==="right"){if(flipXY){return"X"}else{return"Y"}}else{if(flipXY){return"Y"}else{return"X"}}},performLayout:function(){try{this.resizing++;this.callSuper();this.suspendThicknessChanged();var me=this,axes=me.getAxes(),axis,serieses=me.getSeries(),series,axisSurface,thickness,size=me.element.getSize(),width=size.width,height=size.height,insetPadding=me.getInsetPadding(),innerPadding=me.getInnerPadding(),surface,shrinkBox={top:insetPadding.top,left:insetPadding.left,right:insetPadding.right,bottom:insetPadding.bottom},gridSurface,mainRegion,innerWidth,innerHeight,elements,floating,matrix,i,ln,flipXY=me.getFlipXY();if(width<=0||height<=0){return}for(i=0;i<axes.length;i++){axis=axes[i];axisSurface=axis.getSurface();floating=axis.getStyle&&axis.getStyle()&&axis.getStyle().floating;thickness=axis.getThickness();switch(axis.getPosition()){case"top":axisSurface.setRegion([0,shrinkBox.top,width,thickness]);break;case"bottom":axisSurface.setRegion([0,height-(shrinkBox.bottom+thickness),width,thickness]);break;case"left":axisSurface.setRegion([shrinkBox.left,0,thickness,height]);break;case"right":axisSurface.setRegion([width-(shrinkBox.right+thickness),0,thickness,height]);break}if(!floating){shrinkBox[axis.getPosition()]+=thickness}}width-=shrinkBox.left+shrinkBox.right;height-=shrinkBox.top+shrinkBox.bottom;mainRegion=[shrinkBox.left,shrinkBox.top,width,height];shrinkBox.left+=innerPadding.left;shrinkBox.top+=innerPadding.top;shrinkBox.right+=innerPadding.right;shrinkBox.bottom+=innerPadding.bottom;innerWidth=width-innerPadding.left-innerPadding.right;innerHeight=height-innerPadding.top-innerPadding.bottom;me.setInnerRegion([shrinkBox.left,shrinkBox.top,innerWidth,innerHeight]);if(innerWidth<=0||innerHeight<=0){return}me.setMainRegion(mainRegion);me.getSurface("main").setRegion(mainRegion);for(i=0,ln=me.surfaceMap.grid&&me.surfaceMap.grid.length;i<ln;i++){gridSurface=me.surfaceMap.grid[i];gridSurface.setRegion(mainRegion);gridSurface.matrix.set(1,0,0,1,innerPadding.left,innerPadding.top);gridSurface.matrix.inverse(gridSurface.inverseMatrix)}for(i=0;i<axes.length;i++){axis=axes[i];axisSurface=axis.getSurface();matrix=axisSurface.matrix;elements=matrix.elements;switch(axis.getPosition()){case"top":case"bottom":elements[4]=shrinkBox.left;axis.setLength(innerWidth);break;case"left":case"right":elements[5]=shrinkBox.top;axis.setLength(innerHeight);break}axis.updateTitleSprite();matrix.inverse(axisSurface.inverseMatrix)}for(i=0,ln=serieses.length;i<ln;i++){series=serieses[i];surface=series.getSurface();surface.setRegion(mainRegion);if(flipXY){surface.matrix.set(0,-1,1,0,innerPadding.left,innerHeight+innerPadding.top)}else{surface.matrix.set(1,0,0,-1,innerPadding.left,innerHeight+innerPadding.top)}surface.matrix.inverse(surface.inverseMatrix);series.getOverlaySurface().setRegion(mainRegion)}me.redraw();me.onPlaceWatermark()}finally{this.resizing--;this.resumeThicknessChanged()}},redraw:function(){var me=this,series=me.getSeries(),axes=me.getAxes(),region=me.getMainRegion(),innerWidth,innerHeight,innerPadding=me.getInnerPadding(),left,right,top,bottom,i,j,sprites,xRange,yRange,isSide,attr,axisX,axisY,range,visibleRange,flipXY=me.getFlipXY(),sprite,zIndex,zBase=1000,markers,markerCount,markerIndex,markerSprite,markerZIndex;if(!region){return}innerWidth=region[2]-innerPadding.left-innerPadding.right;innerHeight=region[3]-innerPadding.top-innerPadding.bottom;for(i=0;i<series.length;i++){if((axisX=series[i].getXAxis())){visibleRange=axisX.getVisibleRange();xRange=axisX.getRange();xRange=[xRange[0]+(xRange[1]-xRange[0])*visibleRange[0],xRange[0]+(xRange[1]-xRange[0])*visibleRange[1]]}else{xRange=series[i].getXRange()}if((axisY=series[i].getYAxis())){visibleRange=axisY.getVisibleRange();yRange=axisY.getRange();yRange=[yRange[0]+(yRange[1]-yRange[0])*visibleRange[0],yRange[0]+(yRange[1]-yRange[0])*visibleRange[1]]}else{yRange=series[i].getYRange()}left=xRange[0];right=xRange[1];top=yRange[0];bottom=yRange[1];attr={visibleMinX:xRange[0],visibleMaxX:xRange[1],visibleMinY:yRange[0],visibleMaxY:yRange[1],innerWidth:innerWidth,innerHeight:innerHeight,flipXY:flipXY};sprites=series[i].getSprites();for(j=0;j<sprites.length;j++){sprite=sprites[j];zIndex=(sprite.attr.zIndex||0);if(zIndex<zBase){zIndex+=(i+1)*100+zBase;sprite.attr.zIndex=zIndex;markers=sprite.boundMarkers;if(markers){markersCount=(markers.items?markers.items.length:0);if(markersCount){for(markerIndex=0;markerIndex<markersCount;markerIndex++){markerSprite=markers.items[markerIndex];markerZIndex=(markerSprite.attr.zIndex||0);if(markerZIndex==Number.MAX_VALUE){markerSprite.attr.zIndex=zIndex}else{if(markerZIndex<zBase){markerSprite.attr.zIndex=zIndex+markerZIndex}}}}}}sprite.setAttributes(attr,true)}}for(i=0;i<axes.length;i++){isSide=axes[i].isSide();sprites=axes[i].getSprites();range=axes[i].getRange();visibleRange=axes[i].getVisibleRange();attr={dataMin:range[0],dataMax:range[1],visibleMin:visibleRange[0],visibleMax:visibleRange[1]};if(isSide){attr.length=innerHeight;attr.startGap=innerPadding.bottom;attr.endGap=innerPadding.top}else{attr.length=innerWidth;attr.startGap=innerPadding.left;attr.endGap=innerPadding.right}for(j=0;j<sprites.length;j++){sprites[j].setAttributes(attr,true)}}me.renderFrame();me.callSuper(arguments)},onPlaceWatermark:function(){var region0=this.element.getBox(),region=this.getSurface?this.getSurface("main").getRegion():this.getItems().get(0).getRegion();if(region){this.watermarkElement.setStyle({right:Math.round(region0.width-(region[2]+region[0]))+"px",bottom:Math.round(region0.height-(region[3]+region[1]))+"px"})}}});Ext.define("Ext.chart.grid.CircularGrid",{extend:"Ext.draw.sprite.Circle",alias:"grid.circular",inheritableStatics:{def:{defaults:{r:1,strokeStyle:"#DDD"}}}});Ext.define("Ext.chart.grid.RadialGrid",{extend:"Ext.draw.sprite.Path",alias:"grid.radial",inheritableStatics:{def:{processors:{startRadius:"number",endRadius:"number"},defaults:{startRadius:0,endRadius:1,scalingCenterX:0,scalingCenterY:0,strokeStyle:"#DDD"},dirtyTriggers:{startRadius:"path,bbox",endRadius:"path,bbox"}}},render:function(){this.callSuper(arguments)},updatePath:function(path,attr){var startRadius=attr.startRadius,endRadius=attr.endRadius;path.moveTo(startRadius,0);path.lineTo(endRadius,0)}});Ext.define("Ext.chart.PolarChart",{requires:["Ext.chart.grid.CircularGrid","Ext.chart.grid.RadialGrid"],extend:"Ext.chart.AbstractChart",xtype:"polar",config:{center:[0,0],radius:0},getDirectionForAxis:function(position){if(position==="radial"){return"Y"}else{return"X"}},applyCenter:function(center,oldCenter){if(oldCenter&&center[0]===oldCenter[0]&&center[1]===oldCenter[1]){return}return[+center[0],+center[1]]},updateCenter:function(center){var me=this,axes=me.getAxes(),axis,series=me.getSeries(),seriesItem,i,ln;for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];axis.setCenter(center)}for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.setCenter(center)}},updateRadius:function(radius){var me=this,axes=me.getAxes(),axis,series=me.getSeries(),seriesItem,i,ln;for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];axis.setMinimum(0);axis.setLength(radius);axis.getSprites()}for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.setRadius(radius)}},doSetSurfaceRegion:function(surface,region){var mainRegion=this.getMainRegion();surface.setRegion(region);surface.matrix.set(1,0,0,1,mainRegion[0]-region[0],mainRegion[1]-region[1]);surface.inverseMatrix.set(1,0,0,1,region[0]-mainRegion[0],region[1]-mainRegion[1])},performLayout:function(){try{this.resizing++;this.callSuper();var me=this,size=me.element.getSize(),fullRegion=[0,0,size.width,size.height],inset=me.getInsetPadding(),inner=me.getInnerPadding(),left=inset.left,top=inset.top,width=size.width-left-inset.right,height=size.height-top-inset.bottom,region=[inset.left,inset.top,width,height],innerWidth=width-inner.left-inner.right,innerHeight=height-inner.top-inner.bottom,center=[innerWidth*0.5+inner.left,innerHeight*0.5+inner.top],radius=Math.min(innerWidth,innerHeight)*0.5,axes=me.getAxes(),axis,series=me.getSeries(),seriesItem,i,ln;me.setMainRegion(region);for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];me.doSetSurfaceRegion(seriesItem.getSurface(),region);me.doSetSurfaceRegion(seriesItem.getOverlaySurface(),fullRegion)}me.doSetSurfaceRegion(me.getSurface(),fullRegion);for(i=0,ln=me.surfaceMap.grid&&me.surfaceMap.grid.length;i<ln;i++){me.doSetSurfaceRegion(me.surfaceMap.grid[i],fullRegion)}for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];me.doSetSurfaceRegion(axis.getSurface(),fullRegion)}me.setRadius(radius);me.setCenter(center);me.redraw()}finally{this.resizing--}},getEventXY:function(e){e=(e.changedTouches&&e.changedTouches[0])||e.event||e.browserEvent||e;var me=this,xy=me.element.getXY(),padding=me.getInsetPadding();return[e.pageX-xy[0]-padding.left,e.pageY-xy[1]-padding.top]},redraw:function(){var me=this,axes=me.getAxes(),axis,series=me.getSeries(),seriesItem,i,ln;for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];axis.getSprites()}for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.getSprites()}this.renderFrame()}});Ext.define("Ext.chart.SpaceFillingChart",{extend:"Ext.chart.AbstractChart",xtype:"spacefilling",config:{},performLayout:function(){try{this.resizing++;this.callSuper();var me=this,size=me.element.getSize(),series=me.getSeries(),seriesItem,padding=me.getInsetPadding(),width=size.width-padding.left-padding.right,height=size.height-padding.top-padding.bottom,region=[padding.left,padding.top,width,height],i,ln;me.getSurface().setRegion(region);me.setMainRegion(region);for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.getSurface().setRegion(region);seriesItem.setRegion(region)}me.redraw()}finally{this.resizing--}},redraw:function(){var me=this,series=me.getSeries(),seriesItem,i,ln;for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];seriesItem.getSprites()}this.renderFrame()}});Ext.define("Ext.chart.axis.Category",{requires:["Ext.chart.axis.layout.CombineDuplicate","Ext.chart.axis.segmenter.Names"],extend:"Ext.chart.axis.Axis",alias:"axis.category",type:"category",config:{layout:"combineDuplicate",segmenter:"names"}});Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",alias:"axis.numeric",type:"numeric",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Numeric"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}});Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alias:"axis.time",type:"time",requires:["Ext.chart.axis.layout.Continuous","Ext.chart.axis.segmenter.Time","Ext.DateExtras"],config:{calculateByLabelSize:true,dateFormat:null,fromDate:null,toDate:null,step:[Ext.Date.DAY,1],layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(format){this.setRenderer(function(date){return Ext.Date.format(new Date(date),format)})},updateFromDate:function(date){this.setMinimum(+date)},updateToDate:function(date){this.setMaximum(+date)},getCoordFor:function(value){if(Ext.isString(value)){value=new Date(value)}return +value}});Ext.define("Ext.chart.interactions.CrossZoom",{extend:"Ext.chart.interactions.Abstract",type:"crosszoom",alias:"interaction.crosszoom",config:{axes:true,gesture:"drag",undoButton:{}},stopAnimationBeforeSync:false,zoomAnimationInProgress:false,constructor:function(){this.callSuper(arguments);this.zoomHistory=[]},applyAxes:function(axesConfig){var result={};if(axesConfig===true){return{top:{},right:{},bottom:{},left:{}}}else{if(Ext.isArray(axesConfig)){result={};Ext.each(axesConfig,function(axis){result[axis]={}})}else{if(Ext.isObject(axesConfig)){Ext.iterate(axesConfig,function(key,val){if(val===true){result[key]={}}else{if(val!==false){result[key]=val}}})}}}return result},applyUndoButton:function(button,oldButton){var me=this;if(button){if(oldButton){oldButton.destroy()}return Ext.create("Ext.Button",Ext.apply({cls:[],iconCls:"refresh",text:"Undo Zoom",iconMask:true,disabled:true,handler:function(){me.undoZoom()}},button))}else{if(oldButton){oldButton.destroy()}}},getGestures:function(){var me=this,gestures={};gestures[me.getGesture()]="onGesture";gestures[me.getGesture()+"start"]="onGestureStart";gestures[me.getGesture()+"end"]="onGestureEnd";gestures.doubletap="onDoubleTap";return gestures},getSurface:function(){return this.getChart()&&this.getChart().getSurface("main")},setSeriesOpacity:function(opacity){var surface=this.getChart()&&this.getChart().getSurface("series-surface","series");if(surface){surface.element.setStyle("opacity",opacity)}},onGestureStart:function(e){var me=this,chart=me.getChart(),surface=me.getSurface(),region=chart.getInnerRegion(),chartWidth=region[2],chartHeight=region[3],xy=chart.element.getXY(),x=e.pageX-xy[0]-region[0],y=e.pageY-xy[1]-region[1];if(me.zoomAnimationInProgress){return}if(x>0&&x<chartWidth&&y>0&&y<chartHeight){me.lockEvents(me.getGesture());me.startX=x;me.startY=y;me.selectionRect=surface.add({type:"rect",globalAlpha:0.5,fillStyle:"rgba(80,80,140,0.5)",strokeStyle:"rgba(80,80,140,1)",lineWidth:2,x:x,y:y,width:0,height:0,zIndex:10000});me.setSeriesOpacity(0.8);return false}},onGesture:function(e){var me=this;if(me.zoomAnimationInProgress){return}if(me.getLocks()[me.getGesture()]===me){var chart=me.getChart(),surface=me.getSurface(),region=chart.getInnerRegion(),chartWidth=region[2],chartHeight=region[3],xy=chart.element.getXY(),x=e.pageX-xy[0]-region[0],y=e.pageY-xy[1]-region[1];if(x<0){x=0}else{if(x>chartWidth){x=chartWidth}}if(y<0){y=0}else{if(y>chartHeight){y=chartHeight}}me.selectionRect.setAttributes({width:x-me.startX,height:y-me.startY});if(Math.abs(me.startX-x)<11||Math.abs(me.startY-y)<11){me.selectionRect.setAttributes({globalAlpha:0.5})}else{me.selectionRect.setAttributes({globalAlpha:1})}surface.renderFrame();return false}},onGestureEnd:function(e){var me=this;if(me.zoomAnimationInProgress){return}if(me.getLocks()[me.getGesture()]===me){var chart=me.getChart(),surface=me.getSurface(),region=chart.getInnerRegion(),chartWidth=region[2],chartHeight=region[3],xy=chart.element.getXY(),x=e.pageX-xy[0]-region[0],y=e.pageY-xy[1]-region[1];if(x<0){x=0}else{if(x>chartWidth){x=chartWidth}}if(y<0){y=0}else{if(y>chartHeight){y=chartHeight}}if(Math.abs(me.startX-x)<11||Math.abs(me.startY-y)<11){surface.remove(me.selectionRect)}else{me.zoomBy([Math.min(me.startX,x)/chartWidth,1-Math.max(me.startY,y)/chartHeight,Math.max(me.startX,x)/chartWidth,1-Math.min(me.startY,y)/chartHeight]);me.selectionRect.setAttributes({x:Math.min(me.startX,x),y:Math.min(me.startY,y),width:Math.abs(me.startX-x),height:Math.abs(me.startY-y)});me.selectionRect.fx.setConfig(chart.getAnimate()||{duration:0});me.selectionRect.setAttributes({globalAlpha:0,x:0,y:0,width:chartWidth,height:chartHeight});me.zoomAnimationInProgress=true;chart.suspendThicknessChanged();me.selectionRect.fx.on("animationend",function(){chart.resumeThicknessChanged();surface.remove(me.selectionRect);me.selectionRect=null;me.zoomAnimationInProgress=false})}surface.renderFrame();me.sync();me.unlockEvents(me.getGesture());me.setSeriesOpacity(1);if(!me.zoomAnimationInProgress){surface.remove(me.selectionRect);me.selectionRect=null}}},zoomBy:function(region){var me=this,axisConfigs=me.getAxes(),axes=me.getChart().getAxes(),config,zoomMap={};for(var i=0;i<axes.length;i++){var axis=axes[i];config=axisConfigs[axis.getPosition()];if(config&&config.allowZoom!==false){var isSide=axis.isSide(),oldRange=axis.getVisibleRange();zoomMap[axis.getId()]=oldRange.slice(0);if(!isSide){axis.setVisibleRange([(oldRange[1]-oldRange[0])*region[0]+oldRange[0],(oldRange[1]-oldRange[0])*region[2]+oldRange[0]])}else{axis.setVisibleRange([(oldRange[1]-oldRange[0])*region[1]+oldRange[0],(oldRange[1]-oldRange[0])*region[3]+oldRange[0]])}}}me.zoomHistory.push(zoomMap);me.getUndoButton().setDisabled(false)},undoZoom:function(){var zoomMap=this.zoomHistory.pop(),axes=this.getChart().getAxes();if(zoomMap){for(var i=0;i<axes.length;i++){var axis=axes[i];if(zoomMap[axis.getId()]){axis.setVisibleRange(zoomMap[axis.getId()])}}}this.getUndoButton().setDisabled(this.zoomHistory.length===0);this.sync()},onDoubleTap:function(e){this.undoZoom()}});Ext.define("Ext.chart.interactions.ItemHighlight",{extend:"Ext.chart.interactions.Abstract",type:"itemhighlight",alias:"interaction.itemhighlight",config:{gesture:"tap"},getGestures:function(){var gestures={};gestures["item"+this.getGesture()]="onGesture";gestures[this.getGesture()]="onFailedGesture";return gestures},onGesture:function(series,item,e){e.highlightItem=item;return false},onFailedGesture:function(e){this.getChart().setHighlightItem(e.highlightItem||null);this.sync()}});Ext.define("Ext.chart.interactions.ItemInfo",{extend:"Ext.chart.interactions.Abstract",type:"iteminfo",alias:"interaction.iteminfo",config:{gesture:"itemtap",panel:{modal:true,centered:true,width:250,height:300,styleHtmlContent:true,scrollable:"vertical",hideOnMaskTap:true,fullscreen:false,hidden:true,zIndex:30,items:[{docked:"top",xtype:"toolbar",title:"Item Detail"}]}},applyPanel:function(panel,oldPanel){return Ext.factory(panel,"Ext.Panel",oldPanel)},updatePanel:function(panel,oldPanel){if(panel){panel.on("hide","reset",this)}if(oldPanel){oldPanel.un("hide","reset",this)}},onGesture:function(series,item){var me=this,panel=me.getPanel();me.item=item;me.fireEvent("show",me,item,panel);Ext.Viewport.add(panel);panel.show("pop");series.setAttributesForItem(item,{highlighted:true});me.sync();return false},reset:function(){var me=this,item=me.item;if(item){item.series.setAttributesForItem(item,{highlighted:false});delete me.item;me.sync()}}});Ext.define("Ext.util.Offset",{statics:{fromObject:function(obj){return new this(obj.x,obj.y)}},constructor:function(x,y){this.x=(x!=null&&!isNaN(x))?x:0;this.y=(y!=null&&!isNaN(y))?y:0;return this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(p){this.x=p.x;this.y=p.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(offset){if(!(offset instanceof this.statics())){Ext.Error.raise("Offset must be an instance of Ext.util.Offset")}return(this.x==offset.x&&this.y==offset.y)},round:function(to){if(!isNaN(to)){var factor=Math.pow(10,to);this.x=Math.round(this.x*factor)/factor;this.y=Math.round(this.y*factor)/factor}else{this.x=Math.round(this.x);this.y=Math.round(this.y)}},isZero:function(){return this.x==0&&this.y==0}});Ext.define("Ext.util.Region",{requires:["Ext.util.Offset"],statics:{getRegion:function(el){return Ext.fly(el).getPageBox(true)},from:function(o){return new this(o.top,o.right,o.bottom,o.left)}},constructor:function(top,right,bottom,left){var me=this;me.top=top;me[1]=top;me.right=right;me.bottom=bottom;me.left=left;me[0]=left},contains:function(region){var me=this;return(region.left>=me.left&&region.right<=me.right&&region.top>=me.top&&region.bottom<=me.bottom)},intersect:function(region){var me=this,t=Math.max(me.top,region.top),r=Math.min(me.right,region.right),b=Math.min(me.bottom,region.bottom),l=Math.max(me.left,region.left);if(b>t&&r>l){return new Ext.util.Region(t,r,b,l)}else{return false}},union:function(region){var me=this,t=Math.min(me.top,region.top),r=Math.max(me.right,region.right),b=Math.max(me.bottom,region.bottom),l=Math.min(me.left,region.left);return new Ext.util.Region(t,r,b,l)},constrainTo:function(targetRegion){var me=this,constrain=Ext.util.Numbers.constrain;me.top=constrain(me.top,targetRegion.top,targetRegion.bottom);me.bottom=constrain(me.bottom,targetRegion.top,targetRegion.bottom);me.left=constrain(me.left,targetRegion.left,targetRegion.right);me.right=constrain(me.right,targetRegion.left,targetRegion.right);return me},adjust:function(top,right,bottom,left){var me=this;me.top+=top;me.left+=left;me.right+=right;me.bottom+=bottom;return me},getOutOfBoundOffset:function(axis,p){if(!Ext.isObject(axis)){if(axis=="x"){return this.getOutOfBoundOffsetX(p)}else{return this.getOutOfBoundOffsetY(p)}}else{var d=new Ext.util.Offset();d.x=this.getOutOfBoundOffsetX(axis.x);d.y=this.getOutOfBoundOffsetY(axis.y);return d}},getOutOfBoundOffsetX:function(p){if(p<=this.left){return this.left-p}else{if(p>=this.right){return this.right-p}}return 0},getOutOfBoundOffsetY:function(p){if(p<=this.top){return this.top-p}else{if(p>=this.bottom){return this.bottom-p}}return 0},isOutOfBound:function(axis,p){if(!Ext.isObject(axis)){if(axis=="x"){return this.isOutOfBoundX(p)}else{return this.isOutOfBoundY(p)}}else{p=axis;return(this.isOutOfBoundX(p.x)||this.isOutOfBoundY(p.y))}},isOutOfBoundX:function(p){return(p<this.left||p>this.right)},isOutOfBoundY:function(p){return(p<this.top||p>this.bottom)},restrict:function(axis,p,factor){if(Ext.isObject(axis)){var newP;factor=p;p=axis;if(p.copy){newP=p.copy()}else{newP={x:p.x,y:p.y}}newP.x=this.restrictX(p.x,factor);newP.y=this.restrictY(p.y,factor);return newP}else{if(axis=="x"){return this.restrictX(p,factor)}else{return this.restrictY(p,factor)}}},restrictX:function(p,factor){if(!factor){factor=1}if(p<=this.left){p-=(p-this.left)*factor}else{if(p>=this.right){p-=(p-this.right)*factor}}return p},restrictY:function(p,factor){if(!factor){factor=1}if(p<=this.top){p-=(p-this.top)*factor}else{if(p>=this.bottom){p-=(p-this.bottom)*factor}}return p},getSize:function(){return{width:this.right-this.left,height:this.bottom-this.top}},copy:function(){return new Ext.util.Region(this.top,this.right,this.bottom,this.left)},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(offset){this.left+=offset.x;this.right+=offset.x;this.top+=offset.y;this.bottom+=offset.y;return this},round:function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this},equals:function(region){return(this.top==region.top&&this.right==region.right&&this.bottom==region.bottom&&this.left==region.left)}});Ext.define("Ext.chart.interactions.PanZoom",{extend:"Ext.chart.interactions.Abstract",type:"panzoom",alias:"interaction.panzoom",requires:["Ext.util.Region","Ext.draw.Animator"],config:{axes:{top:{},right:{},bottom:{},left:{}},minZoom:null,maxZoom:null,showOverflowArrows:true,gesture:"pinch",panGesture:"drag",zoomOnPanGesture:false,modeToggleButton:{cls:["x-panzoom-toggle","x-zooming"],iconCls:"x-panzoom-toggle-icon",iconMask:true},hideLabelInGesture:false},stopAnimationBeforeSync:true,applyAxes:function(axesConfig,oldAxesConfig){return Ext.merge(oldAxesConfig||{},axesConfig)},applyZoomOnPanGesture:function(zoomOnPanGesture){this.getChart();if(this.isMultiTouch()){return false}return zoomOnPanGesture},updateZoomOnPanGesture:function(zoomOnPanGesture){if(!this.isMultiTouch()){var button=this.getModeToggleButton(),zoomModeCls=Ext.baseCSSPrefix+"zooming";if(zoomOnPanGesture){button.addCls(zoomModeCls);if(!button.config.hideText){button.setText("&nbsp;Zoom")}}else{button.removeCls(zoomModeCls);if(!button.config.hideText){button.setText("&nbsp;Pan")}}}},toggleMode:function(){var me=this;if(!me.isMultiTouch()){me.setZoomOnPanGesture(!me.getZoomOnPanGesture())}},applyModeToggleButton:function(button,oldButton){var me=this,result=Ext.factory(button,"Ext.Button",oldButton);if(result&&!oldButton){result.setHandler(function(){me.toggleMode()})}return result},getGestures:function(){var me=this,gestures={};gestures[me.getGesture()]="onGesture";gestures[me.getGesture()+"start"]="onGestureStart";gestures[me.getGesture()+"end"]="onGestureEnd";gestures[me.getPanGesture()]="onPanGesture";gestures[me.getPanGesture()+"start"]="onPanGestureStart";gestures[me.getPanGesture()+"end"]="onPanGestureEnd";gestures.doubletap="onDoubleTap";return gestures},onDoubleTap:function(e){},onPanGestureStart:function(e){if(!e||!e.touches||e.touches.length<2){var me=this,region=me.getChart().getInnerRegion(),xy=me.getChart().element.getXY();me.startX=e.pageX-xy[0]-region[0];me.startY=e.pageY-xy[1]-region[1];me.oldVisibleRanges=null;me.hideLabels();me.getChart().suspendThicknessChanged();me.lockEvents(me.getPanGesture());return false}},onPanGesture:function(e){if(this.getLocks()[this.getPanGesture()]===this){var me=this,region=me.getChart().getInnerRegion(),xy=me.getChart().element.getXY();if(me.getZoomOnPanGesture()){me.transformAxesBy(me.getZoomableAxes(e),0,0,(e.pageX-xy[0]-region[0])/me.startX,me.startY/(e.pageY-xy[1]-region[1]))}else{me.transformAxesBy(me.getPannableAxes(e),e.pageX-xy[0]-region[0]-me.startX,e.pageY-xy[1]-region[1]-me.startY,1,1)}me.sync();return false}},onPanGestureEnd:function(e){var me=this;if(this.getLocks()[this.getPanGesture()]===this){me.getChart().resumeThicknessChanged();me.showLabels();me.sync();me.unlockEvents(me.getGestures());return false}},onGestureStart:function(e){if(e.touches&&e.touches.length===2){var me=this,xy=me.getChart().element.getXY(),region=me.getChart().getInnerRegion(),x=xy[0]+region[0],y=xy[1]+region[1],newPoints=[e.touches[0].point.x-x,e.touches[0].point.y-y,e.touches[1].point.x-x,e.touches[1].point.y-y],xDistance=Math.max(44,Math.abs(newPoints[2]-newPoints[0])),yDistance=Math.max(44,Math.abs(newPoints[3]-newPoints[1]));me.getChart().suspendThicknessChanged();me.lastZoomDistances=[xDistance,yDistance];me.lastPoints=newPoints;me.oldVisibleRanges=null;me.hideLabels();me.lockEvents(me.getGesture());return false}},onGesture:function(e){if(this.getLocks()[this.getGesture()]===this){var me=this,region=me.getChart().getInnerRegion(),xy=me.getChart().element.getXY(),x=xy[0]+region[0],y=xy[1]+region[1],abs=Math.abs,lastPoints=me.lastPoints,newPoints=[e.touches[0].point.x-x,e.touches[0].point.y-y,e.touches[1].point.x-x,e.touches[1].point.y-y],xDistance=Math.max(44,abs(newPoints[2]-newPoints[0])),yDistance=Math.max(44,abs(newPoints[3]-newPoints[1])),lastDistances=this.lastZoomDistances||[xDistance,yDistance],zoomX=xDistance/lastDistances[0],zoomY=yDistance/lastDistances[1];me.transformAxesBy(me.getZoomableAxes(e),region[2]*(zoomX-1)/2+newPoints[2]-lastPoints[2]*zoomX,region[3]*(zoomY-1)/2+newPoints[3]-lastPoints[3]*zoomY,zoomX,zoomY);me.sync();return false}},onGestureEnd:function(e){var me=this;if(me.getLocks()[me.getGesture()]===me){me.showLabels();me.sync();me.unlockEvents(me.getGestures());return false}},hideLabels:function(){if(this.getHideLabelInGesture()){this.eachInteractiveAxes(function(axis){axis.hideLabels()})}},showLabels:function(){if(this.getHideLabelInGesture()){this.eachInteractiveAxes(function(axis){axis.showLabels()})}},isEventOnAxis:function(e,axis){var region=axis.getSurface().getRegion();return region[0]<=e.pageX&&e.pageX<=region[0]+region[2]&&region[1]<=e.pageY&&e.pageY<=region[1]+region[3]},getPannableAxes:function(e){var me=this,axisConfigs=me.getAxes(),axes=me.getChart().getAxes(),i,ln=axes.length,result=[],isEventOnAxis=false,config;if(e){for(i=0;i<ln;i++){if(this.isEventOnAxis(e,axes[i])){isEventOnAxis=true;break}}}for(i=0;i<ln;i++){config=axisConfigs[axes[i].getPosition()];if(config&&config.allowPan!==false&&(!isEventOnAxis||this.isEventOnAxis(e,axes[i]))){result.push(axes[i])}}return result},getZoomableAxes:function(e){var me=this,axisConfigs=me.getAxes(),axes=me.getChart().getAxes(),result=[],i,ln=axes.length,axis,isEventOnAxis=false,config;if(e){for(i=0;i<ln;i++){if(this.isEventOnAxis(e,axes[i])){isEventOnAxis=true;break}}}for(i=0;i<ln;i++){axis=axes[i];config=axisConfigs[axis.getPosition()];if(config&&config.allowZoom!==false&&(!isEventOnAxis||this.isEventOnAxis(e,axis))){result.push(axis)}}return result},eachInteractiveAxes:function(fn){var me=this,axisConfigs=me.getAxes(),axes=me.getChart().getAxes();for(var i=0;i<axes.length;i++){if(axisConfigs[axes[i].getPosition()]){if(false===fn.call(this,axes[i])){return}}}},transformAxesBy:function(axes,panX,panY,sx,sy){var region=this.getChart().getInnerRegion(),axesCfg=this.getAxes(),axisCfg,oldVisibleRanges=this.oldVisibleRanges,result=false;if(!oldVisibleRanges){this.oldVisibleRanges=oldVisibleRanges={};this.eachInteractiveAxes(function(axis){oldVisibleRanges[axis.getId()]=axis.getVisibleRange()})}if(!region){return}for(var i=0;i<axes.length;i++){axisCfg=axesCfg[axes[i].getPosition()];result=this.transformAxisBy(axes[i],oldVisibleRanges[axes[i].getId()],panX,panY,sx,sy,this.minZoom||axisCfg.minZoom,this.maxZoom||axisCfg.maxZoom)||result}return result},transformAxisBy:function(axis,oldVisibleRange,panX,panY,sx,sy,minZoom,maxZoom){var me=this,visibleLength=oldVisibleRange[1]-oldVisibleRange[0],actualMinZoom=minZoom||me.getMinZoom()||axis.config.minZoom,actualMaxZoom=maxZoom||me.getMaxZoom()||axis.config.maxZoom,region=me.getChart().getInnerRegion(),left,right;if(!region){return}var isSide=axis.isSide(),length=isSide?region[3]:region[2],pan=isSide?-panY:panX;visibleLength/=isSide?sy:sx;if(visibleLength<0){visibleLength=-visibleLength}if(visibleLength*actualMinZoom>1){visibleLength=1}if(visibleLength*actualMaxZoom<1){visibleLength=1/actualMaxZoom}left=oldVisibleRange[0];right=oldVisibleRange[1];axis.setVisibleRange([(oldVisibleRange[0]+oldVisibleRange[1]-visibleLength)*0.5-pan/length*visibleLength,(oldVisibleRange[0]+oldVisibleRange[1]+visibleLength)*0.5-pan/length*visibleLength]);return(Math.abs(left-axis.getVisibleRange()[0])>1e-10||Math.abs(right-axis.getVisibleRange()[1])>1e-10)},destroy:function(){this.setModeToggleButton(null);this.callSuper()}});Ext.define("Ext.chart.interactions.Rotate",{extend:"Ext.chart.interactions.Abstract",type:"rotate",alias:"interaction.rotate",config:{gesture:"rotate"},oldRotations:null,getGestures:function(){var gestures={};gestures.rotate="onRotate";gestures.rotateend="onRotate";gestures.dragstart="onGestureStart";gestures.drag="onGesture";gestures.dragend="onGestureEnd";return gestures},getAngle:function(e){var me=this,chart=me.getChart(),xy=chart.getEventXY(e),center=chart.getCenter();return Math.atan2(xy[1]-center[1],xy[0]-center[0])},getEventRadius:function(e){var me=this,chart=me.getChart(),xy=chart.getEventXY(e),center=chart.getCenter(),dx=xy[0]-center[0],dy=xy[1]-center[1];return Math.sqrt(dx*dx+dy*dy)},onGestureStart:function(e){var me=this,chart=me.getChart(),radius=chart.getRadius(),eventRadius=me.getEventRadius(e);if(radius>=eventRadius){me.lockEvents("drag");me.angle=me.getAngle(e);me.oldRotations={};return false}},onGesture:function(e){var me=this,chart=me.getChart(),angle=this.getAngle(e)-this.angle,axes=chart.getAxes(),axis,series=chart.getSeries(),seriesItem,oldRotations=this.oldRotations,oldRotation,i,ln;if(me.getLocks().drag===me){chart.suspendAnimation();for(i=0,ln=axes.length;i<ln;i++){axis=axes[i];oldRotation=oldRotations[axis.getId()]||(oldRotations[axis.getId()]=axis.getRotation());axis.setRotation(angle+oldRotation)}for(i=0,ln=series.length;i<ln;i++){seriesItem=series[i];oldRotation=oldRotations[seriesItem.getId()]||(oldRotations[seriesItem.getId()]=seriesItem.getRotation());seriesItem.setRotation(angle+oldRotation)}me.sync();chart.resumeAnimation();return false}},onGestureEnd:function(e){var me=this;if(me.getLocks().drag===me){me.onGesture(e);me.unlockEvents("drag");return false}},onRotate:function(e){}});Ext.define("Ext.chart.interactions.RotatePie3D",{extend:"Ext.chart.interactions.Rotate",type:"rotatePie3d",alias:"interaction.rotatePie3d",getAngle:function(e){var me=this,chart=me.getChart(),xy=chart.element.getXY(),region=chart.getMainRegion();return Math.atan2(e.pageY-xy[1]-region[3]*0.5,e.pageX-xy[0]-region[2]*0.5)}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],updateXAxis:function(axis){axis.processData(this)},updateYAxis:function(axis){axis.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},getItemForPoint:function(x,y){if(this.getSprites()){var me=this,sprite=me.getSprites()[0],store=me.getStore(),item;if(me.getHidden()){return null}if(sprite){var index=sprite.getIndexNearPoint(x,y);if(index!==-1){item={series:this,category:this.getItemInstancing()?"items":"markers",index:index,record:store.getData().items[index],field:this.getYField(),sprite:sprite};return item}}}},createSprite:function(){var sprite=this.callSuper(),xAxis=this.getXAxis();sprite.setFlipXY(this.getChart().getFlipXY());if(sprite.setAggregator&&xAxis&&xAxis.getAggregator){if(xAxis.getAggregator){sprite.setAggregator({strategy:xAxis.getAggregator()})}else{sprite.setAggregator({})}}return sprite},getSprites:function(){var me=this,chart=this.getChart(),animation=chart&&chart.getAnimate(),itemInstancing=me.getItemInstancing(),sprites=me.sprites,sprite;if(!chart){return[]}if(!sprites.length){sprite=me.createSprite()}else{sprite=sprites[0]}if(animation){me.getLabel().getTemplate().fx.setConfig(animation);if(itemInstancing){sprite.itemsMarker.getTemplate().fx.setConfig(animation)}sprite.fx.setConfig(animation)}return sprites},provideLegendInfo:function(target){var style=this.getStyle();target.push({name:this.getTitle()||this.getYField()||this.getId(),mark:style.fillStyle||style.strokeStyle||"black",disabled:false,series:this.getId(),index:0})},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}});Ext.define("Ext.chart.series.StackedCartesian",{extend:"Ext.chart.series.Cartesian",config:{stacked:true,hidden:[]},animatingSprites:0,updateStacked:function(){this.processData()},coordinateY:function(){return this.coordinateStacked("Y",1,2)},getFields:function(fieldCategory){var me=this,fields=[],fieldsItem,i,ln;for(i=0,ln=fieldCategory.length;i<ln;i++){fieldsItem=me["get"+fieldCategory[i]+"Field"]();if(Ext.isArray(fieldsItem)){fields.push.apply(fields,fieldsItem)}else{fields.push(fieldsItem)}}return fields},updateLabelOverflowPadding:function(labelOverflowPadding){this.getLabel().setAttributes({labelOverflowPadding:labelOverflowPadding})},getSprites:function(){var me=this,chart=this.getChart(),animation=chart&&chart.getAnimate(),fields=me.getFields(me.fieldCategoryY),itemInstancing=me.getItemInstancing(),sprites=me.sprites,sprite,hidden=me.getHidden(),spritesCreated=false,i,length=fields.length;if(!chart){return[]}for(i=0;i<length;i++){sprite=sprites[i];if(!sprite){sprite=me.createSprite();if(chart.getFlipXY()){sprite.setAttributes({zIndex:i})}else{sprite.setAttributes({zIndex:-i})}sprite.setField(fields[i]);spritesCreated=true;hidden.push(false);if(itemInstancing){sprite.itemsMarker.getTemplate().setAttributes(me.getOverriddenStyleByIndex(i))}else{sprite.setAttributes(me.getStyleByIndex(i))}}if(animation){if(itemInstancing){sprite.itemsMarker.getTemplate().fx.setConfig(animation)}sprite.fx.setConfig(animation)}}if(spritesCreated){me.updateHidden(hidden)}return sprites},getItemForPoint:function(x,y){if(this.getSprites()){var me=this,i,ln,sprite,itemInstancing=me.getItemInstancing(),sprites=me.getSprites(),store=me.getStore(),hidden=me.getHidden(),item;for(i=0,ln=sprites.length;i<ln;i++){if(!hidden[i]){sprite=sprites[i];var index=sprite.getIndexNearPoint(x,y);if(index!==-1){item={series:me,index:index,category:itemInstancing?"items":"markers",record:store.getData().items[index],field:this.getYField()[i],sprite:sprite};return item}}}return null}},provideLegendInfo:function(target){var sprites=this.getSprites(),title=this.getTitle(),field=this.getYField(),hidden=this.getHidden();for(var i=0;i<sprites.length;i++){target.push({name:this.getTitle()?this.getTitle()[i]:(field&&field[i])||this.getId(),mark:this.getStyleByIndex(i).fillStyle||this.getStyleByIndex(i).strokeStyle||"black",disabled:hidden[i],series:this.getId(),index:i})}},onSpriteAnimationStart:function(sprite){this.animatingSprites++;if(this.animatingSprites===1){this.fireEvent("animationstart")}},onSpriteAnimationEnd:function(sprite){this.animatingSprites--;if(this.animatingSprites===0){this.fireEvent("animationend")}}});Ext.define("Ext.chart.series.sprite.Cartesian",{extend:"Ext.draw.sprite.Sprite",mixins:{markerHolder:"Ext.chart.MarkerHolder"},homogeneous:true,ascending:true,inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",dataY:"data",dataX:"data",labels:"default",labelOverflowPadding:"number",flipXY:"bool",renderer:"default",visibleMinX:"number",visibleMinY:"number",visibleMaxX:"number",visibleMaxY:"number",innerWidth:"number",innerHeight:"number"},defaults:{dataY:null,dataX:null,dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,labels:null,labelOverflowPadding:10,flipXY:false,renderer:null,transformFillStroke:false,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},dirtyTriggers:{dataX:"dataX,bbox",dataY:"dataY,bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox",visibleMinX:"panzoom",visibleMinY:"panzoom",visibleMaxX:"panzoom",visibleMaxY:"panzoom",innerWidth:"panzoom",innerHeight:"panzoom"},updaters:{dataX:function(attrs){this.processDataX();if(!attrs.dirtyFlags.dataY){attrs.dirtyFlags.dataY=[]}attrs.dirtyFlags.dataY.push("dataY")},dataY:function(){this.processDataY()},panzoom:function(attrs){var dx=attrs.visibleMaxX-attrs.visibleMinX,dy=attrs.visibleMaxY-attrs.visibleMinY,innerWidth=attrs.flipXY?attrs.innerHeight:attrs.innerWidth,innerHeight=!attrs.flipXY?attrs.innerHeight:attrs.innerWidth;attrs.translationX=-attrs.visibleMinX*innerWidth/dx;attrs.translationY=-attrs.visibleMinY*innerHeight/dy;attrs.scalingX=innerWidth/dx;attrs.scalingY=innerHeight/dy;attrs.scalingCenterX=0;attrs.scalingCenterY=0;this.applyTransformations(true)}}}},config:{flipXY:false,dataItems:null,field:null},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(plain){var attr=this.attr;plain.x=attr.dataMinX;plain.y=attr.dataMinY;plain.width=attr.dataMaxX-attr.dataMinX;plain.height=attr.dataMaxY-attr.dataMinY},binarySearch:function(key){var dx=this.attr.dataX,start=0,end=dx.length;if(key<=dx[0]){return start}if(key>=dx[end-1]){return end-1}while(start+1<end){var mid=(start+end)>>1,val=dx[mid];if(val===key){return mid}else{if(val<key){start=mid}else{end=mid}}}return start},render:function(surface,ctx,region){var me=this,flipXY=me.getFlipXY(),attr=me.attr,inverseMatrix=attr.inverseMatrix.clone();inverseMatrix.appendMatrix(surface.inverseMatrix);if(attr.dataX===null){return}if(attr.dataY===null){return}if(inverseMatrix.getXX()*inverseMatrix.getYX()||inverseMatrix.getXY()*inverseMatrix.getYY()){console.log("Cartesian Series sprite does not support rotation/sheering");return}var clip=inverseMatrix.transformList([[region[0]-1,region[3]+1],[region[0]+region[2]+1,-1]]);clip=clip[0].concat(clip[1]);if(clip[2]<clip[0]){console.log("Cartesian Series sprite does not supports flipped X.");return}me.renderClipped(surface,ctx,clip,region)},renderClipped:Ext.emptyFn,getIndexNearPoint:function(x,y){var sprite=this,mat=sprite.attr.matrix,dataX=sprite.attr.dataX,dataY=sprite.attr.dataY,minX,minY,index=-1,imat=mat.clone().prependMatrix(this.surfaceMatrix).inverse(),center=imat.transformPoint([x,y]),positionLB=imat.transformPoint([x-22,y-22]),positionTR=imat.transformPoint([x+22,y+22]),left=Math.min(positionLB[0],positionTR[0]),right=Math.max(positionLB[0],positionTR[0]),top=Math.min(positionLB[1],positionTR[1]),bottom=Math.max(positionLB[1],positionTR[1]);for(var i=0;i<dataX.length;i++){if(left<dataX[i]&&dataX[i]<right&&top<dataY[i]&&dataY[i]<bottom){if(index===-1||Math.abs(dataX[i]-center[0])<minX&&Math.abs(dataY[i]-center[1])<minY){minX=Math.abs(dataX[i]-center[0]);minY=Math.abs(dataY[i]-center[1]);index=i}}}return index}});Ext.define("Ext.chart.series.sprite.StackedCartesian",{extend:"Ext.chart.series.sprite.Cartesian",inheritableStatics:{def:{processors:{groupCount:"number",groupOffset:"number",dataStartY:"data"},defaults:{groupCount:1,groupOffset:0,dataStartY:null},dirtyTriggers:{dataStartY:"dataY,bbox"}}},getIndexNearPoint:function(x,y){var sprite=this,mat=sprite.attr.matrix,dataX=sprite.attr.dataX,dataY=sprite.attr.dataY,dataStartY=sprite.attr.dataStartY,minX=0.5,minY=Infinity,index=-1,imat=mat.clone().prependMatrix(this.surfaceMatrix).inverse(),center=imat.transformPoint([x,y]),positionLB=imat.transformPoint([x-22,y-22]),positionTR=imat.transformPoint([x+22,y+22]),dx,dy,top=Math.min(positionLB[1],positionTR[1]),bottom=Math.max(positionLB[1],positionTR[1]);for(var i=0;i<dataX.length;i++){if(Math.min(dataStartY[i],dataY[i])<=bottom&&top<=Math.max(dataStartY[i],dataY[i])){dx=Math.abs(dataX[i]-center[0]);dy=Math.max(-Math.min(dataY[i]-center[1],center[1]-dataStartY[i]),0);if(dx<minX&&dy<=minY){minX=dx;minY=dy;index=i}}}return index}});Ext.define("Ext.chart.series.sprite.Area",{alias:"sprite.areaSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{step:"bool"},defaults:{step:false}}},renderClipped:function(surface,ctx,clip,clipRegion){var me=this,attr=me.attr,dataX=attr.dataX,dataY=attr.dataY,dataStartY=attr.dataStartY,matrix=attr.matrix,x,y,i,lastX,lastY,xx=matrix.elements[0],dx=matrix.elements[4],yy=matrix.elements[3],dy=matrix.elements[5],surfaceMatrix=me.surfaceMatrix,markerCfg={},start=Math.max(0,this.binarySearch(clip[0])),end=Math.min(dataX.length-1,this.binarySearch(clip[2])+1);ctx.beginPath();if(attr.step){lastY=dataY[start]*yy+dy;for(i=start;i<=end;i++){x=dataX[i]*xx+dx;y=dataY[i]*yy+dy;ctx.lineTo(x,lastY);ctx.lineTo(x,lastY=y)}}else{for(i=start;i<=end;i++){x=dataX[i]*xx+dx;y=dataY[i]*yy+dy;ctx.lineTo(x,y)}}if(dataStartY){if(attr.step){lastX=dataX[end]*xx+dx;for(i=end;i>=start;i--){x=dataX[i]*xx+dx;y=dataStartY[i]*yy+dy;ctx.lineTo(lastX,y);ctx.lineTo(lastX=x,y)}}else{for(i=end;i>=start;i--){x=dataX[i]*xx+dx;y=dataStartY[i]*yy+dy;ctx.lineTo(x,y)}}}else{ctx.lineTo(dataX[end]*xx+dx,y);ctx.lineTo(dataX[end]*xx+dx,dy);ctx.lineTo(dataX[start]*xx+dx,dy);ctx.lineTo(dataX[start]*xx+dx,dataY[i]*yy+dy)}if(attr.transformFillStroke){attr.matrix.toContext(ctx)}ctx.fill();if(attr.transformFillStroke){attr.inverseMatrix.toContext(ctx)}ctx.beginPath();if(attr.step){for(i=start;i<=end;i++){x=dataX[i]*xx+dx;y=dataY[i]*yy+dy;ctx.lineTo(x,lastY);ctx.lineTo(x,lastY=y);markerCfg.translationX=surfaceMatrix.x(x,y);markerCfg.translationY=surfaceMatrix.y(x,y);me.putMarker("markers",markerCfg,i,!attr.renderer)}}else{for(i=start;i<=end;i++){x=dataX[i]*xx+dx;y=dataY[i]*yy+dy;ctx.lineTo(x,y);markerCfg.translationX=surfaceMatrix.x(x,y);markerCfg.translationY=surfaceMatrix.y(x,y);me.putMarker("markers",markerCfg,i,!attr.renderer)}}if(attr.transformFillStroke){attr.matrix.toContext(ctx)}ctx.stroke()}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.StackedCartesian",alias:"series.area",type:"area",seriesType:"areaSeries",requires:["Ext.chart.series.sprite.Area"]});Ext.define("Ext.chart.series.sprite.Bar",{alias:"sprite.barSeries",extend:"Ext.chart.series.sprite.StackedCartesian",inheritableStatics:{def:{processors:{minBarWidth:"number",maxBarWidth:"number",minGapWidth:"number",radius:"number",inGroupGapWidth:"number",renderer:"default"},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0,renderer:null}}},drawLabel:function(text,dataX,dataStartY,dataY,labelId){var me=this,attr=me.attr,labelCfg=me.labelCfg||(me.labelCfg={}),surfaceMatrix=me.surfaceMatrix,labelX,labelY,labelOverflowPadding=attr.labelOverflowPadding,halfWidth,labelBox;labelBox=this.getMarkerBBox("labels",labelId,true);labelCfg.text=text;if(!labelBox){me.putMarker("labels",labelCfg,labelId);labelBox=this.getMarkerBBox("labels",labelId,true)}if(!attr.flipXY){labelCfg.rotationRads=Math.PI*0.5}else{labelCfg.rotationRads=0}labelCfg.calloutVertical=!attr.flipXY;halfWidth=(labelBox.width/2+labelOverflowPadding);if(dataStartY>dataY){halfWidth=-halfWidth}labelX=dataX;labelY=dataY-halfWidth;labelCfg.x=surfaceMatrix.x(labelX,labelY);labelCfg.y=surfaceMatrix.y(labelX,labelY);labelX=dataX;labelY=dataY+halfWidth;labelCfg.calloutPlaceX=surfaceMatrix.x(labelX,labelY);labelCfg.calloutPlaceY=surfaceMatrix.y(labelX,labelY);labelX=dataX;labelY=dataY;labelCfg.calloutStartX=surfaceMatrix.x(labelX,labelY);labelCfg.calloutStartY=surfaceMatrix.y(labelX,labelY);if(dataStartY>dataY){halfWidth=-halfWidth}if(Math.abs(dataY-dataStartY)>halfWidth*2){labelCfg.callout=0}else{labelCfg.callout=1}me.putMarker("labels",labelCfg,labelId)},drawBar:function(ctx,surface,clip,left,top,right,bottom,index){var itemCfg=this.itemCfg||(this.itemCfg={});itemCfg.x=left;itemCfg.y=top;itemCfg.width=right-left;itemCfg.height=bottom-top;itemCfg.radius=this.attr.radius;if(this.attr.renderer){this.attr.renderer.call(this,itemCfg,this,index,this.getDataItems().items[index])}this.putMarker("items",itemCfg,index,!this.attr.renderer)},renderClipped:function(surface,ctx,clip){if(this.cleanRedraw){return}var me=this,attr=me.attr,dataX=attr.dataX,dataY=attr.dataY,dataText=attr.labels,dataStartY=attr.dataStartY,groupCount=attr.groupCount,groupOffset=attr.groupOffset-(groupCount-1)*0.5,inGroupGapWidth=attr.inGroupGapWidth,yLow,yHi,lineWidth=ctx.lineWidth,matrix=attr.matrix,maxBarWidth=matrix.getXX()-attr.minGapWidth,barWidth=surface.roundPixel(Math.max(attr.minBarWidth,(Math.min(maxBarWidth,attr.maxBarWidth)-inGroupGapWidth*(groupCount-1))/groupCount)),surfaceMatrix=this.surfaceMatrix,left,right,bottom,top,i,center,halfLineWidth=0.5*attr.lineWidth,xx=matrix.elements[0],dx=matrix.elements[4],yy=matrix.elements[3],dy=surface.roundPixel(matrix.elements[5])-1,start=Math.max(0,Math.floor(clip[0])),end=Math.min(dataX.length-1,Math.ceil(clip[2])),drawMarkers=dataText&&!!this.getBoundMarker("labels");for(i=start;i<=end;i++){yLow=dataStartY?dataStartY[i]:0;yHi=dataY[i];center=dataX[i]*xx+dx+groupOffset*(barWidth+inGroupGapWidth);left=surface.roundPixel(center-barWidth/2)+halfLineWidth;top=surface.roundPixel(yHi*yy+lineWidth+dy);right=surface.roundPixel(center+barWidth/2)-halfLineWidth;bottom=surface.roundPixel(yLow*yy+lineWidth+dy);me.drawBar(ctx,surface,clip,left,top-halfLineWidth,right,bottom-halfLineWidth,i);if(drawMarkers&&dataText[i]){this.drawLabel(dataText[i],center,bottom,top,i)}me.putMarker("markers",{translationX:surfaceMatrix.x(center,top),translationY:surfaceMatrix.y(center,top)},i,true)}}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.StackedCartesian",alias:"series.bar",type:"bar",seriesType:"barSeries",requires:["Ext.chart.series.sprite.Bar","Ext.draw.sprite.Rect"],config:{itemInstancing:{type:"rect",fx:{customDuration:{x:0,y:0,width:0,height:0,radius:0}}}},updateXAxis:function(axis){axis.setLabelInSpan(true);this.callSuper(arguments)},updateStacked:function(stacked){var sprites=this.getSprites(),attrs={},i,ln=sprites.length;if(this.getStacked()){attrs.groupCount=1;attrs.groupOffset=0;for(i=0;i<ln;i++){sprites[i].setAttributes(attrs)}}else{attrs.groupCount=this.getYField().length;for(i=0;i<ln;i++){attrs.groupOffset=i;sprites[i].setAttributes(attrs)}}this.callSuper(arguments)}});Ext.define("Ext.draw.SegmentTree",{config:{strategy:"double"},time:function(result,last,dataX,dataOpen,dataHigh,dataLow,dataClose){var start=0,lastOffset,lastOffsetEnd,minimum=new Date(dataX[result.startIdx[0]]),maximum=new Date(dataX[result.endIdx[last-1]]),extDate=Ext.Date,units=[[extDate.MILLI,1,"ms1",null],[extDate.MILLI,2,"ms2","ms1"],[extDate.MILLI,5,"ms5","ms1"],[extDate.MILLI,10,"ms10","ms5"],[extDate.MILLI,50,"ms50","ms10"],[extDate.MILLI,100,"ms100","ms50"],[extDate.MILLI,500,"ms500","ms100"],[extDate.SECOND,1,"s1","ms500"],[extDate.SECOND,10,"s10","s1"],[extDate.SECOND,30,"s30","s10"],[extDate.MINUTE,1,"mi1","s10"],[extDate.MINUTE,5,"mi5","mi1"],[extDate.MINUTE,10,"mi10","mi5"],[extDate.MINUTE,30,"mi30","mi10"],[extDate.HOUR,1,"h1","mi30"],[extDate.HOUR,6,"h6","h1"],[extDate.HOUR,12,"h12","h6"],[extDate.DAY,1,"d1","h12"],[extDate.DAY,7,"d7","d1"],[extDate.MONTH,1,"mo1","d1"],[extDate.MONTH,3,"mo3","mo1"],[extDate.MONTH,6,"mo6","mo3"],[extDate.YEAR,1,"y1","mo3"],[extDate.YEAR,5,"y5","y1"],[extDate.YEAR,10,"y10","y5"],[extDate.YEAR,100,"y100","y10"]],unitIdx,currentUnit,plainStart=start,plainEnd=last,first=false,startIdxs=result.startIdx,endIdxs=result.endIdx,minIdxs=result.minIdx,maxIdxs=result.maxIdx,opens=result.open,closes=result.close,minXs=result.minX,minYs=result.minY,maxXs=result.maxX,maxYs=result.maxY,i,current;for(unitIdx=0;last>start+1&&unitIdx<units.length;unitIdx++){minimum=new Date(dataX[startIdxs[0]]);currentUnit=units[unitIdx];minimum=extDate.align(minimum,currentUnit[0],currentUnit[1]);if(extDate.diff(minimum,maximum,currentUnit[0])>dataX.length*2*currentUnit[1]){continue}if(currentUnit[3]&&result.map["time_"+currentUnit[3]]){lastOffset=result.map["time_"+currentUnit[3]][0];lastOffsetEnd=result.map["time_"+currentUnit[3]][1]}else{lastOffset=plainStart;lastOffsetEnd=plainEnd}start=last;current=minimum;first=true;startIdxs[last]=startIdxs[lastOffset];endIdxs[last]=endIdxs[lastOffset];minIdxs[last]=minIdxs[lastOffset];maxIdxs[last]=maxIdxs[lastOffset];opens[last]=opens[lastOffset];closes[last]=closes[lastOffset];minXs[last]=minXs[lastOffset];minYs[last]=minYs[lastOffset];maxXs[last]=maxXs[lastOffset];maxYs[last]=maxYs[lastOffset];current=Ext.Date.add(current,currentUnit[0],currentUnit[1]);for(i=lastOffset+1;i<lastOffsetEnd;i++){if(dataX[endIdxs[i]]<+current){endIdxs[last]=endIdxs[i];closes[last]=closes[i];if(maxYs[i]>maxYs[last]){maxYs[last]=maxYs[i];maxXs[last]=maxXs[i];maxIdxs[last]=maxIdxs[i]}if(minYs[i]<minYs[last]){minYs[last]=minYs[i];minXs[last]=minXs[i];minIdxs[last]=minIdxs[i]}}else{last++;startIdxs[last]=startIdxs[i];endIdxs[last]=endIdxs[i];minIdxs[last]=minIdxs[i];maxIdxs[last]=maxIdxs[i];opens[last]=opens[i];closes[last]=closes[i];minXs[last]=minXs[i];minYs[last]=minYs[i];maxXs[last]=maxXs[i];maxYs[last]=maxYs[i];current=Ext.Date.add(current,currentUnit[0],currentUnit[1])}}if(last>start){result.map["time_"+currentUnit[2]]=[start,last]}}},"double":function(result,position,dataX,dataOpen,dataHigh,dataLow,dataClose){var offset=0,lastOffset,step=1,i,startIdx,endIdx,minIdx,maxIdx,open,close,minX,minY,maxX,maxY;while(position>offset+1){lastOffset=offset;offset=position;step+=step;for(i=lastOffset;i<offset;i+=2){if(i===offset-1){startIdx=result.startIdx[i];endIdx=result.endIdx[i];minIdx=result.minIdx[i];maxIdx=result.maxIdx[i];open=result.open[i];close=result.close[i];minX=result.minX[i];minY=result.minY[i];maxX=result.maxX[i];maxY=result.maxY[i]}else{startIdx=result.startIdx[i];endIdx=result.endIdx[i+1];open=result.open[i];close=result.close[i];if(result.minY[i]<=result.minY[i+1]){minIdx=result.minIdx[i];minX=result.minX[i];minY=result.minY[i]}else{minIdx=result.minIdx[i+1];minX=result.minX[i+1];minY=result.minY[i+1]}if(result.maxY[i]>=result.maxY[i+1]){maxIdx=result.maxIdx[i];maxX=result.maxX[i];maxY=result.maxY[i]}else{maxIdx=result.maxIdx[i+1];maxX=result.maxX[i+1];maxY=result.maxY[i+1]}}result.startIdx[position]=startIdx;result.endIdx[position]=endIdx;result.minIdx[position]=minIdx;result.maxIdx[position]=maxIdx;result.open[position]=open;result.close[position]=close;result.minX[position]=minX;result.minY[position]=minY;result.maxX[position]=maxX;result.maxY[position]=maxY;position++}result.map["double_"+step]=[offset,position]}},none:Ext.emptyFn,aggregateData:function(dataX,dataOpen,dataHigh,dataLow,dataClose){var length=dataX.length,startIdx=[],endIdx=[],minIdx=[],maxIdx=[],open=[],minX=[],minY=[],maxX=[],maxY=[],close=[],result={startIdx:startIdx,endIdx:endIdx,minIdx:minIdx,maxIdx:maxIdx,open:open,minX:minX,minY:minY,maxX:maxX,maxY:maxY,close:close},i;for(i=0;i<length;i++){startIdx[i]=i;endIdx[i]=i;minIdx[i]=i;maxIdx[i]=i;open[i]=dataOpen[i];minX[i]=dataX[i];minY[i]=dataLow[i];maxX[i]=dataX[i];maxY[i]=dataHigh[i];close[i]=dataClose[i]}result.map={original:[0,length]};if(length){this[this.getStrategy()](result,length,dataX,dataOpen,dataHigh,dataLow,dataClose)}return result},binarySearchMin:function(items,start,end,key){var dx=this.dataX;if(key<=dx[items.startIdx[0]]){return start}if(key>=dx[items.startIdx[end-1]]){return end-1}while(start+1<end){var mid=(start+end)>>1,val=dx[items.startIdx[mid]];if(val===key){return mid}else{if(val<key){start=mid}else{end=mid}}}return start},binarySearchMax:function(items,start,end,key){var dx=this.dataX;if(key<=dx[items.endIdx[0]]){return start}if(key>=dx[items.endIdx[end-1]]){return end-1}while(start+1<end){var mid=(start+end)>>1,val=dx[items.endIdx[mid]];if(val===key){return mid}else{if(val<key){start=mid}else{end=mid}}}return end},constructor:function(config){this.initConfig(config)},setData:function(dataX,dataOpen,dataHigh,dataLow,dataClose){if(!dataHigh){dataClose=dataLow=dataHigh=dataOpen}this.dataX=dataX;this.dataOpen=dataOpen;this.dataHigh=dataHigh;this.dataLow=dataLow;this.dataClose=dataClose;if(dataX.length===dataHigh.length&&dataX.length===dataLow.length){this.cache=this.aggregateData(dataX,dataOpen,dataHigh,dataLow,dataClose)}},getAggregation:function(min,max,estStep){if(!this.cache){return null}var minStep=Infinity,range=this.dataX[this.dataX.length-1]-this.dataX[0],cacheMap=this.cache.map,result=cacheMap.original,name,positions,ln,step,minIdx,maxIdx;for(name in cacheMap){positions=cacheMap[name];ln=positions[1]-positions[0]-1;step=range/ln;if(estStep<=step&&step<minStep){result=positions;minStep=step}}minIdx=Math.max(this.binarySearchMin(this.cache,result[0],result[1],min),result[0]);maxIdx=Math.min(this.binarySearchMax(this.cache,result[0],result[1],max)+1,result[1]);return{data:this.cache,start:minIdx,end:maxIdx}}});Ext.define("Ext.chart.series.sprite.Aggregative",{extend:"Ext.chart.series.sprite.Cartesian",requires:["Ext.draw.LimitedCache","Ext.draw.SegmentTree"],inheritableStatics:{def:{processors:{dataHigh:"data",dataLow:"data",dataClose:"data"},aliases:{dataOpen:"dataY"},defaults:{dataHigh:null,dataLow:null,dataClose:null}}},config:{aggregator:{}},applyAggregator:function(aggregator,oldAggr){return Ext.factory(aggregator,Ext.draw.SegmentTree,oldAggr)},constructor:function(){this.callSuper(arguments)},processDataY:function(){var me=this,attr=me.attr,high=attr.dataHigh,low=attr.dataLow,close=attr.dataClose,open=attr.dataY;me.callSuper(arguments);if(attr.dataX&&open&&open.length>0){if(high){me.getAggregator().setData(attr.dataX,attr.dataY,high,low,close)}else{me.getAggregator().setData(attr.dataX,attr.dataY)}}},getGapWidth:function(){return 1},renderClipped:function(surface,ctx,clip,region){var me=this,aggregates=me.getAggregator()&&me.getAggregator().getAggregation(clip[0],clip[2],(clip[2]-clip[0])/region[2]*me.getGapWidth());if(aggregates){me.dataStart=aggregates.data.startIdx[aggregates.start];me.dataEnd=aggregates.data.endIdx[aggregates.end-1];me.renderAggregates(aggregates.data,aggregates.start,aggregates.end,surface,ctx,clip,region)}}});Ext.define("Ext.chart.series.sprite.CandleStick",{alias:"sprite.candlestickSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{raiseStyle:function(n,o){return Ext.merge({},o||{},n)},dropStyle:function(n,o){return Ext.merge({},o||{},n)},barWidth:"number",padding:"number",ohlcType:"enums(candlestick,ohlc)"},defaults:{raiseStyle:{strokeStyle:"green",fillStyle:"green"},dropStyle:{strokeStyle:"red",fillStyle:"red"},planar:false,barWidth:15,padding:3,lineJoin:"miter",miterLimit:5,ohlcType:"candlestick"},dirtyTriggers:{raiseStyle:"raiseStyle",dropStyle:"dropStyle"},updaters:{raiseStyle:function(){this.raiseTemplate&&this.raiseTemplate.setAttributes(this.attr.raiseStyle)},dropStyle:function(){this.dropTemplate&&this.dropTemplate.setAttributes(this.attr.dropStyle)}}}},candlestick:function(ctx,open,high,low,close,mid,halfWidth){var minOC=Math.min(open,close),maxOC=Math.max(open,close);ctx.moveTo(mid,low);ctx.lineTo(mid,maxOC);ctx.moveTo(mid+halfWidth,maxOC);ctx.lineTo(mid+halfWidth,minOC);ctx.lineTo(mid-halfWidth,minOC);ctx.lineTo(mid-halfWidth,maxOC);ctx.closePath();ctx.moveTo(mid,high);ctx.lineTo(mid,minOC)},ohlc:function(ctx,open,high,low,close,mid,halfWidth){ctx.moveTo(mid,high);ctx.lineTo(mid,low);ctx.moveTo(mid,open);ctx.lineTo(mid-halfWidth,open);ctx.moveTo(mid,close);ctx.lineTo(mid+halfWidth,close)},constructor:function(){this.callSuper(arguments);this.raiseTemplate=new Ext.draw.sprite.Rect({parent:this});this.dropTemplate=new Ext.draw.sprite.Rect({parent:this})},getGapWidth:function(){var attr=this.attr,barWidth=attr.barWidth,padding=attr.padding;return barWidth+padding},renderAggregates:function(aggregates,start,end,surface,ctx,clip,region){var me=this,attr=this.attr,dataX=attr.dataX,matrix=attr.matrix,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),barWidth=attr.barWidth/xx,template,ohlcType=attr.ohlcType,halfWidth=Math.round(barWidth*0.5*xx),opens=aggregates.open,highs=aggregates.high,lows=aggregates.low,closes=aggregates.close,maxYs=aggregates.maxY,minYs=aggregates.minY,startIdxs=aggregates.startIdx,open,high,low,close,mid,i,pixelAdjust=attr.lineWidth*surface.devicePixelRatio/2;pixelAdjust-=Math.floor(pixelAdjust);ctx.save();template=this.raiseTemplate;template.useAttributes(ctx);ctx.beginPath();for(i=start;i<end;i++){if(opens[i]<=closes[i]){open=Math.round(opens[i]*yy+dy)+pixelAdjust;high=Math.round(maxYs[i]*yy+dy)+pixelAdjust;low=Math.round(minYs[i]*yy+dy)+pixelAdjust;close=Math.round(closes[i]*yy+dy)+pixelAdjust;mid=Math.round(dataX[startIdxs[i]]*xx+dx)+pixelAdjust;me[ohlcType](ctx,open,high,low,close,mid,halfWidth)}}ctx.fillStroke(template.attr);ctx.restore();ctx.save();template=this.dropTemplate;template.useAttributes(ctx);ctx.beginPath();for(i=start;i<end;i++){if(opens[i]>closes[i]){open=Math.round(opens[i]*yy+dy)+pixelAdjust;high=Math.round(maxYs[i]*yy+dy)+pixelAdjust;low=Math.round(minYs[i]*yy+dy)+pixelAdjust;close=Math.round(closes[i]*yy+dy)+pixelAdjust;mid=Math.round(dataX[startIdxs[i]]*xx+dx)+pixelAdjust;me[ohlcType](ctx,open,high,low,close,mid,halfWidth)}}ctx.fillStroke(template.attr);ctx.restore()}});Ext.define("Ext.chart.series.CandleStick",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.series.sprite.CandleStick"],alias:"series.candlestick",type:"candlestick",seriesType:"candlestickSeries",config:{openField:null,highField:null,lowField:null,closeField:null},fieldCategoryY:["Open","High","Low","Close"]});Ext.define("Ext.chart.series.Gauge",{alias:"series.gauge",extend:"Ext.chart.series.Series",type:"gauge",seriesType:"sector",requires:["Ext.draw.sprite.Sector"],config:{angleField:null,field:null,needle:false,needleLengthRatio:0.8,donut:30,showInLegend:false,value:null,minimum:0,maximum:100,rotation:0,totalAngle:Math.PI/2,region:[0,0,1,1],center:[0.5,0.75],radius:0.5,wholeDisk:false},updateAngleField:function(angleField){this.setField(angleField)},updateRegion:function(region){var wholeDisk=this.getWholeDisk(),halfTotalAngle=wholeDisk?Math.PI:this.getTotalAngle()/2,donut=this.getDonut()/100,width,height,radius;if(halfTotalAngle<=Math.PI/2){width=2*Math.sin(halfTotalAngle);height=1-donut*Math.cos(halfTotalAngle)}else{width=2;height=1-Math.cos(halfTotalAngle)}radius=Math.min(region[2]/width,region[3]/height);this.setRadius(radius);this.setCenter([region[2]/2,radius+(region[3]-height*radius)/2])},updateCenter:function(center){this.setStyle({centerX:center[0],centerY:center[1],rotationCenterX:center[0],rotationCenterY:center[1]});this.doUpdateStyles()},updateRotation:function(rotation){this.setStyle({rotationRads:rotation-(this.getTotalAngle()+Math.PI)/2});this.doUpdateStyles()},updateRadius:function(radius){var donut=this.getDonut(),needle=this.getNeedle(),needleLengthRatio=needle?this.getNeedleLengthRatio():1;this.setSubStyle({endRho:[radius*needleLengthRatio,radius],startRho:radius/100*donut});this.doUpdateStyles()},updateDonut:function(donut){var radius=this.getRadius(),needle=this.getNeedle(),needleLengthRatio=needle?this.getNeedleLengthRatio():1;this.setSubStyle({endRho:[radius*needleLengthRatio,radius],startRho:radius/100*donut});this.doUpdateStyles()},applyValue:function(value){return Math.min(this.getMaximum(),Math.max(value,this.getMinimum()))},updateValue:function(value){var needle=this.getNeedle(),pos=(value-this.getMinimum())/(this.getMaximum()-this.getMinimum()),total=this.getTotalAngle(),angle=pos*total,sprites=this.getSprites();if(needle){sprites[0].setAttributes({startAngle:angle,endAngle:angle})}else{sprites[0].setAttributes({endAngle:angle})}this.doUpdateStyles()},processData:function(){var store=this.getStore();if(!store){return}var field=this.getField();if(!field){return}if(!store.getData().items.length){return}this.setValue(store.getData().items[0].get(field))},getDefaultSpriteConfig:function(){return{type:"sector",fx:{customDuration:{translationX:0,translationY:0,rotationCenterX:0,rotationCenterY:0,centerX:0,centerY:0,startRho:0,endRho:0,baseRotation:0}}}},getSprites:function(){if(!this.getStore()&&!Ext.isNumber(this.getValue())){return null}var me=this,sprite,animate=this.getChart().getAnimate(),sprites=me.sprites;if(sprites&&sprites.length){sprites[0].fx.setConfig(animate);return sprites}sprite=me.createSprite();sprite.setAttributes({zIndex:10});sprite=me.createSprite();sprite.setAttributes({startAngle:0,endAngle:me.getTotalAngle()});me.doUpdateStyles();return sprites}});Ext.define("Ext.event.publisher.Publisher",{targetType:"",idSelectorRegex:/^#([\w\-]+)$/i,constructor:function(){var handledEvents=this.handledEvents,handledEventsMap,i,ln,event;handledEventsMap=this.handledEventsMap={};for(i=0,ln=handledEvents.length;i<ln;i++){event=handledEvents[i];handledEventsMap[event]=true}this.subscribers={};return this},handles:function(eventName){var map=this.handledEventsMap;return !!map[eventName]||!!map["*"]||eventName==="*"},getHandledEvents:function(){return this.handledEvents},setDispatcher:function(dispatcher){this.dispatcher=dispatcher},subscribe:function(){return false},unsubscribe:function(){return false},unsubscribeAll:function(){delete this.subscribers;this.subscribers={};return this},notify:function(){return false},getTargetType:function(){return this.targetType},dispatch:function(target,eventName,args){this.dispatcher.doDispatchEvent(this.targetType,target,eventName,args)}});Ext.define("Ext.chart.series.ItemPublisher",{extend:"Ext.event.publisher.Publisher",targetType:"series",handledEvents:["itemmousemove","itemmouseup","itemmousedown","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemtap","itemtapstart","itemtapend","itemtapcancel","itemtaphold","itemdoubletap","itemsingletap","itemtouchstart","itemtouchmove","itemtouchend","itemdragstart","itemdrag","itemdragend","itempinchstart","itempinch","itempinchend","itemswipe"],delegationRegex:/^item([a-z]+)$/i,getSubscribers:function(chartId){var subscribers=this.subscribers;if(!subscribers.hasOwnProperty(chartId)){subscribers[chartId]={}}return subscribers[chartId]},subscribe:function(target,eventName){var match=target.match(this.idSelectorRegex),dispatcher=this.dispatcher,targetType=this.targetType,subscribers,series,id;if(!match){return false}id=match[1];series=Ext.ComponentManager.get(id);if(!series){return false}if(!series.getChart()){dispatcher.addListener(targetType,target,"chartattached","attachChart",this,[series,eventName],"before")}else{this.attachChart(series.getChart(),[series,eventName])}return true},unsubscribe:function(target,eventName,all){var match=target.match(this.idSelectorRegex),dispatcher=this.dispatcher,targetType=this.targetType,subscribers,series,id;if(!match){return false}id=match[1];series=Ext.ComponentManager.get(id);if(!series){return false}subscribers=this.getSubscribers(target,false);if(!subscribers){return false}subscribers.$length--;if(subscribers.hasOwnProperty(eventName)){subscribers[eventName]--;if(series.getChart()){this.detachChart(series.getChart(),[series,eventName,subscribers])}}return true},relayMethod:function(e,sender,args){var chart=args[0],eventName=args[1],dispatcher=this.dispatcher,targetType=this.targetType,chartXY=chart.getEventXY(e),x=chartXY[0],y=chartXY[1],subscriber=this.getSubscribers(chart.getId())[eventName],i,ln;if(subscriber){for(i=0,ln=subscriber.length;i<ln;i++){var series=subscriber[i],item=series.getItemForPoint(x,y);if(item){dispatcher.doDispatchEvent(targetType,"#"+series.getId(),eventName,[series,item,e]);return}}}},detachChart:function(chart,args){var dispatcher=this.dispatcher,targetType=this.targetType,series=args[0],eventName=args[1],subscribers=args[2],match=eventName.match(this.delegationRegex);if(match){var chartEventName=match[1];if(subscribers.hasOwnProperty(eventName)){Ext.remove(subscribers[eventName],series);if(subscribers[eventName].length===0){chart.element.un(chartEventName,"relayMethod",this,[chart,series,eventName])}}dispatcher.removeListener(targetType,"#"+series.getId(),"chartdetached","detachChart",this,[series,eventName,subscribers],"after")}},attachChart:function(chart,args){var dispatcher=this.dispatcher,targetType=this.targetType,series=args[0],eventName=args[1],subscribers=this.getSubscribers(chart.getId()),match=eventName.match(this.delegationRegex);if(match){var chartEventName=match[1];if(!subscribers.hasOwnProperty(eventName)){subscribers[eventName]=[];dispatcher.addListener(targetType,"#"+series.getId(),"chartdetached","detachChart",this,[series,eventName,subscribers],"after");chart.element.on(chartEventName,"relayMethod",this,[chart,eventName])}subscribers[eventName].push(series);return true}else{return false}}},function(){});Ext.define("Ext.chart.series.sprite.Line",{alias:"sprite.lineSeries",extend:"Ext.chart.series.sprite.Aggregative",inheritableStatics:{def:{processors:{smooth:"bool",step:"bool",preciseStroke:"bool"},defaults:{smooth:false,step:false,preciseStroke:true},dirtyTriggers:{dataX:"dataX,bbox,smooth",dataY:"dataY,bbox,smooth",smooth:"smooth"},updaters:{smooth:function(attr){if(attr.smooth&&attr.dataX&&attr.dataY&&attr.dataX.length>2&&attr.dataY.length>2){this.smoothX=Ext.draw.Draw.spline(attr.dataX);this.smoothY=Ext.draw.Draw.spline(attr.dataY)}else{delete this.smoothX;delete this.smoothY}}}}},list:null,updatePlainBBox:function(plain){var attr=this.attr,ymin=Math.min(0,attr.dataMinY),ymax=Math.max(0,attr.dataMaxY);plain.x=attr.dataMinX;plain.y=ymin;plain.width=attr.dataMaxX-attr.dataMinX;plain.height=ymax-ymin},drawStroke:function(surface,ctx,list){var attr=this.attr,matrix=attr.matrix,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),smooth=attr.smooth,step=attr.step,start=list[2],smoothX=this.smoothX,smoothY=this.smoothY,i,j;ctx.beginPath();if(smooth&&smoothX&&smoothY){ctx.moveTo(smoothX[start*3]*xx+dx,smoothY[start*3]*yy+dy);for(i=0,j=start*3+1;i<list.length-3;i+=3,j+=3){ctx.bezierCurveTo(smoothX[j]*xx+dx,smoothY[j]*yy+dy,smoothX[j+1]*xx+dx,smoothY[j+1]*yy+dy,list[i+3],list[i+4])}}else{if(step){ctx.moveTo(list[0],list[1]);for(i=3;i<list.length;i+=3){ctx.lineTo(list[i],list[i-2]);ctx.lineTo(list[i],list[i+1])}}else{ctx.moveTo(list[0],list[1]);for(i=3;i<list.length;i+=3){ctx.lineTo(list[i],list[i+1])}}}},renderAggregates:function(aggregates,start,end,surface,ctx,clip,region){var me=this,attr=me.attr,dataX=attr.dataX,matrix=attr.matrix,first=true,dataY=attr.dataY,pixel=surface.devicePixelRatio,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),markerCfg={},list=this.list||(this.list=[]),x,y,minXs=aggregates.minX,maxXs=aggregates.maxX,minYs=aggregates.minY,maxYs=aggregates.maxY,idx=aggregates.startIdx,surfaceMatrix=surface.matrix;list.length=0;for(var i=start;i<end;i++){var minX=minXs[i],maxX=maxXs[i],minY=minYs[i],maxY=maxYs[i];if(minX<maxX){list.push(minX*xx+dx,minY*yy+dy,idx[i]);list.push(maxX*xx+dx,maxY*yy+dy,idx[i])}else{if(minX>maxX){list.push(maxX*xx+dx,maxY*yy+dy,idx[i]);list.push(minX*xx+dx,minY*yy+dy,idx[i])}else{list.push(maxX*xx+dx,maxY*yy+dy,idx[i])}}first=false}if(list.length){for(i=0;i<list.length;i+=3){x=list[i];y=list[i+1];if(attr.renderer){attr.renderer.call(this,markerCfg,this,i,this.getDataItems().items[i])}markerCfg.translationX=surfaceMatrix.x(x,y);markerCfg.translationY=surfaceMatrix.y(x,y);me.putMarker("markers",markerCfg,list[i+2],!attr.renderer)}me.drawStroke(surface,ctx,list);ctx.lineTo(dataX[dataX.length-1]*xx+dx+pixel,dataY[dataY.length-1]*yy+dy);ctx.lineTo(dataX[dataX.length-1]*xx+dx+pixel,region[1]-pixel);ctx.lineTo(dataX[0]*xx+dx-pixel,region[1]-pixel);ctx.lineTo(dataX[0]*xx+dx-pixel,dataY[0]*yy+dy);ctx.closePath();if(attr.transformFillStroke){attr.matrix.toContext(ctx)}if(attr.preciseStroke){ctx.fill();if(attr.transformFillStroke){attr.inverseMatrix.toContext(ctx)}me.drawStroke(surface,ctx,list);if(attr.transformFillStroke){attr.matrix.toContext(ctx)}ctx.stroke()}else{ctx.fillStroke(attr,true)}}}});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alias:"series.line",type:"line",seriesType:"lineSeries",requires:["Ext.chart.series.sprite.Line"],config:{selectionTolerance:20,smooth:false,aggregator:{strategy:"double"}},defaultSmoothness:3,overflowBuffer:1,getDefaultSpriteConfig:function(){var me=this,parentConfig=me.callSuper(arguments),style;if(typeof me.config.fill!="undefined"){style=this.getStyle();if(me.config.fill){if(typeof style.fillStyle=="undefined"){style.fillStyle=style.strokeStyle}}else{delete style.fillStyle}}return Ext.apply(parentConfig||{},{smooth:me.config.smooth})}});Ext.define("Ext.chart.series.Polar",{extend:"Ext.chart.series.Series",config:{rotation:0,radius:null,center:[0,0],offsetX:0,offsetY:0,showInLegend:true,xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],getDefaultSpriteConfig:function(){return{type:this.seriesType,centerX:0,centerY:0,rotationCenterX:0,rotationCenterY:0}},applyRotation:function(rotation){var twoPie=Math.PI*2;return(rotation%twoPie+Math.PI)%twoPie-Math.PI},updateRotation:function(rotation){var sprites=this.getSprites();if(sprites&&sprites[0]){sprites[0].setAttributes({baseRotation:rotation})}}});Ext.define("Ext.chart.series.sprite.PieSlice",{alias:"sprite.pieslice",mixins:{markerHolder:"Ext.chart.MarkerHolder"},extend:"Ext.draw.sprite.Sector",inheritableStatics:{def:{processors:{doCallout:"bool",label:"string",labelOverflowPadding:"number"},defaults:{doCallout:true,label:"",labelOverflowPadding:10}}},render:function(ctx,surface,clipRegion){this.callSuper(arguments);if(this.attr.label&&this.getBoundMarker("labels")){this.placeLabel()}},placeLabel:function(){var attr=this.attr,startAngle=Math.min(attr.startAngle,attr.endAngle),endAngle=Math.max(attr.startAngle,attr.endAngle),midAngle=(startAngle+endAngle)*0.5,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,startRho=Math.min(attr.startRho,attr.endRho)+margin,endRho=Math.max(attr.startRho,attr.endRho)+margin,midRho=(startRho+endRho)*0.5,surfaceMatrix=this.surfaceMatrix,labelCfg=this.labelCfg||(this.labelCfg={}),labelBox,x,y;surfaceMatrix.appendMatrix(attr.matrix);x=centerX+Math.cos(midAngle)*midRho;y=centerY+Math.sin(midAngle)*midRho;labelCfg.x=surfaceMatrix.x(x,y);labelCfg.y=surfaceMatrix.y(x,y);x=centerX+Math.cos(midAngle)*endRho;y=centerY+Math.sin(midAngle)*endRho;labelCfg.calloutStartX=surfaceMatrix.x(x,y);labelCfg.calloutStartY=surfaceMatrix.y(x,y);x=centerX+Math.cos(midAngle)*(endRho+40);y=centerY+Math.sin(midAngle)*(endRho+40);labelCfg.calloutPlaceX=surfaceMatrix.x(x,y);labelCfg.calloutPlaceY=surfaceMatrix.y(x,y);labelCfg.rotationRads=midAngle+Math.atan2(surfaceMatrix.y(1,0)-surfaceMatrix.y(0,0),surfaceMatrix.x(1,0)-surfaceMatrix.x(0,0));labelCfg.text=attr.label;labelCfg.calloutColor=this.attr.fillStyle;labelCfg.globalAlpha=attr.globalAlpha*attr.fillOpacity;this.putMarker("labels",labelCfg,this.attr.attributeId);labelBox=this.getMarkerBBox("labels",this.attr.attributeId,true);if(labelBox){if(attr.doCallout){this.putMarker("labels",{callout:1-+this.sliceContainsLabel(attr,labelBox)},this.attr.attributeId)}else{this.putMarker("labels",{globalAlpha:+this.sliceContainsLabel(attr,labelBox)},this.attr.attributeId)}}},sliceContainsLabel:function(attr,bbox){var padding=attr.labelOverflowPadding,middle=(attr.endRho+attr.startRho)/2,outer=middle+(bbox.width+padding)/2,inner=middle-(bbox.width+padding)/2,l1,l2,l3;if(bbox.width+padding*2>(attr.endRho-attr.startRho)){return 0}l1=Math.sqrt(attr.endRho*attr.endRho-outer*outer);l2=Math.sqrt(attr.endRho*attr.endRho-inner*inner);l3=Math.abs(Math.tan(Math.abs(attr.endAngle-attr.startAngle)/2))*inner;if(bbox.height+padding*2>Math.min(l1,l2,l3)*2){return 0}return 1}});Ext.define("Ext.chart.series.Pie",{extend:"Ext.chart.series.Polar",requires:["Ext.chart.series.sprite.PieSlice"],type:"pie",alias:"series.pie",seriesType:"pieslice",config:{labelField:false,donut:false,field:null,rotation:0,totalAngle:Math.PI*2,hidden:[],style:{}},directions:["X"],setField:function(f){return this.setXField(f)},getField:function(){return this.getXField()},updateLabelData:function(){var me=this,store=me.getStore(),items=store.getData().items,sprites=me.getSprites(),labelField=me.getLabelField(),i,ln,labels;if(sprites.length>0&&labelField){labels=[];for(i=0,ln=items.length;i<ln;i++){labels.push(items[i].get(labelField))}for(i=0,ln=sprites.length;i<ln;i++){sprites[i].setAttributes({label:labels[i]})}}},coordinateX:function(){var me=this,store=me.getStore(),items=store.getData().items,length=items.length,field=me.getXField(),value,sum=0,hidden=me.getHidden(),summation=[],i,lastAngle=0,totalAngle=me.getTotalAngle(),sprites=me.getSprites();if(!sprites){return}for(i=0;i<length;i++){value=items[i].get(field);if(!hidden[i]){sum+=value}summation[i]=sum;if(i>=hidden.length){hidden[i]=false}}if(sum===0){return}sum=totalAngle/sum;for(i=0;i<length;i++){sprites[i].setAttributes({startAngle:lastAngle,endAngle:lastAngle=summation[i]*sum,globalAlpha:1})}for(;i<me.sprites.length;i++){sprites[i].setAttributes({startAngle:totalAngle,endAngle:totalAngle,globalAlpha:0})}me.getChart().refreshLegendStore()},updateCenter:function(center){this.setStyle({translationX:center[0]+this.getOffsetX(),translationY:center[1]+this.getOffsetY()});this.doUpdateStyles()},updateRadius:function(radius){this.setStyle({startRho:radius*this.getDonut()*0.01,endRho:radius});this.doUpdateStyles()},updateDonut:function(donut){var radius=this.getRadius();this.setStyle({startRho:radius*donut*0.01,endRho:radius});this.doUpdateStyles()},updateRotation:function(rotation){this.setStyle({rotationRads:rotation});this.doUpdateStyles()},updateTotalAngle:function(totalAngle){this.processData()},getSprites:function(){var me=this,chart=this.getChart(),store=me.getStore();if(!chart||!store){return[]}me.getColors();me.getSubStyle();var items=store.getData().items,length=items.length,animation=chart&&chart.getAnimate(),center=me.getCenter(),offsetX=me.getOffsetX(),offsetY=me.getOffsetY(),sprites=me.sprites,sprite,i,spriteCreated=false;for(i=0;i<length;i++){sprite=sprites[i];if(!sprite){sprite=me.createSprite();if(me.getHighlightCfg()){sprite.config.highlightCfg=me.getHighlightCfg();sprite.addModifier("highlight",true)}if(me.getLabelField()){me.getLabel().getTemplate().setAttributes({labelOverflowPadding:this.getLabelOverflowPadding()});me.getLabel().getTemplate().fx.setCustomDuration({callout:200});sprite.bindMarker("labels",me.getLabel())}sprite.setAttributes(this.getStyleByIndex(i));spriteCreated=true}}if(spriteCreated){me.doUpdateStyles()}return me.sprites},betweenAngle:function(x,a,b){b-=a;x-=a;x%=Math.PI*2;b%=Math.PI*2;x+=Math.PI*2;b+=Math.PI*2;x%=Math.PI*2;b%=Math.PI*2;return x<b},getItemForPoint:function(x,y){var me=this,sprites=me.getSprites();if(sprites){var center=me.getCenter(),offsetX=me.getOffsetX(),offsetY=me.getOffsetY(),originalX=x-center[0]+offsetX,originalY=y-center[1]+offsetY,store=me.getStore(),donut=me.getDonut(),items=store.getData().items,direction=Math.atan2(originalY,originalX)-me.getRotation(),donutLimit=Math.sqrt(originalX*originalX+originalY*originalY),endRadius=me.getRadius(),startRadius=donut/100*endRadius,hidden=me.getHidden(),i,ln,attr;for(i=0,ln=items.length;i<ln;i++){if(!hidden[i]){attr=sprites[i].attr;if(startRadius+attr.margin<=donutLimit&&donutLimit+attr.margin<=endRadius){if(this.betweenAngle(direction,attr.startAngle,attr.endAngle)){return{series:this,sprite:sprites[i],index:i,record:items[i],field:this.getXField()}}}}}return null}},provideLegendInfo:function(target){var store=this.getStore();if(store){var items=store.getData().items,labelField=this.getLabelField(),field=this.getField(),hidden=this.getHidden();for(var i=0;i<items.length;i++){target.push({name:labelField?String(items[i].get(labelField)):(field&&field[i])||this.getId(),mark:this.getStyleByIndex(i).fillStyle||this.getStyleByIndex(i).strokeStyle||"black",disabled:hidden[i],series:this.getId(),index:i})}}}});Ext.define("Ext.chart.series.sprite.Pie3DPart",{extend:"Ext.draw.sprite.Path",mixins:{markerHolder:"Ext.chart.MarkerHolder"},alias:"sprite.pie3dPart",type:"pie3dPart",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number",thickness:"number",distortion:"number",baseColor:"color",baseRotation:"number",part:"enums(top,start,end,inner,outer)"},aliases:{rho:"endRho"},dirtyTriggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,partZIndex",endAngle:"path,partZIndex",startRho:"path",endRho:"path,bbox",margin:"path,bbox",thickness:"path",baseRotation:"path,partZIndex",baseColor:"partZIndex,partColor",part:"path,partZIndex"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,distortion:1,baseRotation:0,baseColor:"white",part:"top"},updaters:{partColor:function(attrs){var color=Ext.draw.Color.fly(attrs.baseColor),fillStyle;switch(attrs.part){case"top":fillStyle=color.toString();break;case"outer":fillStyle=Ext.create("Ext.draw.gradient.Linear",{type:"linear",stops:[{offset:0,color:color.createDarker(0.3).toString()},{offset:0.3,color:color.toString()},{offset:0.8,color:color.createLighter(0.2).toString()},{offset:1,color:color.createDarker(0.4).toString()}]});break;case"start":fillStyle=color.createDarker(0.3).toString();break;case"end":fillStyle=color.createDarker(0.3).toString();break;case"inner":fillStyle=Ext.create("Ext.draw.gradient.Linear",{type:"linear",stops:[{offset:0,color:color.createDarker(0.4).toString()},{offset:0.2,color:color.createLighter(0.2).toString()},{offset:0.7,color:color.toString()},{offset:1,color:color.createDarker(0.3).toString()}]});break}attrs.fillStyle=fillStyle;attrs.canvasAttributes.fillStyle=fillStyle},partZIndex:function(attrs){var rotation=attrs.baseRotation;switch(attrs.part){case"top":attrs.zIndex=5;break;case"outer":attrs.zIndex=4;break;case"start":attrs.zIndex=1+Math.sin(attrs.startAngle+rotation);break;case"end":attrs.zIndex=1+Math.sin(attrs.endAngle+rotation);break;case"inner":attrs.zIndex=1;break}attrs.dirtyZIndex=true}}}},updatePlainBBox:function(plain){var attr=this.attr,rho=attr.part==="inner"?attr.startRho:attr.endRho;plain.width=rho*2;plain.height=rho*attr.distortion*2+attr.thickness;plain.x=attr.centerX-rho;plain.y=attr.centerY-rho*attr.distortion},updateTransformedBBox:function(transform){return this.updatePlainBBox(transform)},updatePath:function(path){if(this.attr.endAngle<this.attr.startAngle){return}this[this.attr.part+"Renderer"](path)},topRenderer:function(path){var attr=this.attr,margin=attr.margin,distortion=attr.distortion,centerX=attr.centerX,centerY=attr.centerY,baseRotation=attr.baseRotation,startAngle=attr.startAngle+baseRotation,endAngle=attr.endAngle+baseRotation,startRho=attr.startRho,endRho=attr.endRho,midAngle,sinEnd=Math.sin(endAngle),cosEnd=Math.cos(endAngle);midAngle=(startAngle+endAngle)*0.5;centerX+=Math.cos(midAngle)*margin;centerY+=Math.sin(midAngle)*margin*distortion;path.ellipse(centerX,centerY,startRho,startRho*distortion,0,startAngle,endAngle,false);path.lineTo(centerX+cosEnd*endRho,centerY+sinEnd*endRho*distortion);path.ellipse(centerX,centerY,endRho,endRho*distortion,0,endAngle,startAngle,true);path.closePath()},startRenderer:function(path){var attr=this.attr,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,distortion=attr.distortion,baseRotation=attr.baseRotation,startAngle=attr.startAngle+baseRotation,endAngle=attr.endAngle+baseRotation,thickness=attr.thickness,startRho=attr.startRho,endRho=attr.endRho,sinStart=Math.sin(startAngle),cosStart=Math.cos(startAngle),midAngle;if(cosStart<0){midAngle=(startAngle+endAngle)*0.5;centerX+=Math.cos(midAngle)*margin;centerY+=Math.sin(midAngle)*margin*distortion;path.moveTo(centerX+cosStart*startRho,centerY+sinStart*startRho*distortion);path.lineTo(centerX+cosStart*endRho,centerY+sinStart*endRho*distortion);path.lineTo(centerX+cosStart*endRho,centerY+sinStart*endRho*distortion+thickness);path.lineTo(centerX+cosStart*startRho,centerY+sinStart*startRho*distortion+thickness);path.closePath()}},endRenderer:function(path){var attr=this.attr,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,distortion=attr.distortion,baseRotation=attr.baseRotation,startAngle=attr.startAngle+baseRotation,endAngle=attr.endAngle+baseRotation,thickness=attr.thickness,startRho=attr.startRho,endRho=attr.endRho,sin=Math.sin(endAngle),cos=Math.cos(endAngle),midAngle;if(cos>0){midAngle=(startAngle+endAngle)*0.5;centerX+=Math.cos(midAngle)*margin;centerY+=Math.sin(midAngle)*margin*distortion;path.moveTo(centerX+cos*startRho,centerY+sin*startRho*distortion);path.lineTo(centerX+cos*endRho,centerY+sin*endRho*distortion);path.lineTo(centerX+cos*endRho,centerY+sin*endRho*distortion+thickness);path.lineTo(centerX+cos*startRho,centerY+sin*startRho*distortion+thickness);path.closePath()}},innerRenderer:function(path){var attr=this.attr,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,distortion=attr.distortion,baseRotation=attr.baseRotation,startAngle=attr.startAngle+baseRotation,endAngle=attr.endAngle+baseRotation,thickness=attr.thickness,startRho=attr.startRho,sinEnd,cosEnd,tempStart,tempEnd,midAngle;midAngle=(startAngle+endAngle)*0.5;centerX+=Math.cos(midAngle)*margin;centerY+=Math.sin(midAngle)*margin*distortion;if(startAngle>=Math.PI*2){startAngle-=Math.PI*2;endAngle-=Math.PI*2}if(endAngle>Math.PI&&endAngle<Math.PI*3){tempStart=startAngle;tempEnd=Math.min(endAngle,Math.PI*2);sinEnd=Math.sin(tempEnd);cosEnd=Math.cos(tempEnd);path.ellipse(centerX,centerY,startRho,startRho*distortion,0,tempStart,tempEnd,false);path.lineTo(centerX+cosEnd*startRho,centerY+sinEnd*startRho*distortion+thickness);path.ellipse(centerX,centerY+thickness,startRho,startRho*distortion,0,tempEnd,tempStart,true);path.closePath()}if(endAngle>Math.PI*3){tempStart=Math.PI;tempEnd=endAngle;sinEnd=Math.sin(tempEnd);cosEnd=Math.cos(tempEnd);path.ellipse(centerX,centerY,startRho,startRho*distortion,0,tempStart,tempEnd,false);path.lineTo(centerX+cosEnd*startRho,centerY+sinEnd*startRho*distortion+thickness);path.ellipse(centerX,centerY+thickness,startRho,startRho*distortion,0,tempEnd,tempStart,true);path.closePath()}},outerRenderer:function(path){var attr=this.attr,margin=attr.margin,centerX=attr.centerX,centerY=attr.centerY,distortion=attr.distortion,baseRotation=attr.baseRotation,startAngle=attr.startAngle+baseRotation,endAngle=attr.endAngle+baseRotation,thickness=attr.thickness,endRho=attr.endRho,sinEnd,cosEnd,tempStart,tempEnd,midAngle;midAngle=(startAngle+endAngle)*0.5;centerX+=Math.cos(midAngle)*margin;centerY+=Math.sin(midAngle)*margin*distortion;if(startAngle>=Math.PI*2){startAngle-=Math.PI*2;endAngle-=Math.PI*2}if(startAngle<Math.PI){tempStart=startAngle;tempEnd=Math.min(endAngle,Math.PI);sinEnd=Math.sin(tempEnd);cosEnd=Math.cos(tempEnd);path.ellipse(centerX,centerY,endRho,endRho*distortion,0,tempStart,tempEnd,false);path.lineTo(centerX+cosEnd*endRho,centerY+sinEnd*endRho*distortion+thickness);path.ellipse(centerX,centerY+thickness,endRho,endRho*distortion,0,tempEnd,tempStart,true);path.closePath()}if(endAngle>Math.PI*2){tempStart=Math.max(startAngle,Math.PI*2);tempEnd=endAngle;sinEnd=Math.sin(tempEnd);cosEnd=Math.cos(tempEnd);path.ellipse(centerX,centerY,endRho,endRho*distortion,0,tempStart,tempEnd,false);path.lineTo(centerX+cosEnd*endRho,centerY+sinEnd*endRho*distortion+thickness);path.ellipse(centerX,centerY+thickness,endRho,endRho*distortion,0,tempEnd,tempStart,true);path.closePath()}}});Ext.define("Ext.chart.series.Pie3D",{requires:["Ext.chart.series.sprite.Pie3DPart"],extend:"Ext.chart.series.Polar",type:"pie3d",seriesType:"pie3d",alias:"series.pie3d",config:{region:[0,0,0,0],thickness:35,distortion:0.5,field:false,lengthField:false,donut:false,rotation:0},applyRotation:function(rotation){var twoPie=Math.PI*2;return(rotation%twoPie+twoPie)%twoPie},updateRotation:function(rotation){var sprites=this.getSprites(),i,ln;for(i=0,ln=sprites.length;i<ln;i++){sprites[i].setAttributes({baseRotation:rotation})}},updateColors:function(colorSet){this.setSubStyle({baseColor:colorSet})},doUpdateStyles:function(){var sprites=this.getSprites(),i=0,j=0,ln=sprites&&sprites.length;for(;i<ln;i+=5,j++){sprites[i].setAttributes(this.getStyleByIndex(j));sprites[i+1].setAttributes(this.getStyleByIndex(j));sprites[i+2].setAttributes(this.getStyleByIndex(j));sprites[i+3].setAttributes(this.getStyleByIndex(j));sprites[i+4].setAttributes(this.getStyleByIndex(j))}},processData:function(){var me=this,chart=me.getChart(),animation=chart&&chart.getAnimate(),store=me.getStore(),items=store.getData().items,length=items.length,field=me.getField(),value,sum=0,ratio,summation=[],i,sprites=this.getSprites(),lastAngle;for(i=0;i<length;i++){value=items[i].get(field);sum+=value;summation[i]=sum}if(sum===0){return}ratio=2*Math.PI/sum;for(i=0;i<length;i++){summation[i]*=ratio}for(i=0;i<sprites.length;i++){sprites[i].fx.setConfig(animation)}for(i=0,lastAngle=0;i<length;i++){var commonAttributes={opacity:1,startAngle:lastAngle,endAngle:summation[i]};sprites[i*5].setAttributes(commonAttributes);sprites[i*5+1].setAttributes(commonAttributes);sprites[i*5+2].setAttributes(commonAttributes);sprites[i*5+3].setAttributes(commonAttributes);sprites[i*5+4].setAttributes(commonAttributes);lastAngle=summation[i]}},getSprites:function(){var me=this,chart=this.getChart(),surface=me.getSurface(),store=me.getStore();if(!store){return[]}var items=store.getData().items,length=items.length,animation=chart&&chart.getAnimate(),region=chart.getMainRegion()||[0,0,1,1],rotation=me.getRotation(),center=me.getCenter(),offsetX=me.getOffsetX(),offsetY=me.getOffsetY(),radius=Math.min((region[3]-me.getThickness()*2)/me.getDistortion(),region[2])/2,commonAttributes={centerX:center[0]+offsetX,centerY:center[1]+offsetY-me.getThickness()/2,endRho:radius,startRho:radius*me.getDonut()/100,thickness:me.getThickness(),distortion:me.getDistortion()},sliceAttributes,twoPie=Math.PI*2,topSprite,startSprite,endSprite,innerSideSprite,outerSideSprite,i;for(i=0;i<length;i++){sliceAttributes=Ext.apply({},this.getStyleByIndex(i),commonAttributes);topSprite=me.sprites[i*5];if(!topSprite){topSprite=surface.add({type:"pie3dPart",part:"top",startAngle:twoPie,endAngle:twoPie});startSprite=surface.add({type:"pie3dPart",part:"start",startAngle:twoPie,endAngle:twoPie});endSprite=surface.add({type:"pie3dPart",part:"end",startAngle:twoPie,endAngle:twoPie});innerSideSprite=surface.add({type:"pie3dPart",part:"inner",startAngle:twoPie,endAngle:twoPie,thickness:0});outerSideSprite=surface.add({type:"pie3dPart",part:"outer",startAngle:twoPie,endAngle:twoPie,thickness:0});topSprite.fx.setDurationOn("baseRotation",0);startSprite.fx.setDurationOn("baseRotation",0);endSprite.fx.setDurationOn("baseRotation",0);innerSideSprite.fx.setDurationOn("baseRotation",0);outerSideSprite.fx.setDurationOn("baseRotation",0);topSprite.setAttributes(sliceAttributes);startSprite.setAttributes(sliceAttributes);endSprite.setAttributes(sliceAttributes);innerSideSprite.setAttributes(sliceAttributes);outerSideSprite.setAttributes(sliceAttributes);me.sprites.push(topSprite,startSprite,endSprite,innerSideSprite,outerSideSprite)}else{startSprite=me.sprites[i*5+1];endSprite=me.sprites[i*5+2];innerSideSprite=me.sprites[i*5+3];outerSideSprite=me.sprites[i*5+4];if(animation){topSprite.fx.setConfig(animation);startSprite.fx.setConfig(animation);endSprite.fx.setConfig(animation);innerSideSprite.fx.setConfig(animation);outerSideSprite.fx.setConfig(animation)}topSprite.setAttributes(sliceAttributes);startSprite.setAttributes(sliceAttributes);endSprite.setAttributes(sliceAttributes);innerSideSprite.setAttributes(sliceAttributes);outerSideSprite.setAttributes(sliceAttributes)}}for(i*=5;i<me.sprites.length;i++){me.sprites[i].fx.setConfig(animation);me.sprites[i].setAttributes({opacity:0,startAngle:twoPie,endAngle:twoPie,baseRotation:rotation})}return me.sprites}});Ext.define("Ext.chart.series.sprite.Polar",{mixins:{markerHolder:"Ext.chart.MarkerHolder"},extend:"Ext.draw.sprite.Sprite",inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",dataY:"data",dataX:"data",centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",baseRotation:"number",labels:"default",labelOverflowPadding:"number"},defaults:{dataY:null,dataX:null,dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,centerX:0,centerY:0,startAngle:0,endAngle:Math.PI,startRho:0,endRho:150,baseRotation:0,labels:null,labelOverflowPadding:10},dirtyTriggers:{dataX:"bbox",dataY:"bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox",centerX:"bbox",centerY:"bbox",startAngle:"bbox",endAngle:"bbox",startRho:"bbox",endRho:"bbox",baseRotation:"bbox"}}},config:{dataItems:null,field:null},updatePlainBBox:function(plain){var attr=this.attr;plain.x=attr.centerX-attr.endRho;plain.y=attr.centerY+attr.endRho;plain.width=attr.endRho*2;plain.height=attr.endRho*2}});Ext.define("Ext.chart.series.sprite.Radar",{alias:"sprite.radar",extend:"Ext.chart.series.sprite.Polar",render:function(surface,ctx){var me=this,attr=me.attr,centerX=attr.centerX,centerY=attr.centerY,matrix=attr.matrix,minX=attr.dataMinX,maxX=attr.dataMaxX,maxY=attr.dataMaxY,dataX=attr.dataX,dataY=attr.dataY,endRho=attr.endRho,startRho=attr.startRho,baseRotation=attr.baseRotation,i,length=dataX.length,markerCfg={},surfaceMatrix=me.surfaceMatrix,x,y,r,th;ctx.beginPath();for(i=0;i<length;i++){th=(dataX[i]-minX)/(maxX-minX+1)*2*Math.PI+baseRotation;r=dataY[i]/maxY*(endRho-startRho)+startRho;x=matrix.x(centerX+Math.cos(th)*r,centerY+Math.sin(th)*r);y=matrix.y(centerX+Math.cos(th)*r,centerY+Math.sin(th)*r);ctx.lineTo(x,y);markerCfg.translationX=surfaceMatrix.x(x,y);markerCfg.translationY=surfaceMatrix.y(x,y);me.putMarker("markers",markerCfg,i,true)}ctx.closePath();ctx.fillStroke(attr)}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Polar",type:"radar",seriesType:"radar",alias:"series.radar",requires:["Ext.chart.series.Cartesian","Ext.chart.series.sprite.Radar"],config:{},updateAngularAxis:function(axis){axis.processData(this)},updateRadialAxis:function(axis){axis.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateCenter:function(center){this.setStyle({translationX:center[0]+this.getOffsetX(),translationY:center[1]+this.getOffsetY()});this.doUpdateStyles()},updateRadius:function(radius){this.setStyle({endRho:radius});this.doUpdateStyles()},updateRotation:function(rotation){this.setStyle({rotationRads:rotation});this.doUpdateStyles()},updateTotalAngle:function(totalAngle){this.processData()},getItemForPoint:function(x,y){var me=this,sprite=me.sprites&&me.sprites[0],attr=sprite.attr,dataX=attr.dataX,dataY=attr.dataY,centerX=attr.centerX,centerY=attr.centerY,minX=attr.dataMinX,maxX=attr.dataMaxX,maxY=attr.dataMaxY,endRho=attr.endRho,startRho=attr.startRho,baseRotation=attr.baseRotation,i,length=dataX.length,store=me.getStore(),marker=me.getMarker(),item,th,r;if(me.getHidden()){return null}if(sprite&&marker){for(i=0;i<length;i++){th=(dataX[i]-minX)/(maxX-minX+1)*2*Math.PI+baseRotation;r=dataY[i]/maxY*(endRho-startRho)+startRho;if(Math.abs(centerX+Math.cos(th)*r-x)<22&&Math.abs(centerY+Math.sin(th)*r-y)<22){item={series:this,sprite:sprite,index:i,record:store.getData().items[i],field:store.getFields().items[i]};return item}}}return this.callSuper(arguments)},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}},function(){var klass=this;klass.prototype.onAxesChanged=Ext.chart.series.Cartesian.prototype.onAxesChanged;klass.prototype.getSprites=Ext.chart.series.Cartesian.prototype.getSprites});Ext.define("Ext.chart.series.sprite.Scatter",{alias:"sprite.scatterSeries",extend:"Ext.chart.series.sprite.Cartesian",renderClipped:function(surface,ctx,clip,clipRegion){if(this.cleanRedraw){return}var attr=this.attr,dataX=attr.dataX,dataY=attr.dataY,matrix=this.attr.matrix,xx=matrix.getXX(),yy=matrix.getYY(),dx=matrix.getDX(),dy=matrix.getDY(),markerCfg={},left=clipRegion[0]-xx,right=clipRegion[0]+clipRegion[2]+xx,top=clipRegion[1]-yy,bottom=clipRegion[1]+clipRegion[3]+yy,x,y;for(var i=0;i<dataX.length;i++){x=dataX[i];y=dataY[i];x=x*xx+dx;y=y*yy+dy;if(left<=x&&x<=right&&top<=y&&y<=bottom){if(attr.renderer){attr.renderer.call(this,markerCfg,this,i,this.getDataItems().items[i])}markerCfg.translationX=x;markerCfg.translationY=y;this.putMarker("items",markerCfg,i,!attr.renderer)}}}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",alias:"series.scatter",type:"scatter",seriesType:"scatterSeries",requires:["Ext.chart.series.sprite.Scatter"],config:{itemInstancing:{fx:{customDuration:{translationX:0,translationY:0}}}},applyMarker:function(marker){this.getItemInstancing();this.setItemInstancing(marker)},provideLegendInfo:function(target){var style=this.config.marker;target.push({name:this.getTitle()||this.getYField()||this.getId(),mark:style.fill||style.stroke||"black",disabled:false,series:this.getId(),index:0})}});Ext.define("Ext.chart.series.sprite.AbstractRadial",{extend:"Ext.draw.sprite.Sprite",inheritableStatics:{def:{processors:{rotation:"number",x:"number",y:"number"},defaults:{rotation:0,x:0,y:0}}}});Ext.define("Ext.data.reader.Array",{extend:"Ext.data.reader.Json",alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",config:{totalProperty:undefined,successProperty:undefined},createFieldAccessExpression:function(field,fieldVarName,dataName){var me=this,mapping=field.getMapping(),index=(mapping==null)?me.getModel().getFields().indexOf(field):mapping,result;if(typeof index==="function"){result=fieldVarName+".getMapping()("+dataName+", this)"}else{if(isNaN(index)){index='"'+index+'"'}result=dataName+"["+index+"]"}return result}});Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",uses:["Ext.data.reader.Array"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(data,append){this.callParent([data,append])}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore});Ext.define("Ext.direct.Manager",{singleton:true,mixins:{observable:"Ext.mixin.Observable"},requires:["Ext.util.Collection"],alternateClassName:"Ext.Direct",exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){var me=this;me.transactions=Ext.create("Ext.util.Collection",this.getKey);me.providers=Ext.create("Ext.util.Collection",this.getKey)},getKey:function(item){return item.getId()},addProvider:function(provider){var me=this,args=Ext.toArray(arguments),i=0,ln;if(args.length>1){for(ln=args.length;i<ln;++i){me.addProvider(args[i])}return}if(!provider.isProvider){provider=Ext.create("direct."+provider.type+"provider",provider)}me.providers.add(provider);provider.on("data",me.onProviderData,me);if(!provider.isConnected()){provider.connect()}return provider},getProvider:function(id){return id.isProvider?id:this.providers.get(id)},removeProvider:function(provider){var me=this,providers=me.providers;provider=provider.isProvider?provider:providers.get(provider);if(provider){provider.un("data",me.onProviderData,me);providers.remove(provider);return provider}return null},addTransaction:function(transaction){this.transactions.add(transaction);return transaction},removeTransaction:function(transaction){transaction=this.getTransaction(transaction);this.transactions.remove(transaction);return transaction},getTransaction:function(transaction){return Ext.isObject(transaction)?transaction:this.transactions.get(transaction)},onProviderData:function(provider,event){var me=this,i=0,ln,name;if(Ext.isArray(event)){for(ln=event.length;i<ln;++i){me.onProviderData(provider,event[i])}return}name=event.getName();if(name&&name!="event"&&name!="exception"){me.fireEvent(name,event)}else{if(event.getStatus()===false){me.fireEvent("exception",event)}}me.fireEvent("event",event,provider)},parseMethod:function(fn){if(Ext.isString(fn)){var parts=fn.split("."),i=0,ln=parts.length,current=window;while(current&&i<ln){current=current[parts[i]];++i}fn=Ext.isFunction(current)?current:null}return fn||null}});Ext.define("Ext.data.proxy.Direct",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],config:{paramOrder:undefined,paramsAsHash:true,directFn:undefined,api:null,extraParams:null},paramOrderRe:/[\s,|]/,applyParamOrder:function(paramOrder){if(Ext.isString(paramOrder)){paramOrder=paramOrder.split(this.paramOrderRe)}return paramOrder},applyDirectFn:function(directFn){return Ext.direct.Manager.parseMethod(directFn)},applyApi:function(api){var fn;if(api&&Ext.isObject(api)){for(fn in api){if(api.hasOwnProperty(fn)){api[fn]=Ext.direct.Manager.parseMethod(api[fn])}}}return api},doRequest:function(operation,callback,scope){var me=this,writer=me.getWriter(),request=me.buildRequest(operation,callback,scope),api=me.getApi(),fn=api&&api[request.getAction()]||me.getDirectFn(),params=request.getParams(),args=[],method;if(!fn){Ext.Logger.error("No direct function specified for this proxy")}request=writer.write(request);if(operation.getAction()=="read"){method=fn.directCfg.method;args=method.getArgs(params,me.getParamOrder(),me.getParamsAsHash())}else{args.push(request.getJsonData())}args.push(me.createRequestCallback(request,operation,callback,scope),me);request.setConfig({args:args,directFn:fn});fn.apply(window,args)},applyEncoding:function(value){return value},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(data,event){me.processResponse(event.getStatus(),operation,request,event.getResult(),callback,scope)}},extractResponseData:function(response){var result=response.getResult();return Ext.isDefined(result)?result:response.getData()},setException:function(operation,response){operation.setException(response.getMessage())},buildUrl:function(){return""}});Ext.define("Ext.data.DirectStore",{extend:"Ext.data.Store",alias:"store.direct",requires:["Ext.data.proxy.Direct"],config:{proxy:{type:"direct",reader:{type:"json"}}}});Ext.define("Ext.data.JsonP",{alternateClassName:"Ext.util.JSONP",singleton:true,requestCount:0,requests:{},timeout:30000,disableCaching:true,disableCachingParam:"_dc",callbackKey:"callback",request:function(options){options=Ext.apply({},options);if(!options.url){Ext.Logger.error("A url must be specified for a JSONP request.")}var me=this,disableCaching=Ext.isDefined(options.disableCaching)?options.disableCaching:me.disableCaching,cacheParam=options.disableCachingParam||me.disableCachingParam,id=++me.requestCount,callbackName=options.callbackName||"callback"+id,callbackKey=options.callbackKey||me.callbackKey,timeout=Ext.isDefined(options.timeout)?options.timeout:me.timeout,params=Ext.apply({},options.params),url=options.url,name=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():"Ext",request,script;params[callbackKey]=name+".data.JsonP."+callbackName;if(disableCaching){params[cacheParam]=new Date().getTime()}script=me.createScript(url,params,options);me.requests[id]=request={url:url,params:params,script:script,id:id,scope:options.scope,success:options.success,failure:options.failure,callback:options.callback,callbackKey:callbackKey,callbackName:callbackName};if(timeout>0){request.timeout=setTimeout(Ext.bind(me.handleTimeout,me,[request]),timeout)}me.setupErrorHandling(request);me[callbackName]=Ext.bind(me.handleResponse,me,[request],true);me.loadScript(request);return request},abort:function(request){var requests=this.requests,key;if(request){if(!request.id){request=requests[request]}this.handleAbort(request)}else{for(key in requests){if(requests.hasOwnProperty(key)){this.abort(requests[key])}}}},setupErrorHandling:function(request){request.script.onerror=Ext.bind(this.handleError,this,[request])},handleAbort:function(request){request.errorType="abort";this.handleResponse(null,request)},handleError:function(request){request.errorType="error";this.handleResponse(null,request)},cleanupErrorHandling:function(request){request.script.onerror=null},handleTimeout:function(request){request.errorType="timeout";this.handleResponse(null,request)},handleResponse:function(result,request){var success=true;if(request.timeout){clearTimeout(request.timeout)}delete this[request.callbackName];delete this.requests[request.id];this.cleanupErrorHandling(request);Ext.fly(request.script).destroy();if(request.errorType){success=false;Ext.callback(request.failure,request.scope,[request.errorType,request])}else{Ext.callback(request.success,request.scope,[result,request])}Ext.callback(request.callback,request.scope,[success,result,request.errorType,request])},createScript:function(url,params,options){var script=document.createElement("script");script.setAttribute("src",Ext.urlAppend(url,Ext.Object.toQueryString(params)));script.setAttribute("async",true);script.setAttribute("type","text/javascript");return script},loadScript:function(request){Ext.getHead().appendChild(request.script)}});Ext.define("Ext.data.JsonStore",{extend:"Ext.data.Store",alias:"store.json",config:{proxy:{type:"ajax",reader:"json",writer:"json"}}});Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.Field","Ext.data.ModelManager"],alternateClassName:"Ext.data.Node",statics:{decorate:function(record){if(!record.isNode){var mgr=Ext.data.ModelManager,modelName=record.modelName,modelClass=mgr.getModel(modelName),newFields=[],i,newField,len;modelClass.override(this.getPrototypeBody());newFields=this.applyFields(modelClass,[{name:"parentId",type:"string",defaultValue:null},{name:"index",type:"int",defaultValue:0},{name:"depth",type:"int",defaultValue:0,persist:false},{name:"expanded",type:"bool",defaultValue:false,persist:false},{name:"expandable",type:"bool",defaultValue:true,persist:false},{name:"checked",type:"auto",defaultValue:null},{name:"leaf",type:"bool",defaultValue:false,persist:false},{name:"cls",type:"string",defaultValue:null,persist:false},{name:"iconCls",type:"string",defaultValue:null,persist:false},{name:"root",type:"boolean",defaultValue:false,persist:false},{name:"isLast",type:"boolean",defaultValue:false,persist:false},{name:"isFirst",type:"boolean",defaultValue:false,persist:false},{name:"allowDrop",type:"boolean",defaultValue:true,persist:false},{name:"allowDrag",type:"boolean",defaultValue:true,persist:false},{name:"loaded",type:"boolean",defaultValue:false,persist:false},{name:"loading",type:"boolean",defaultValue:false,persist:false},{name:"href",type:"string",defaultValue:null,persist:false},{name:"hrefTarget",type:"string",defaultValue:null,persist:false},{name:"qtip",type:"string",defaultValue:null,persist:false},{name:"qtitle",type:"string",defaultValue:null,persist:false}]);len=newFields.length;modelClass.getFields().isDirty=true;for(i=0;i<len;++i){newField=newFields[i];if(record.get(newField.getName())===undefined){record.data[newField.getName()]=newField.getDefaultValue()}}}if(!record.isDecorated){record.isDecorated=true;Ext.applyIf(record,{firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,childNodes:[]});record.enableBubble(["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","sort","load"])}return record},applyFields:function(modelClass,addFields){var modelPrototype=modelClass.prototype,fields=modelPrototype.fields,keys=fields.keys,ln=addFields.length,addField,i,newFields=[];for(i=0;i<ln;i++){addField=addFields[i];if(!Ext.Array.contains(keys,addField.name)){addField=Ext.create("Ext.data.Field",addField);newFields.push(addField);fields.add(addField)}}return newFields},getPrototypeBody:function(){return{isNode:true,createNode:function(node){if(Ext.isObject(node)&&!node.isModel){node=Ext.data.ModelManager.create(node,this.modelName)}return Ext.data.NodeInterface.decorate(node)},isLeaf:function(){return this.get("leaf")===true},setFirstChild:function(node){this.firstChild=node},setLastChild:function(node){this.lastChild=node},updateInfo:function(silent){var me=this,parentNode=me.parentNode,isFirst=(!parentNode?true:parentNode.firstChild==me),isLast=(!parentNode?true:parentNode.lastChild==me),depth=0,parent=me,children=me.childNodes,ln=children.length,i;while(parent.parentNode){++depth;parent=parent.parentNode}me.beginEdit();me.set({isFirst:isFirst,isLast:isLast,depth:depth,index:parentNode?parentNode.indexOf(me):0,parentId:parentNode?parentNode.getId():null});me.endEdit(silent);if(silent){me.commit(silent)}for(i=0;i<ln;i++){children[i].updateInfo(silent)}},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var me=this;if(me.get("expandable")){return !(me.isLeaf()||(me.isLoaded()&&!me.hasChildNodes()))}return false},appendChild:function(node,suppressEvents,suppressNodeUpdate){var me=this,i,ln,index,oldParent,ps;if(Ext.isArray(node)){for(i=0,ln=node.length;i<ln;i++){me.appendChild(node[i],suppressEvents,suppressNodeUpdate)}}else{node=me.createNode(node);if(suppressEvents!==true&&me.fireEvent("beforeappend",me,node)===false){return false}index=me.childNodes.length;oldParent=node.parentNode;if(oldParent){if(suppressEvents!==true&&node.fireEvent("beforemove",node,oldParent,me,index)===false){return false}oldParent.removeChild(node,null,false,true)}index=me.childNodes.length;if(index===0){me.setFirstChild(node)}me.childNodes.push(node);node.parentNode=me;node.nextSibling=null;me.setLastChild(node);ps=me.childNodes[index-1];if(ps){node.previousSibling=ps;ps.nextSibling=node;ps.updateInfo(suppressNodeUpdate)}else{node.previousSibling=null}node.updateInfo(suppressNodeUpdate);if(!me.isLoaded()){me.set("loaded",true)}else{if(me.childNodes.length===1){me.set("loaded",me.isLoaded())}}if(suppressEvents!==true){me.fireEvent("append",me,node,index);if(oldParent){node.fireEvent("move",node,oldParent,me,index)}}return node}},getBubbleTarget:function(){return this.parentNode},removeChild:function(node,destroy,suppressEvents,suppressNodeUpdate){var me=this,index=me.indexOf(node);if(index==-1||(suppressEvents!==true&&me.fireEvent("beforeremove",me,node)===false)){return false}Ext.Array.erase(me.childNodes,index,1);if(me.firstChild==node){me.setFirstChild(node.nextSibling)}if(me.lastChild==node){me.setLastChild(node.previousSibling)}if(suppressEvents!==true){me.fireEvent("remove",me,node)}if(node.previousSibling){node.previousSibling.nextSibling=node.nextSibling;node.previousSibling.updateInfo(suppressNodeUpdate)}if(node.nextSibling){node.nextSibling.previousSibling=node.previousSibling;node.nextSibling.updateInfo(suppressNodeUpdate)}if(!me.childNodes.length){me.set("loaded",me.isLoaded())}if(destroy){node.destroy(true)}else{node.clear()}return node},copy:function(newId,deep){var me=this,result=me.callOverridden(arguments),len=me.childNodes?me.childNodes.length:0,i;if(deep){for(i=0;i<len;i++){result.appendChild(me.childNodes[i].copy(true))}}return result},clear:function(destroy){var me=this;me.parentNode=me.previousSibling=me.nextSibling=null;if(destroy){me.firstChild=me.lastChild=null}},destroy:function(silent){var me=this,options=me.destroyOptions;if(silent===true){me.clear(true);Ext.each(me.childNodes,function(n){n.destroy(true)});me.childNodes=null;delete me.destroyOptions;me.callOverridden([options])}else{me.destroyOptions=silent;me.remove(true)}},insertBefore:function(node,refNode,suppressEvents){var me=this,index=me.indexOf(refNode),oldParent=node.parentNode,refIndex=index,ps;if(!refNode){return me.appendChild(node)}if(node==refNode){return false}node=me.createNode(node);if(suppressEvents!==true&&me.fireEvent("beforeinsert",me,node,refNode)===false){return false}if(oldParent==me&&me.indexOf(node)<index){refIndex--}if(oldParent){if(suppressEvents!==true&&node.fireEvent("beforemove",node,oldParent,me,index,refNode)===false){return false}oldParent.removeChild(node)}if(refIndex===0){me.setFirstChild(node)}Ext.Array.splice(me.childNodes,refIndex,0,node);node.parentNode=me;node.nextSibling=refNode;refNode.previousSibling=node;ps=me.childNodes[refIndex-1];if(ps){node.previousSibling=ps;ps.nextSibling=node;ps.updateInfo()}else{node.previousSibling=null}node.updateInfo();if(!me.isLoaded()){me.set("loaded",true)}else{if(me.childNodes.length===1){me.set("loaded",me.isLoaded())}}if(suppressEvents!==true){me.fireEvent("insert",me,node,refNode);if(oldParent){node.fireEvent("move",node,oldParent,me,refIndex,refNode)}}return node},insertChild:function(index,node){var sibling=this.childNodes[index];if(sibling){return this.insertBefore(node,sibling)}else{return this.appendChild(node)}},remove:function(destroy,suppressEvents){var parentNode=this.parentNode;if(parentNode){parentNode.removeChild(this,destroy,suppressEvents,true)}return this},removeAll:function(destroy,suppressEvents){var cn=this.childNodes,n;while((n=cn[0])){this.removeChild(n,destroy,suppressEvents)}return this},getChildAt:function(index){return this.childNodes[index]},replaceChild:function(newChild,oldChild,suppressEvents){var s=oldChild?oldChild.nextSibling:null;this.removeChild(oldChild,suppressEvents);this.insertBefore(newChild,s,suppressEvents);return oldChild},indexOf:function(child){return Ext.Array.indexOf(this.childNodes,child)},getPath:function(field,separator){field=field||this.idProperty;separator=separator||"/";var path=[this.get(field)],parent=this.parentNode;while(parent){path.unshift(parent.get(field));parent=parent.parentNode}return separator+path.join(separator)},getDepth:function(){return this.get("depth")},bubble:function(fn,scope,args){var p=this;while(p){if(fn.apply(scope||p,args||[p])===false){break}p=p.parentNode}},cascadeBy:function(fn,scope,args){if(fn.apply(scope||this,args||[this])!==false){var childNodes=this.childNodes,length=childNodes.length,i;for(i=0;i<length;i++){childNodes[i].cascadeBy(fn,scope,args)}}},eachChild:function(fn,scope,args){var childNodes=this.childNodes,length=childNodes.length,i;for(i=0;i<length;i++){if(fn.apply(scope||this,args||[childNodes[i]])===false){break}}},findChild:function(attribute,value,deep){return this.findChildBy(function(){return this.get(attribute)==value},null,deep)},findChildBy:function(fn,scope,deep){var cs=this.childNodes,len=cs.length,i=0,n,res;for(;i<len;i++){n=cs[i];if(fn.call(scope||n,n)===true){return n}else{if(deep){res=n.findChildBy(fn,scope,deep);if(res!==null){return res}}}}return null},contains:function(node){return node.isAncestor(this)},isAncestor:function(node){var p=this.parentNode;while(p){if(p==node){return true}p=p.parentNode}return false},sort:function(sortFn,recursive,suppressEvent){var cs=this.childNodes,ln=cs.length,i,n;if(ln>0){Ext.Array.sort(cs,sortFn);for(i=0;i<ln;i++){n=cs[i];n.previousSibling=cs[i-1];n.nextSibling=cs[i+1];if(i===0){this.setFirstChild(n)}if(i==ln-1){this.setLastChild(n)}n.updateInfo(suppressEvent);if(recursive&&!n.isLeaf()){n.sort(sortFn,true,true)}}this.notifyStores("afterEdit",["sorted"],{sorted:"sorted"});if(suppressEvent!==true){this.fireEvent("sort",this,cs)}}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return !this.parentNode},isVisible:function(){var parent=this.parentNode;while(parent){if(!parent.isExpanded()){return false}parent=parent.parentNode}return true},expand:function(recursive,callback,scope){var me=this;if(!me.isLeaf()){if(me.isLoading()){me.on("expand",function(){me.expand(recursive,callback,scope)},me,{single:true})}else{if(!me.isExpanded()){me.fireAction("expand",[this],function(){me.set("expanded",true);Ext.callback(callback,scope||me,[me.childNodes])})}else{Ext.callback(callback,scope||me,[me.childNodes])}}}else{Ext.callback(callback,scope||me)}},collapse:function(recursive,callback,scope){var me=this;if(!me.isLeaf()&&me.isExpanded()){this.fireAction("collapse",[me],function(){me.set("expanded",false);Ext.callback(callback,scope||me,[me.childNodes])})}else{Ext.callback(callback,scope||me,[me.childNodes])}}}}}});Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"store.node",requires:["Ext.data.NodeInterface"],config:{node:null,recursive:false,rootVisible:false,sorters:undefined,filters:undefined,folderSort:false},afterEdit:function(record,modifiedFields){if(modifiedFields){if(modifiedFields.indexOf("loaded")!==-1){return this.add(this.retrieveChildNodes(record))}if(modifiedFields.indexOf("expanded")!==-1){return this.filter()}if(modifiedFields.indexOf("sorted")!==-1){return this.sort()}}this.callParent(arguments)},onNodeAppend:function(parent,node){this.add([node].concat(this.retrieveChildNodes(node)))},onNodeInsert:function(parent,node){this.add([node].concat(this.retrieveChildNodes(node)))},onNodeRemove:function(parent,node){this.remove([node].concat(this.retrieveChildNodes(node)))},onNodeSort:function(){this.sort()},updateFolderSort:function(folderSort){if(folderSort){this.setGrouper(function(node){if(node.isLeaf()){return 1}return 0})}else{this.setGrouper(null)}},createDataCollection:function(){var collection=this.callParent();collection.handleSort=Ext.Function.bind(this.handleTreeSort,this,[collection],true);collection.findInsertionIndex=Ext.Function.bind(this.handleTreeInsertionIndex,this,[collection,collection.findInsertionIndex],true);return collection},handleTreeInsertionIndex:function(items,item,collection,originalFn){return originalFn.call(collection,items,item,this.treeSortFn)},handleTreeSort:function(data){Ext.Array.sort(data,this.treeSortFn);return data},treeSortFn:function(node1,node2){if(node1.parentNode===node2.parentNode){return(node1.data.index<node2.data.index)?-1:1}var weight1=0,weight2=0,parent1=node1,parent2=node2;while(parent1){weight1+=(Math.pow(10,(parent1.data.depth+1)*-4)*(parent1.data.index+1));parent1=parent1.parentNode}while(parent2){weight2+=(Math.pow(10,(parent2.data.depth+1)*-4)*(parent2.data.index+1));parent2=parent2.parentNode}if(weight1>weight2){return 1}else{if(weight1<weight2){return -1}}return(node1.data.index>node2.data.index)?1:-1},applyFilters:function(filters){var me=this;return function(item){return me.isVisible(item)}},applyProxy:function(proxy){if(proxy){Ext.Logger.warn("A NodeStore cannot be bound to a proxy. Instead bind it to a record decorated with the NodeInterface by setting the node config.")}},applyNode:function(node){if(node){node=Ext.data.NodeInterface.decorate(node)}return node},updateNode:function(node,oldNode){if(oldNode&&!oldNode.isDestroyed){oldNode.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad",scope:this});oldNode.unjoin(this)}if(node){node.on({scope:this,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",load:"onNodeLoad"});node.join(this);var data=[];if(node.childNodes.length){data=data.concat(this.retrieveChildNodes(node))}if(this.getRootVisible()){data.push(node)}else{if(node.isLoaded()||node.isLoading()){node.set("expanded",true)}}this.data.clear();this.fireEvent("clear",this);this.suspendEvents();this.add(data);this.resumeEvents();this.fireEvent("refresh",this,this.data)}},retrieveChildNodes:function(root){var node=this.getNode(),recursive=this.getRecursive(),added=[],child=root;if(!root.childNodes.length||(!recursive&&root!==node)){return added}if(!recursive){return root.childNodes}while(child){if(child._added){delete child._added;if(child===root){break}else{child=child.nextSibling||child.parentNode}}else{if(child!==root){added.push(child)}if(child.firstChild){child._added=true;child=child.firstChild}else{child=child.nextSibling||child.parentNode}}}return added},isVisible:function(node){var parent=node.parentNode;if(!this.getRecursive()&&parent!==this.getNode()){return false}while(parent){if(!parent.isExpanded()){return false}if(parent===this.getNode()){break}parent=parent.parentNode}return true}});Ext.define("Ext.data.TreeStore",{extend:"Ext.data.NodeStore",alias:"store.tree",config:{root:undefined,clearOnLoad:true,nodeParam:"node",defaultRootId:"root",defaultRootProperty:"children",recursive:true},applyProxy:function(){return Ext.data.Store.prototype.applyProxy.apply(this,arguments)},applyRoot:function(root){var me=this;root=root||{};root=Ext.apply({},root);if(!root.isModel){Ext.applyIf(root,{id:me.getStoreId()+"-"+me.getDefaultRootId(),text:"Root",allowDrag:false});root=Ext.data.ModelManager.create(root,me.getModel())}Ext.data.NodeInterface.decorate(root);root.set(root.raw);return root},handleTreeInsertionIndex:function(items,item,collection,originalFn){if(item.parentNode){item.parentNode.sort(collection.getSortFn(),true,true)}return this.callParent(arguments)},handleTreeSort:function(data,collection){if(this._sorting){return data}this._sorting=true;this.getNode().sort(collection.getSortFn(),true,true);delete this._sorting;return this.callParent(arguments)},updateRoot:function(root,oldRoot){if(oldRoot){oldRoot.unBefore({expand:"onNodeBeforeExpand",scope:this});oldRoot.unjoin(this)}root.onBefore({expand:"onNodeBeforeExpand",scope:this});this.onNodeAppend(null,root);this.setNode(root);if(!root.isLoaded()&&!root.isLoading()&&root.isExpanded()){this.load({node:root})}this.fireEvent("rootchange",this,root,oldRoot)},getNodeById:function(id){return this.data.getByKey(id)},onNodeBeforeExpand:function(node,options,e){if(node.isLoading()){e.pause();this.on("load",function(){e.resume()},this,{single:true})}else{if(!node.isLoaded()){e.pause();this.load({node:node,callback:function(){e.resume()}})}}},onNodeAppend:function(parent,node){var proxy=this.getProxy(),reader=proxy.getReader(),Model=this.getModel(),data=node.raw,records=[],rootProperty=reader.getRootProperty(),dataRoot,processedData,i,ln,processedDataItem;if(!node.isLeaf()){dataRoot=reader.getRoot(data);if(dataRoot){processedData=reader.extractData(dataRoot);for(i=0,ln=processedData.length;i<ln;i++){processedDataItem=processedData[i];records.push(new Model(processedDataItem.data,processedDataItem.id,processedDataItem.node))}if(records.length){this.fillNode(node,records)}else{node.set("loaded",true)}delete data[rootProperty]}}},updateAutoLoad:function(autoLoad){if(autoLoad){var root=this.getRoot();if(!root.isLoaded()&&!root.isLoading()){this.load({node:root})}}},load:function(options){options=options||{};options.params=options.params||{};var me=this,node=options.node=options.node||me.getRoot();options.params[me.getNodeParam()]=node.getId();if(me.getClearOnLoad()){node.removeAll(true)}node.set("loading",true);return me.callParent([options])},updateProxy:function(proxy){this.callParent(arguments);var reader=proxy.getReader();if(!reader.getRootProperty()){reader.setRootProperty(this.getDefaultRootProperty());reader.buildExtractors()}},removeAll:function(){this.getRoot().removeAll(true);this.callParent(arguments)},onProxyLoad:function(operation){var me=this,records=operation.getRecords(),successful=operation.wasSuccessful(),node=operation.getNode();node.beginEdit();node.set("loading",false);if(successful){records=me.fillNode(node,records)}node.endEdit();me.loading=false;me.loaded=true;node.fireEvent("load",node,records,successful);me.fireEvent("load",this,records,successful,operation);Ext.callback(operation.getCallback(),operation.getScope()||me,[records,operation,successful])},fillNode:function(node,records){var ln=records?records.length:0,i,child;for(i=0;i<ln;i++){child=node.appendChild(records[i],true,true);this.onNodeAppend(node,child)}node.set("loaded",true);return records}});Ext.define("Ext.data.Validations",{alternateClassName:"Ext.data.validations",singleton:true,config:{presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address"},constructor:function(config){this.initConfig(config)},getMessage:function(type){var getterFn=this["get"+type[0].toUpperCase()+type.slice(1)+"Message"];if(getterFn){return getterFn.call(this)}return""},emailRe:/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/,presence:function(config,value){if(arguments.length===1){value=config}return !!value||value===0},length:function(config,value){if(value===undefined||value===null){return false}var length=value.length,min=config.min,max=config.max;if((min&&length<min)||(max&&length>max)){return false}else{return true}},email:function(config,email){return Ext.data.validations.emailRe.test(email)},format:function(config,value){if(value===undefined||value===null){value=""}return !!(config.matcher&&config.matcher.test(value))},inclusion:function(config,value){return config.list&&Ext.Array.indexOf(config.list,value)!=-1},exclusion:function(config,value){return config.list&&Ext.Array.indexOf(config.list,value)==-1}});Ext.define("Ext.data.identifier.Sequential",{extend:"Ext.data.identifier.Simple",alias:"data.identifier.sequential",config:{prefix:"",seed:1},constructor:function(){var me=this;me.callParent(arguments);me.parts=[me.getPrefix(),""]},generate:function(record){var me=this,parts=me.parts,seed=me.getSeed()+1;me.setSeed(seed);parts[1]=seed;return parts.join("")}});Ext.define("Ext.data.identifier.Uuid",{extend:"Ext.data.identifier.Simple",alias:"data.identifier.uuid",isUnique:true,config:{id:undefined,salt:null,timestamp:null,version:4},applyId:function(id){if(id===undefined){return Ext.data.identifier.Uuid.Global}return id},constructor:function(){var me=this;me.callParent(arguments);me.parts=[];me.init()},reconfigure:function(config){this.setConfig(config);this.init()},generate:function(){var me=this,parts=me.parts,version=me.getVersion(),salt=me.getSalt(),time=me.getTimestamp();parts[0]=me.toHex(time.lo,8);parts[1]=me.toHex(time.hi&65535,4);parts[2]=me.toHex(((time.hi>>>16)&4095)|(version<<12),4);parts[3]=me.toHex(128|((me.clockSeq>>>8)&63),2)+me.toHex(me.clockSeq&255,2);parts[4]=me.toHex(salt.hi,4)+me.toHex(salt.lo,8);if(version==4){me.init()}else{++time.lo;if(time.lo>=me.twoPow32){time.lo=0;++time.hi}}return parts.join("-").toLowerCase()},init:function(){var me=this,salt=me.getSalt(),time=me.getTimestamp();if(me.getVersion()==4){me.clockSeq=me.rand(0,me.twoPow14-1);if(!salt){salt={};me.setSalt(salt)}if(!time){time={};me.setTimestamp(time)}salt.lo=me.rand(0,me.twoPow32-1);salt.hi=me.rand(0,me.twoPow16-1);time.lo=me.rand(0,me.twoPow32-1);time.hi=me.rand(0,me.twoPow28-1)}else{me.setSalt(me.split(me.getSalt()));me.setTimestamp(me.split(me.getTimestamp()));me.getSalt().hi|=256}},twoPow14:Math.pow(2,14),twoPow16:Math.pow(2,16),twoPow28:Math.pow(2,28),twoPow32:Math.pow(2,32),toHex:function(value,length){var ret=value.toString(16);if(ret.length>length){ret=ret.substring(ret.length-length)}else{if(ret.length<length){ret=Ext.String.leftPad(ret,length,"0")}}return ret},rand:function(lo,hi){var v=Math.random()*(hi-lo+1);return Math.floor(v)+lo},split:function(bignum){if(typeof(bignum)=="number"){var hi=Math.floor(bignum/this.twoPow32);return{lo:Math.floor(bignum-hi*this.twoPow32),hi:hi}}return bignum}},function(){this.Global=new this({id:"uuid"})});Ext.define("Ext.data.proxy.JsonP",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.ScriptTagProxy",alias:["proxy.jsonp","proxy.scripttag"],requires:["Ext.data.JsonP"],config:{defaultWriterType:"base",callbackKey:"callback",recordParam:"records",autoAppendParams:true},doRequest:function(operation,callback,scope){var action=operation.getAction();if(action!=="read"){Ext.Logger.error("JsonP proxies can only be used to read data.")}var me=this,request=me.buildRequest(operation),params=request.getParams();request.setConfig({callbackKey:me.getCallbackKey(),timeout:me.getTimeout(),scope:me,callback:me.createRequestCallback(request,operation,callback,scope)});if(me.getAutoAppendParams()){request.setParams({})}request.setJsonP(Ext.data.JsonP.request(request.getCurrentConfig()));request.setParams(params);operation.setStarted();me.lastRequest=request;return request},createRequestCallback:function(request,operation,callback,scope){var me=this;return function(success,response,errorType){delete me.lastRequest;me.processResponse(success,operation,request,response,callback,scope)}},setException:function(operation,response){operation.setException(operation.getRequest().getJsonP().errorType)},buildUrl:function(request){var me=this,url=me.callParent(arguments),params=Ext.apply({},request.getParams()),filters=params.filters,records,filter,i,value;delete params.filters;if(me.getAutoAppendParams()){url=Ext.urlAppend(url,Ext.Object.toQueryString(params))}if(filters&&filters.length){for(i=0;i<filters.length;i++){filter=filters[i];value=filter.getValue();if(value){url=Ext.urlAppend(url,filter.getProperty()+"="+value)}}}return url},destroy:function(){this.abort();this.callParent(arguments)},abort:function(){var lastRequest=this.lastRequest;if(lastRequest){Ext.data.JsonP.abort(lastRequest.getJsonP())}}});Ext.define("Ext.data.proxy.WebStorage",{extend:"Ext.data.proxy.Client",alternateClassName:"Ext.data.WebStorageProxy",requires:"Ext.Date",config:{id:undefined,reader:null,writer:null,enablePagingParams:false},constructor:function(config){this.callParent(arguments);this.cache={};if(this.getStorageObject()===undefined){Ext.Logger.error("Local Storage is not supported in this browser, please use another type of data proxy")}},updateModel:function(model){if(!this.getId()){this.setId(model.modelName)}},create:function(operation,callback,scope){var records=operation.getRecords(),length=records.length,ids=this.getIds(),id,record,i;operation.setStarted();for(i=0;i<length;i++){record=records[i];if(!this.getModel().getIdentifier().isUnique){Ext.Logger.warn("Your identifier generation strategy for the model does not ensure unique id's. Please use the UUID strategy, or implement your own identifier strategy with the flag isUnique.")}id=record.getId();this.setRecord(record);ids.push(id)}this.setIds(ids);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},read:function(operation,callback,scope){var records=[],ids=this.getIds(),model=this.getModel(),idProperty=model.getIdProperty(),params=operation.getParams()||{},sorters=operation.getSorters(),filters=operation.getFilters(),start=operation.getStart(),limit=operation.getLimit(),length=ids.length,i,record,collection;if(params[idProperty]!==undefined){record=this.getRecord(params[idProperty]);if(record){records.push(record);operation.setSuccessful()}}else{for(i=0;i<length;i++){records.push(this.getRecord(ids[i]))}collection=Ext.create("Ext.util.Collection");if(filters&&filters.length){collection.setFilters(filters)}if(sorters&&sorters.length){collection.setSorters(sorters)}collection.addAll(records);if(this.getEnablePagingParams()&&start!==undefined&&limit!==undefined){records=collection.items.slice(start,start+limit)}else{records=collection.items.slice()}operation.setSuccessful()}operation.setCompleted();operation.setResultSet(Ext.create("Ext.data.ResultSet",{records:records,total:records.length,loaded:true}));operation.setRecords(records);if(typeof callback=="function"){callback.call(scope||this,operation)}},update:function(operation,callback,scope){var records=operation.getRecords(),length=records.length,ids=this.getIds(),record,id,i;operation.setStarted();for(i=0;i<length;i++){record=records[i];this.setRecord(record);id=record.getId();if(id!==undefined&&Ext.Array.indexOf(ids,id)==-1){ids.push(id)}}this.setIds(ids);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},destroy:function(operation,callback,scope){var records=operation.getRecords(),length=records.length,ids=this.getIds(),newIds=[].concat(ids),i;operation.setStarted();for(i=0;i<length;i++){Ext.Array.remove(newIds,records[i].getId());this.removeRecord(records[i],false)}this.setIds(newIds);operation.setCompleted();operation.setSuccessful();if(typeof callback=="function"){callback.call(scope||this,operation)}},getRecord:function(id){if(this.cache[id]===undefined){var recordKey=this.getRecordKey(id),item=this.getStorageObject().getItem(recordKey),data={},Model=this.getModel(),fields=Model.getFields().items,length=fields.length,i,field,name,record,rawData,dateFormat;if(!item){return undefined}rawData=Ext.decode(item);for(i=0;i<length;i++){field=fields[i];name=field.getName();if(typeof field.getDecode()=="function"){data[name]=field.getDecode()(rawData[name])}else{if(field.getType().type=="date"){dateFormat=field.getDateFormat();if(dateFormat){data[name]=Ext.Date.parse(rawData[name],dateFormat)}else{data[name]=new Date(rawData[name])}}else{data[name]=rawData[name]}}}record=new Model(data,id);this.cache[id]=record}return this.cache[id]},setRecord:function(record,id){if(id){record.setId(id)}else{id=record.getId()}var me=this,rawData=record.getData(),data={},Model=me.getModel(),fields=Model.getFields().items,length=fields.length,i=0,field,name,obj,key,dateFormat;for(;i<length;i++){field=fields[i];name=field.getName();if(field.getPersist()===false){continue}if(typeof field.getEncode()=="function"){data[name]=field.getEncode()(rawData[name],record)}else{if(field.getType().type=="date"&&Ext.isDate(rawData[name])){dateFormat=field.getDateFormat();if(dateFormat){data[name]=Ext.Date.format(rawData[name],dateFormat)}else{data[name]=rawData[name].getTime()}}else{data[name]=rawData[name]}}}obj=me.getStorageObject();key=me.getRecordKey(id);me.cache[id]=record;obj.removeItem(key);try{obj.setItem(key,Ext.encode(data))}catch(e){this.fireEvent("exception",this,e)}record.commit()},removeRecord:function(id,updateIds){var me=this,ids;if(id.isModel){id=id.getId()}if(updateIds!==false){ids=me.getIds();Ext.Array.remove(ids,id);me.setIds(ids)}me.getStorageObject().removeItem(me.getRecordKey(id))},getRecordKey:function(id){if(id.isModel){id=id.getId()}return Ext.String.format("{0}-{1}",this.getId(),id)},getIds:function(){var ids=(this.getStorageObject().getItem(this.getId())||"").split(","),length=ids.length,i;if(length==1&&ids[0]===""){ids=[]}return ids},setIds:function(ids){var obj=this.getStorageObject(),str=ids.join(","),id=this.getId();obj.removeItem(id);if(!Ext.isEmpty(str)){try{obj.setItem(id,str)}catch(e){this.fireEvent("exception",this,e)}}},initialize:function(){this.callParent(arguments);var storageObject=this.getStorageObject();try{storageObject.setItem(this.getId(),storageObject.getItem(this.getId())||"")}catch(e){this.fireEvent("exception",this,e)}},clear:function(){var obj=this.getStorageObject(),ids=this.getIds(),len=ids.length,i;for(i=0;i<len;i++){this.removeRecord(ids[i],false)}obj.removeItem(this.getId())},getStorageObject:function(){Ext.Logger.error("The getStorageObject function has not been defined in your Ext.data.proxy.WebStorage subclass")}});Ext.define("Ext.data.proxy.LocalStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.localstorage",alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}});Ext.define("Ext.data.proxy.Rest",{extend:"Ext.data.proxy.Ajax",alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",config:{appendId:true,format:null,batchActions:false,actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}},buildUrl:function(request){var me=this,operation=request.getOperation(),records=operation.getRecords()||[],record=records[0],model=me.getModel(),idProperty=model.getIdProperty(),format=me.getFormat(),url=me.getUrl(request),params=request.getParams()||{},id=(record&&!record.phantom)?record.getId():params[idProperty];if(me.getAppendId()&&id){if(!url.match(/\/$/)){url+="/"}url+=id;delete params[idProperty]}if(format){if(!url.match(/\.$/)){url+="."}url+=format}request.setUrl(url);return me.callParent([request])}});Ext.define("Ext.data.proxy.Sql",{alias:"proxy.sql",extend:"Ext.data.proxy.Client",alternateClassName:"Ext.data.proxy.SQL",config:{reader:null,writer:null,table:null,database:"Sencha",columns:"",uniqueIdStrategy:false,tableExists:false,defaultDateFormat:"Y-m-d H:i:s.u"},updateModel:function(model){if(model&&!this.getTable()){var modelName=model.modelName,defaultDateFormat=this.getDefaultDateFormat(),table=modelName.slice(modelName.lastIndexOf(".")+1);model.getFields().each(function(field){if(field.getType().type==="date"&&!field.getDateFormat()){field.setDateFormat(defaultDateFormat)}});this.setUniqueIdStrategy(model.getIdentifier().isUnique);this.setTable(table);this.setColumns(this.getPersistedModelColumns(model))}this.callParent(arguments)},create:function(operation,callback,scope){var me=this,db=me.getDatabaseObject(),records=operation.getRecords(),tableExists=me.getTableExists();operation.setStarted();db.transaction(function(transaction){if(!tableExists){me.createTable(transaction)}me.insertRecords(records,transaction,function(resultSet,errors){if(operation.process(operation.getAction(),resultSet)===false){me.fireEvent("exception",this,operation)}if(typeof callback=="function"){callback.call(scope||this,operation)}},this)})},read:function(operation,callback,scope){var me=this,db=me.getDatabaseObject(),model=me.getModel(),idProperty=model.getIdProperty(),tableExists=me.getTableExists(),params=operation.getParams()||{},id=params[idProperty],sorters=operation.getSorters(),filters=operation.getFilters(),page=operation.getPage(),start=operation.getStart(),limit=operation.getLimit(),filtered,i,ln;params=Ext.apply(params,{page:page,start:start,limit:limit,sorters:sorters,filters:filters});operation.setStarted();db.transaction(function(transaction){if(!tableExists){me.createTable(transaction)}me.selectRecords(transaction,id!==undefined?id:params,function(resultSet,errors){if(operation.process(operation.getAction(),resultSet)===false){me.fireEvent("exception",me,operation)}if(filters.length){filtered=Ext.create("Ext.util.Collection",function(record){return record.getId()});filtered.setFilterRoot("data");for(i=0,ln=filters.length;i<ln;i++){if(filters[i].getProperty()===null){filtered.addFilter(filters[i])}}filtered.addAll(operation.getRecords());operation.setRecords(filtered.items.slice());resultSet.setRecords(operation.getRecords());resultSet.setCount(filtered.items.length);resultSet.setTotal(filtered.items.length)}if(typeof callback=="function"){callback.call(scope||me,operation)}})})},update:function(operation,callback,scope){var me=this,records=operation.getRecords(),db=me.getDatabaseObject(),tableExists=me.getTableExists();operation.setStarted();db.transaction(function(transaction){if(!tableExists){me.createTable(transaction)}me.updateRecords(transaction,records,function(resultSet,errors){if(operation.process(operation.getAction(),resultSet)===false){me.fireEvent("exception",me,operation)}if(typeof callback=="function"){callback.call(scope||me,operation)}})})},destroy:function(operation,callback,scope){var me=this,records=operation.getRecords(),db=me.getDatabaseObject(),tableExists=me.getTableExists();operation.setStarted();db.transaction(function(transaction){if(!tableExists){me.createTable(transaction)}me.destroyRecords(transaction,records,function(resultSet,errors){if(operation.process(operation.getAction(),resultSet)===false){me.fireEvent("exception",me,operation)}if(typeof callback=="function"){callback.call(scope||me,operation)}})})},createTable:function(transaction){transaction.executeSql("CREATE TABLE IF NOT EXISTS "+this.getTable()+" ("+this.getSchemaString()+")");this.setTableExists(true)},insertRecords:function(records,transaction,callback,scope){var me=this,table=me.getTable(),columns=me.getColumns(),totalRecords=records.length,executed=0,tmp=[],insertedRecords=[],errors=[],uniqueIdStrategy=me.getUniqueIdStrategy(),i,ln,placeholders,result;result=new Ext.data.ResultSet({records:insertedRecords,success:true});for(i=0,ln=columns.length;i<ln;i++){tmp.push("?")}placeholders=tmp.join(", ");Ext.each(records,function(record){var id=record.getId(),data=me.getRecordData(record),values=me.getColumnValues(columns,data);transaction.executeSql("INSERT INTO "+table+" ("+columns.join(", ")+") VALUES ("+placeholders+")",values,function(transaction,resultSet){executed++;insertedRecords.push({clientId:id,id:uniqueIdStrategy?id:resultSet.insertId,data:data,node:data});if(executed===totalRecords&&typeof callback=="function"){callback.call(scope||me,result,errors)}},function(transaction,error){executed++;errors.push({clientId:id,error:error});if(executed===totalRecords&&typeof callback=="function"){callback.call(scope||me,result,errors)}})})},selectRecords:function(transaction,params,callback,scope){var me=this,table=me.getTable(),idProperty=me.getModel().getIdProperty(),sql="SELECT * FROM "+table,records=[],filterStatement=" WHERE ",sortStatement=" ORDER BY ",i,ln,data,result,count,rows,filter,sorter,property,value;result=new Ext.data.ResultSet({records:records,success:true});if(!Ext.isObject(params)){sql+=filterStatement+idProperty+" = "+params}else{ln=params.filters&&params.filters.length;if(ln){for(i=0;i<ln;i++){filter=params.filters[i];property=filter.getProperty();value=filter.getValue();if(property!==null){sql+=filterStatement+property+" "+(filter.getAnyMatch()?("LIKE '%"+value+"%'"):("= '"+value+"'"));filterStatement=" AND "}}}ln=params.sorters&&params.sorters.length;if(ln){for(i=0;i<ln;i++){sorter=params.sorters[i];property=sorter.getProperty();if(property!==null){sql+=sortStatement+property+" "+sorter.getDirection();sortStatement=", "}}}if(params.page!==undefined){sql+=" LIMIT "+parseInt(params.start,10)+", "+parseInt(params.limit,10)}}transaction.executeSql(sql,null,function(transaction,resultSet){rows=resultSet.rows;count=rows.length;for(i=0,ln=count;i<ln;i++){data=rows.item(i);records.push({clientId:null,id:data[idProperty],data:data,node:data})}result.setSuccess(true);result.setTotal(count);result.setCount(count);if(typeof callback=="function"){callback.call(scope||me,result)}},function(transaction,errors){result.setSuccess(false);result.setTotal(0);result.setCount(0);if(typeof callback=="function"){callback.call(scope||me,result)}})},updateRecords:function(transaction,records,callback,scope){var me=this,table=me.getTable(),columns=me.getColumns(),totalRecords=records.length,idProperty=me.getModel().getIdProperty(),executed=0,updatedRecords=[],errors=[],i,ln,result;result=new Ext.data.ResultSet({records:updatedRecords,success:true});Ext.each(records,function(record){var id=record.getId(),data=me.getRecordData(record),values=me.getColumnValues(columns,data),updates=[];for(i=0,ln=columns.length;i<ln;i++){updates.push(columns[i]+" = ?")}transaction.executeSql("UPDATE "+table+" SET "+updates.join(", ")+" WHERE "+idProperty+" = ?",values.concat(id),function(transaction,resultSet){executed++;updatedRecords.push({clientId:id,id:id,data:data,node:data});if(executed===totalRecords&&typeof callback=="function"){callback.call(scope||me,result,errors)}},function(transaction,error){executed++;errors.push({clientId:id,error:error});if(executed===totalRecords&&typeof callback=="function"){callback.call(scope||me,result,errors)}})})},destroyRecords:function(transaction,records,callback,scope){var me=this,table=me.getTable(),idProperty=me.getModel().getIdProperty(),ids=[],values=[],destroyedRecords=[],i,ln,result,record;for(i=0,ln=records.length;i<ln;i++){ids.push(idProperty+" = ?");values.push(records[i].getId())}result=new Ext.data.ResultSet({records:destroyedRecords,success:true});transaction.executeSql("DELETE FROM "+table+" WHERE "+ids.join(" OR "),values,function(transaction,resultSet){for(i=0,ln=records.length;i<ln;i++){record=records[i];destroyedRecords.push({id:record.getId()})}if(typeof callback=="function"){callback.call(scope||me,result)}},function(transaction,error){if(typeof callback=="function"){callback.call(scope||me,result)}})},getRecordData:function(record){var me=this,fields=record.getFields(),idProperty=record.getIdProperty(),uniqueIdStrategy=me.getUniqueIdStrategy(),data={},name,value;fields.each(function(field){if(field.getPersist()){name=field.getName();if(name===idProperty&&!uniqueIdStrategy){return}value=record.get(name);if(field.getType().type=="date"){value=me.writeDate(field,value)}data[name]=value}},this);return data},getColumnValues:function(columns,data){var ln=columns.length,values=[],i,column,value;for(i=0;i<ln;i++){column=columns[i];value=data[column];if(value!==undefined){values.push(value)}}return values},getSchemaString:function(){var me=this,schema=[],model=me.getModel(),idProperty=model.getIdProperty(),fields=model.getFields().items,uniqueIdStrategy=me.getUniqueIdStrategy(),ln=fields.length,i,field,type,name;for(i=0;i<ln;i++){field=fields[i];type=field.getType().type;name=field.getName();if(name===idProperty){if(uniqueIdStrategy){type=me.convertToSqlType(type);schema.unshift(idProperty+" "+type)}else{schema.unshift(idProperty+" INTEGER PRIMARY KEY AUTOINCREMENT")}}else{type=me.convertToSqlType(type);schema.push(name+" "+type)}}return schema.join(", ")},getPersistedModelColumns:function(model){var fields=model.getFields().items,uniqueIdStrategy=this.getUniqueIdStrategy(),idProperty=model.getIdProperty(),columns=[],ln=fields.length,i,field,name;for(i=0;i<ln;i++){field=fields[i];name=field.getName();if(name===idProperty&&!uniqueIdStrategy){continue}if(field.getPersist()){columns.push(field.getName())}}return columns},convertToSqlType:function(type){switch(type.toLowerCase()){case"date":case"string":case"auto":return"TEXT";case"int":return"INTEGER";case"float":return"REAL";case"bool":return"NUMERIC"}},writeDate:function(field,date){var dateFormat=field.getDateFormat()||this.getDefaultDateFormat();switch(dateFormat){case"timestamp":return date.getTime()/1000;case"time":return date.getTime();default:return Ext.Date.format(date,dateFormat)}},dropTable:function(){var me=this,table=me.getTable(),db=me.getDatabaseObject();db.transaction(function(transaction){transaction.executeSql("DROP TABLE "+table)});me.setTableExists(false)},getDatabaseObject:function(){return openDatabase(this.getDatabase(),"1.0","Sencha Database",5*1024*1024)}});Ext.define("Ext.data.proxy.SessionStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.sessionstorage",alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}});Ext.define("Ext.data.reader.Xml",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.XmlReader",alias:"reader.xml",config:{record:null},createAccessor:function(expr){var me=this;if(Ext.isEmpty(expr)){return Ext.emptyFn}if(Ext.isFunction(expr)){return expr}return function(root){return me.getNodeValue(Ext.DomQuery.selectNode(expr,root))}},getNodeValue:function(node){if(node&&node.firstChild){return node.firstChild.nodeValue}return undefined},getResponseData:function(response){if(response.nodeType===1||response.nodeType===9){return response}var xml=response.responseXML;if(!xml){this.fireEvent("exception",this,response,"XML data not found in the response");Ext.Logger.warn("XML data not found in the response")}return xml},getData:function(data){return data.documentElement||data},getRoot:function(data){var nodeName=data.nodeName,root=this.getRootProperty();if(!root||(nodeName&&nodeName==root)){return data}else{if(Ext.DomQuery.isXml(data)){return Ext.DomQuery.selectNode(root,data)}}},extractData:function(root){var recordName=this.getRecord();if(!recordName){Ext.Logger.error("Record is a required parameter")}if(recordName!=root.nodeName&&recordName!==root.localName){root=Ext.DomQuery.select(recordName,root)}else{root=[root]}return this.callParent([root])},getAssociatedDataRoot:function(data,associationName){return Ext.DomQuery.select(associationName,data)[0]},readRecords:function(doc){if(Ext.isArray(doc)){doc=doc[0]}return this.callParent([doc])},createFieldAccessExpression:function(field,fieldVarName,dataName){var selector=field.getMapping()||field.getName(),result;if(typeof selector==="function"){result=fieldVarName+".getMapping()("+dataName+", this)"}else{selector=selector.split("@");if(selector.length===2&&selector[0]){result='me.getNodeValue(Ext.DomQuery.selectNode("@'+selector[1]+'", Ext.DomQuery.selectNode("'+selector[0]+'", '+dataName+")))"}else{if(selector.length===2){result='me.getNodeValue(Ext.DomQuery.selectNode("@'+selector[1]+'", '+dataName+"))"}else{if(selector.length===1){result='me.getNodeValue(Ext.DomQuery.selectNode("'+selector[0]+'", '+dataName+"))"}else{throw"Unsupported query - too many queries for attributes in "+selector.join("@")}}}}return result}});Ext.define("Ext.data.writer.Xml",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.XmlWriter",alias:"writer.xml",config:{documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record"},writeRecords:function(request,data){var me=this,xml=[],i=0,len=data.length,root=me.getDocumentRoot(),record=me.getRecord(),needsRoot=data.length!==1,item,key;xml.push(me.getHeader()||"");if(!root&&needsRoot){root=me.getDefaultDocumentRoot()}if(root){xml.push("<",root,">")}for(;i<len;++i){item=data[i];xml.push("<",record,">");for(key in item){if(item.hasOwnProperty(key)){xml.push("<",key,">",item[key],"</",key,">")}}xml.push("</",record,">")}if(root){xml.push("</",root,">")}request.setXmlData(xml.join(""));return request}});Ext.define("Ext.dataview.IndexBar",{extend:"Ext.Component",alternateClassName:"Ext.IndexBar",config:{baseCls:Ext.baseCSSPrefix+"indexbar",direction:"vertical",letters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ui:"alphabet",listPrefix:null},itemCls:Ext.baseCSSPrefix+"",updateDirection:function(newDirection,oldDirection){var baseCls=this.getBaseCls();this.element.replaceCls(baseCls+"-"+oldDirection,baseCls+"-"+newDirection)},getElementConfig:function(){return{reference:"wrapper",classList:["x-centered","x-indexbar-wrapper"],children:[this.callParent()]}},updateLetters:function(letters){this.innerElement.setHtml("");if(letters){var ln=letters.length,i;for(i=0;i<ln;i++){this.innerElement.createChild({html:letters[i]})}}},updateListPrefix:function(listPrefix){if(listPrefix&&listPrefix.length){this.innerElement.createChild({html:listPrefix},0)}},initialize:function(){this.callParent();this.innerElement.on({touchstart:this.onTouchStart,touchend:this.onTouchEnd,touchmove:this.onTouchMove,scope:this})},onTouchStart:function(e,t){e.stopPropagation();this.innerElement.addCls(this.getBaseCls()+"-pressed");this.pageBox=this.innerElement.getPageBox();this.onTouchMove(e)},onTouchEnd:function(e,t){this.innerElement.removeCls(this.getBaseCls()+"-pressed")},onTouchMove:function(e){var point=Ext.util.Point.fromEvent(e),target,pageBox=this.pageBox;if(!pageBox){pageBox=this.pageBox=this.el.getPageBox()}if(this.getDirection()==="vertical"){if(point.y>pageBox.bottom||point.y<pageBox.top){return}target=Ext.Element.fromPoint(pageBox.left+(pageBox.width/2),point.y)}else{if(point.x>pageBox.right||point.x<pageBox.left){return}target=Ext.Element.fromPoint(point.x,pageBox.top+(pageBox.height/2))}if(target){this.fireEvent("index",this,target.dom.innerHTML,target)}},destroy:function(){var me=this,elements=Array.prototype.slice.call(me.innerElement.dom.childNodes),ln=elements.length,i=0;for(;i<ln;i++){Ext.removeNode(elements[i])}this.callParent()}},function(){});Ext.define("Ext.dataview.ListItemHeader",{extend:"Ext.Component",xtype:"listitemheader",config:{baseCls:Ext.baseCSSPrefix+"list-header",docked:"top"}});Ext.define("Ext.dataview.component.ListItem",{extend:"Ext.dataview.component.DataItem",xtype:"listitem",config:{baseCls:Ext.baseCSSPrefix+"list-item",dataMap:null,body:{xtype:"component",cls:"x-list-item-body"},disclosure:{xtype:"component",cls:"x-list-disclosure",hidden:true,docked:"right"},header:{xtype:"component",cls:"x-list-header",html:" ",hidden:true},tpl:null,items:null},applyBody:function(body){if(body&&!body.isComponent){body=Ext.factory(body,Ext.Component,this.getBody())}return body},updateBody:function(body,oldBody){if(body){this.add(body)}else{if(oldBody){oldBody.destroy()}}},applyHeader:function(header){if(header&&!header.isComponent){header=Ext.factory(header,Ext.Component,this.getHeader())}return header},updateHeader:function(header,oldHeader){if(header){this.element.getFirstChild().insertFirst(header.element)}else{if(oldHeader){oldHeader.destroy()}}},applyDisclosure:function(disclosure){if(disclosure&&!disclosure.isComponent){disclosure=Ext.factory(disclosure,Ext.Component,this.getDisclosure())}return disclosure},updateDisclosure:function(disclosure,oldDisclosure){if(disclosure){this.add(disclosure)}else{if(oldDisclosure){oldDisclosure.destroy()}}},updateTpl:function(tpl){this.getBody().setTpl(tpl)},updateRecord:function(record){var me=this,dataview=me.dataview||this.getDataview(),data=record&&dataview.prepareData(record.getData(true),dataview.getStore().indexOf(record),record),dataMap=me.getDataMap(),body=this.getBody(),disclosure=this.getDisclosure();me._record=record;if(dataMap){me.doMapData(dataMap,data,body)}else{if(body){body.updateData(data||null)}}if(disclosure&&record&&dataview.getOnItemDisclosure()){var disclosureProperty=dataview.getDisclosureProperty();disclosure[(data.hasOwnProperty(disclosureProperty)&&data[disclosureProperty]===false)?"hide":"show"]()}me.fireEvent("updatedata",me,data)},destroy:function(){Ext.destroy(this.getHeader());this.callParent(arguments)}});Ext.define("Ext.util.TranslatableList",{extend:"Ext.util.translatable.Abstract",config:{items:[]},applyItems:function(items){return Ext.Array.from(items)},doTranslate:function(x,y){var items=this.getItems(),offset=0,i,ln,item,translateY;for(i=0,ln=items.length;i<ln;i++){item=items[i];if(item&&!item._list_hidden){translateY=y+offset;offset+=item.$height;item.translate(0,translateY)}}}});Ext.define("Ext.util.PositionMap",{config:{minimumHeight:50},constructor:function(config){this.map=[];this.adjustments={};this.offset=0;this.initConfig(config)},populate:function(count,offset){var map=this.map=this.map||[],minimumHeight=this.getMinimumHeight(),i,previousIndex,ln;count++;map.length=count;map[0]=0;for(i=offset+1,ln=count-1;i<=ln;i++){previousIndex=i-1;map[i]=map[previousIndex]+minimumHeight}this.adjustments={indices:[],heights:{}};this.offset=0;for(i=1,ln=count-1;i<=ln;i++){previousIndex=i-1;this.offset+=map[i]-map[previousIndex]-minimumHeight}},setItemHeight:function(index,height){height=Math.max(height,this.getMinimumHeight());if(height!==this.getItemHeight(index)){var adjustments=this.adjustments;adjustments.indices.push(parseInt(index,10));adjustments.heights[index]=height}},update:function(){var adjustments=this.adjustments,indices=adjustments.indices,heights=adjustments.heights,map=this.map,ln=indices.length,minimumHeight=this.getMinimumHeight(),difference=0,i,j,height,index,nextIndex,currentHeight;if(!adjustments.indices.length){return false}Ext.Array.sort(indices,function(a,b){return a-b});for(i=0;i<ln;i++){index=indices[i];nextIndex=indices[i+1]||map.length-1;currentHeight=(map[index+1]!==undefined)?(map[index+1]-map[index]+difference):minimumHeight;height=heights[index];difference+=height-currentHeight;for(j=index+1;j<=nextIndex;j++){map[j]+=difference}}this.offset+=difference;this.adjustments={indices:[],heights:{}};return true},getItemHeight:function(index){return this.map[index+1]-this.map[index]},getTotalHeight:function(){return((this.map.length-1)*this.getMinimumHeight())+this.offset},findIndex:function(pos){return this.map.length?this.binarySearch(this.map,pos):0},binarySearch:function(sorted,value){var start=0,end=sorted.length;if(value<sorted[0]){return 0}if(value>sorted[end-1]){return end-1}while(start+1<end){var mid=(start+end)>>1,val=sorted[mid];if(val==value){return mid}else{if(val<value){start=mid}else{end=mid}}}return start}});Ext.define("Ext.dataview.List",{alternateClassName:"Ext.List",extend:"Ext.dataview.DataView",xtype:"list",mixins:["Ext.mixin.Bindable"],requires:["Ext.dataview.IndexBar","Ext.dataview.ListItemHeader","Ext.dataview.component.ListItem","Ext.util.TranslatableList","Ext.util.PositionMap"],config:{layout:"fit",indexBar:false,icon:null,preventSelectionOnDisclose:true,baseCls:Ext.baseCSSPrefix+"list",pinHeaders:true,grouped:false,onItemDisclosure:null,disclosureProperty:"disclosure",ui:"normal",defaultType:"listitem",itemMap:{minimumHeight:47},variableHeights:true,itemHeight:47,refreshHeightOnUpdate:true},constructor:function(config){var me=this,layout;me.callParent(arguments);if(Ext.os.is.Android4&&!Ext.browser.is.ChromeMobile){me.headerTranslateFn=Ext.Function.createThrottled(me.headerTranslateFn,50,me)}layout=this.getLayout();if(layout&&!layout.isFit){Ext.Logger.error("The base layout for a DataView must always be a Fit Layout")}},topItemIndex:0,topItemPosition:0,updateItemHeight:function(itemHeight){this.getItemMap().setMinimumHeight(itemHeight)},applyItemMap:function(itemMap){return Ext.factory(itemMap,Ext.util.PositionMap,this.getItemMap())},beforeInitialize:function(){var me=this,container;me.listItems=[];me.scrollDockItems={top:[],bottom:[]};container=me.container=me.add(new Ext.Container({scrollable:{scroller:{autoRefresh:false,direction:"vertical",translatable:{xclass:"Ext.util.TranslatableList"}}}}));container.getScrollable().getScroller().getTranslatable().setItems(me.listItems);me.setScrollable(container.getScrollable());me.scrollableBehavior=container.getScrollableBehavior()},initialize:function(){var me=this,container=me.container,i,ln;me.updatedItems=[];me.headerMap=[];me.on(me.getTriggerCtEvent(),me.onContainerTrigger,me);me.on(me.getTriggerEvent(),me.onItemTrigger,me);me.header=Ext.factory({xclass:"Ext.dataview.ListItemHeader",html:"&nbsp;",translatable:true,role:"globallistheader",cls:["x-list-header","x-list-header-swap"]});me.container.innerElement.insertFirst(me.header.element);me.headerTranslate=me.header.getTranslatable();me.headerTranslate.translate(0,-10000);if(!me.getGrouped()){me.updatePinHeaders(null)}container.element.on({delegate:"."+me.getBaseCls()+"-disclosure",tap:"handleItemDisclosure",scope:me});container.element.on({resize:"onResize",scope:me});container.innerElement.on({touchstart:"onItemTouchStart",touchend:"onItemTouchEnd",tap:"onItemTap",taphold:"onItemTapHold",singletap:"onItemSingleTap",doubletap:"onItemDoubleTap",swipe:"onItemSwipe",delegate:"."+Ext.baseCSSPrefix+"list-item-body",scope:me});for(i=0,ln=me.scrollDockItems.top.length;i<ln;i++){container.add(me.scrollDockItems.top[i])}for(i=0,ln=me.scrollDockItems.bottom.length;i<ln;i++){container.add(me.scrollDockItems.bottom[i])}if(me.getStore()){me.refresh()}},updateInline:function(newInline){var me=this;me.callParent(arguments);if(newInline){me.setOnItemDisclosure(false);me.setIndexBar(false);me.setGrouped(false)}},applyIndexBar:function(indexBar){return Ext.factory(indexBar,Ext.dataview.IndexBar,this.getIndexBar())},updateIndexBar:function(indexBar){var me=this;if(indexBar&&me.getScrollable()){me.indexBarElement=me.getScrollableBehavior().getScrollView().getElement().appendChild(indexBar.renderElement);indexBar.on({index:"onIndex",scope:me});me.element.addCls(me.getBaseCls()+"-indexed")}},updateGrouped:function(grouped){var me=this,baseCls=this.getBaseCls(),cls=baseCls+"-grouped",unCls=baseCls+"-ungrouped";if(grouped){me.addCls(cls);me.removeCls(unCls);me.updatePinHeaders(me.getPinHeaders())}else{me.addCls(unCls);me.removeCls(cls);me.updatePinHeaders(null)}if(me.isPainted()&&me.listItems.length){me.setItemsCount(me.listItems.length)}},updatePinHeaders:function(pinnedHeaders){if(this.headerTranslate){this.headerTranslate.translate(0,-10000)}},updateItemTpl:function(newTpl,oldTpl){var listItems=this.listItems,ln=listItems.length||0,store=this.getStore(),i,listItem;for(i=0;i<ln;i++){listItem=listItems[i];listItem.setTpl(newTpl)}if(store&&store.getCount()){this.doRefresh()}},updateScrollerSize:function(){var me=this,totalHeight=me.getItemMap().getTotalHeight(),scroller=me.container.getScrollable().getScroller();if(totalHeight>0){scroller.givenSize=totalHeight;scroller.refresh()}},onResize:function(){var me=this,container=me.container,element=container.element,minimumHeight=me.getItemMap().getMinimumHeight(),containerSize;if(!me.listItems.length){me.bind(container.getScrollable().getScroller().getTranslatable(),"doTranslate","onTranslate")}me.containerSize=containerSize=element.getHeight();me.setItemsCount(Math.ceil(containerSize/minimumHeight)+1)},scrollDockHeightRefresh:function(){var items=this.listItems,scrollDockItems=this.scrollDockItems,ln=items.length,i,item;for(i=0;i<ln;i++){item=items[i];if((item.isFirst&&scrollDockItems.top.length)||(item.isLast&&scrollDockItems.bottom.length)){this.updatedItems.push(item)}}this.refreshScroller()},headerTranslateFn:function(record,transY,headerTranslate){var headerString=this.getStore().getGroupString(record);if(this.currentHeader!==headerString){this.currentHeader=headerString;this.header.setHtml(headerString)}headerTranslate.translate(0,transY)},onTranslate:function(x,y,args){var me=this,listItems=me.listItems,itemsCount=listItems.length,currentTopIndex=me.topItemIndex,itemMap=me.getItemMap(),store=me.getStore(),storeCount=store&&store.getCount(),info=me.getListItemInfo(),grouped=me.getGrouped(),storeGroups=me.groups,headerMap=me.headerMap,headerTranslate=me.headerTranslate,pinHeaders=me.getPinHeaders(),maxIndex=storeCount-itemsCount+1,topIndex,changedCount,i,index,item,closestHeader,record,pushedHeader,transY,element;if(me.updatedItems.length){me.updateItemHeights()}me.topItemPosition=itemMap.findIndex(-y)||0;me.indexOffset=me.topItemIndex=topIndex=Math.max(0,Math.min(me.topItemPosition,maxIndex));if(grouped&&headerTranslate&&storeGroups.length&&pinHeaders){closestHeader=itemMap.binarySearch(headerMap,-y);record=storeGroups[closestHeader].children[0];if(record){pushedHeader=y+headerMap[closestHeader+1]-me.headerHeight;if(y>=0){transY=-10000}else{if(pushedHeader<0){transY=pushedHeader}else{transY=Math.max(0,y)}}this.headerTranslateFn(record,transY,headerTranslate)}}args[1]=(itemMap.map[topIndex]||0)+y;if(currentTopIndex!==topIndex&&topIndex<=maxIndex){if(currentTopIndex>topIndex){changedCount=Math.min(itemsCount,currentTopIndex-topIndex);for(i=changedCount-1;i>=0;i--){item=listItems.pop();listItems.unshift(item);me.updateListItem(item,i+topIndex,info)}}else{changedCount=Math.min(itemsCount,topIndex-currentTopIndex);for(i=0;i<changedCount;i++){item=listItems.shift();listItems.push(item);index=i+topIndex+itemsCount-changedCount;me.updateListItem(item,index,info)}}}if(listItems.length&&grouped&&pinHeaders){if(me.headerIndices[topIndex]){element=listItems[0].getHeader().element;if(y<itemMap.map[topIndex]){element.setVisibility(false)}else{element.setVisibility(true)}}for(i=1;i<=changedCount;i++){if(listItems[i]){listItems[i].getHeader().element.setVisibility(true)}}}},setItemsCount:function(itemsCount){var me=this,listItems=me.listItems,minimumHeight=me.getItemMap().getMinimumHeight(),config={xtype:me.getDefaultType(),itemConfig:me.getItemConfig(),tpl:me.getItemTpl(),minHeight:minimumHeight,cls:me.getItemCls()},info=me.getListItemInfo(),i,item;for(i=0;i<itemsCount;i++){item=listItems[i];if(!item){item=Ext.factory(config);item.dataview=me;item.$height=minimumHeight;me.container.doAdd(item);listItems.push(item)}item.dataIndex=null;if(info.store){me.updateListItem(item,i+me.topItemIndex,info)}else{item.setRecord(null);item.translate(0,-10000);item._list_hidden=true}}me.updateScrollerSize()},getListItemInfo:function(){var me=this,baseCls=me.getBaseCls();return{store:me.getStore(),grouped:me.getGrouped(),baseCls:baseCls,selectedCls:me.getSelectedCls(),headerCls:baseCls+"-header-wrap",footerCls:baseCls+"-footer-wrap",firstCls:baseCls+"-item-first",lastCls:baseCls+"-item-last",itemMap:me.getItemMap(),variableHeights:me.getVariableHeights(),defaultItemHeight:me.getItemHeight()}},updateListItem:function(item,index,info){var record=info.store.getAt(index);if(this.isSelected(record)){item.addCls(info.selectedCls)}else{item.removeCls(info.selectedCls)}item.removeCls([info.headerCls,info.footerCls,info.firstCls,info.lastCls]);this.replaceItemContent(item,index,info)},taskRunner:function(){delete this.intervalId;if(this.scheduledTasks&&this.scheduledTasks.length>0){var task=this.scheduledTasks.shift();this.doUpdateListItem(task.item,task.index,task.info);if(this.scheduledTasks.length===0&&this.getVariableHeights()&&!this.container.getScrollable().getScroller().getTranslatable().isAnimating){this.refreshScroller()}else{if(this.scheduledTasks.length>0){this.intervalId=requestAnimationFrame(Ext.Function.bind(this.taskRunner,this))}}}},scheduledTasks:null,replaceItemContent:function(item,index,info){var translatable=this.container.getScrollable().getScroller().getTranslatable();if(Ext.os.is.Android4&&!Ext.browser.is.Chrome&&!info.variableHeights&&!info.grouped&&translatable.isAnimating&&translatable.activeEasingY&&Math.abs(translatable.activeEasingY._startVelocity)>0.75){if(!this.scheduledTasks){this.scheduledTasks=[]}for(var i=0;i<this.scheduledTasks.length;i++){if(this.scheduledTasks[i].item===item){Ext.Array.remove(this.scheduledTasks,this.scheduledTasks[i]);break}}this.scheduledTasks.push({item:item,index:index,info:info});if(!this.intervalId){this.intervalId=requestAnimationFrame(Ext.Function.bind(this.taskRunner,this))}}else{this.doUpdateListItem(item,index,info)}},doUpdateListItem:function(item,index,info){var record=info.store.getAt(index),headerIndices=this.headerIndices,footerIndices=this.footerIndices,headerItem=item.getHeader(),scrollDockItems=this.scrollDockItems,updatedItems=this.updatedItems,itemHeight=info.itemMap.getItemHeight(index),ln,i,scrollDockItem;if(!record){item.setRecord(null);item.translate(0,-10000);item._list_hidden=true;return}item._list_hidden=false;if(item.isFirst&&scrollDockItems.top.length){for(i=0,ln=scrollDockItems.top.length;i<ln;i++){scrollDockItem=scrollDockItems.top[i];scrollDockItem.addCls(Ext.baseCSSPrefix+"list-scrolldock-hidden");item.remove(scrollDockItem,false)}item.isFirst=false}if(item.isLast&&scrollDockItems.bottom.length){for(i=0,ln=scrollDockItems.bottom.length;i<ln;i++){scrollDockItem=scrollDockItems.bottom[i];scrollDockItem.addCls(Ext.baseCSSPrefix+"list-scrolldock-hidden");item.remove(scrollDockItem,false)}item.isLast=false}if(item.getRecord){if(item.dataIndex!==index){item.dataIndex=index;this.fireEvent("itemindexchange",this,record,index,item)}if(item.getRecord()===record){item.updateRecord(record)}else{item.setRecord(record)}}if(this.isSelected(record)){item.addCls(info.selectedCls)}else{item.removeCls(info.selectedCls)}item.removeCls([info.headerCls,info.footerCls,info.firstCls,info.lastCls]);if(info.grouped){if(headerIndices[index]){item.addCls(info.headerCls);headerItem.setHtml(info.store.getGroupString(record));headerItem.show();headerItem.element.setVisibility(true);if(!info.variableHeights&&itemHeight===info.defaultItemHeight){Ext.Array.include(updatedItems,item)}}else{headerItem.hide();if(!info.variableHeights&&!footerIndices[index]&&itemHeight!==info.defaultItemHeight){info.itemMap.setItemHeight(index,info.defaultItemHeight);info.itemMap.update()}}if(footerIndices[index]){item.addCls(info.footerCls);if(!info.variableHeights&&itemHeight===info.defaultItemHeight){Ext.Array.include(updatedItems,item)}}}else{if(!info.variableHeights&&itemHeight!==info.defaultItemHeight){info.itemMap.setItemHeight(index,info.defaultItemHeight);info.itemMap.update()}}if(index===0){item.isFirst=true;item.addCls(info.firstCls);if(!info.grouped){item.addCls(info.headerCls)}for(i=0,ln=scrollDockItems.top.length;i<ln;i++){scrollDockItem=scrollDockItems.top[i];item.insert(0,scrollDockItem);scrollDockItem.removeCls(Ext.baseCSSPrefix+"list-scrolldock-hidden")}if(ln&&!info.variableHeights){Ext.Array.include(updatedItems,item)}}if(index===info.store.getCount()-1){item.isLast=true;item.addCls(info.lastCls);if(!info.grouped){item.addCls(info.footerCls)}for(i=0,ln=scrollDockItems.bottom.length;i<ln;i++){scrollDockItem=scrollDockItems.bottom[i];item.insert(0,scrollDockItem);scrollDockItem.removeCls(Ext.baseCSSPrefix+"list-scrolldock-hidden")}if(ln&&!info.variableHeights){Ext.Array.include(updatedItems,item)}}item.$height=info.itemMap.getItemHeight(index);if(info.variableHeights){updatedItems.push(item)}},updateItemHeights:function(){if(!this.isPainted()&&!this.pendingHeightUpdate){this.pendingHeightUpdate=true;this.on("painted",this.updateItemHeights,this,{single:true});return}var updatedItems=this.updatedItems,ln=updatedItems.length,itemMap=this.getItemMap(),scroller=this.container.getScrollable().getScroller(),minimumHeight=itemMap.getMinimumHeight(),headerIndices=this.headerIndices,headerMap=this.headerMap,translatable=scroller.getTranslatable(),itemIndex,i,item,height;this.pendingHeightUpdate=false;for(i=0;i<ln;i++){item=updatedItems[i];itemIndex=item.dataIndex;if(itemIndex!==null){height=item.element.getFirstChild().getHeight();height=Math.max(height,minimumHeight);if(headerIndices&&!this.headerHeight&&headerIndices[itemIndex]){this.headerHeight=parseInt(item.getHeader().element.getHeight(),10)}itemMap.setItemHeight(itemIndex,height)}}itemMap.update();height=itemMap.getTotalHeight();headerMap.length=0;for(i in headerIndices){headerMap.push(itemMap.map[i])}for(i=0;i<ln;i++){item=updatedItems[i];itemIndex=item.dataIndex;item.$height=itemMap.getItemHeight(itemIndex)}if(height!=scroller.givenSize){scroller.setSize(height);scroller.refreshMaxPosition();if(translatable.isAnimating){translatable.activeEasingY.setMinMomentumValue(-scroller.getMaxPosition().y)}}this.updatedItems.length=0},getItemAt:function(index){var listItems=this.listItems,ln=listItems.length,i,listItem;for(i=0;i<ln;i++){listItem=listItems[i];if(listItem.dataIndex===index){return listItem}}},getItemIndex:function(item){return item.dataIndex},getViewItems:function(){return this.listItems},doRefresh:function(list){if(this.intervalId){cancelAnimationFrame(this.intervalId);delete this.intervalId}if(this.scheduledTasks){this.scheduledTasks.length=0}var me=this,store=me.getStore(),scrollable=me.container.getScrollable(),scroller=scrollable&&scrollable.getScroller(),painted=me.isPainted(),storeCount=store.getCount();me.getItemMap().populate(storeCount,this.topItemPosition);if(me.getGrouped()){me.findGroupHeaderIndices()}if(me.listItems.length){if(me.getScrollToTopOnRefresh()){me.topItemIndex=0;me.topItemPosition=0;scroller.position.y=0}me.setItemsCount(me.listItems.length);if(painted){me.refreshScroller(scroller)}else{if(!me.pendingRefreshScroller){me.pendingRefreshScroller=true;me.on("painted",function(){me.pendingRefreshScroller=false;me.refreshScroller(scroller)},this,{single:true})}}}if(storeCount<1){me.onStoreClear();return}else{me.hideEmptyText()}},findGroupHeaderIndices:function(){var me=this,store=me.getStore(),storeLn=store.getCount(),groups=store.getGroups(),groupLn=groups.length,headerIndices=me.headerIndices={},footerIndices=me.footerIndices={},i,previousIndex,firstGroupedRecord,storeIndex;me.groups=groups;for(i=0;i<groupLn;i++){firstGroupedRecord=groups[i].children[0];storeIndex=store.indexOf(firstGroupedRecord);headerIndices[storeIndex]=true;previousIndex=storeIndex-1;if(previousIndex){footerIndices[previousIndex]=true}}footerIndices[storeLn-1]=true;return headerIndices},onStoreAdd:function(){this.doRefresh()},onStoreRemove:function(){this.doRefresh()},onStoreUpdate:function(store,record,newIndex,oldIndex){var me=this,scroller=me.container.getScrollable().getScroller(),item;oldIndex=(typeof oldIndex==="undefined")?newIndex:oldIndex;if(oldIndex!==newIndex){me.doRefresh()}else{if(newIndex>=me.topItemIndex&&newIndex<me.topItemIndex+me.listItems.length){item=me.getItemAt(newIndex);if(item){me.doUpdateListItem(item,newIndex,me.getListItemInfo());if(me.getVariableHeights()&&me.getRefreshHeightOnUpdate()){me.updatedItems.push(item);me.updateItemHeights();me.refreshScroller(scroller)}}}}},refreshScroller:function(scroller){if(!scroller){scroller=this.container.getScrollable().getScroller()}scroller.scrollTo(0,scroller.position.y+1);scroller.scrollTo(0,scroller.position.y-1)},onStoreClear:function(){if(this.headerTranslate){this.headerTranslate.translate(0,-10000)}this.showEmptyText()},onIndex:function(indexBar,index){var me=this,key=index.toLowerCase(),store=me.getStore(),groups=store.getGroups(),ln=groups.length,scrollable=me.container.getScrollable(),scroller,group,i,closest,id;if(scrollable){scroller=scrollable.getScroller()}else{return}for(i=0;i<ln;i++){group=groups[i];id=group.name.toLowerCase();if(id==key||id>key){closest=group;break}else{closest=group}}if(scrollable&&closest){index=store.indexOf(closest.children[0]);scroller.stopAnimation();var containerSize=scroller.getContainerSize().y,size=scroller.getSize().y,maxOffset=size-containerSize,offsetTop=me.getItemMap().map[index],offset=(offsetTop>maxOffset)?maxOffset:offsetTop;scroller.scrollTo(0,offset);if(this.updatedItems.length>0&&(!this.scheduledTasks||this.scheduledTasks.length===0)){this.refreshScroller()}}},applyOnItemDisclosure:function(config){if(Ext.isFunction(config)){return{scope:this,handler:config}}return config},handleItemDisclosure:function(e){var me=this,item=Ext.getCmp(Ext.get(e.getTarget()).up(".x-list-item").id),index=item.dataIndex,record=me.getStore().getAt(index);me.fireAction("disclose",[me,record,item,index,e],"doDisclose")},doDisclose:function(me,record,item,index,e){var onItemDisclosure=me.getOnItemDisclosure();if(onItemDisclosure&&onItemDisclosure.handler){onItemDisclosure.handler.call(onItemDisclosure.scope||me,record,item,index,e)}},updateItemCls:function(newCls,oldCls){var items=this.listItems,ln=items.length,i,item;for(i=0;i<ln;i++){item=items[i];item.removeCls(oldCls);item.addCls(newCls)}},onItemTouchStart:function(e){this.container.innerElement.on({touchmove:"onItemTouchMove",delegate:"."+Ext.baseCSSPrefix+"list-item-body",single:true,scope:this});this.callParent(this.parseEvent(e))},onItemTouchMove:function(e){this.callParent(this.parseEvent(e))},onItemTouchEnd:function(e){this.container.innerElement.un({touchmove:"onItemTouchMove",delegate:"."+Ext.baseCSSPrefix+"list-item-body",scope:this});this.callParent(this.parseEvent(e))},onItemTap:function(e){this.callParent(this.parseEvent(e))},onItemTapHold:function(e){this.callParent(this.parseEvent(e))},onItemSingleTap:function(e){this.callParent(this.parseEvent(e))},onItemDoubleTap:function(e){this.callParent(this.parseEvent(e))},onItemSwipe:function(e){this.callParent(this.parseEvent(e))},parseEvent:function(e){var me=this,target=Ext.fly(e.getTarget()).findParent("."+Ext.baseCSSPrefix+"list-item",8),item=Ext.getCmp(target.id);return[me,item,item.dataIndex,e]},onItemAdd:function(item){var me=this,config=item.config;if(config.scrollDock){if(config.scrollDock=="bottom"){me.scrollDockItems.bottom.push(item)}else{me.scrollDockItems.top.push(item)}item.addCls(Ext.baseCSSPrefix+"list-scrolldock-hidden");if(me.container){me.container.add(item)}}else{me.callParent(arguments)}},destroy:function(){Ext.destroy(this.getIndexBar(),this.indexBarElement,this.header,this.scrollDockItems.top,this.scrollDockItems.bottom);if(this.intervalId){cancelAnimationFrame(this.intervalId);delete this.intervalId}this.callParent()}});Ext.define("Ext.dataview.NestedList",{alternateClassName:"Ext.NestedList",extend:"Ext.Container",xtype:"nestedlist",requires:["Ext.dataview.List","Ext.TitleBar","Ext.Button","Ext.XTemplate","Ext.data.StoreManager","Ext.data.NodeStore","Ext.data.TreeStore"],config:{cls:Ext.baseCSSPrefix+"nested-list",backText:"Back",useTitleAsBackText:true,updateTitleText:true,displayField:"text",loadingText:"Loading...",emptyText:"No items available.",onItemDisclosure:false,allowDeselect:false,useToolbar:null,toolbar:{docked:"top",xtype:"titlebar",ui:"light",inline:true},title:"",layout:{type:"card",animation:{type:"slide",duration:250,direction:"left"}},store:null,detailContainer:undefined,detailCard:null,backButton:{ui:"back",hidden:true},listConfig:null,variableHeights:false,itemHeight:47,lastNode:null,lastActiveList:null},constructor:function(config){if(Ext.isObject(config)){if(config.getTitleTextTpl){this.getTitleTextTpl=config.getTitleTextTpl}if(config.getItemTextTpl){this.getItemTextTpl=config.getItemTextTpl}}this.callParent(arguments)},onItemInteraction:function(){if(this.isGoingTo){return false}},applyDetailContainer:function(config){if(!config){config=this}return config},updateDetailContainer:function(newContainer,oldContainer){if(newContainer){newContainer.onBefore("activeitemchange","onBeforeDetailContainerChange",this);newContainer.onAfter("activeitemchange","onDetailContainerChange",this)}},onBeforeDetailContainerChange:function(){this.isGoingTo=true},onDetailContainerChange:function(){this.isGoingTo=false},onItemTap:function(list,index,target,record,e){var me=this,store=list.getStore(),node=store.getAt(index);me.fireEvent("itemtap",this,list,index,target,record,e);if(node.isLeaf()){me.fireEvent("leafitemtap",this,list,index,target,record,e);me.goToLeaf(node)}else{this.goToNode(node)}},onBeforeSelect:function(){this.fireEvent.apply(this,[].concat("beforeselect",this,Array.prototype.slice.call(arguments)))},onContainerTap:function(){this.fireEvent.apply(this,[].concat("containertap",this,Array.prototype.slice.call(arguments)))},onSelectionChange:function(){this.fireEvent.apply(this,[].concat("selectionchange",this,Array.prototype.slice.call(arguments)))},onItemDoubleTap:function(){this.fireEvent.apply(this,[].concat("itemdoubletap",this,Array.prototype.slice.call(arguments)))},onStoreBeforeLoad:function(){var loadingText=this.getLoadingText(),scrollable=this.getScrollable();if(loadingText){this.setMasked({xtype:"loadmask",message:loadingText});if(scrollable){scrollable.getScroller().setDisabled(true)}}this.fireEvent.apply(this,[].concat("beforeload",this,Array.prototype.slice.call(arguments)))},onStoreLoad:function(store,records,successful,operation){this.setMasked(false);this.fireEvent.apply(this,[].concat("load",this,Array.prototype.slice.call(arguments)));if(store.indexOf(this.getLastNode())===-1){this.goToNode(store.getRoot())}},onBackTap:function(){var me=this,node=me.getLastNode(),detailCard=me.getDetailCard(),detailCardActive=detailCard&&me.getActiveItem()==detailCard,lastActiveList=me.getLastActiveList();this.fireAction("back",[this,node,lastActiveList,detailCardActive],"doBack")},doBack:function(me,node,lastActiveList,detailCardActive){var layout=me.getLayout(),animation=(layout)?layout.getAnimation():null;if(detailCardActive&&lastActiveList){if(animation){animation.setReverse(true)}me.setActiveItem(lastActiveList);me.setLastNode(node.parentNode);me.syncToolbar()}else{this.goToNode(node.parentNode)}},updateData:function(data){if(!this.getStore()){this.setStore(new Ext.data.TreeStore({root:data}))}},applyStore:function(store){if(store){if(Ext.isString(store)){store=Ext.data.StoreManager.get(store)}else{if(!(store instanceof Ext.data.TreeStore)){store=Ext.factory(store,Ext.data.TreeStore,null)}}if(!store){Ext.Logger.warn("The specified Store cannot be found",this)}}return store},storeListeners:{rootchange:"onStoreRootChange",load:"onStoreLoad",beforeload:"onStoreBeforeLoad"},updateStore:function(newStore,oldStore){var me=this,listeners=this.storeListeners;listeners.scope=me;if(oldStore&&Ext.isObject(oldStore)&&oldStore.isStore){if(oldStore.autoDestroy){oldStore.destroy()}oldStore.un(listeners)}if(newStore){me.goToNode(newStore.getRoot());newStore.on(listeners)}},onStoreRootChange:function(store,node){this.goToNode(node)},applyBackButton:function(config){return Ext.factory(config,Ext.Button,this.getBackButton())},applyDetailCard:function(config,oldDetailCard){if(config===null){return Ext.factory(config,Ext.Component,oldDetailCard)}else{return Ext.factory(config,Ext.Component)}},updateBackButton:function(newButton,oldButton){if(newButton){var me=this;newButton.on("tap",me.onBackTap,me);newButton.setText(me.getBackText());me.getToolbar().insert(0,newButton)}else{if(oldButton){oldButton.destroy()}}},applyToolbar:function(config){return Ext.factory(config,Ext.TitleBar,this.getToolbar())},updateToolbar:function(newToolbar,oldToolbar){var me=this;if(newToolbar){newToolbar.setTitle(me.getTitle());if(!newToolbar.getParent()){me.add(newToolbar)}}else{if(oldToolbar){oldToolbar.destroy()}}},updateUseToolbar:function(newUseToolbar,oldUseToolbar){if(!newUseToolbar){this.setToolbar(false)}},updateTitle:function(newTitle){var me=this,toolbar=me.getToolbar();if(toolbar){if(me.getUpdateTitleText()){toolbar.setTitle(newTitle)}}},getItemTextTpl:function(node){return"{"+this.getDisplayField()+"}"},getTitleTextTpl:function(node){return"{"+this.getDisplayField()+"}"},renderTitleText:function(node,forBackButton){if(!node.titleTpl){node.titleTpl=Ext.create("Ext.XTemplate",this.getTitleTextTpl(node))}if(node.isRoot()){var initialTitle=this.getInitialConfig("title");return(forBackButton&&initialTitle==="")?this.getInitialConfig("backText"):initialTitle}return node.titleTpl.applyTemplate(node.data)},goToNode:function(node){if(!node){return}var me=this,activeItem=me.getActiveItem(),detailCard=me.getDetailCard(),detailCardActive=detailCard&&me.getActiveItem()==detailCard,reverse=me.goToNodeReverseAnimation(node),firstList=me.firstList,secondList=me.secondList,layout=me.getLayout(),animation=(layout)?layout.getAnimation():null,list;if(node.isLeaf()){throw new Error("goToNode: passed a node which is a leaf.")}if(node==me.getLastNode()&&!detailCardActive){return}if(detailCardActive){if(animation){animation.setReverse(true)}list=me.getLastActiveList();list.getStore().setNode(node);node.expand();me.setActiveItem(list)}else{if(animation){animation.setReverse(reverse)}if(firstList&&secondList){activeItem=me.getActiveItem();me.setLastActiveList(activeItem);list=(activeItem==firstList)?secondList:firstList;list.getStore().setNode(node);node.expand();me.setActiveItem(list);list.deselectAll()}else{if(firstList){me.setLastActiveList(me.getActiveItem());me.setActiveItem(me.getList(node));me.secondList=me.getActiveItem()}else{me.setActiveItem(me.getList(node));me.firstList=me.getActiveItem()}}}me.fireEvent("listchange",this,me.getActiveItem());me.setLastNode(node);me.syncToolbar()},goToLeaf:function(node){if(!node.isLeaf()){throw new Error("goToLeaf: passed a node which is not a leaf.")}var me=this,card=me.getDetailCard(node),container=me.getDetailContainer(),sharedContainer=container==this,layout=me.getLayout(),animation=(layout)?layout.getAnimation():false;if(card){if(container.getItems().indexOf(card)===-1){container.add(card)}if(sharedContainer){if(me.getActiveItem() instanceof Ext.dataview.List){me.setLastActiveList(me.getActiveItem())}me.setLastNode(node)}if(animation){animation.setReverse(false)}container.setActiveItem(card);me.syncToolbar()}},syncToolbar:function(forceDetail){var me=this,detailCard=me.getDetailCard(),node=me.getLastNode(),detailActive=forceDetail||(detailCard&&(me.getActiveItem()==detailCard)),parentNode=(detailActive)?node:node.parentNode,backButton=me.getBackButton();if(backButton){backButton[parentNode?"show":"hide"]();if(parentNode&&me.getUseTitleAsBackText()){backButton.setText(me.renderTitleText(node.parentNode,true))}}if(node){me.setTitle(me.renderTitleText(node))}},updateBackText:function(newText){this.getBackButton().setText(newText)},goToNodeReverseAnimation:function(node){var me=this,lastNode=me.getLastNode();if(!lastNode){return false}return(!lastNode.contains(node)&&lastNode.isAncestor(node))?true:false},getList:function(node){var me=this,nodeStore=Ext.create("Ext.data.NodeStore",{recursive:false,node:node,rootVisible:false,model:me.getStore().getModel()});node.expand();return Ext.Object.merge({xtype:"list",pressedDelay:250,autoDestroy:true,store:nodeStore,onItemDisclosure:me.getOnItemDisclosure(),allowDeselect:me.getAllowDeselect(),variableHeights:me.getVariableHeights(),itemHeight:me.getItemHeight(),listeners:[{event:"itemdoubletap",fn:"onItemDoubleTap",scope:me},{event:"itemtap",fn:"onItemInteraction",scope:me,order:"before"},{event:"itemtouchstart",fn:"onItemInteraction",scope:me,order:"before"},{event:"itemtap",fn:"onItemTap",scope:me},{event:"beforeselectionchange",fn:"onBeforeSelect",scope:me},{event:"containertap",fn:"onContainerTap",scope:me},{event:"selectionchange",fn:"onSelectionChange",order:"before",scope:me}],itemTpl:'<span<tpl if="leaf == true"> class="x-list-item-leaf"</tpl>>'+me.getItemTextTpl(node)+"</span>"},this.getListConfig())}},function(){});Ext.define("Ext.dataview.element.List",{extend:"Ext.dataview.element.Container",updateBaseCls:function(newBaseCls){var me=this;me.itemClsShortCache=newBaseCls+"-item";me.headerClsShortCache=newBaseCls+"-header";me.headerClsCache="."+me.headerClsShortCache;me.headerItemClsShortCache=newBaseCls+"-header-item";me.footerClsShortCache=newBaseCls+"-footer-item";me.footerClsCache="."+me.footerClsShortCache;me.labelClsShortCache=newBaseCls+"-item-label";me.labelClsCache="."+me.labelClsShortCache;me.disclosureClsShortCache=newBaseCls+"-disclosure";me.disclosureClsCache="."+me.disclosureClsShortCache;me.iconClsShortCache=newBaseCls+"-icon";me.iconClsCache="."+me.iconClsShortCache;this.callParent(arguments)},hiddenDisplayCache:Ext.baseCSSPrefix+"hidden-display",getItemElementConfig:function(index,data){var me=this,dataview=me.dataview,itemCls=dataview.getItemCls(),cls=me.itemClsShortCache,config,iconSrc;if(itemCls){cls+=" "+itemCls}config={cls:cls,children:[{cls:me.labelClsShortCache,html:dataview.getItemTpl().apply(data)}]};if(dataview.getIcon()){iconSrc=data.iconSrc;config.children.push({cls:me.iconClsShortCache,style:"background-image: "+iconSrc?'url("'+newSrc+'")':""})}if(dataview.getOnItemDisclosure()){config.children.push({cls:me.disclosureClsShortCache+" "+((data[dataview.getDisclosureProperty()]===false)?me.hiddenDisplayCache:"")})}return config},updateListItem:function(record,item){var me=this,dataview=me.dataview,extItem=Ext.fly(item),innerItem=extItem.down(me.labelClsCache,true),data=dataview.prepareData(record.getData(true),dataview.getStore().indexOf(record),record),disclosureProperty=dataview.getDisclosureProperty(),hasDisclosureProperty=data&&data.hasOwnProperty(disclosureProperty),iconSrc=data&&data.hasOwnProperty("iconSrc"),disclosureEl,iconEl;innerItem.innerHTML=dataview.getItemTpl().apply(data);if(hasDisclosureProperty){disclosureEl=extItem.down(me.disclosureClsCache);disclosureEl[data[disclosureProperty]===false?"addCls":"removeCls"](me.hiddenDisplayCache)}if(dataview.getIcon()){iconEl=extItem.down(me.iconClsCache,true);iconEl.style.backgroundImage=iconSrc?'url("'+iconSrc+'")':""}},doRemoveHeaders:function(){var me=this,headerClsShortCache=me.headerItemClsShortCache,existingHeaders=me.element.query(me.headerClsCache),existingHeadersLn=existingHeaders.length,i=0,item;for(;i<existingHeadersLn;i++){item=existingHeaders[i];Ext.fly(item.parentNode).removeCls(headerClsShortCache);Ext.get(item).destroy()}},doRemoveFooterCls:function(){var me=this,footerClsShortCache=me.footerClsShortCache,existingFooters=me.element.query(me.footerClsCache),existingFootersLn=existingFooters.length,i=0;for(;i<existingFootersLn;i++){Ext.fly(existingFooters[i]).removeCls(footerClsShortCache)}},doAddHeader:function(item,html){item=Ext.fly(item);if(html){item.insertFirst(Ext.Element.create({cls:this.headerClsShortCache,html:html}))}item.addCls(this.headerItemClsShortCache)},destroy:function(){this.doRemoveHeaders();this.callParent()}});Ext.define("Ext.direct.Event",{alias:"direct.event",requires:["Ext.direct.Manager"],config:{status:true,data:null,name:"event",xhr:null,code:null,message:"",result:null,transaction:null},constructor:function(config){this.initConfig(config)}});Ext.define("Ext.direct.RemotingEvent",{extend:"Ext.direct.Event",alias:"direct.rpc",config:{name:"remoting",tid:null,transaction:null},getTransaction:function(){return this._transaction||Ext.direct.Manager.getTransaction(this.getTid())}});Ext.define("Ext.direct.ExceptionEvent",{extend:"Ext.direct.RemotingEvent",alias:"direct.exception",config:{status:false,name:"exception",error:null}});Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:{observable:"Ext.mixin.Observable"},config:{id:undefined},constructor:function(config){this.initConfig(config)},applyId:function(id){if(id===undefined){id=this.getUniqueId()}return id},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent"],parseResponse:function(response){if(!Ext.isEmpty(response.responseText)){if(Ext.isObject(response.responseText)){return response.responseText}return Ext.decode(response.responseText)}return null},createEvents:function(response){var data=null,events=[],i=0,ln,event;try{data=this.parseResponse(response)}catch(e){event=Ext.create("Ext.direct.ExceptionEvent",{data:e,xhr:response,code:Ext.direct.Manager.exceptions.PARSE,message:"Error parsing json response: \n\n "+data});return[event]}if(Ext.isArray(data)){for(ln=data.length;i<ln;++i){events.push(this.createEvent(data[i]))}}else{events.push(this.createEvent(data))}return events},createEvent:function(response){return Ext.create("direct."+response.type,response)}});Ext.define("Ext.util.DelayedTask",{config:{interval:null,delay:null,fn:null,scope:null,args:null},constructor:function(fn,scope,args){var config={fn:fn,scope:scope,args:args};this.initConfig(config)},delay:function(delay,newFn,newScope,newArgs){var me=this;me.cancel();me.setConfig({delay:delay,fn:newFn,scope:newScope,args:newArgs});var call=function(){me.getFn().apply(me.getScope(),me.getArgs()||[]);me.cancel()};me.setInterval(setInterval(call,me.getDelay()))},cancel:function(){this.setInterval(null)},updateInterval:function(newInterval,oldInterval){if(oldInterval){clearInterval(oldInterval)}},applyArgs:function(config){if(!Ext.isArray(config)){config=[config]}return config}});Ext.define("Ext.direct.PollingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.pollingprovider",uses:["Ext.direct.ExceptionEvent"],requires:["Ext.Ajax","Ext.util.DelayedTask"],config:{interval:3000,baseParams:null,url:null},isConnected:function(){return !!this.pollTask},connect:function(){var me=this,url=me.getUrl(),baseParams=me.getBaseParams();if(url&&!me.pollTask){me.pollTask=setInterval(function(){if(me.fireEvent("beforepoll",me)!==false){if(Ext.isFunction(url)){url(baseParams)}else{Ext.Ajax.request({url:url,callback:me.onData,scope:me,params:baseParams})}}},me.getInterval());me.fireEvent("connect",me)}else{if(!url){Ext.Error.raise("Error initializing PollingProvider, no url configured.")}}},disconnect:function(){var me=this;if(me.pollTask){clearInterval(me.pollTask);delete me.pollTask;me.fireEvent("disconnect",me)}},onData:function(opt,success,response){var me=this,i=0,len,events;if(success){events=me.createEvents(response);for(len=events.length;i<len;++i){me.fireEvent("data",me,events[i])}}else{me.fireEvent("data",me,Ext.create("Ext.direct.ExceptionEvent",{data:null,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:response}))}}});Ext.define("Ext.direct.RemotingMethod",{config:{name:null,params:null,formHandler:null,len:null,ordered:true},constructor:function(config){this.initConfig(config)},applyParams:function(params){if(Ext.isNumber(params)){this.setLen(params)}else{if(Ext.isArray(params)){this.setOrdered(false);var ln=params.length,ret=[],i,param,name;for(i=0;i<ln;i++){param=params[i];name=Ext.isObject(param)?param.name:param;ret.push(name)}return ret}}},getArgs:function(params,paramOrder,paramsAsHash){var args=[],i,ln;if(this.getOrdered()){if(this.getLen()>0){if(paramOrder){for(i=0,ln=paramOrder.length;i<ln;i++){args.push(params[paramOrder[i]])}}else{if(paramsAsHash){args.push(params)}}}}else{args.push(params)}return args},getCallData:function(args){var me=this,data=null,len=me.getLen(),params=me.getParams(),callback,scope,name;if(me.getOrdered()){callback=args[len];scope=args[len+1];if(len!==0){data=args.slice(0,len)}}else{data=Ext.apply({},args[0]);callback=args[1];scope=args[2];for(name in data){if(data.hasOwnProperty(name)){if(!Ext.Array.contains(params,name)){delete data[name]}}}}return{data:data,callback:callback,scope:scope}}});Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},config:{id:undefined,provider:null,retryCount:0,args:null,action:null,method:null,data:null,callback:null,form:null},constructor:function(config){this.initConfig(config)},applyId:function(id){if(id===undefined){id=++this.self.TRANSACTION_ID}return id},updateId:function(id){this.id=this.tid=id},getTid:function(){return this.tid},send:function(){this.getProvider().queueTransaction(this)},retry:function(){this.setRetryCount(this.getRetryCount()+1);this.send()}});Ext.define("Ext.direct.RemotingProvider",{alias:"direct.remotingprovider",extend:"Ext.direct.JsonProvider",requires:["Ext.util.MixedCollection","Ext.util.DelayedTask","Ext.direct.Transaction","Ext.direct.RemotingMethod"],config:{namespace:undefined,url:null,enableUrlEncode:null,enableBuffer:10,maxRetries:1,timeout:undefined,actions:{}},constructor:function(config){var me=this;me.callParent(arguments);me.transactions=Ext.create("Ext.util.Collection",function(item){return item.getId()});me.callBuffer=[]},applyNamespace:function(namespace){if(Ext.isString(namespace)){return Ext.ns(namespace)}return namespace||window},initAPI:function(){var actions=this.getActions(),namespace=this.getNamespace(),action,cls,methods,i,ln,method;for(action in actions){if(actions.hasOwnProperty(action)){cls=namespace[action];if(!cls){cls=namespace[action]={}}methods=actions[action];for(i=0,ln=methods.length;i<ln;++i){method=Ext.create("Ext.direct.RemotingMethod",methods[i]);cls[method.getName()]=this.createHandler(action,method)}}}},createHandler:function(action,method){var me=this,handler;if(!method.getFormHandler()){handler=function(){me.configureRequest(action,method,Array.prototype.slice.call(arguments,0))}}else{handler=function(form,callback,scope){me.configureFormRequest(action,method,form,callback,scope)}}handler.directCfg={action:action,method:method};return handler},isConnected:function(){return !!this.connected},connect:function(){var me=this;if(me.getUrl()){me.initAPI();me.connected=true;me.fireEvent("connect",me)}else{Ext.Error.raise("Error initializing RemotingProvider, no url configured.")}},disconnect:function(){var me=this;if(me.connected){me.connected=false;me.fireEvent("disconnect",me)}},runCallback:function(transaction,event){var success=!!event.getStatus(),functionName=success?"success":"failure",callback=transaction&&transaction.getCallback(),result;if(callback){result=event.getResult();if(Ext.isFunction(callback)){callback(result,event,success)}else{Ext.callback(callback[functionName],callback.scope,[result,event,success]);Ext.callback(callback.callback,callback.scope,[result,event,success])}}},onData:function(options,success,response){var me=this,i=0,ln,events,event,transaction,transactions;if(success){events=me.createEvents(response);for(ln=events.length;i<ln;++i){event=events[i];transaction=me.getTransaction(event);me.fireEvent("data",me,event);if(transaction){me.runCallback(transaction,event,true);Ext.direct.Manager.removeTransaction(transaction)}}}else{transactions=[].concat(options.transaction);for(ln=transactions.length;i<ln;++i){transaction=me.getTransaction(transactions[i]);if(transaction&&transaction.getRetryCount()<me.getMaxRetries()){transaction.retry()}else{event=Ext.create("Ext.direct.ExceptionEvent",{data:null,transaction:transaction,code:Ext.direct.Manager.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:response});me.fireEvent("data",me,event);if(transaction){me.runCallback(transaction,event,false);Ext.direct.Manager.removeTransaction(transaction)}}}}},getTransaction:function(options){return options&&options.getTid?Ext.direct.Manager.getTransaction(options.getTid()):null},configureRequest:function(action,method,args){var me=this,callData=method.getCallData(args),data=callData.data,callback=callData.callback,scope=callData.scope,transaction;transaction=Ext.create("Ext.direct.Transaction",{provider:me,args:args,action:action,method:method.getName(),data:data,callback:scope&&Ext.isFunction(callback)?Ext.Function.bind(callback,scope):callback});if(me.fireEvent("beforecall",me,transaction,method)!==false){Ext.direct.Manager.addTransaction(transaction);me.queueTransaction(transaction);me.fireEvent("call",me,transaction,method)}},getCallData:function(transaction){return{action:transaction.getAction(),method:transaction.getMethod(),data:transaction.getData(),type:"rpc",tid:transaction.getId()}},sendRequest:function(data){var me=this,request={url:me.getUrl(),callback:me.onData,scope:me,transaction:data,timeout:me.getTimeout()},callData,enableUrlEncode=me.getEnableUrlEncode(),i=0,ln,params;if(Ext.isArray(data)){callData=[];for(ln=data.length;i<ln;++i){callData.push(me.getCallData(data[i]))}}else{callData=me.getCallData(data)}if(enableUrlEncode){params={};params[Ext.isString(enableUrlEncode)?enableUrlEncode:"data"]=Ext.encode(callData);request.params=params}else{request.jsonData=callData}Ext.Ajax.request(request)},queueTransaction:function(transaction){var me=this,enableBuffer=me.getEnableBuffer();if(transaction.getForm()){me.sendFormRequest(transaction);return}me.callBuffer.push(transaction);if(enableBuffer){if(!me.callTask){me.callTask=Ext.create("Ext.util.DelayedTask",me.combineAndSend,me)}me.callTask.delay(Ext.isNumber(enableBuffer)?enableBuffer:10)}else{me.combineAndSend()}},combineAndSend:function(){var buffer=this.callBuffer,ln=buffer.length;if(ln>0){this.sendRequest(ln==1?buffer[0]:buffer);this.callBuffer=[]}}});Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:"Ext.dom.CompositeElementLite",getElement:function(el){return el},transformElement:function(el){return Ext.get(el)}},function(){Ext.dom.Element.select=function(selector,unique,root){var elements;if(typeof selector=="string"){elements=Ext.dom.Element.selectorFunction(selector,root)}else{if(selector.length!==undefined){elements=selector}else{throw new Error("[Ext.select] Invalid selector specified: "+selector)}}return(unique===true)?new Ext.CompositeElement(elements):new Ext.CompositeElementLite(elements)}});Ext.define("Ext.event.Event",{alternateClassName:"Ext.EventObject",isStopped:false,set:function(name,value){if(arguments.length===1&&typeof name!="string"){var info=name;for(name in info){if(info.hasOwnProperty(name)){this[name]=info[name]}}}else{this[name]=info[name]}},stopEvent:function(){return this.stopPropagation()},stopPropagation:function(){this.isStopped=true;return this}});Ext.define("Ext.event.Dom",{extend:"Ext.event.Event",constructor:function(event){var target=event.target,touches;if(target&&target.nodeType!==1){target=target.parentNode}touches=event.changedTouches;if(touches){touches=touches[0];this.pageX=touches.pageX;this.pageY=touches.pageY}else{this.pageX=event.pageX;this.pageY=event.pageY}this.browserEvent=this.event=event;this.target=this.delegatedTarget=target;this.type=event.type;this.timeStamp=this.time=event.timeStamp;if(typeof this.time!="number"){this.time=new Date(this.time).getTime()}return this},stopEvent:function(){this.preventDefault();return this.callParent()},preventDefault:function(){this.browserEvent.preventDefault()},getPageX:function(){return this.browserEvent.pageX},getPageY:function(){return this.browserEvent.pageY},getXY:function(){if(!this.xy){this.xy=[this.getPageX(),this.getPageY()]}return this.xy},getTarget:function(selector,maxDepth,returnEl){if(arguments.length===0){return this.delegatedTarget}return selector?Ext.fly(this.target).findParent(selector,maxDepth,returnEl):(returnEl?Ext.get(this.target):this.target)},getTime:function(){return this.time},setDelegatedTarget:function(target){this.delegatedTarget=target},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn}});Ext.define("Ext.event.Touch",{extend:"Ext.event.Dom",requires:["Ext.util.Point"],constructor:function(event,info){if(info){this.set(info)}this.touchesMap={};this.changedTouches=this.cloneTouches(event.changedTouches);this.touches=this.cloneTouches(event.touches);this.targetTouches=this.cloneTouches(event.targetTouches);return this.callParent([event])},clone:function(){return new this.self(this)},setTargets:function(targetsMap){this.doSetTargets(this.changedTouches,targetsMap);this.doSetTargets(this.touches,targetsMap);this.doSetTargets(this.targetTouches,targetsMap)},doSetTargets:function(touches,targetsMap){var i,ln,touch,identifier,targets;for(i=0,ln=touches.length;i<ln;i++){touch=touches[i];identifier=touch.identifier;targets=targetsMap[identifier];if(targets){touch.targets=targets}}},cloneTouches:function(touches){var map=this.touchesMap,clone=[],lastIdentifier=null,i,ln,touch,identifier;for(i=0,ln=touches.length;i<ln;i++){touch=touches[i];identifier=touch.identifier;if(lastIdentifier!==null&&identifier===lastIdentifier){identifier++}lastIdentifier=identifier;if(!map[identifier]){map[identifier]={pageX:touch.pageX,pageY:touch.pageY,identifier:identifier,target:touch.target,timeStamp:touch.timeStamp,point:Ext.util.Point.fromTouch(touch),targets:touch.targets}}clone[i]=map[identifier]}return clone}});Ext.define("Ext.event.publisher.ComponentDelegation",{extend:"Ext.event.publisher.Publisher",requires:["Ext.Component","Ext.ComponentQuery"],targetType:"component",optimizedSelectorRegex:/^#([\w\-]+)((?:[\s]*)>(?:[\s]*)|(?:\s*))([\w\-]+)$/i,handledEvents:["*"],getSubscribers:function(eventName,createIfNotExist){var subscribers=this.subscribers,eventSubscribers=subscribers[eventName];if(!eventSubscribers&&createIfNotExist){eventSubscribers=subscribers[eventName]={type:{$length:0},selector:[],$length:0}}return eventSubscribers},subscribe:function(target,eventName){if(this.idSelectorRegex.test(target)){return false}var optimizedSelector=target.match(this.optimizedSelectorRegex),subscribers=this.getSubscribers(eventName,true),typeSubscribers=subscribers.type,selectorSubscribers=subscribers.selector,id,isDescendant,type,map,subMap;if(optimizedSelector!==null){id=optimizedSelector[1];isDescendant=optimizedSelector[2].indexOf(">")===-1;type=optimizedSelector[3];map=typeSubscribers[type];if(!map){typeSubscribers[type]=map={descendents:{$length:0},children:{$length:0},$length:0}}subMap=isDescendant?map.descendents:map.children;if(subMap.hasOwnProperty(id)){subMap[id]++;return true}subMap[id]=1;subMap.$length++;map.$length++;typeSubscribers.$length++}else{if(selectorSubscribers.hasOwnProperty(target)){selectorSubscribers[target]++;return true}selectorSubscribers[target]=1;selectorSubscribers.push(target)}subscribers.$length++;return true},unsubscribe:function(target,eventName,all){var subscribers=this.getSubscribers(eventName);if(!subscribers){return false}var match=target.match(this.optimizedSelectorRegex),typeSubscribers=subscribers.type,selectorSubscribers=subscribers.selector,id,isDescendant,type,map,subMap;all=Boolean(all);if(match!==null){id=match[1];isDescendant=match[2].indexOf(">")===-1;type=match[3];map=typeSubscribers[type];if(!map){return true}subMap=isDescendant?map.descendents:map.children;if(!subMap.hasOwnProperty(id)||(!all&&--subMap[id]>0)){return true}delete subMap[id];subMap.$length--;map.$length--;typeSubscribers.$length--}else{if(!selectorSubscribers.hasOwnProperty(target)||(!all&&--selectorSubscribers[target]>0)){return true}delete selectorSubscribers[target];Ext.Array.remove(selectorSubscribers,target)}if(--subscribers.$length===0){delete this.subscribers[eventName]}return true},notify:function(target,eventName){var subscribers=this.getSubscribers(eventName),id,component;if(!subscribers||subscribers.$length===0){return false}id=target.substr(1);component=Ext.ComponentManager.get(id);if(component){this.dispatcher.doAddListener(this.targetType,target,eventName,"publish",this,{args:[eventName,component]},"before")}},matchesSelector:function(component,selector){return Ext.ComponentQuery.is(component,selector)},dispatch:function(target,eventName,args,connectedController){this.dispatcher.doDispatchEvent(this.targetType,target,eventName,args,null,connectedController)},publish:function(eventName,component){var subscribers=this.getSubscribers(eventName);if(!subscribers){return}var eventController=arguments[arguments.length-1],typeSubscribers=subscribers.type,selectorSubscribers=subscribers.selector,args=Array.prototype.slice.call(arguments,2,-2),types=component.xtypesChain,descendentsSubscribers,childrenSubscribers,parentId,ancestorIds,ancestorId,parentComponent,selector,i,ln,type,j,subLn;for(i=0,ln=types.length;i<ln;i++){type=types[i];subscribers=typeSubscribers[type];if(subscribers&&subscribers.$length>0){descendentsSubscribers=subscribers.descendents;if(descendentsSubscribers.$length>0){if(!ancestorIds){ancestorIds=component.getAncestorIds()}for(j=0,subLn=ancestorIds.length;j<subLn;j++){ancestorId=ancestorIds[j];if(descendentsSubscribers.hasOwnProperty(ancestorId)){this.dispatch("#"+ancestorId+" "+type,eventName,args,eventController)}}}childrenSubscribers=subscribers.children;if(childrenSubscribers.$length>0){if(!parentId){if(ancestorIds){parentId=ancestorIds[0]}else{parentComponent=component.getParent();if(parentComponent){parentId=parentComponent.getId()}}}if(parentId){if(childrenSubscribers.hasOwnProperty(parentId)){this.dispatch("#"+parentId+" > "+type,eventName,args,eventController)}}}}}ln=selectorSubscribers.length;if(ln>0){for(i=0;i<ln;i++){selector=selectorSubscribers[i];if(this.matchesSelector(component,selector)){this.dispatch(selector,eventName,args,eventController)}}}}});Ext.define("Ext.event.publisher.ComponentPaint",{extend:"Ext.event.publisher.Publisher",targetType:"component",handledEvents:["erased"],eventNames:{painted:"painted",erased:"erased"},constructor:function(){this.callParent(arguments);this.hiddenQueue={};this.renderedQueue={}},getSubscribers:function(eventName,createIfNotExist){var subscribers=this.subscribers;if(!subscribers.hasOwnProperty(eventName)){if(!createIfNotExist){return null}subscribers[eventName]={$length:0}}return subscribers[eventName]},setDispatcher:function(dispatcher){var targetType=this.targetType;dispatcher.doAddListener(targetType,"*","renderedchange","onBeforeComponentRenderedChange",this,null,"before");dispatcher.doAddListener(targetType,"*","hiddenchange","onBeforeComponentHiddenChange",this,null,"before");dispatcher.doAddListener(targetType,"*","renderedchange","onComponentRenderedChange",this,null,"after");dispatcher.doAddListener(targetType,"*","hiddenchange","onComponentHiddenChange",this,null,"after");return this.callParent(arguments)},subscribe:function(target,eventName){var match=target.match(this.idSelectorRegex),subscribers,id;if(!match){return false}id=match[1];subscribers=this.getSubscribers(eventName,true);if(subscribers.hasOwnProperty(id)){subscribers[id]++;return true}subscribers[id]=1;subscribers.$length++;return true},unsubscribe:function(target,eventName,all){var match=target.match(this.idSelectorRegex),subscribers,id;if(!match||!(subscribers=this.getSubscribers(eventName))){return false}id=match[1];if(!subscribers.hasOwnProperty(id)||(!all&&--subscribers[id]>0)){return true}delete subscribers[id];if(--subscribers.$length===0){delete this.subscribers[eventName]}return true},onBeforeComponentRenderedChange:function(container,component,rendered){var eventNames=this.eventNames,eventName=rendered?eventNames.painted:eventNames.erased,subscribers=this.getSubscribers(eventName),queue;if(subscribers&&subscribers.$length>0){this.renderedQueue[component.getId()]=queue=[];this.publish(subscribers,component,eventName,queue)}},onBeforeComponentHiddenChange:function(component,hidden){var eventNames=this.eventNames,eventName=hidden?eventNames.erased:eventNames.painted,subscribers=this.getSubscribers(eventName),queue;if(subscribers&&subscribers.$length>0){this.hiddenQueue[component.getId()]=queue=[];this.publish(subscribers,component,eventName,queue)}},onComponentRenderedChange:function(container,component){var renderedQueue=this.renderedQueue,id=component.getId(),queue;if(!renderedQueue.hasOwnProperty(id)){return}queue=renderedQueue[id];delete renderedQueue[id];if(queue.length>0){this.dispatchQueue(queue)}},onComponentHiddenChange:function(component){var hiddenQueue=this.hiddenQueue,id=component.getId(),queue;if(!hiddenQueue.hasOwnProperty(id)){return}queue=hiddenQueue[id];delete hiddenQueue[id];if(queue.length>0){this.dispatchQueue(queue)}},dispatchQueue:function(dispatchingQueue){var dispatcher=this.dispatcher,targetType=this.targetType,eventNames=this.eventNames,queue=dispatchingQueue.slice(),ln=queue.length,i,item,component,eventName,isPainted;dispatchingQueue.length=0;if(ln>0){for(i=0;i<ln;i++){item=queue[i];component=item.component;eventName=item.eventName;isPainted=component.isPainted();if((eventName===eventNames.painted&&isPainted)||eventName===eventNames.erased&&!isPainted){dispatcher.doDispatchEvent(targetType,"#"+item.id,eventName,[component])}}queue.length=0}},publish:function(subscribers,component,eventName,dispatchingQueue){var id=component.getId(),needsDispatching=false,eventNames,items,i,ln,isPainted;if(subscribers[id]){eventNames=this.eventNames;isPainted=component.isPainted();if((eventName===eventNames.painted&&!isPainted)||eventName===eventNames.erased&&isPainted){needsDispatching=true}else{return this}}if(component.isContainer){items=component.getItems().items;for(i=0,ln=items.length;i<ln;i++){this.publish(subscribers,items[i],eventName,dispatchingQueue)}}else{if(component.isDecorator){this.publish(subscribers,component.getComponent(),eventName,dispatchingQueue)}}if(needsDispatching){dispatchingQueue.push({id:id,eventName:eventName,component:component})}}});Ext.define("Ext.event.publisher.ComponentSize",{extend:"Ext.event.publisher.Publisher",requires:["Ext.ComponentManager"],targetType:"component",handledEvents:["resize","innerresize"],constructor:function(){this.callParent(arguments);this.sizeMonitors={}},getSubscribers:function(target,createIfNotExist){var subscribers=this.subscribers;if(!subscribers.hasOwnProperty(target)){if(!createIfNotExist){return null}subscribers[target]={$length:0}}return subscribers[target]},subscribe:function(target,eventName){var match=target.match(this.idSelectorRegex),sizeMonitors=this.sizeMonitors,dispatcher=this.dispatcher,targetType=this.targetType,subscribers,component,id;if(!match){return false}id=match[1];subscribers=this.getSubscribers(target,true);subscribers.$length++;if(subscribers.hasOwnProperty(eventName)){subscribers[eventName]++;return true}if(subscribers.$length===1){dispatcher.addListener(targetType,target,"painted","onComponentPainted",this,null,"before")}component=Ext.ComponentManager.get(id);if(!component){Ext.Logger.error("Adding a listener to the 'resize' event of a non-existing component")}if(!sizeMonitors[target]){sizeMonitors[target]={}}sizeMonitors[target][eventName]=new Ext.util.SizeMonitor({element:eventName==="resize"?component.element:component.innerElement,callback:this.onComponentSizeChange,scope:this,args:[this,target,eventName]});subscribers[eventName]=1;return true},unsubscribe:function(target,eventName,all){var match=target.match(this.idSelectorRegex),dispatcher=this.dispatcher,targetType=this.targetType,sizeMonitors=this.sizeMonitors,subscribers,id;if(!match||!(subscribers=this.getSubscribers(target))){return false}id=match[1];if(!subscribers.hasOwnProperty(eventName)||(!all&&--subscribers[eventName]>0)){return true}delete subscribers[eventName];sizeMonitors[target][eventName].destroy();delete sizeMonitors[target][eventName];if(--subscribers.$length===0){delete sizeMonitors[target];delete this.subscribers[target];dispatcher.removeListener(targetType,target,"painted","onComponentPainted",this,"before")}return true},onComponentPainted:function(component){var target=component.getObservableId(),sizeMonitors=this.sizeMonitors[target];if(sizeMonitors.resize){sizeMonitors.resize.refresh()}if(sizeMonitors.innerresize){sizeMonitors.innerresize.refresh()}},onComponentSizeChange:function(component,observableId,eventName){this.dispatcher.doDispatchEvent(this.targetType,observableId,eventName,[component])}});Ext.define("Ext.event.publisher.Dom",{extend:"Ext.event.publisher.Publisher",requires:["Ext.env.Browser","Ext.Element","Ext.event.Dom"],targetType:"element",idOrClassSelectorRegex:/^([#|\.])([\w\-]+)$/,handledEvents:["click","focus","blur","paste","input","mousemove","mousedown","mouseup","mouseover","mouseout","keyup","keydown","keypress","submit","transitionend","animationstart","animationend"],classNameSplitRegex:/\s+/,SELECTOR_ALL:"*",constructor:function(){var eventNames=this.getHandledEvents(),eventNameMap={},i,ln,eventName,vendorEventName;this.doBubbleEventsMap={click:true,submit:true,mousedown:true,mousemove:true,mouseup:true,mouseover:true,mouseout:true,transitionend:true};this.onEvent=Ext.Function.bind(this.onEvent,this);for(i=0,ln=eventNames.length;i<ln;i++){eventName=eventNames[i];vendorEventName=this.getVendorEventName(eventName);eventNameMap[vendorEventName]=eventName;this.attachListener(vendorEventName)}this.eventNameMap=eventNameMap;return this.callParent()},getSubscribers:function(eventName){var subscribers=this.subscribers,eventSubscribers=subscribers[eventName];if(!eventSubscribers){eventSubscribers=subscribers[eventName]={id:{$length:0},className:{$length:0},selector:[],all:0,$length:0}}return eventSubscribers},getVendorEventName:function(eventName){if(eventName==="transitionend"){eventName=Ext.browser.getVendorProperyName("transitionEnd")}else{if(eventName==="animationstart"){eventName=Ext.browser.getVendorProperyName("animationStart")}else{if(eventName==="animationend"){eventName=Ext.browser.getVendorProperyName("animationEnd")}}}return eventName},attachListener:function(eventName){document.addEventListener(eventName,this.onEvent,!this.doesEventBubble(eventName));return this},removeListener:function(eventName){document.removeEventListener(eventName,this.onEvent,!this.doesEventBubble(eventName));return this},doesEventBubble:function(eventName){return !!this.doBubbleEventsMap[eventName]},subscribe:function(target,eventName){if(!this.handles(eventName)){return false}var idOrClassSelectorMatch=target.match(this.idOrClassSelectorRegex),subscribers=this.getSubscribers(eventName),idSubscribers=subscribers.id,classNameSubscribers=subscribers.className,selectorSubscribers=subscribers.selector,type,value;if(idOrClassSelectorMatch!==null){type=idOrClassSelectorMatch[1];value=idOrClassSelectorMatch[2];if(type==="#"){if(idSubscribers.hasOwnProperty(value)){idSubscribers[value]++;return true}idSubscribers[value]=1;idSubscribers.$length++}else{if(classNameSubscribers.hasOwnProperty(value)){classNameSubscribers[value]++;return true}classNameSubscribers[value]=1;classNameSubscribers.$length++}}else{if(target===this.SELECTOR_ALL){subscribers.all++}else{if(selectorSubscribers.hasOwnProperty(target)){selectorSubscribers[target]++;return true}selectorSubscribers[target]=1;selectorSubscribers.push(target)}}subscribers.$length++;return true},unsubscribe:function(target,eventName,all){if(!this.handles(eventName)){return false}var idOrClassSelectorMatch=target.match(this.idOrClassSelectorRegex),subscribers=this.getSubscribers(eventName),idSubscribers=subscribers.id,classNameSubscribers=subscribers.className,selectorSubscribers=subscribers.selector,type,value;all=Boolean(all);if(idOrClassSelectorMatch!==null){type=idOrClassSelectorMatch[1];value=idOrClassSelectorMatch[2];if(type==="#"){if(!idSubscribers.hasOwnProperty(value)||(!all&&--idSubscribers[value]>0)){return true}delete idSubscribers[value];idSubscribers.$length--}else{if(!classNameSubscribers.hasOwnProperty(value)||(!all&&--classNameSubscribers[value]>0)){return true}delete classNameSubscribers[value];classNameSubscribers.$length--}}else{if(target===this.SELECTOR_ALL){if(all){subscribers.all=0}else{subscribers.all--}}else{if(!selectorSubscribers.hasOwnProperty(target)||(!all&&--selectorSubscribers[target]>0)){return true}delete selectorSubscribers[target];Ext.Array.remove(selectorSubscribers,target)}}subscribers.$length--;return true},getElementTarget:function(target){if(target.nodeType!==1){target=target.parentNode;if(!target||target.nodeType!==1){return null}}return target},getBubblingTargets:function(target){var targets=[];if(!target){return targets}do{targets[targets.length]=target;target=target.parentNode}while(target&&target.nodeType===1);return targets},dispatch:function(target,eventName,args){args.push(args[0].target);this.callParent(arguments)},publish:function(eventName,targets,event){var subscribers=this.getSubscribers(eventName),wildcardSubscribers;if(subscribers.$length===0||!this.doPublish(subscribers,eventName,targets,event)){wildcardSubscribers=this.getSubscribers("*");if(wildcardSubscribers.$length>0){this.doPublish(wildcardSubscribers,eventName,targets,event)}}return this},doPublish:function(subscribers,eventName,targets,event){var idSubscribers=subscribers.id,classNameSubscribers=subscribers.className,selectorSubscribers=subscribers.selector,hasIdSubscribers=idSubscribers.$length>0,hasClassNameSubscribers=classNameSubscribers.$length>0,hasSelectorSubscribers=selectorSubscribers.length>0,hasAllSubscribers=subscribers.all>0,isClassNameHandled={},args=[event],hasDispatched=false,classNameSplitRegex=this.classNameSplitRegex,i,ln,j,subLn,target,id,className,classNames,selector;for(i=0,ln=targets.length;i<ln;i++){target=targets[i];event.setDelegatedTarget(target);if(hasIdSubscribers){id=target.id;if(id){if(idSubscribers.hasOwnProperty(id)){hasDispatched=true;this.dispatch("#"+id,eventName,args)}}}if(hasClassNameSubscribers){className=target.className;if(className){classNames=className.split(classNameSplitRegex);for(j=0,subLn=classNames.length;j<subLn;j++){className=classNames[j];if(!isClassNameHandled[className]){isClassNameHandled[className]=true;if(classNameSubscribers.hasOwnProperty(className)){hasDispatched=true;this.dispatch("."+className,eventName,args)}}}}}if(event.isStopped){return hasDispatched}}if(hasAllSubscribers&&!hasDispatched){event.setDelegatedTarget(event.browserEvent.target);hasDispatched=true;this.dispatch(this.SELECTOR_ALL,eventName,args);if(event.isStopped){return hasDispatched}}if(hasSelectorSubscribers){for(j=0,subLn=targets.length;j<subLn;j++){target=targets[j];for(i=0,ln=selectorSubscribers.length;i<ln;i++){selector=selectorSubscribers[i];if(this.matchesSelector(target,selector)){event.setDelegatedTarget(target);hasDispatched=true;this.dispatch(selector,eventName,args)}if(event.isStopped){return hasDispatched}}}}return hasDispatched},matchesSelector:function(element,selector){if("webkitMatchesSelector" in element){return element.webkitMatchesSelector(selector)}return Ext.DomQuery.is(element,selector)},onEvent:function(e){var eventName=this.eventNameMap[e.type];Ext.frameStartTime=e.timeStamp;if(!eventName||this.getSubscribersCount(eventName)===0){return}var target=this.getElementTarget(e.target),targets;if(!target){return}if(this.doesEventBubble(eventName)){targets=this.getBubblingTargets(target)}else{targets=[target]}this.publish(eventName,targets,new Ext.event.Dom(e))},hasSubscriber:function(target,eventName){if(!this.handles(eventName)){return false}var match=target.match(this.idOrClassSelectorRegex),subscribers=this.getSubscribers(eventName),type,value;if(match!==null){type=match[1];value=match[2];if(type==="#"){return subscribers.id.hasOwnProperty(value)}else{return subscribers.className.hasOwnProperty(value)}}else{return(subscribers.selector.hasOwnProperty(target)&&Ext.Array.indexOf(subscribers.selector,target)!==-1)}return false},getSubscribersCount:function(eventName){if(!this.handles(eventName)){return 0}return this.getSubscribers(eventName).$length+this.getSubscribers("*").$length}});Ext.define("Ext.util.paintmonitor.Abstract",{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(config){this.onElementPainted=Ext.Function.bind(this.onElementPainted,this);this.initConfig(config)},bindListeners:function(bind){this.monitorElement[bind?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,true)},applyElement:function(element){if(element){return Ext.get(element)}},updateElement:function(element){this.monitorElement=Ext.Element.create({classList:["x-paint-monitor",this.monitorClass]},true);element.appendChild(this.monitorElement);element.addCls("x-paint-monitored");this.bindListeners(true)},onElementPainted:function(){},destroy:function(){var monitorElement=this.monitorElement,parentNode=monitorElement.parentNode,element=this.getElement();this.bindListeners(false);delete this.monitorElement;if(element&&!element.isDestroyed){element.removeCls("x-paint-monitored");delete this._element}if(parentNode){parentNode.removeChild(monitorElement)}this.callSuper()}});Ext.define("Ext.util.paintmonitor.CssAnimation",{extend:"Ext.util.paintmonitor.Abstract",eventName:"webkitAnimationEnd",monitorClass:"cssanimation",onElementPainted:function(e){if(e.animationName==="x-paint-monitor-helper"){this.getCallback().apply(this.getScope(),this.getArgs())}}});Ext.define("Ext.util.paintmonitor.OverflowChange",{extend:"Ext.util.paintmonitor.Abstract",eventName:"overflowchanged",monitorClass:"overflowchange",onElementPainted:function(e){this.getCallback().apply(this.getScope(),this.getArgs())}});Ext.define("Ext.util.PaintMonitor",{requires:["Ext.util.paintmonitor.CssAnimation","Ext.util.paintmonitor.OverflowChange"],constructor:function(config){if(Ext.browser.engineVersion.gtEq("536")&&!Ext.os.is.BlackBerry){return new Ext.util.paintmonitor.OverflowChange(config)}else{return new Ext.util.paintmonitor.CssAnimation(config)}}});Ext.define("Ext.event.publisher.ElementPaint",{extend:"Ext.event.publisher.Publisher",requires:["Ext.util.PaintMonitor","Ext.TaskQueue"],targetType:"element",handledEvents:["painted"],constructor:function(){this.monitors={};this.callSuper(arguments)},subscribe:function(target){var match=target.match(this.idSelectorRegex),subscribers=this.subscribers,id,element;if(!match){return false}id=match[1];if(subscribers.hasOwnProperty(id)){subscribers[id]++;return true}subscribers[id]=1;element=Ext.get(id);this.monitors[id]=new Ext.util.PaintMonitor({element:element,callback:this.onElementPainted,scope:this,args:[target,element]});return true},unsubscribe:function(target,eventName,all){var match=target.match(this.idSelectorRegex),subscribers=this.subscribers,id;if(!match){return false}id=match[1];if(!subscribers.hasOwnProperty(id)||(!all&&--subscribers[id]>0)){return true}delete subscribers[id];this.monitors[id].destroy();delete this.monitors[id];return true},onElementPainted:function(target,element){Ext.TaskQueue.requestRead("dispatch",this,[target,"painted",[element]])}});Ext.define("Ext.mixin.Templatable",{extend:"Ext.mixin.Mixin",mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var elementTemplate=document.createDocumentFragment();elementTemplate.appendChild(Ext.Element.create(this.getElementConfig(),true));return elementTemplate},initElement:function(){var prototype=this.self.prototype;prototype.elementTemplate=this.getElementTemplate();prototype.initElement=prototype.doInitElement;this.initElement.apply(this,arguments)},linkElement:function(reference,node){this.link(reference,node)},doInitElement:function(){var referenceAttributeName=this.referenceAttributeName,renderElement,referenceNodes,i,ln,referenceNode,reference;renderElement=this.elementTemplate.cloneNode(true);referenceNodes=renderElement.querySelectorAll(this.referenceSelector);for(i=0,ln=referenceNodes.length;i<ln;i++){referenceNode=referenceNodes[i];reference=referenceNode.getAttribute(referenceAttributeName);referenceNode.removeAttribute(referenceAttributeName);this.linkElement(reference,referenceNode)}}});Ext.define("Ext.util.sizemonitor.Abstract",{mixins:["Ext.mixin.Templatable"],requires:["Ext.TaskQueue"],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:0,height:0,contentWidth:0,contentHeight:0,constructor:function(config){this.refresh=Ext.Function.bind(this.refresh,this);this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0};this.initElement();this.initConfig(config);this.bindListeners(true)},bindListeners:Ext.emptyFn,applyElement:function(element){if(element){return Ext.get(element)}},updateElement:function(element){element.append(this.detectorsContainer);element.addCls("x-size-monitored")},applyArgs:function(args){return args.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},refreshSize:function(){var element=this.getElement();if(!element||element.isDestroyed){return false}var elementBounds=element.dom.getBoundingClientRect(),width=elementBounds.width,height=elementBounds.height,contentBounds=this.getContentBounds(),contentWidth=contentBounds.width,contentHeight=contentBounds.height,currentContentWidth=this.contentWidth,currentContentHeight=this.contentHeight,info=this.info,resized=false,flag;this.width=width;this.height=height;this.contentWidth=contentWidth;this.contentHeight=contentHeight;flag=((currentContentWidth!==contentWidth?1:0)+(currentContentHeight!==contentHeight?2:0));if(flag>0){info.width=width;info.height=height;info.contentWidth=contentWidth;info.contentHeight=contentHeight;info.flag=flag;resized=true;this.getCallback().apply(this.getScope(),this.getArgs())}return resized},refresh:function(force){if(this.refreshSize()||force){Ext.TaskQueue.requestWrite("refreshMonitors",this)}},destroy:function(){var element=this.getElement();this.bindListeners(false);if(element&&!element.isDestroyed){element.removeCls("x-size-monitored")}delete this._element;this.callSuper()}});Ext.define("Ext.util.sizemonitor.Scroll",{extend:"Ext.util.sizemonitor.Abstract",getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(config){this.onScroll=Ext.Function.bind(this.onScroll,this);this.callSuper(arguments)},bindListeners:function(bind){var method=bind?"addEventListener":"removeEventListener";this.expandMonitor[method]("scroll",this.onScroll,true);this.shrinkMonitor[method]("scroll",this.onScroll,true)},forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this,[true])},onScroll:function(){Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var expandMonitor=this.expandMonitor,shrinkMonitor=this.shrinkMonitor,end=1000000;if(expandMonitor&&!expandMonitor.isDestroyed){expandMonitor.scrollLeft=end;expandMonitor.scrollTop=end}if(shrinkMonitor&&!shrinkMonitor.isDestroyed){shrinkMonitor.scrollLeft=end;shrinkMonitor.scrollTop=end}}});Ext.define("Ext.util.sizemonitor.OverflowChange",{extend:"Ext.util.sizemonitor.Abstract",constructor:function(config){this.onExpand=Ext.Function.bind(this.onExpand,this);this.onShrink=Ext.Function.bind(this.onShrink,this);this.callSuper(arguments)},getElementConfig:function(){return{reference:"detectorsContainer",classList:["x-size-monitors","overflowchanged"],children:[{reference:"expandMonitor",className:"expand",children:[{reference:"expandHelper"}]},{reference:"shrinkMonitor",className:"shrink",children:[{reference:"shrinkHelper"}]}]}},bindListeners:function(bind){var method=bind?"addEventListener":"removeEventListener";this.expandMonitor[method]("overflowchanged",this.onExpand,true);this.shrinkMonitor[method]("overflowchanged",this.onShrink,true)},onExpand:function(e){if(e.horizontalOverflow&&e.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},onShrink:function(e){if(!e.horizontalOverflow&&!e.verticalOverflow){return}Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var expandHelper=this.expandHelper,shrinkHelper=this.shrinkHelper,contentBounds=this.getContentBounds(),width=contentBounds.width,height=contentBounds.height,style;if(expandHelper&&!expandHelper.isDestroyed){style=expandHelper.style;style.width=(width+1)+"px";style.height=(height+1)+"px"}if(shrinkHelper&&!shrinkHelper.isDestroyed){style=shrinkHelper.style;style.width=width+"px";style.height=height+"px"}Ext.TaskQueue.requestRead("refresh",this)}});Ext.define("Ext.util.SizeMonitor",{requires:["Ext.util.sizemonitor.Scroll","Ext.util.sizemonitor.OverflowChange"],constructor:function(config){if(Ext.browser.engineVersion.gtEq("535")){return new Ext.util.sizemonitor.OverflowChange(config)}else{return new Ext.util.sizemonitor.Scroll(config)}}});Ext.define("Ext.event.publisher.ElementSize",{extend:"Ext.event.publisher.Publisher",requires:["Ext.util.SizeMonitor"],targetType:"element",handledEvents:["resize"],constructor:function(){this.monitors={};this.callSuper(arguments)},subscribe:function(target){var match=target.match(this.idSelectorRegex),subscribers=this.subscribers,id,element,sizeMonitor;if(!match){return false}id=match[1];if(subscribers.hasOwnProperty(id)){subscribers[id]++;return true}subscribers[id]=1;element=Ext.get(id);this.monitors[id]=sizeMonitor=new Ext.util.SizeMonitor({element:element,callback:this.onElementResize,scope:this,args:[target,element]});this.dispatcher.addListener("element",target,"painted","forceRefresh",sizeMonitor);return true},unsubscribe:function(target,eventName,all){var match=target.match(this.idSelectorRegex),subscribers=this.subscribers,monitors=this.monitors,id,sizeMonitor;if(!match){return false}id=match[1];if(!subscribers.hasOwnProperty(id)||(!all&&--subscribers[id]>0)){return true}delete subscribers[id];sizeMonitor=monitors[id];this.dispatcher.removeListener("element",target,"painted","forceRefresh",sizeMonitor);sizeMonitor.destroy();delete monitors[id];return true},onElementResize:function(target,element,info){Ext.TaskQueue.requestRead("dispatch",this,[target,"resize",[element,info]])}});Ext.define("Ext.event.publisher.TouchGesture",{extend:"Ext.event.publisher.Dom",requires:["Ext.util.Point","Ext.event.Touch"],handledEvents:["touchstart","touchmove","touchend","touchcancel"],moveEventName:"touchmove",config:{moveThrottle:1,buffering:{enabled:false,interval:10},recognizers:{}},currentTouchesCount:0,constructor:function(config){this.processEvents=Ext.Function.bind(this.processEvents,this);this.eventProcessors={touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd};this.eventToRecognizerMap={};this.activeRecognizers=[];this.currentRecognizers=[];this.currentTargets={};this.currentTouches={};this.buffer=[];this.initConfig(config);return this.callParent()},applyBuffering:function(buffering){if(buffering.enabled===true){this.bufferTimer=setInterval(this.processEvents,buffering.interval)}else{clearInterval(this.bufferTimer)}return buffering},applyRecognizers:function(recognizers){var i,recognizer;for(i in recognizers){if(recognizers.hasOwnProperty(i)){recognizer=recognizers[i];if(recognizer){this.registerRecognizer(recognizer)}}}return recognizers},handles:function(eventName){return this.callParent(arguments)||this.eventToRecognizerMap.hasOwnProperty(eventName)},doesEventBubble:function(){return true},eventLogs:[],onEvent:function(e){var buffering=this.getBuffering();e=new Ext.event.Touch(e);if(buffering.enabled){this.buffer.push(e)}else{this.processEvent(e)}},processEvents:function(){var buffer=this.buffer,ln=buffer.length,moveEvents=[],events,event,i;if(ln>0){events=buffer.slice(0);buffer.length=0;for(i=0;i<ln;i++){event=events[i];if(event.type===this.moveEventName){moveEvents.push(event)}else{if(moveEvents.length>0){this.processEvent(this.mergeEvents(moveEvents));moveEvents.length=0}this.processEvent(event)}}if(moveEvents.length>0){this.processEvent(this.mergeEvents(moveEvents));moveEvents.length=0}}},mergeEvents:function(events){var changedTouchesLists=[],ln=events.length,i,event,targetEvent;targetEvent=events[ln-1];if(ln===1){return targetEvent}for(i=0;i<ln;i++){event=events[i];changedTouchesLists.push(event.changedTouches)}targetEvent.changedTouches=this.mergeTouchLists(changedTouchesLists);return targetEvent},mergeTouchLists:function(touchLists){var touches={},list=[],i,ln,touchList,j,subLn,touch,identifier;for(i=0,ln=touchLists.length;i<ln;i++){touchList=touchLists[i];for(j=0,subLn=touchList.length;j<subLn;j++){touch=touchList[j];identifier=touch.identifier;touches[identifier]=touch}}for(identifier in touches){if(touches.hasOwnProperty(identifier)){list.push(touches[identifier])}}return list},registerRecognizer:function(recognizer){var map=this.eventToRecognizerMap,activeRecognizers=this.activeRecognizers,handledEvents=recognizer.getHandledEvents(),i,ln,eventName;recognizer.setOnRecognized(this.onRecognized);recognizer.setCallbackScope(this);for(i=0,ln=handledEvents.length;i<ln;i++){eventName=handledEvents[i];map[eventName]=recognizer}activeRecognizers.push(recognizer);return this},onRecognized:function(eventName,e,touches,info){var targetGroups=[],ln=touches.length,targets,i,touch;if(ln===1){return this.publish(eventName,touches[0].targets,e,info)}for(i=0;i<ln;i++){touch=touches[i];targetGroups.push(touch.targets)}targets=this.getCommonTargets(targetGroups);this.publish(eventName,targets,e,info)},publish:function(eventName,targets,event,info){event.set(info);return this.callParent([eventName,targets,event])},getCommonTargets:function(targetGroups){var firstTargetGroup=targetGroups[0],ln=targetGroups.length;if(ln===1){return firstTargetGroup}var commonTargets=[],i=1,target,targets,j;while(true){target=firstTargetGroup[firstTargetGroup.length-i];if(!target){return commonTargets}for(j=1;j<ln;j++){targets=targetGroups[j];if(targets[targets.length-i]!==target){return commonTargets}}commonTargets.unshift(target);i++}return commonTargets},invokeRecognizers:function(methodName,e){var recognizers=this.activeRecognizers,ln=recognizers.length,i,recognizer;if(methodName==="onStart"){for(i=0;i<ln;i++){recognizers[i].isActive=true}}for(i=0;i<ln;i++){recognizer=recognizers[i];if(recognizer.isActive&&recognizer[methodName].call(recognizer,e)===false){recognizer.isActive=false}}},getActiveRecognizers:function(){return this.activeRecognizers},processEvent:function(e){this.eventProcessors[e.type].call(this,e)},onTouchStart:function(e){var currentTargets=this.currentTargets,currentTouches=this.currentTouches,currentTouchesCount=this.currentTouchesCount,currentIdentifiers={},changedTouches=e.changedTouches,changedTouchedLn=changedTouches.length,touches=e.touches,touchesLn=touches.length,i,touch,identifier,fakeEndEvent;currentTouchesCount+=changedTouchedLn;if(currentTouchesCount>touchesLn){for(i=0;i<touchesLn;i++){touch=touches[i];identifier=touch.identifier;currentIdentifiers[identifier]=true}if(!Ext.os.is.Android3&&!Ext.os.is.Android4){for(identifier in currentTouches){if(currentTouches.hasOwnProperty(identifier)){if(!currentIdentifiers[identifier]){currentTouchesCount--;fakeEndEvent=e.clone();touch=currentTouches[identifier];touch.targets=this.getBubblingTargets(this.getElementTarget(touch.target));fakeEndEvent.changedTouches=[touch];this.onTouchEnd(fakeEndEvent)}}}}if(Ext.os.is.Android2&&currentTouchesCount>touchesLn){return}}for(i=0;i<changedTouchedLn;i++){touch=changedTouches[i];identifier=touch.identifier;if(!currentTouches.hasOwnProperty(identifier)){this.currentTouchesCount++}currentTouches[identifier]=touch;currentTargets[identifier]=this.getBubblingTargets(this.getElementTarget(touch.target))}e.setTargets(currentTargets);for(i=0;i<changedTouchedLn;i++){touch=changedTouches[i];this.publish("touchstart",touch.targets,e,{touch:touch})}if(!this.isStarted){this.isStarted=true;this.invokeRecognizers("onStart",e)}this.invokeRecognizers("onTouchStart",e)},onTouchMove:function(e){if(!this.isStarted){return}var currentTargets=this.currentTargets,currentTouches=this.currentTouches,moveThrottle=this.getMoveThrottle(),changedTouches=e.changedTouches,stillTouchesCount=0,i,ln,touch,point,oldPoint,identifier;e.setTargets(currentTargets);for(i=0,ln=changedTouches.length;i<ln;i++){touch=changedTouches[i];identifier=touch.identifier;point=touch.point;oldPoint=currentTouches[identifier].point;if(moveThrottle&&point.isCloseTo(oldPoint,moveThrottle)){stillTouchesCount++;continue}currentTouches[identifier]=touch;this.publish("touchmove",touch.targets,e,{touch:touch})}if(stillTouchesCount<ln){this.invokeRecognizers("onTouchMove",e)}},onTouchEnd:function(e){if(!this.isStarted){return}var currentTargets=this.currentTargets,currentTouches=this.currentTouches,changedTouches=e.changedTouches,ln=changedTouches.length,isEnded,identifier,i,touch;e.setTargets(currentTargets);this.currentTouchesCount-=ln;isEnded=(this.currentTouchesCount===0);if(isEnded){this.isStarted=false}for(i=0;i<ln;i++){touch=changedTouches[i];identifier=touch.identifier;delete currentTouches[identifier];delete currentTargets[identifier];this.publish("touchend",touch.targets,e,{touch:touch})}this.invokeRecognizers("onTouchEnd",e);if(isEnded){this.invokeRecognizers("onEnd",e)}}},function(){if(!Ext.feature.has.Touch){this.override({moveEventName:"mousemove",map:{mouseToTouch:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},touchToMouse:{touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}},attachListener:function(eventName){eventName=this.map.touchToMouse[eventName];if(!eventName){return}return this.callOverridden([eventName])},lastEventType:null,onEvent:function(e){if("button" in e&&e.button!==0){return}var type=e.type,touchList=[e];if(type==="mousedown"&&this.lastEventType&&this.lastEventType!=="mouseup"){var fixedEvent=document.createEvent("MouseEvent");fixedEvent.initMouseEvent("mouseup",e.bubbles,e.cancelable,document.defaultView,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.metaKey,e.button,e.relatedTarget);this.onEvent(fixedEvent)}if(type!=="mousemove"){this.lastEventType=type}e.identifier=1;e.touches=(type!=="mouseup")?touchList:[];e.targetTouches=(type!=="mouseup")?touchList:[];e.changedTouches=touchList;return this.callOverridden([e])},processEvent:function(e){this.eventProcessors[this.map.mouseToTouch[e.type]].call(this,e)}})}});Ext.define("Ext.event.recognizer.Recognizer",{mixins:["Ext.mixin.Identifiable"],handledEvents:[],config:{onRecognized:Ext.emptyFn,onFailed:Ext.emptyFn,callbackScope:null},constructor:function(config){this.initConfig(config);return this},getHandledEvents:function(){return this.handledEvents},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,fail:function(){this.getOnFailed().apply(this.getCallbackScope(),arguments);return false},fire:function(){this.getOnRecognized().apply(this.getCallbackScope(),arguments)}});Ext.define("Ext.event.recognizer.Touch",{extend:"Ext.event.recognizer.Recognizer",onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:Ext.emptyFn});Ext.define("Ext.event.recognizer.SingleTouch",{extend:"Ext.event.recognizer.Touch",inheritableStatics:{NOT_SINGLE_TOUCH:1,TOUCH_MOVED:2},onTouchStart:function(e){if(e.touches.length>1){return this.fail(this.self.NOT_SINGLE_TOUCH)}}});Ext.define("Ext.event.recognizer.DoubleTap",{extend:"Ext.event.recognizer.SingleTouch",inheritableStatics:{DIFFERENT_TARGET:3},config:{maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){if(this.callParent(arguments)===false){return false}this.startTime=e.time;clearTimeout(this.singleTapTimer)},onTouchMove:function(){return this.fail(this.self.TOUCH_MOVED)},onEnd:function(e){var me=this,maxDuration=this.getMaxDuration(),touch=e.changedTouches[0],time=e.time,target=e.target,lastTapTime=this.lastTapTime,lastTarget=this.lastTarget,duration;this.lastTapTime=time;this.lastTarget=target;if(lastTapTime){duration=time-lastTapTime;if(duration<=maxDuration){if(target!==lastTarget){return this.fail(this.self.DIFFERENT_TARGET)}this.lastTarget=null;this.lastTapTime=0;this.fire("doubletap",e,[touch],{touch:touch,duration:duration});return}}if(time-this.startTime>maxDuration){this.fireSingleTap(e,touch)}else{this.singleTapTimer=setTimeout(function(){me.fireSingleTap(e,touch)},maxDuration)}},fireSingleTap:function(e,touch){this.fire("singletap",e,[touch],{touch:touch})}});Ext.define("Ext.event.recognizer.Drag",{extend:"Ext.event.recognizer.SingleTouch",isStarted:false,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend"],onTouchStart:function(e){var startTouches,startTouch;if(this.callParent(arguments)===false){if(this.isStarted&&this.lastMoveEvent!==null){this.onTouchEnd(this.lastMoveEvent)}return false}this.startTouches=startTouches=e.changedTouches;this.startTouch=startTouch=startTouches[0];this.startPoint=startTouch.point},onTouchMove:function(e){var touches=e.changedTouches,touch=touches[0],point=touch.point,time=e.time;if(this.lastPoint){this.previousPoint=this.lastPoint}if(this.lastTime){this.previousTime=this.lastTime}this.lastTime=time;this.lastPoint=point;this.lastMoveEvent=e;if(!this.isStarted){this.isStarted=true;this.startTime=time;this.previousTime=time;this.previousPoint=this.startPoint;this.fire("dragstart",e,this.startTouches,this.getInfo(e,this.startTouch))}else{this.fire("drag",e,touches,this.getInfo(e,touch))}},onTouchEnd:function(e){if(this.isStarted){var touches=e.changedTouches,touch=touches[0],point=touch.point;this.isStarted=false;this.lastPoint=point;this.fire("dragend",e,touches,this.getInfo(e,touch));this.startTime=0;this.previousTime=0;this.lastTime=0;this.startPoint=null;this.previousPoint=null;this.lastPoint=null;this.lastMoveEvent=null}},getInfo:function(e,touch){var time=e.time,startPoint=this.startPoint,previousPoint=this.previousPoint,startTime=this.startTime,previousTime=this.previousTime,point=this.lastPoint,deltaX=point.x-startPoint.x,deltaY=point.y-startPoint.y,info={touch:touch,startX:startPoint.x,startY:startPoint.y,previousX:previousPoint.x,previousY:previousPoint.y,pageX:point.x,pageY:point.y,deltaX:deltaX,deltaY:deltaY,absDeltaX:Math.abs(deltaX),absDeltaY:Math.abs(deltaY),previousDeltaX:point.x-previousPoint.x,previousDeltaY:point.y-previousPoint.y,time:time,startTime:startTime,previousTime:previousTime,deltaTime:time-startTime,previousDeltaTime:time-previousTime};return info}});Ext.define("Ext.event.recognizer.Swipe",{extend:"Ext.event.recognizer.SingleTouch",handledEvents:["swipe"],inheritableStatics:{MAX_OFFSET_EXCEEDED:16,MAX_DURATION_EXCEEDED:17,DISTANCE_NOT_ENOUGH:18},config:{minDistance:80,maxOffset:35,maxDuration:1000},onTouchStart:function(e){if(this.callParent(arguments)===false){return false}var touch=e.changedTouches[0];this.startTime=e.time;this.isHorizontal=true;this.isVertical=true;this.startX=touch.pageX;this.startY=touch.pageY},onTouchMove:function(e){var touch=e.changedTouches[0],x=touch.pageX,y=touch.pageY,absDeltaX=Math.abs(x-this.startX),absDeltaY=Math.abs(y-this.startY),time=e.time;if(time-this.startTime>this.getMaxDuration()){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(this.isVertical&&absDeltaX>this.getMaxOffset()){this.isVertical=false}if(this.isHorizontal&&absDeltaY>this.getMaxOffset()){this.isHorizontal=false}if(!this.isHorizontal&&!this.isVertical){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(e){if(this.onTouchMove(e)===false){return false}var touch=e.changedTouches[0],x=touch.pageX,y=touch.pageY,deltaX=x-this.startX,deltaY=y-this.startY,absDeltaX=Math.abs(deltaX),absDeltaY=Math.abs(deltaY),minDistance=this.getMinDistance(),duration=e.time-this.startTime,direction,distance;if(this.isVertical&&absDeltaY<minDistance){this.isVertical=false}if(this.isHorizontal&&absDeltaX<minDistance){this.isHorizontal=false}if(this.isHorizontal){direction=(deltaX<0)?"left":"right";distance=absDeltaX}else{if(this.isVertical){direction=(deltaY<0)?"up":"down";distance=absDeltaY}else{return this.fail(this.self.DISTANCE_NOT_ENOUGH)}}this.fire("swipe",e,[touch],{touch:touch,direction:direction,distance:distance,duration:duration})}});Ext.define("Ext.event.recognizer.HorizontalSwipe",{extend:"Ext.event.recognizer.Swipe",handledEvents:["swipe"],onTouchStart:function(e){if(this.callParent(arguments)===false){return false}var touch=e.changedTouches[0];this.startTime=e.time;this.startX=touch.pageX;this.startY=touch.pageY},onTouchMove:function(e){var touch=e.changedTouches[0],y=touch.pageY,absDeltaY=Math.abs(y-this.startY),time=e.time,maxDuration=this.getMaxDuration(),maxOffset=this.getMaxOffset();if(time-this.startTime>maxDuration){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(absDeltaY>maxOffset){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(e){if(this.onTouchMove(e)!==false){var touch=e.changedTouches[0],x=touch.pageX,deltaX=x-this.startX,distance=Math.abs(deltaX),duration=e.time-this.startTime,minDistance=this.getMinDistance(),direction;if(distance<minDistance){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}direction=(deltaX<0)?"left":"right";this.fire("swipe",e,[touch],{touch:touch,direction:direction,distance:distance,duration:duration})}}});Ext.define("Ext.event.recognizer.LongPress",{extend:"Ext.event.recognizer.SingleTouch",inheritableStatics:{DURATION_NOT_ENOUGH:32},config:{minDuration:1000},handledEvents:["longpress"],fireLongPress:function(e){var touch=e.changedTouches[0];this.fire("longpress",e,[touch],{touch:touch,duration:this.getMinDuration()});this.isLongPress=true},onTouchStart:function(e){var me=this;if(this.callParent(arguments)===false){return false}this.isLongPress=false;this.timer=setTimeout(function(){me.fireLongPress(e)},this.getMinDuration())},onTouchMove:function(){return this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(){if(!this.isLongPress){return this.fail(this.self.DURATION_NOT_ENOUGH)}},fail:function(){clearTimeout(this.timer);return this.callParent(arguments)}},function(){this.override({handledEvents:["longpress","taphold"],fire:function(eventName){if(eventName==="longpress"){var args=Array.prototype.slice.call(arguments);args[0]="taphold";this.fire.apply(this,args)}return this.callOverridden(arguments)}})});Ext.define("Ext.event.recognizer.MultiTouch",{extend:"Ext.event.recognizer.Touch",requiredTouchesCount:2,isTracking:false,isStarted:false,onTouchStart:function(e){var requiredTouchesCount=this.requiredTouchesCount,touches=e.touches,touchesCount=touches.length;if(touchesCount===requiredTouchesCount){this.start(e)}else{if(touchesCount>requiredTouchesCount){this.end(e)}}},onTouchEnd:function(e){this.end(e)},start:function(){if(!this.isTracking){this.isTracking=true;this.isStarted=false}},end:function(e){if(this.isTracking){this.isTracking=false;if(this.isStarted){this.isStarted=false;this.fireEnd(e)}}}});Ext.define("Ext.event.recognizer.Pinch",{extend:"Ext.event.recognizer.MultiTouch",requiredTouchesCount:2,handledEvents:["pinchstart","pinch","pinchend"],startDistance:0,lastTouches:null,onTouchMove:function(e){if(!this.isTracking){return}var touches=Array.prototype.slice.call(e.touches),firstPoint,secondPoint,distance;firstPoint=touches[0].point;secondPoint=touches[1].point;distance=firstPoint.getDistanceTo(secondPoint);if(distance===0){return}if(!this.isStarted){this.isStarted=true;this.startDistance=distance;this.fire("pinchstart",e,touches,{touches:touches,distance:distance,scale:1})}else{this.fire("pinch",e,touches,{touches:touches,distance:distance,scale:distance/this.startDistance})}this.lastTouches=touches},fireEnd:function(e){this.fire("pinchend",e,this.lastTouches)},fail:function(){return this.callParent(arguments)}});Ext.define("Ext.event.recognizer.Rotate",{extend:"Ext.event.recognizer.MultiTouch",requiredTouchesCount:2,handledEvents:["rotatestart","rotate","rotateend"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(e){if(!this.isTracking){return}var touches=Array.prototype.slice.call(e.touches),lastAngle=this.lastAngle,firstPoint,secondPoint,angle,nextAngle,previousAngle,diff;firstPoint=touches[0].point;secondPoint=touches[1].point;angle=firstPoint.getAngleTo(secondPoint);if(lastAngle!==null){diff=Math.abs(lastAngle-angle);nextAngle=angle+360;previousAngle=angle-360;if(Math.abs(nextAngle-lastAngle)<diff){angle=nextAngle}else{if(Math.abs(previousAngle-lastAngle)<diff){angle=previousAngle}}}this.lastAngle=angle;if(!this.isStarted){this.isStarted=true;this.startAngle=angle;this.fire("rotatestart",e,touches,{touches:touches,angle:angle,rotation:0})}else{this.fire("rotate",e,touches,{touches:touches,angle:angle,rotation:angle-this.startAngle})}this.lastTouches=touches},fireEnd:function(e){this.lastAngle=null;this.fire("rotateend",e,this.lastTouches)}});Ext.define("Ext.event.recognizer.Tap",{handledEvents:["tap"],extend:"Ext.event.recognizer.SingleTouch",onTouchMove:function(){return this.fail(this.self.TOUCH_MOVED)},onTouchEnd:function(e){var touch=e.changedTouches[0];this.fire("tap",e,[touch])}},function(){});Ext.define("Ext.event.recognizer.VerticalSwipe",{extend:"Ext.event.recognizer.Swipe",onTouchStart:function(e){if(this.callParent(arguments)===false){return false}var touch=e.changedTouches[0];this.startTime=e.time;this.startX=touch.pageX;this.startY=touch.pageY},onTouchMove:function(e){var touch=e.changedTouches[0],x=touch.pageX,absDeltaX=Math.abs(x-this.startX),maxDuration=this.getMaxDuration(),maxOffset=this.getMaxOffset(),time=e.time;if(time-this.startTime>maxDuration){return this.fail(this.self.MAX_DURATION_EXCEEDED)}if(absDeltaX>maxOffset){return this.fail(this.self.MAX_OFFSET_EXCEEDED)}},onTouchEnd:function(e){if(this.onTouchMove(e)!==false){var touch=e.changedTouches[0],y=touch.pageY,deltaY=y-this.startY,distance=Math.abs(deltaY),duration=e.time-this.startTime,minDistance=this.getMinDistance(),direction;if(distance<minDistance){return this.fail(this.self.DISTANCE_NOT_ENOUGH)}direction=(deltaY<0)?"up":"down";this.fire("swipe",e,[touch],{touch:touch,distance:distance,duration:duration,direction:direction})}}});Ext.define("Ext.field.Checkbox",{extend:"Ext.field.Field",alternateClassName:"Ext.form.Checkbox",xtype:"checkboxfield",qsaLeftRe:/[\[]/g,qsaRightRe:/[\]]/g,isCheckbox:true,config:{ui:"checkbox",value:"",checked:false,tabIndex:-1,component:{xtype:"input",type:"checkbox",useMask:true,cls:Ext.baseCSSPrefix+"input-checkbox"}},initialize:function(){var me=this;me.callParent();me.getComponent().on({scope:me,order:"before",masktap:"onMaskTap"})},doInitValue:function(){var me=this,initialConfig=me.getInitialConfig();if(initialConfig.hasOwnProperty("value")){me.originalState=initialConfig.value}if(initialConfig.hasOwnProperty("checked")){me.originalState=initialConfig.checked}me.callParent(arguments)},updateInputType:function(newInputType){var component=this.getComponent();if(component){component.setType(newInputType)}},updateName:function(newName){var component=this.getComponent();if(component){component.setName(newName)}},getChecked:function(){this._checked=this.getComponent().getChecked();return this._checked},getSubmitValue:function(){return(this.getChecked())?this._value||true:null},setChecked:function(newChecked){this.updateChecked(newChecked);this._checked=newChecked},updateChecked:function(newChecked){this.getComponent().setChecked(newChecked);if(this.initialized){this.onChange()}},onMaskTap:function(component,e){var me=this,dom=component.input.dom;if(me.getDisabled()){return false}dom.checked=!dom.checked;me.onChange(e);return false},onChange:function(e){var me=this,oldChecked=me._checked,newChecked=me.getChecked();if(oldChecked!=newChecked){if(newChecked){me.fireEvent("check",me,e)}else{me.fireEvent("uncheck",me,e)}me.fireEvent("change",me,newChecked,oldChecked)}},doChecked:Ext.emptyFn,doUnChecked:Ext.emptyFn,isChecked:function(){return this.getChecked()},check:function(){return this.setChecked(true)},uncheck:function(){return this.setChecked(false)},getSameGroupFields:function(){var component=this.up("formpanel")||this.up("fieldset"),name=this.getName(),replaceLeft=this.qsaLeftRe,replaceRight=this.qsaRightRe,components=[],elements,element,i,ln;if(!component){Ext.Logger.warn("Ext.field.Radio components must always be descendants of an Ext.form.Panel or Ext.form.FieldSet.");component=Ext.Viewport}name=name.replace(replaceLeft,"\\[");name=name.replace(replaceRight,"\\]");elements=Ext.query("[name="+name+"]",component.element.dom);ln=elements.length;for(i=0;i<ln;i++){element=elements[i];element=Ext.fly(element).up(".x-field");if(element&&element.id){components.push(Ext.getCmp(element.id))}}return components},getGroupValues:function(){var values=[];this.getSameGroupFields().forEach(function(field){if(field.getChecked()){values.push(field.getValue())}});return values},setGroupValues:function(values){this.getSameGroupFields().forEach(function(field){field.setChecked((values.indexOf(field.getValue())!==-1))});return this},resetGroupValues:function(){this.getSameGroupFields().forEach(function(field){field.setChecked(field.originalState)});return this},reset:function(){this.setChecked(this.originalState);return this}});Ext.define("Ext.picker.Slot",{extend:"Ext.dataview.DataView",xtype:"pickerslot",alternateClassName:"Ext.Picker.Slot",requires:["Ext.XTemplate","Ext.data.Store","Ext.Component","Ext.data.StoreManager"],isSlot:true,config:{title:null,showTitle:true,cls:Ext.baseCSSPrefix+"picker-slot",name:null,value:null,flex:1,align:"left",displayField:"text",valueField:"value",itemTpl:null,scrollable:{direction:"vertical",indicators:false,momentumEasing:{minVelocity:2},slotSnapEasing:{duration:100}}},constructor:function(){this.selectedIndex=0;this.callParent(arguments)},applyTitle:function(title){if(title){title=Ext.create("Ext.Component",{cls:Ext.baseCSSPrefix+"picker-slot-title",docked:"top",html:title})}return title},updateTitle:function(newTitle,oldTitle){if(newTitle){this.add(newTitle);this.setupBar()}if(oldTitle){this.remove(oldTitle)}},updateShowTitle:function(showTitle){var title=this.getTitle();if(title){title[showTitle?"show":"hide"]();this.setupBar()}},updateDisplayField:function(newDisplayField){if(!this.config.itemTpl){this.setItemTpl('<div class="'+Ext.baseCSSPrefix+'picker-item {cls} <tpl if="extra">'+Ext.baseCSSPrefix+'picker-invalid</tpl>">{'+newDisplayField+"}</div>")}},updateAlign:function(newAlign,oldAlign){var element=this.element;element.addCls(Ext.baseCSSPrefix+"picker-"+newAlign);element.removeCls(Ext.baseCSSPrefix+"picker-"+oldAlign)},applyData:function(data){var parsedData=[],ln=data&&data.length,i,item,obj;if(data&&Ext.isArray(data)&&ln){for(i=0;i<ln;i++){item=data[i];obj={};if(Ext.isArray(item)){obj[this.valueField]=item[0];obj[this.displayField]=item[1]}else{if(Ext.isString(item)){obj[this.valueField]=item;obj[this.displayField]=item}else{if(Ext.isObject(item)){obj=item}}}parsedData.push(obj)}}return data},initialize:function(){this.callParent();var scroller=this.getScrollable().getScroller();this.on({scope:this,painted:"onPainted",itemtap:"doItemTap"});scroller.on({scope:this,scrollend:"onScrollEnd"})},onPainted:function(){this.setupBar()},getPicker:function(){if(!this.picker){this.picker=this.getParent()}return this.picker},setupBar:function(){if(!this.rendered){return}var element=this.element,innerElement=this.innerElement,picker=this.getPicker(),bar=picker.bar,value=this.getValue(),showTitle=this.getShowTitle(),title=this.getTitle(),scrollable=this.getScrollable(),scroller=scrollable.getScroller(),titleHeight=0,barHeight,padding;barHeight=bar.getHeight();if(showTitle&&title){titleHeight=title.element.getHeight()}padding=Math.ceil((element.getHeight()-titleHeight-barHeight)/2);innerElement.setStyle({padding:padding+"px 0 "+(padding)+"px"});scroller.refresh();scroller.setSlotSnapSize(barHeight);this.setValue(value)},doItemTap:function(list,index,item,e){var me=this;me.selectedIndex=index;me.selectedNode=item;me.scrollToItem(item,true)},scrollToItem:function(item,animated){var y=item.getY(),parentEl=item.parent(),parentY=parentEl.getY(),scrollView=this.getScrollable(),scroller=scrollView.getScroller(),difference;difference=y-parentY;scroller.scrollTo(0,difference,animated)},onScrollEnd:function(scroller,x,y){var me=this,index=Math.round(y/me.picker.bar.getHeight()),viewItems=me.getViewItems(),item=viewItems[index];if(item){me.selectedIndex=index;me.selectedNode=item;me.fireEvent("slotpick",me,me.getValue(),me.selectedNode)}},getValue:function(useDom){var store=this.getStore(),record,value;if(!store){return}if(!this.rendered||!useDom){return this._value}if(this._value===false){return null}record=store.getAt(this.selectedIndex);value=record?record.get(this.getValueField()):null;return value},setValue:function(value){return this.doSetValue(value)},setValueAnimated:function(value){return this.doSetValue(value,true)},doSetValue:function(value,animated){if(!Ext.isDefined(value)){return}if(!this.rendered){this._value=value;return}var store=this.getStore(),viewItems=this.getViewItems(),valueField=this.getValueField(),index,item;index=store.findExact(valueField,value);if(index!=-1){item=Ext.get(viewItems[index]);this.selectedIndex=index;if(item){this.scrollToItem(item,(animated)?{duration:100}:false)}this._value=value}}});Ext.define("Ext.picker.Picker",{extend:"Ext.Sheet",alias:"widget.picker",alternateClassName:"Ext.Picker",requires:["Ext.picker.Slot","Ext.TitleBar","Ext.data.Model"],isPicker:true,config:{cls:Ext.baseCSSPrefix+"picker",doneButton:true,cancelButton:true,useTitles:false,slots:null,value:null,height:220,layout:{type:"hbox",align:"stretch"},centered:false,left:0,right:0,bottom:0,defaultType:"pickerslot",toolbar:true},initialize:function(){var me=this,clsPrefix=Ext.baseCSSPrefix,innerElement=this.innerElement;this.mask=innerElement.createChild({cls:clsPrefix+"picker-mask"});this.bar=this.mask.createChild({cls:clsPrefix+"picker-bar"});me.on({scope:this,delegate:"pickerslot",slotpick:"onSlotPick"})},applyToolbar:function(config){if(config===true){config={}}Ext.applyIf(config,{docked:"top"});return Ext.factory(config,"Ext.TitleBar",this.getToolbar())},updateToolbar:function(newToolbar,oldToolbar){if(newToolbar){this.add(newToolbar)}if(oldToolbar){this.remove(oldToolbar)}},applyDoneButton:function(config){if(config){if(Ext.isBoolean(config)){config={}}if(typeof config=="string"){config={text:config}}Ext.applyIf(config,{ui:"action",align:"right",text:"Done"})}return Ext.factory(config,"Ext.Button",this.getDoneButton())},updateDoneButton:function(newDoneButton,oldDoneButton){var toolbar=this.getToolbar();if(newDoneButton){toolbar.add(newDoneButton);newDoneButton.on("tap",this.onDoneButtonTap,this)}else{if(oldDoneButton){toolbar.remove(oldDoneButton)}}},applyCancelButton:function(config){if(config){if(Ext.isBoolean(config)){config={}}if(typeof config=="string"){config={text:config}}Ext.applyIf(config,{align:"left",text:"Cancel"})}return Ext.factory(config,"Ext.Button",this.getCancelButton())},updateCancelButton:function(newCancelButton,oldCancelButton){var toolbar=this.getToolbar();if(newCancelButton){toolbar.add(newCancelButton);newCancelButton.on("tap",this.onCancelButtonTap,this)}else{if(oldCancelButton){toolbar.remove(oldCancelButton)}}},updateUseTitles:function(useTitles){var innerItems=this.getInnerItems(),ln=innerItems.length,cls=Ext.baseCSSPrefix+"use-titles",i,innerItem;if(useTitles){this.addCls(cls)}else{this.removeCls(cls)}for(i=0;i<ln;i++){innerItem=innerItems[i];if(innerItem.isSlot){innerItem.setShowTitle(useTitles)}}},applySlots:function(slots){if(slots){var ln=slots.length,i;for(i=0;i<ln;i++){slots[i].picker=this}}return slots},updateSlots:function(newSlots){var bcss=Ext.baseCSSPrefix,innerItems;this.removeAll();if(newSlots){this.add(newSlots)}innerItems=this.getInnerItems();if(innerItems.length>0){innerItems[0].addCls(bcss+"first");innerItems[innerItems.length-1].addCls(bcss+"last")}this.updateUseTitles(this.getUseTitles())},onDoneButtonTap:function(){var oldValue=this._value,newValue=this.getValue(true);if(newValue!=oldValue){this.fireEvent("change",this,newValue)}this.hide()},onCancelButtonTap:function(){this.fireEvent("cancel",this);this.hide()},onSlotPick:function(slot){this.fireEvent("pick",this,this.getValue(true),slot)},show:function(){if(this.getParent()===undefined){Ext.Viewport.add(this)}this.callParent(arguments);if(!this.isHidden()){this.setValue(this._value)}},setValue:function(values,animated){var me=this,slots=me.getInnerItems(),ln=slots.length,key,slot,loopSlot,i,value;if(!values){values={};for(i=0;i<ln;i++){values[slots[i].config.name]=null}}for(key in values){slot=null;value=values[key];for(i=0;i<slots.length;i++){loopSlot=slots[i];if(loopSlot.config.name==key){slot=loopSlot;break}}if(slot){if(animated){slot.setValueAnimated(value)}else{slot.setValue(value)}}}me._values=me._value=values;return me},setValueAnimated:function(values){this.setValue(values,true)},getValue:function(useDom){var values={},items=this.getItems().items,ln=items.length,item,i;if(useDom){for(i=0;i<ln;i++){item=items[i];if(item&&item.isSlot){values[item.getName()]=item.getValue(useDom)}}this._values=values}return this._values},getValues:function(){return this.getValue()},destroy:function(){this.callParent();Ext.destroy(this.mask,this.bar)}},function(){});Ext.define("Ext.picker.Date",{extend:"Ext.picker.Picker",xtype:"datepicker",alternateClassName:"Ext.DatePicker",requires:["Ext.DateExtras"],config:{yearFrom:1980,yearTo:new Date().getFullYear(),monthText:"Month",dayText:"Day",yearText:"Year",slotOrder:["month","day","year"]},initialize:function(){this.callParent();this.on({scope:this,delegate:"> slot",slotpick:this.onSlotPick});this.on({scope:this,show:this.onSlotPick})},setValue:function(value,animated){if(Ext.isDate(value)){value={day:value.getDate(),month:value.getMonth()+1,year:value.getFullYear()}}this.callParent([value,animated]);this.onSlotPick()},getValue:function(useDom){var values={},items=this.getItems().items,ln=items.length,daysInMonth,day,month,year,item,i;for(i=0;i<ln;i++){item=items[i];if(item instanceof Ext.picker.Slot){values[item.getName()]=item.getValue(useDom)}}if(values.year===null&&values.month===null&&values.day===null){return null}year=Ext.isNumber(values.year)?values.year:1;month=Ext.isNumber(values.month)?values.month:1;day=Ext.isNumber(values.day)?values.day:1;if(month&&year&&month&&day){daysInMonth=this.getDaysInMonth(month,year)}day=(daysInMonth)?Math.min(day,daysInMonth):day;return new Date(year,month-1,day)},updateYearFrom:function(){if(this.initialized){this.createSlots()}},updateYearTo:function(){if(this.initialized){this.createSlots()}},updateMonthText:function(newMonthText,oldMonthText){var innerItems=this.getInnerItems,ln=innerItems.length,item,i;if(this.initialized){for(i=0;i<ln;i++){item=innerItems[i];if((typeof item.title=="string"&&item.title==oldMonthText)||(item.title.html==oldMonthText)){item.setTitle(newMonthText)}}}},updateDayText:function(newDayText,oldDayText){var innerItems=this.getInnerItems,ln=innerItems.length,item,i;if(this.initialized){for(i=0;i<ln;i++){item=innerItems[i];if((typeof item.title=="string"&&item.title==oldDayText)||(item.title.html==oldDayText)){item.setTitle(newDayText)}}}},updateYearText:function(yearText){var innerItems=this.getInnerItems,ln=innerItems.length,item,i;if(this.initialized){for(i=0;i<ln;i++){item=innerItems[i];if(item.title==this.yearText){item.setTitle(yearText)}}}},constructor:function(){this.callParent(arguments);this.createSlots()},createSlots:function(){var me=this,slotOrder=me.getSlotOrder(),yearsFrom=me.getYearFrom(),yearsTo=me.getYearTo(),years=[],days=[],months=[],reverse=yearsFrom>yearsTo,ln,i,daysInMonth;while(yearsFrom){years.push({text:yearsFrom,value:yearsFrom});if(yearsFrom===yearsTo){break}if(reverse){yearsFrom--}else{yearsFrom++}}daysInMonth=me.getDaysInMonth(1,new Date().getFullYear());for(i=0;i<daysInMonth;i++){days.push({text:i+1,value:i+1})}for(i=0,ln=Ext.Date.monthNames.length;i<ln;i++){months.push({text:Ext.Date.monthNames[i],value:i+1})}var slots=[];slotOrder.forEach(function(item){slots.push(me.createSlot(item,days,months,years))});me.setSlots(slots)},createSlot:function(name,days,months,years){switch(name){case"year":return{name:"year",align:"center",data:years,title:this.getYearText(),flex:3};case"month":return{name:name,align:"right",data:months,title:this.getMonthText(),flex:4};case"day":return{name:"day",align:"center",data:days,title:this.getDayText(),flex:2}}},onSlotPick:function(){var value=this.getValue(true),slot=this.getDaySlot(),year=value.getFullYear(),month=value.getMonth(),days=[],daysInMonth,i;if(!value||!Ext.isDate(value)||!slot){return}this.callParent();daysInMonth=this.getDaysInMonth(month+1,year);for(i=0;i<daysInMonth;i++){days.push({text:i+1,value:i+1})}if(slot.getStore().getCount()==days.length){return}slot.getStore().setData(days);var store=slot.getStore(),viewItems=slot.getViewItems(),valueField=slot.getValueField(),index,item;index=store.find(valueField,value.getDate());if(index==-1){return}item=Ext.get(viewItems[index]);slot.selectedIndex=index;slot.scrollToItem(item)},getDaySlot:function(){var innerItems=this.getInnerItems(),ln=innerItems.length,i,slot;if(this.daySlot){return this.daySlot}for(i=0;i<ln;i++){slot=innerItems[i];if(slot.isSlot&&slot.getName()=="day"){this.daySlot=slot;return slot}}return null},getDaysInMonth:function(month,year){var daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];return month==2&&this.isLeapYear(year)?29:daysInMonth[month-1]},isLeapYear:function(year){return !!((year&3)===0&&(year%100||(year%400===0&&year)))},onDoneButtonTap:function(){var oldValue=this._value,newValue=this.getValue(true),testValue=newValue;if(Ext.isDate(newValue)){testValue=newValue.toDateString()}if(Ext.isDate(oldValue)){oldValue=oldValue.toDateString()}if(testValue!=oldValue){this.fireEvent("change",this,newValue)}this.hide()}});Ext.define("Ext.field.DatePicker",{extend:"Ext.field.Text",alternateClassName:"Ext.form.DatePicker",xtype:"datepickerfield",requires:["Ext.picker.Date","Ext.DateExtras"],config:{ui:"select",picker:true,clearIcon:false,destroyPickerOnHide:false,dateFormat:null,component:{useMask:true}},initialize:function(){var me=this,component=me.getComponent();me.callParent();component.on({scope:me,masktap:"onMaskTap"});if(Ext.os.is.Android2){component.input.dom.disabled=true}},syncEmptyCls:Ext.emptyFn,applyValue:function(value){if(!Ext.isDate(value)&&!Ext.isObject(value)){return null}if(Ext.isObject(value)){return new Date(value.year,value.month-1,value.day)}return value},updateValue:function(newValue,oldValue){var me=this,picker=me._picker;if(picker&&picker.isPicker){picker.setValue(newValue)}if(newValue!==null){me.getComponent().setValue(Ext.Date.format(newValue,me.getDateFormat()||Ext.util.Format.defaultDateFormat))}else{me.getComponent().setValue("")}if(newValue!==oldValue){me.fireEvent("change",me,newValue,oldValue)}},updateDateFormat:function(newDateFormat,oldDateFormat){var value=this.getValue();if(newDateFormat!=oldDateFormat&&Ext.isDate(value)){this.getComponent().setValue(Ext.Date.format(value,newDateFormat||Ext.util.Format.defaultDateFormat))}},getValue:function(){if(this._picker&&this._picker instanceof Ext.picker.Date){return this._picker.getValue()}return this._value},getFormattedValue:function(format){var value=this.getValue();return(Ext.isDate(value))?Ext.Date.format(value,format||this.getDateFormat()||Ext.util.Format.defaultDateFormat):value},applyPicker:function(picker,pickerInstance){if(pickerInstance&&pickerInstance.isPicker){picker=pickerInstance.setConfig(picker)}return picker},getPicker:function(){var picker=this._picker,value=this.getValue();if(picker&&!picker.isPicker){picker=Ext.factory(picker,Ext.picker.Date);if(value!=null){picker.setValue(value)}}picker.on({scope:this,change:"onPickerChange",hide:"onPickerHide"});this._picker=picker;return picker},onMaskTap:function(){if(this.getDisabled()){return false}this.onFocus();return false},onPickerChange:function(picker,value){var me=this,oldValue=me.getValue();me.setValue(value);me.fireEvent("select",me,value);me.onChange(me,value,oldValue)},onChange:Ext.emptyFn,onPickerHide:function(){var me=this,picker=me.getPicker();if(me.getDestroyPickerOnHide()&&picker){picker.destroy();me._picker=me.getInitialConfig().picker||true}},reset:function(){this.setValue(this.originalValue)},onFocus:function(e){var component=this.getComponent();this.fireEvent("focus",this,e);if(Ext.os.is.Android4){component.input.dom.focus()}component.input.dom.blur();if(this.getReadOnly()){return false}this.isFocused=true;this.getPicker().show()},destroy:function(){var picker=this._picker;if(picker&&picker.isPicker){picker.destroy()}this.callParent(arguments)}});Ext.define("Ext.field.Email",{extend:"Ext.field.Text",alternateClassName:"Ext.form.Email",xtype:"emailfield",config:{component:{type:"email"},autoCapitalize:false}});Ext.define("Ext.field.File",{extend:"Ext.field.Input",xtype:"file",cachedConfig:{type:"file"},getTemplate:function(){var items=[{reference:"input",tag:this.tag,type:"file"}];items.push({reference:"mask",classList:[this.config.maskCls]});return items},updateType:function(newType,oldType){var prefix=Ext.baseCSSPrefix+"input-";this.input.replaceCls(prefix+oldType,prefix+newType)}});Ext.define("Ext.field.Hidden",{extend:"Ext.field.Text",alternateClassName:"Ext.form.Hidden",xtype:"hiddenfield",config:{component:{xtype:"input",type:"hidden"},ui:"hidden",hidden:true,tabIndex:-1}});Ext.define("Ext.field.Number",{extend:"Ext.field.Text",xtype:"numberfield",alternateClassName:"Ext.form.Number",config:{component:{type:"number"},ui:"number"},proxyConfig:{minValue:null,maxValue:null,stepValue:null},doInitValue:function(){var value=this.getInitialConfig().value;if(value){value=this.applyValue(value)}this.originalValue=value},applyValue:function(value){var minValue=this.getMinValue(),maxValue=this.getMaxValue();if(Ext.isNumber(minValue)){value=Math.max(value,minValue)}if(Ext.isNumber(maxValue)){value=Math.min(value,maxValue)}value=parseFloat(value);return(isNaN(value))?"":value},getValue:function(){var value=parseFloat(this.callParent(),10);return(isNaN(value))?null:value},doClearIconTap:function(me,e){me.getComponent().setValue("");me.getValue();me.hideClearIcon()}});Ext.define("Ext.field.Password",{extend:"Ext.field.Text",xtype:"passwordfield",alternateClassName:"Ext.form.Password",config:{autoCapitalize:false,component:{type:"password"}}});Ext.define("Ext.field.Radio",{extend:"Ext.field.Checkbox",xtype:"radiofield",alternateClassName:"Ext.form.Radio",isRadio:true,config:{ui:"radio",component:{type:"radio",cls:Ext.baseCSSPrefix+"input-radio"}},getValue:function(){return(this._value)?this._value:null},setValue:function(value){this._value=value;return this},getSubmitValue:function(){var value=this._value;if(typeof value=="undefined"||value==null){value=true}return(this.getChecked())?value:null},updateChecked:function(newChecked){this.getComponent().setChecked(newChecked);if(this.initialized){this.refreshGroupValues()}},onMaskTap:function(component,e){var me=this,dom=component.input.dom;if(me.getDisabled()){return false}if(!me.getChecked()){dom.checked=true}me.refreshGroupValues();return false},getGroupValue:function(){var fields=this.getSameGroupFields(),ln=fields.length,i=0,field;for(;i<ln;i++){field=fields[i];if(field.getChecked()){return field.getValue()}}return null},setGroupValue:function(value){var fields=this.getSameGroupFields(),ln=fields.length,i=0,field;for(;i<ln;i++){field=fields[i];if(field.getValue()===value){field.setChecked(true);return field}}},refreshGroupValues:function(){var fields=this.getSameGroupFields(),ln=fields.length,i=0,field;for(;i<ln;i++){field=fields[i];field.onChange()}}});Ext.define("Ext.field.Search",{extend:"Ext.field.Text",xtype:"searchfield",alternateClassName:"Ext.form.Search",config:{component:{type:"search"},ui:"search"}});Ext.define("Ext.field.Select",{extend:"Ext.field.Text",xtype:"selectfield",alternateClassName:"Ext.form.Select",requires:["Ext.Panel","Ext.picker.Picker","Ext.data.Store","Ext.data.StoreManager","Ext.dataview.List"],config:{ui:"select",valueField:"value",displayField:"text",store:null,options:null,hiddenName:null,component:{useMask:true},clearIcon:false,usePicker:(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)?false:"auto",autoSelect:true,defaultPhonePickerConfig:null,defaultTabletPickerConfig:null,name:"picker"},initialize:function(){var me=this,component=me.getComponent();me.callParent();component.on({scope:me,masktap:"onMaskTap"});if(Ext.os.is.Android2){component.input.dom.disabled=true}},updateDefaultPhonePickerConfig:function(newConfig){var picker=this.picker;if(picker){picker.setConfig(newConfig)}},updateDefaultTabletPickerConfig:function(newConfig){var listPanel=this.listPanel;if(listPanel){listPanel.setConfig(newConfig)}},applyUsePicker:function(usePicker){if(usePicker=="auto"){usePicker=(Ext.os.deviceType=="Phone")}return Boolean(usePicker)},syncEmptyCls:Ext.emptyFn,applyValue:function(value){var record=value,index,store;this.getOptions();store=this.getStore();if((value!=undefined&&!value.isModel)&&store){index=store.find(this.getValueField(),value,null,null,null,true);if(index==-1){index=store.find(this.getDisplayField(),value,null,null,null,true)}record=store.getAt(index)}return record},updateValue:function(newValue,oldValue){this.record=newValue;this.callParent([(newValue&&newValue.isModel)?newValue.get(this.getDisplayField()):""])},getValue:function(){var record=this.record;return(record&&record.isModel)?record.get(this.getValueField()):null},getRecord:function(){return this.record},getPhonePicker:function(){var config=this.getDefaultPhonePickerConfig();if(!this.picker){this.picker=Ext.create("Ext.picker.Picker",Ext.apply({slots:[{align:"center",name:this.getName(),valueField:this.getValueField(),displayField:this.getDisplayField(),value:this.getValue(),store:this.getStore()}],listeners:{change:this.onPickerChange,scope:this}},config))}return this.picker},getTabletPicker:function(){var config=this.getDefaultTabletPickerConfig();if(!this.listPanel){this.listPanel=Ext.create("Ext.Panel",Ext.apply({left:0,top:0,modal:true,cls:Ext.baseCSSPrefix+"select-overlay",layout:"fit",hideOnMaskTap:true,width:Ext.os.is.Phone?"14em":"18em",height:(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)?"12em":(Ext.os.is.Phone?"12.5em":"22em"),items:{xtype:"list",store:this.getStore(),itemTpl:'<span class="x-list-label">{'+this.getDisplayField()+":htmlEncode}</span>",listeners:{select:this.onListSelect,itemtap:this.onListTap,scope:this}}},config))}return this.listPanel},onMaskTap:function(){if(this.getDisabled()){return false}this.onFocus();return false},showPicker:function(){var store=this.getStore();if(!store||store.getCount()===0){return}if(this.getReadOnly()){return}this.isFocused=true;if(this.getUsePicker()){var picker=this.getPhonePicker(),name=this.getName(),value={};value[name]=this.getValue();picker.setValue(value);if(!picker.getParent()){Ext.Viewport.add(picker)}picker.show()}else{var listPanel=this.getTabletPicker(),list=listPanel.down("list"),index,record;store=list.getStore();index=store.find(this.getValueField(),this.getValue(),null,null,null,true);record=store.getAt((index==-1)?0:index);if(!listPanel.getParent()){Ext.Viewport.add(listPanel)}listPanel.showBy(this.getComponent(),(Ext.os.is.BlackBerry&&Ext.os.version.getMajor()===10)?"t-b":null);list.select(record,null,true)}},onListSelect:function(item,record){var me=this;if(record){me.setValue(record)}},onListTap:function(){this.listPanel.hide({type:"fade",out:true,scope:this})},onPickerChange:function(picker,value){var me=this,newValue=value[me.getName()],store=me.getStore(),index=store.find(me.getValueField(),newValue,null,null,null,true),record=store.getAt(index);me.setValue(record)},onChange:function(component,newValue,oldValue){var me=this,store=me.getStore(),index=(store)?store.find(me.getDisplayField(),oldValue):-1,valueField=me.getValueField(),record=(store)?store.getAt(index):null;oldValue=(record)?record.get(valueField):null;me.fireEvent("change",me,me.getValue(),oldValue)},updateOptions:function(newOptions){var store=this.getStore();if(!store){this.setStore(true);store=this._store}if(!newOptions){store.clearData()}else{store.setData(newOptions);this.onStoreDataChanged(store)}return this},applyStore:function(store){if(store===true){store=Ext.create("Ext.data.Store",{fields:[this.getValueField(),this.getDisplayField()],autoDestroy:true})}if(store){store=Ext.data.StoreManager.lookup(store);store.on({scope:this,addrecords:"onStoreDataChanged",removerecords:"onStoreDataChanged",updaterecord:"onStoreDataChanged",refresh:"onStoreDataChanged"})}return store},updateStore:function(newStore){if(newStore){this.onStoreDataChanged(newStore)}if(this.getUsePicker()&&this.picker){this.picker.down("pickerslot").setStore(newStore)}else{if(this.listPanel){this.listPanel.down("dataview").setStore(newStore)}}},onStoreDataChanged:function(store){var initialConfig=this.getInitialConfig(),value=this.getValue();if(value||value==0){this.updateValue(this.applyValue(value))}if(this.getValue()===null){if(initialConfig.hasOwnProperty("value")){this.setValue(initialConfig.value)}if(this.getValue()===null&&this.getAutoSelect()){if(store.getCount()>0){this.setValue(store.getAt(0))}}}},doSetDisabled:function(disabled){Ext.Component.prototype.doSetDisabled.apply(this,arguments)},setDisabled:function(){Ext.Component.prototype.setDisabled.apply(this,arguments)},reset:function(){var store=this.getStore(),record=(this.originalValue)?this.originalValue:store.getAt(0);if(store&&record){this.setValue(record)}return this},onFocus:function(e){var component=this.getComponent();this.fireEvent("focus",this,e);if(Ext.os.is.Android4){component.input.dom.focus()}component.input.dom.blur();this.isFocused=true;this.showPicker()},destroy:function(){this.callParent(arguments);var store=this.getStore();if(store&&store.getAutoDestroy()){Ext.destroy(store)}}});Ext.define("Ext.slider.Thumb",{extend:"Ext.Component",xtype:"thumb",config:{baseCls:Ext.baseCSSPrefix+"thumb",draggable:{direction:"horizontal"}},elementWidth:0,initialize:function(){this.callParent();this.getDraggable().onBefore({dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",scope:this});this.element.on("resize","onElementResize",this)},onDragStart:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDrag:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onDragEnd:function(){if(this.isDisabled()){return false}this.relayEvent(arguments)},onElementResize:function(element,info){this.elementWidth=info.width},getElementWidth:function(){return this.elementWidth}});Ext.define("Ext.slider.Slider",{extend:"Ext.Container",xtype:"slider",requires:["Ext.slider.Thumb","Ext.fx.easing.EaseOut"],config:{baseCls:"x-slider",thumbConfig:{draggable:{translatable:{easingX:{duration:300,type:"ease-out"}}}},increment:1,value:0,minValue:0,maxValue:100,allowThumbsOverlapping:false,animation:true,readOnly:false},elementWidth:0,offsetValueRatio:0,activeThumb:null,constructor:function(config){config=config||{};if(config.hasOwnProperty("values")){config.value=config.values}this.callParent([config])},initialize:function(){var element=this.element;this.callParent();element.on({scope:this,tap:"onTap",resize:"onResize"});this.on({scope:this,delegate:"> thumb",dragstart:"onThumbDragStart",drag:"onThumbDrag",dragend:"onThumbDragEnd"});var thumb=this.getThumb(0);if(thumb){thumb.on("resize","onThumbResize",this)}},factoryThumb:function(){return Ext.factory(this.getThumbConfig(),Ext.slider.Thumb)},getThumbs:function(){return this.innerItems},getThumb:function(index){if(typeof index!="number"){index=0}return this.innerItems[index]},refreshOffsetValueRatio:function(){var valueRange=this.getMaxValue()-this.getMinValue(),trackWidth=this.elementWidth-this.thumbWidth;this.offsetValueRatio=trackWidth/valueRange},onThumbResize:function(){var thumb=this.getThumb(0);if(thumb){this.thumbWidth=thumb.getElementWidth()}this.refresh()},onResize:function(element,info){this.elementWidth=info.width;this.refresh()},refresh:function(){this.refreshValue()},setActiveThumb:function(thumb){var oldActiveThumb=this.activeThumb;if(oldActiveThumb&&oldActiveThumb!==thumb){oldActiveThumb.setZIndex(null)}this.activeThumb=thumb;thumb.setZIndex(2);return this},onThumbDragStart:function(thumb,e){if(e.absDeltaX<=e.absDeltaY||this.getReadOnly()){return false}else{e.stopPropagation()}if(this.getAllowThumbsOverlapping()){this.setActiveThumb(thumb)}this.dragStartValue=this.getValue()[this.getThumbIndex(thumb)];this.fireEvent("dragstart",this,thumb,this.dragStartValue,e)},onThumbDrag:function(thumb,e,offsetX){var index=this.getThumbIndex(thumb),offsetValueRatio=this.offsetValueRatio,constrainedValue=this.constrainValue(this.getMinValue()+offsetX/offsetValueRatio);e.stopPropagation();this.setIndexValue(index,constrainedValue);this.fireEvent("drag",this,thumb,this.getValue(),e);return false},setIndexValue:function(index,value,animation){var thumb=this.getThumb(index),values=this.getValue(),offsetValueRatio=this.offsetValueRatio,draggable=thumb.getDraggable();draggable.setOffset((value-this.getMinValue())*offsetValueRatio,null,animation);values[index]=value},onThumbDragEnd:function(thumb,e){this.refreshThumbConstraints(thumb);var index=this.getThumbIndex(thumb),newValue=this.getValue()[index],oldValue=this.dragStartValue;this.fireEvent("dragend",this,thumb,this.getValue(),e);if(oldValue!==newValue){this.fireEvent("change",this,thumb,newValue,oldValue)}},getThumbIndex:function(thumb){return this.getThumbs().indexOf(thumb)},refreshThumbConstraints:function(thumb){var allowThumbsOverlapping=this.getAllowThumbsOverlapping(),offsetX=thumb.getDraggable().getOffset().x,thumbs=this.getThumbs(),index=this.getThumbIndex(thumb),previousThumb=thumbs[index-1],nextThumb=thumbs[index+1],thumbWidth=this.thumbWidth;if(previousThumb){previousThumb.getDraggable().addExtraConstraint({max:{x:offsetX-((allowThumbsOverlapping)?0:thumbWidth)}})}if(nextThumb){nextThumb.getDraggable().addExtraConstraint({min:{x:offsetX+((allowThumbsOverlapping)?0:thumbWidth)}})}},onTap:function(e){if(this.isDisabled()){return}var targetElement=Ext.get(e.target);if(!targetElement||targetElement.hasCls("x-thumb")){return}var touchPointX=e.touch.point.x,element=this.element,elementX=element.getX(),offset=touchPointX-elementX-(this.thumbWidth/2),value=this.constrainValue(this.getMinValue()+offset/this.offsetValueRatio),values=this.getValue(),minDistance=Infinity,ln=values.length,i,absDistance,testValue,closestIndex,oldValue,thumb;if(ln===1){closestIndex=0}else{for(i=0;i<ln;i++){testValue=values[i];absDistance=Math.abs(testValue-value);if(absDistance<minDistance){minDistance=absDistance;closestIndex=i}}}oldValue=values[closestIndex];thumb=this.getThumb(closestIndex);this.setIndexValue(closestIndex,value,this.getAnimation());this.refreshThumbConstraints(thumb);if(oldValue!==value){this.fireEvent("change",this,thumb,value,oldValue)}},updateThumbs:function(newThumbs){this.add(newThumbs)},applyValue:function(value){var values=Ext.Array.from(value||0),filteredValues=[],previousFilteredValue=this.getMinValue(),filteredValue,i,ln;for(i=0,ln=values.length;i<ln;i++){filteredValue=this.constrainValue(values[i]);if(filteredValue<previousFilteredValue){Ext.Logger.warn("Invalid values of '"+Ext.encode(values)+"', values at smaller indexes must be smaller than or equal to values at greater indexes");filteredValue=previousFilteredValue}filteredValues.push(filteredValue);previousFilteredValue=filteredValue}return filteredValues},updateValue:function(newValue,oldValue){var thumbs=this.getThumbs(),ln=newValue.length,minValue=this.getMinValue(),offset=this.offsetValueRatio,i;this.setThumbsCount(ln);for(i=0;i<ln;i++){thumbs[i].getDraggable().setExtraConstraint(null).setOffset((newValue[i]-minValue)*offset)}for(i=0;i<ln;i++){this.refreshThumbConstraints(thumbs[i])}},refreshValue:function(){this.refreshOffsetValueRatio();this.setValue(this.getValue())},constrainValue:function(value){var me=this,minValue=me.getMinValue(),maxValue=me.getMaxValue(),increment=me.getIncrement(),remainder;value=parseFloat(value);if(isNaN(value)){value=minValue}remainder=(value-minValue)%increment;value-=remainder;if(Math.abs(remainder)>=(increment/2)){value+=(remainder>0)?increment:-increment}value=Math.max(minValue,value);value=Math.min(maxValue,value);return value},setThumbsCount:function(count){var thumbs=this.getThumbs(),thumbsCount=thumbs.length,i,ln,thumb;if(thumbsCount>count){for(i=0,ln=thumbsCount-count;i<ln;i++){thumb=thumbs[thumbs.length-1];thumb.destroy()}}else{if(thumbsCount<count){for(i=0,ln=count-thumbsCount;i<ln;i++){this.add(this.factoryThumb())}}}return this},setValues:function(value){this.setValue(value)},getValues:function(){return this.getValue()},applyIncrement:function(increment){if(increment===0){increment=1}return Math.abs(increment)},updateAllowThumbsOverlapping:function(newValue,oldValue){if(typeof oldValue!="undefined"){this.refreshValue()}},updateMinValue:function(newValue,oldValue){if(typeof oldValue!="undefined"){this.refreshValue()}},updateMaxValue:function(newValue,oldValue){if(typeof oldValue!="undefined"){this.refreshValue()}},updateIncrement:function(newValue,oldValue){if(typeof oldValue!="undefined"){this.refreshValue()}},doSetDisabled:function(disabled){this.callParent(arguments);var items=this.getItems().items,ln=items.length,i;for(i=0;i<ln;i++){items[i].setDisabled(disabled)}}},function(){});Ext.define("Ext.field.Slider",{extend:"Ext.field.Field",xtype:"sliderfield",requires:["Ext.slider.Slider"],alternateClassName:"Ext.form.Slider",config:{cls:Ext.baseCSSPrefix+"slider-field",tabIndex:-1,readOnly:false},proxyConfig:{increment:1,value:0,minValue:0,maxValue:100},constructor:function(config){config=config||{};if(config.hasOwnProperty("values")){config.value=config.values}this.callParent([config])},initialize:function(){this.callParent();this.getComponent().on({scope:this,change:"onSliderChange",dragstart:"onSliderDragStart",drag:"onSliderDrag",dragend:"onSliderDragEnd"})},applyComponent:function(config){return Ext.factory(config,Ext.slider.Slider)},onSliderChange:function(){this.fireEvent.apply(this,[].concat("change",this,Array.prototype.slice.call(arguments)))},onSliderDragStart:function(){this.fireEvent.apply(this,[].concat("dragstart",this,Array.prototype.slice.call(arguments)))},onSliderDrag:function(){this.fireEvent.apply(this,[].concat("drag",this,Array.prototype.slice.call(arguments)))},onSliderDragEnd:function(){this.fireEvent.apply(this,[].concat("dragend",this,Array.prototype.slice.call(arguments)))},setValues:function(value){this.setValue(value)},getValues:function(){return this.getValue()},reset:function(){var config=this.config,initialValue=(this.config.hasOwnProperty("values"))?config.values:config.value;this.setValue(initialValue)},doSetDisabled:function(disabled){this.callParent(arguments);this.getComponent().setDisabled(disabled)},updateReadOnly:function(newValue){this.getComponent().setReadOnly(newValue)},isDirty:function(){if(this.getDisabled()){return false}return this.getValue()!==this.originalValue}});Ext.define("Ext.util.TapRepeater",{requires:["Ext.DateExtras"],mixins:{observable:"Ext.mixin.Observable"},config:{el:null,accelerate:true,interval:10,delay:250,preventDefault:true,stopDefault:false,timer:0,pressCls:null},constructor:function(config){var me=this;for(var configName in config){if(me.self.prototype.config&&!(configName in me.self.prototype.config)){me[configName]=config[configName];Ext.Logger.warn('Applied config as instance property: "'+configName+'"',me)}}me.initConfig(config)},updateEl:function(newEl,oldEl){var eventCfg={touchstart:"onTouchStart",touchend:"onTouchEnd",tap:"eventOptions",scope:this};if(oldEl){oldEl.un(eventCfg)}newEl.on(eventCfg)},eventOptions:function(e){if(this.getPreventDefault()){e.preventDefault()}if(this.getStopDefault()){e.stopEvent()}},destroy:function(){this.clearListeners();Ext.destroy(this.el)},onTouchStart:function(e){var me=this,pressCls=me.getPressCls();clearTimeout(me.getTimer());if(pressCls){me.getEl().addCls(pressCls)}me.tapStartTime=new Date();me.fireEvent("touchstart",me,e);me.fireEvent("tap",me,e);if(me.getAccelerate()){me.delay=400}me.setTimer(Ext.defer(me.tap,me.getDelay()||me.getInterval(),me,[e]))},tap:function(e){var me=this;me.fireEvent("tap",me,e);me.setTimer(Ext.defer(me.tap,me.getAccelerate()?me.easeOutExpo(Ext.Date.getElapsed(me.tapStartTime),400,-390,12000):me.getInterval(),me,[e]))},easeOutExpo:function(t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},onTouchEnd:function(e){var me=this;clearTimeout(me.getTimer());me.getEl().removeCls(me.getPressCls());me.fireEvent("touchend",me,e)}});Ext.define("Ext.field.Spinner",{extend:"Ext.field.Number",xtype:"spinnerfield",alternateClassName:"Ext.form.Spinner",requires:["Ext.util.TapRepeater"],config:{cls:Ext.baseCSSPrefix+"spinner",minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,stepValue:0.1,accelerateOnTapHold:true,cycle:false,clearIcon:false,defaultValue:0,tabIndex:-1,groupButtons:true,component:{disabled:true}},constructor:function(){var me=this;me.callParent(arguments);if(!me.getValue()){me.suspendEvents();me.setValue(me.getDefaultValue());me.resumeEvents()}},syncEmptyCls:Ext.emptyFn,updateComponent:function(newComponent){this.callParent(arguments);var innerElement=this.innerElement,cls=this.getCls();if(newComponent){this.spinDownButton=Ext.Element.create({cls:cls+"-button "+cls+"-button-down",html:"-"});this.spinUpButton=Ext.Element.create({cls:cls+"-button "+cls+"-button-up",html:"+"});this.downRepeater=this.createRepeater(this.spinDownButton,this.onSpinDown);this.upRepeater=this.createRepeater(this.spinUpButton,this.onSpinUp)}},updateGroupButtons:function(newGroupButtons,oldGroupButtons){var me=this,innerElement=me.innerElement,cls=me.getBaseCls()+"-grouped-buttons";me.getComponent();if(newGroupButtons!=oldGroupButtons){if(newGroupButtons){this.addCls(cls);innerElement.appendChild(me.spinDownButton);innerElement.appendChild(me.spinUpButton)}else{this.removeCls(cls);innerElement.insertFirst(me.spinDownButton);innerElement.appendChild(me.spinUpButton)}}},applyValue:function(value){value=parseFloat(value);if(isNaN(value)||value===null){value=this.getDefaultValue()}value=Math.round(value*10)/10;return this.callParent([value])},createRepeater:function(el,fn){var me=this,repeater=Ext.create("Ext.util.TapRepeater",{el:el,accelerate:me.getAccelerateOnTapHold()});repeater.on({tap:fn,touchstart:"onTouchStart",touchend:"onTouchEnd",scope:me});return repeater},onSpinDown:function(){if(!this.getDisabled()&&!this.getReadOnly()){this.spin(true)}},onSpinUp:function(){if(!this.getDisabled()&&!this.getReadOnly()){this.spin(false)}},onTouchStart:function(repeater){if(!this.getDisabled()&&!this.getReadOnly()){repeater.getEl().addCls(Ext.baseCSSPrefix+"button-pressed")}},onTouchEnd:function(repeater){repeater.getEl().removeCls(Ext.baseCSSPrefix+"button-pressed")},spin:function(down){var me=this,originalValue=me.getValue(),stepValue=me.getStepValue(),direction=down?"down":"up",minValue=me.getMinValue(),maxValue=me.getMaxValue(),value;if(down){value=originalValue-stepValue}else{value=originalValue+stepValue}if(me.getCycle()){if(originalValue==minValue&&value<minValue){value=maxValue}if(originalValue==maxValue&&value>maxValue){value=minValue}}me.setValue(value);value=me.getValue();me.fireEvent("spin",me,value,direction);me.fireEvent("spin"+direction,me,value)},doSetDisabled:function(disabled){Ext.Component.prototype.doSetDisabled.apply(this,arguments)},setDisabled:function(){Ext.Component.prototype.setDisabled.apply(this,arguments)},reset:function(){this.setValue(this.getDefaultValue())},destroy:function(){var me=this;Ext.destroy(me.downRepeater,me.upRepeater,me.spinDownButton,me.spinUpButton);me.callParent(arguments)}},function(){});Ext.define("Ext.slider.Toggle",{extend:"Ext.slider.Slider",config:{baseCls:"x-toggle",minValueCls:"x-toggle-off",maxValueCls:"x-toggle-on"},initialize:function(){this.callParent();this.on({change:"onChange"})},applyMinValue:function(){return 0},applyMaxValue:function(){return 1},applyIncrement:function(){return 1},updateMinValueCls:function(newCls,oldCls){var element=this.element;if(oldCls&&element.hasCls(oldCls)){element.replaceCls(oldCls,newCls)}},updateMaxValueCls:function(newCls,oldCls){var element=this.element;if(oldCls&&element.hasCls(oldCls)){element.replaceCls(oldCls,newCls)}},setValue:function(newValue,oldValue){this.callParent(arguments);this.onChange(this,this.getThumbs()[0],newValue,oldValue)},onChange:function(me,thumb,newValue,oldValue){var isOn=newValue>0,onCls=me.getMaxValueCls(),offCls=me.getMinValueCls();this.element.addCls(isOn?onCls:offCls);this.element.removeCls(isOn?offCls:onCls)},toggle:function(){var value=this.getValue();this.setValue((value==1)?0:1);return this},onTap:function(){if(this.isDisabled()||this.getReadOnly()){return}var oldValue=this.getValue(),newValue=(oldValue==1)?0:1,thumb=this.getThumb(0);this.setIndexValue(0,newValue,this.getAnimation());this.refreshThumbConstraints(thumb);this.fireEvent("change",this,thumb,newValue,oldValue)}});Ext.define("Ext.field.Toggle",{extend:"Ext.field.Slider",xtype:"togglefield",alternateClassName:"Ext.form.Toggle",requires:["Ext.slider.Toggle"],config:{cls:"x-toggle-field"},proxyConfig:{minValueCls:"x-toggle-off",maxValueCls:"x-toggle-on"},applyComponent:function(config){return Ext.factory(config,Ext.slider.Toggle)},setValue:function(newValue){if(newValue===true){newValue=1}var oldValue=this.getValue();if(oldValue!=newValue){this.getComponent().setValue(newValue);this.fireEvent("change",this,newValue,oldValue)}return this},getValue:function(){return(this.getComponent().getValue()==1)?1:0},toggle:function(){var value=this.getValue();this.setValue((value==1)?0:1);return this}});Ext.define("Ext.field.Url",{extend:"Ext.field.Text",xtype:"urlfield",alternateClassName:"Ext.form.Url",config:{autoCapitalize:false,component:{type:"url"}}});Ext.define("Ext.form.FieldSet",{extend:"Ext.Container",alias:"widget.fieldset",requires:["Ext.Title"],config:{baseCls:Ext.baseCSSPrefix+"form-fieldset",title:null,instructions:null},applyTitle:function(title){if(typeof title=="string"){title={title:title}}Ext.applyIf(title,{docked:"top",baseCls:this.getBaseCls()+"-title"});return Ext.factory(title,Ext.Title,this._title)},updateTitle:function(newTitle,oldTitle){if(newTitle){this.add(newTitle)}if(oldTitle){this.remove(oldTitle)}},getTitle:function(){var title=this._title;if(title&&title instanceof Ext.Title){return title.getTitle()}return title},applyInstructions:function(instructions){if(typeof instructions=="string"){instructions={title:instructions}}Ext.applyIf(instructions,{docked:"bottom",baseCls:this.getBaseCls()+"-instructions"});return Ext.factory(instructions,Ext.Title,this._instructions)},updateInstructions:function(newInstructions,oldInstructions){if(newInstructions){this.add(newInstructions)}if(oldInstructions){this.remove(oldInstructions)}},getInstructions:function(){var instructions=this._instructions;if(instructions&&instructions instanceof Ext.Title){return instructions.getTitle()}return instructions},doSetDisabled:function(newDisabled){this.getFieldsAsArray().forEach(function(field){field.setDisabled(newDisabled)});return this},getFieldsAsArray:function(){var fields=[],getFieldsFrom=function(item){if(item.isField){fields.push(item)}if(item.isContainer){item.getItems().each(getFieldsFrom)}};this.getItems().each(getFieldsFrom);return fields}});Ext.define("Ext.form.Panel",{alternateClassName:"Ext.form.FormPanel",extend:"Ext.Panel",xtype:"formpanel",requires:["Ext.XTemplate","Ext.field.Checkbox","Ext.Ajax"],config:{baseCls:Ext.baseCSSPrefix+"form",standardSubmit:false,url:null,baseParams:null,submitOnAction:false,record:null,method:"post",scrollable:{translatable:{translationMethod:"scrollposition"}}},getElementConfig:function(){var config=this.callParent();config.tag="form";return config},initialize:function(){var me=this;me.callParent();me.element.on({submit:"onSubmit",scope:me})},updateRecord:function(newRecord){var fields,values,name;if(newRecord&&(fields=newRecord.fields)){values=this.getValues();for(name in values){if(values.hasOwnProperty(name)&&fields.containsKey(name)){newRecord.set(name,values[name])}}}return this},setRecord:function(record){var me=this;if(record&&record.data){me.setValues(record.data)}me._record=record;return this},onSubmit:function(e){var me=this;if(e&&!me.getStandardSubmit()){e.stopEvent()}else{this.submit()}},updateSubmitOnAction:function(newSubmitOnAction){if(newSubmitOnAction){this.on({action:"onFieldAction",scope:this})}else{this.un({action:"onFieldAction",scope:this})}},onFieldAction:function(field){if(this.getSubmitOnAction()){field.blur();this.submit()}},submit:function(options){var me=this,form=me.element.dom||{},formValues;options=Ext.apply({url:me.getUrl()||form.action,submit:false,method:me.getMethod()||form.method||"post",autoAbort:false,params:null,waitMsg:null,headers:null,success:null,failure:null},options||{});formValues=me.getValues(me.getStandardSubmit()||!options.submitDisabled);return me.fireAction("beforesubmit",[me,formValues,options],"doBeforeSubmit")},doBeforeSubmit:function(me,formValues,options){var form=me.element.dom||{};if(me.getStandardSubmit()){if(options.url&&Ext.isEmpty(form.action)){form.action=options.url}var fields=this.query("spinnerfield"),ln=fields.length,i,field;for(i=0;i<ln;i++){field=fields[i];if(!field.getDisabled()){field.getComponent().setDisabled(false)}}form.method=(options.method||form.method).toLowerCase();form.submit()}else{if(options.waitMsg){me.setMasked(options.waitMsg)}return Ext.Ajax.request({url:options.url,method:options.method,rawData:Ext.urlEncode(Ext.apply(Ext.apply({},me.getBaseParams()||{}),options.params||{},formValues)),autoAbort:options.autoAbort,headers:Ext.apply({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},options.headers||{}),scope:me,callback:function(callbackOptions,success,response){var me=this,responseText=response.responseText,failureFn;me.setMasked(false);failureFn=function(){if(Ext.isFunction(options.failure)){options.failure.call(options.scope||me,me,response,responseText)}me.fireEvent("exception",me,response)};if(success){response=Ext.decode(responseText);success=!!response.success;if(success){if(Ext.isFunction(options.success)){options.success.call(options.scope||me,me,response,responseText)}me.fireEvent("submit",me,response)}else{failureFn()}}else{failureFn()}}})}},setValues:function(values){var fields=this.getFields(),name,field,value,ln,i,f;values=values||{};for(name in values){if(values.hasOwnProperty(name)){field=fields[name];value=values[name];if(field){if(Ext.isArray(field)){ln=field.length;for(i=0;i<ln;i++){f=field[i];if(f.isRadio){f.setGroupValue(value);break}else{if(f.isCheckbox){if(Ext.isArray(value)){f.setChecked((value.indexOf(f._value)!=-1))}else{f.setChecked((value==f._value))}}else{if(Ext.isArray(value)){f.setValue(value[i])}}}}}else{if(field.isRadio||field.isCheckbox){field.setChecked(value)}else{field.setValue(value)}}}}}return this},getValues:function(enabled,all){var fields=this.getFields(),values={},isArray=Ext.isArray,field,value,addValue,bucket,name,ln,i;addValue=function(field,name){if(!all&&(!name||name==="null")){return}if(field.isCheckbox){value=field.getSubmitValue()}else{value=field.getValue()}if(!(enabled&&field.getDisabled())){if(field.isRadio){if(field.isChecked()){values[name]=value}}else{bucket=values[name];if(bucket){if(!isArray(bucket)){bucket=values[name]=[bucket]}if(isArray(value)){bucket=values[name]=bucket.concat(value)}else{bucket.push(value)}}else{values[name]=value}}}};for(name in fields){if(fields.hasOwnProperty(name)){field=fields[name];if(isArray(field)){ln=field.length;for(i=0;i<ln;i++){addValue(field[i],name)}}else{addValue(field,name)}}}return values},reset:function(){this.getFieldsAsArray().forEach(function(field){field.reset()});return this},doSetDisabled:function(newDisabled){this.getFieldsAsArray().forEach(function(field){field.setDisabled(newDisabled)});return this},getFieldsAsArray:function(){var fields=[],getFieldsFrom=function(item){if(item.isField){fields.push(item)}if(item.isContainer){item.getItems().each(getFieldsFrom)}};this.getItems().each(getFieldsFrom);return fields},getFields:function(byName){var fields={},itemName;var getFieldsFrom=function(item){if(item.isField){itemName=item.getName();if((byName&&itemName==byName)||typeof byName=="undefined"){if(fields.hasOwnProperty(itemName)){if(!Ext.isArray(fields[itemName])){fields[itemName]=[fields[itemName]]}fields[itemName].push(item)}else{fields[itemName]=item}}}if(item.isContainer){item.items.each(getFieldsFrom)}};this.getItems().each(getFieldsFrom);return(byName)?(fields[byName]||[]):fields},getFieldsArray:function(){var fields=[];var getFieldsFrom=function(item){if(item.isField){fields.push(item)}if(item.isContainer){item.items.each(getFieldsFrom)}};this.items.each(getFieldsFrom);return fields},getFieldsFromItem:Ext.emptyFn,showMask:function(cfg,target){Ext.Logger.warn("showMask is now deprecated. Please use Ext.form.Panel#setMasked instead");cfg=Ext.isObject(cfg)?cfg.message:cfg;if(cfg){this.setMasked({xtype:"loadmask",message:cfg})}else{this.setMasked(true)}return this},hideMask:function(){this.setMasked(false);return this},getFocusedField:function(){var fields=this.getFieldsArray(),ln=fields.length,field,i;for(i=0;i<ln;i++){field=fields[i];if(field.isFocused){return field}}return null},getNextField:function(){var fields=this.getFieldsArray(),focusedField=this.getFocusedField(),index;if(focusedField){index=fields.indexOf(focusedField);if(index!==fields.length-1){index++;return fields[index]}}return false},focusNextField:function(){var field=this.getNextField();if(field){field.focus();return field}return false},getPreviousField:function(){var fields=this.getFieldsArray(),focusedField=this.getFocusedField(),index;if(focusedField){index=fields.indexOf(focusedField);if(index!==0){index--;return fields[index]}}return false},focusPreviousField:function(){var field=this.getPreviousField();if(field){field.focus();return field}return false}},function(){});Ext.define("Ext.fx.Easing",{requires:["Ext.fx.easing.Linear"],constructor:function(easing){return Ext.factory(easing,Ext.fx.easing.Linear,null,"easing")}});Ext.define("Ext.fx.runner.Css",{extend:"Ext.Evented",requires:["Ext.fx.Animation"],prefixedProperties:{transform:true,"transform-origin":true,perspective:true,"transform-style":true,transition:true,"transition-property":true,"transition-duration":true,"transition-timing-function":true,"transition-delay":true,animation:true,"animation-name":true,"animation-duration":true,"animation-iteration-count":true,"animation-direction":true,"animation-timing-function":true,"animation-delay":true},lengthProperties:{top:true,right:true,bottom:true,left:true,width:true,height:true,"max-height":true,"max-width":true,"min-height":true,"min-width":true,"margin-bottom":true,"margin-left":true,"margin-right":true,"margin-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true,"padding-top":true,"border-bottom-width":true,"border-left-width":true,"border-right-width":true,"border-spacing":true,"border-top-width":true,"border-width":true,"outline-width":true,"letter-spacing":true,"line-height":true,"text-indent":true,"word-spacing":true,"font-size":true,translate:true,translateX:true,translateY:true,translateZ:true,translate3d:true},durationProperties:{"transition-duration":true,"transition-delay":true,"animation-duration":true,"animation-delay":true},angleProperties:{rotate:true,rotateX:true,rotateY:true,rotateZ:true,skew:true,skewX:true,skewY:true},lengthUnitRegex:/([a-z%]*)$/,DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",formattedNameCache:{},constructor:function(){var supports3dTransform=Ext.feature.has.Css3dTransforms;if(supports3dTransform){this.transformMethods=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"]}else{this.transformMethods=["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"]}this.vendorPrefix=Ext.browser.getStyleDashPrefix();this.ruleStylesCache={};return this},getStyleSheet:function(){var styleSheet=this.styleSheet,styleElement,styleSheets;if(!styleSheet){styleElement=document.createElement("style");styleElement.type="text/css";(document.head||document.getElementsByTagName("head")[0]).appendChild(styleElement);styleSheets=document.styleSheets;this.styleSheet=styleSheet=styleSheets[styleSheets.length-1]}return styleSheet},applyRules:function(selectors){var styleSheet=this.getStyleSheet(),ruleStylesCache=this.ruleStylesCache,rules=styleSheet.cssRules,selector,properties,ruleStyle,ruleStyleCache,rulesLength,name,value;for(selector in selectors){properties=selectors[selector];ruleStyle=ruleStylesCache[selector];if(ruleStyle===undefined){rulesLength=rules.length;styleSheet.insertRule(selector+"{}",rulesLength);ruleStyle=ruleStylesCache[selector]=rules.item(rulesLength).style}ruleStyleCache=ruleStyle.$cache;if(!ruleStyleCache){ruleStyleCache=ruleStyle.$cache={}}for(name in properties){value=this.formatValue(properties[name],name);name=this.formatName(name);if(ruleStyleCache[name]!==value){ruleStyleCache[name]=value;if(value===null){ruleStyle.removeProperty(name)}else{ruleStyle.setProperty(name,value,"important")}}}}return this},applyStyles:function(styles){var id,element,elementStyle,properties,name,value;for(id in styles){element=document.getElementById(id);if(!element){return this}elementStyle=element.style;properties=styles[id];for(name in properties){value=this.formatValue(properties[name],name);name=this.formatName(name);if(value===null){elementStyle.removeProperty(name)}else{elementStyle.setProperty(name,value,"important")}}}return this},formatName:function(name){var cache=this.formattedNameCache,formattedName=cache[name];if(!formattedName){if(this.prefixedProperties[name]){formattedName=this.vendorPrefix+name}else{formattedName=name}cache[name]=formattedName}return formattedName},formatValue:function(value,name){var type=typeof value,lengthUnit=this.DEFAULT_UNIT_LENGTH,transformMethods,method,i,ln,transformValues,values,unit;if(type=="string"){if(this.lengthProperties[name]){unit=value.match(this.lengthUnitRegex)[1];if(unit.length>0){if(unit!==lengthUnit){Ext.Logger.error("Length unit: '"+unit+"' in value: '"+value+"' of property: '"+name+"' is not valid for animation. Only 'px' is allowed")}}else{return value+lengthUnit}}return value}else{if(type=="number"){if(value==0){return"0"}if(this.lengthProperties[name]){return value+lengthUnit}if(this.angleProperties[name]){return value+this.DEFAULT_UNIT_ANGLE}if(this.durationProperties[name]){return value+this.DEFAULT_UNIT_DURATION}}else{if(name==="transform"){transformMethods=this.transformMethods;transformValues=[];for(i=0,ln=transformMethods.length;i<ln;i++){method=transformMethods[i];transformValues.push(method+"("+this.formatValue(value[method],method)+")")}return transformValues.join(" ")}else{if(Ext.isArray(value)){values=[];for(i=0,ln=value.length;i<ln;i++){values.push(this.formatValue(value[i],name))}return(values.length>0)?values.join(", "):"none"}}}}return value}});Ext.define("Ext.fx.runner.CssTransition",{extend:"Ext.fx.runner.Css",listenersAttached:false,constructor:function(){this.runningAnimationsData={};return this.callParent(arguments)},attachListeners:function(){this.listenersAttached=true;this.getEventDispatcher().addListener("element","*","transitionend","onTransitionEnd",this)},onTransitionEnd:function(e){var target=e.target,id=target.id;if(id&&this.runningAnimationsData.hasOwnProperty(id)){this.refreshRunningAnimationsData(Ext.get(target),[e.browserEvent.propertyName])}},onAnimationEnd:function(element,data,animation,isInterrupted,isReplaced){var id=element.getId(),runningData=this.runningAnimationsData[id],endRules={},endData={},runningNameMap,toPropertyNames,i,ln,name;animation.un("stop","onAnimationStop",this);if(runningData){runningNameMap=runningData.nameMap}endRules[id]=endData;if(data.onBeforeEnd){data.onBeforeEnd.call(data.scope||this,element,isInterrupted)}animation.fireEvent("animationbeforeend",animation,element,isInterrupted);this.fireEvent("animationbeforeend",this,animation,element,isInterrupted);if(isReplaced||(!isInterrupted&&!data.preserveEndState)){toPropertyNames=data.toPropertyNames;for(i=0,ln=toPropertyNames.length;i<ln;i++){name=toPropertyNames[i];if(runningNameMap&&!runningNameMap.hasOwnProperty(name)){endData[name]=null}}}if(data.after){Ext.merge(endData,data.after)}this.applyStyles(endRules);if(data.onEnd){data.onEnd.call(data.scope||this,element,isInterrupted)}animation.fireEvent("animationend",animation,element,isInterrupted);this.fireEvent("animationend",this,animation,element,isInterrupted)},onAllAnimationsEnd:function(element){var id=element.getId(),endRules={};delete this.runningAnimationsData[id];endRules[id]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null};this.applyStyles(endRules);this.fireEvent("animationallend",this,element)},hasRunningAnimations:function(element){var id=element.getId(),runningAnimationsData=this.runningAnimationsData;return runningAnimationsData.hasOwnProperty(id)&&runningAnimationsData[id].sessions.length>0},refreshRunningAnimationsData:function(element,propertyNames,interrupt,replace){var id=element.getId(),runningAnimationsData=this.runningAnimationsData,runningData=runningAnimationsData[id];if(!runningData){return}var nameMap=runningData.nameMap,nameList=runningData.nameList,sessions=runningData.sessions,ln,j,subLn,name,i,session,map,list,hasCompletedSession=false;interrupt=Boolean(interrupt);replace=Boolean(replace);if(!sessions){return this}ln=sessions.length;if(ln===0){return this}if(replace){runningData.nameMap={};nameList.length=0;for(i=0;i<ln;i++){session=sessions[i];this.onAnimationEnd(element,session.data,session.animation,interrupt,replace)}sessions.length=0}else{for(i=0;i<ln;i++){session=sessions[i];map=session.map;list=session.list;for(j=0,subLn=propertyNames.length;j<subLn;j++){name=propertyNames[j];if(map[name]){delete map[name];Ext.Array.remove(list,name);session.length--;if(--nameMap[name]==0){delete nameMap[name];Ext.Array.remove(nameList,name)}}}if(session.length==0){sessions.splice(i,1);i--;ln--;hasCompletedSession=true;this.onAnimationEnd(element,session.data,session.animation,interrupt)}}}if(!replace&&!interrupt&&sessions.length==0&&hasCompletedSession){this.onAllAnimationsEnd(element)}},getRunningData:function(id){var runningAnimationsData=this.runningAnimationsData;if(!runningAnimationsData.hasOwnProperty(id)){runningAnimationsData[id]={nameMap:{},nameList:[],sessions:[]}}return runningAnimationsData[id]},getTestElement:function(){var testElement=this.testElement,iframe,iframeDocument,iframeStyle;if(!testElement){iframe=document.createElement("iframe");iframeStyle=iframe.style;iframeStyle.setProperty("visibility","hidden","important");iframeStyle.setProperty("width","0px","important");iframeStyle.setProperty("height","0px","important");iframeStyle.setProperty("position","absolute","important");iframeStyle.setProperty("border","0px","important");iframeStyle.setProperty("zIndex","-1000","important");document.body.appendChild(iframe);iframeDocument=iframe.contentDocument;iframeDocument.open();iframeDocument.writeln("</body>");iframeDocument.close();this.testElement=testElement=iframeDocument.createElement("div");testElement.style.setProperty("position","absolute","!important");iframeDocument.body.appendChild(testElement);this.testElementComputedStyle=window.getComputedStyle(testElement)}return testElement},getCssStyleValue:function(name,value){var testElement=this.getTestElement(),computedStyle=this.testElementComputedStyle,style=testElement.style;style.setProperty(name,value);value=computedStyle.getPropertyValue(name);style.removeProperty(name);return value},run:function(animations){var me=this,isLengthPropertyMap=this.lengthProperties,fromData={},toData={},data={},element,elementId,from,to,before,fromPropertyNames,toPropertyNames,doApplyTo,message,runningData,i,j,ln,animation,propertiesLength,sessionNameMap,computedStyle,formattedName,name,toFormattedValue,computedValue,fromFormattedValue,isLengthProperty,runningNameMap,runningNameList,runningSessions,runningSession;if(!this.listenersAttached){this.attachListeners()}animations=Ext.Array.from(animations);for(i=0,ln=animations.length;i<ln;i++){animation=animations[i];animation=Ext.factory(animation,Ext.fx.Animation);element=animation.getElement();computedStyle=window.getComputedStyle(element.dom);elementId=element.getId();data=Ext.merge({},animation.getData());if(animation.onBeforeStart){animation.onBeforeStart.call(animation.scope||this,element)}animation.fireEvent("animationstart",animation);this.fireEvent("animationstart",this,animation);data[elementId]=data;before=data.before;from=data.from;to=data.to;data.fromPropertyNames=fromPropertyNames=[];data.toPropertyNames=toPropertyNames=[];for(name in to){if(to.hasOwnProperty(name)){to[name]=toFormattedValue=this.formatValue(to[name],name);formattedName=this.formatName(name);isLengthProperty=isLengthPropertyMap.hasOwnProperty(name);if(!isLengthProperty){toFormattedValue=this.getCssStyleValue(formattedName,toFormattedValue)}if(from.hasOwnProperty(name)){from[name]=fromFormattedValue=this.formatValue(from[name],name);if(!isLengthProperty){fromFormattedValue=this.getCssStyleValue(formattedName,fromFormattedValue)}if(toFormattedValue!==fromFormattedValue){fromPropertyNames.push(formattedName);toPropertyNames.push(formattedName)}}else{computedValue=computedStyle.getPropertyValue(formattedName);if(toFormattedValue!==computedValue){toPropertyNames.push(formattedName)}}}}propertiesLength=toPropertyNames.length;if(propertiesLength===0){this.onAnimationEnd(element,data,animation);continue}runningData=this.getRunningData(elementId);runningSessions=runningData.sessions;if(runningSessions.length>0){this.refreshRunningAnimationsData(element,Ext.Array.merge(fromPropertyNames,toPropertyNames),true,data.replacePrevious)}runningNameMap=runningData.nameMap;runningNameList=runningData.nameList;sessionNameMap={};for(j=0;j<propertiesLength;j++){name=toPropertyNames[j];sessionNameMap[name]=true;if(!runningNameMap.hasOwnProperty(name)){runningNameMap[name]=1;runningNameList.push(name)}else{runningNameMap[name]++}}runningSession={element:element,map:sessionNameMap,list:toPropertyNames.slice(),length:propertiesLength,data:data,animation:animation};runningSessions.push(runningSession);animation.on("stop","onAnimationStop",this);fromData[elementId]=from=Ext.apply(Ext.Object.chain(before),from);if(runningNameList.length>0){fromPropertyNames=Ext.Array.difference(runningNameList,fromPropertyNames);toPropertyNames=Ext.Array.merge(fromPropertyNames,toPropertyNames);from["transition-property"]=fromPropertyNames}toData[elementId]=to=Ext.Object.chain(to);to["transition-property"]=toPropertyNames;to["transition-duration"]=data.duration;to["transition-timing-function"]=data.easing;to["transition-delay"]=data.delay;animation.startTime=Date.now()}message=this.$className;this.applyStyles(fromData);doApplyTo=function(e){if(e.data===message&&e.source===window){window.removeEventListener("message",doApplyTo,false);me.applyStyles(toData)}};window.addEventListener("message",doApplyTo,false);window.postMessage(message,"*")},onAnimationStop:function(animation){var runningAnimationsData=this.runningAnimationsData,id,runningData,sessions,i,ln,session;for(id in runningAnimationsData){if(runningAnimationsData.hasOwnProperty(id)){runningData=runningAnimationsData[id];sessions=runningData.sessions;for(i=0,ln=sessions.length;i<ln;i++){session=sessions[i];if(session.animation===animation){this.refreshRunningAnimationsData(session.element,session.list.slice(),false)}}}}}});Ext.define("Ext.fx.Runner",{requires:["Ext.fx.runner.CssTransition"],constructor:function(){return new Ext.fx.runner.CssTransition()}});Ext.define("Ext.fx.animation.Cube",{extend:"Ext.fx.animation.Abstract",alias:"animation.cube",config:{before:{},after:{},direction:"right",out:false},getData:function(){var to=this.getTo(),from=this.getFrom(),before=this.getBefore(),after=this.getAfter(),out=this.getOut(),direction=this.getDirection(),el=this.getElement(),elW=el.getWidth(),elH=el.getHeight(),origin=out?"100% 100%":"0% 0%",fromOpacity=1,toOpacity=1,transformFrom={rotateY:0,translateZ:0},transformTo={rotateY:0,translateZ:0};if(direction=="left"||direction=="right"){if(out){toOpacity=0.5;transformTo.translateZ=elW;transformTo.rotateY=-90}else{fromOpacity=0.5;transformFrom.translateZ=elW;transformFrom.rotateY=90}}before["transform-origin"]=origin;after["transform-origin"]=null;to.set("transform",transformTo);from.set("transform",transformFrom);from.set("opacity",fromOpacity);to.set("opacity",toOpacity);return this.callParent(arguments)}});Ext.define("Ext.fx.animation.Wipe",{extend:"Ext.fx.Animation",alternateClassName:"Ext.fx.animation.WipeIn",config:{easing:"ease-out",direction:"right",out:false},refresh:function(){var me=this,el=me.getElement(),elBox=el.dom.getBoundingClientRect(),elWidth=elBox.width,elHeight=elBox.height,from=me.getFrom(),to=me.getTo(),out=me.getOut(),direction=me.getDirection(),maskFromX=0,maskFromY=0,maskToX=0,maskToY=0,mask,tmp;switch(direction){case"up":if(out){mask="-webkit-gradient(linear, left top, left bottom, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))";maskFromY=elHeight*3+"px";maskToY=elHeight+"px"}else{mask="-webkit-gradient(linear, left top, left bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))";maskFromY=-elHeight*2+"px";maskToY=0}break;case"down":if(out){mask="-webkit-gradient(linear, left top, left bottom, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))";maskFromY=-elHeight*2+"px";maskToY=0}else{mask="-webkit-gradient(linear, left top, left bottom, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))";maskFromY=elHeight*3+"px";maskToY=elHeight+"px"}break;case"right":if(out){mask="-webkit-gradient(linear, right top, left top, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))";maskFromX=-elWidth*2+"px";maskToX=0}else{mask="-webkit-gradient(linear, right top, left top, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))";maskToX=-elWidth*2+"px"}break;case"left":if(out){mask="-webkit-gradient(linear, right top, left top, from(transparent), to(#000), color-stop(66%, #000), color-stop(33%, transparent))";maskToX=-elWidth*2+"px"}else{mask="-webkit-gradient(linear, right top, left top, from(#000), to(transparent), color-stop(33%, #000), color-stop(66%, transparent))";maskFromX=-elWidth*2+"px";maskToX=0}break}if(!out){tmp=maskFromY;maskFromY=maskToY;maskToY=tmp;tmp=maskFromX;maskFromX=maskToX;maskToX=tmp}from.set("mask-image",mask);from.set("mask-size",elWidth*3+"px "+elHeight*3+"px");from.set("mask-position-x",maskFromX);from.set("mask-position-y",maskFromY);to.set("mask-position-x",maskToX);to.set("mask-position-y",maskToY)},getData:function(){this.refresh();return this.callParent(arguments)}});Ext.define("Ext.fx.animation.WipeOut",{extend:"Ext.fx.animation.Wipe",config:{out:true}});Ext.define("Ext.fx.easing.EaseIn",{extend:"Ext.fx.easing.Linear",alias:"easing.ease-in",config:{exponent:4,duration:1500},getValue:function(){var deltaTime=Ext.Date.now()-this.getStartTime(),duration=this.getDuration(),startValue=this.getStartValue(),endValue=this.getEndValue(),distance=this.distance,theta=deltaTime/duration,thetaEnd=Math.pow(theta,this.getExponent()),currentValue=startValue+(thetaEnd*distance);if(deltaTime>=duration){this.isEnded=true;return endValue}return currentValue}});Ext.define("Ext.fx.layout.card.Cube",{extend:"Ext.fx.layout.card.Style",alias:"fx.layout.card.cube",config:{reverse:null,inAnimation:{type:"cube"},outAnimation:{type:"cube",out:true}}});Ext.define("Ext.fx.layout.card.ScrollCover",{extend:"Ext.fx.layout.card.Scroll",alias:"fx.layout.card.scrollcover",onActiveItemChange:function(cardLayout,inItem,outItem,options,controller){var containerElement,containerSize,xy,animConfig,inTranslate,outTranslate;this.lastController=controller;this.inItem=inItem;if(inItem&&outItem){containerElement=this.getLayout().container.innerElement;containerSize=containerElement.getSize();xy=this.calculateXY(containerSize);animConfig={easing:this.getEasing(),duration:this.getDuration()};inItem.renderElement.dom.style.setProperty("visibility","hidden","!important");inTranslate=inItem.setTranslatable(true).getTranslatable();outTranslate=outItem.setTranslatable(true).getTranslatable();outTranslate.translate({x:0,y:0});inTranslate.translate({x:xy.left,y:xy.top});inTranslate.getWrapper().dom.style.setProperty("z-index","100","!important");inItem.show();inTranslate.on({animationstart:"onInAnimationStart",animationend:"onInAnimationEnd",scope:this});inTranslate.translateAnimated({x:0,y:0},animConfig);controller.pause()}},onInAnimationStart:function(){this.inItem.renderElement.dom.style.removeProperty("visibility")},onInAnimationEnd:function(){this.inItem.getTranslatable().getWrapper().dom.style.removeProperty("z-index");this.lastController.resume()}});Ext.define("Ext.fx.layout.card.ScrollReveal",{extend:"Ext.fx.layout.card.Scroll",alias:"fx.layout.card.scrollreveal",onActiveItemChange:function(cardLayout,inItem,outItem,options,controller){var containerElement,containerSize,xy,animConfig,outTranslate,inTranslate;this.lastController=controller;this.outItem=outItem;this.inItem=inItem;if(inItem&&outItem){containerElement=this.getLayout().container.innerElement;containerSize=containerElement.getSize();xy=this.calculateXY(containerSize);animConfig={easing:this.getEasing(),duration:this.getDuration()};outTranslate=outItem.setTranslatable(true).getTranslatable();inTranslate=inItem.setTranslatable(true).getTranslatable();outTranslate.getWrapper().dom.style.setProperty("z-index","100","!important");outTranslate.translate({x:0,y:0});inTranslate.translate({x:0,y:0});inItem.show();outTranslate.on({animationend:"onOutAnimationEnd",scope:this});outTranslate.translateAnimated({x:xy.x,y:xy.y},animConfig);controller.pause()}},onOutAnimationEnd:function(){this.outItem.getTranslatable().getWrapper().dom.style.removeProperty("z-index");this.lastController.resume()}});Ext.define("Ext.fx.runner.CssAnimation",{extend:"Ext.fx.runner.Css",constructor:function(){this.runningAnimationsMap={};this.elementEndStates={};this.animationElementMap={};this.keyframesRulesCache={};this.uniqueId=0;return this.callParent(arguments)},attachListeners:function(){var eventDispatcher=this.getEventDispatcher();this.listenersAttached=true;eventDispatcher.addListener("element","*","animationstart","onAnimationStart",this);eventDispatcher.addListener("element","*","animationend","onAnimationEnd",this)},onAnimationStart:function(e){var name=e.browserEvent.animationName,elementId=this.animationElementMap[name],animation=this.runningAnimationsMap[elementId][name],elementEndStates=this.elementEndStates,elementEndState=elementEndStates[elementId],data={};console.log("START============= "+name);if(elementEndState){delete elementEndStates[elementId];data[elementId]=elementEndState;this.applyStyles(data)}if(animation.before){data[elementId]=animation.before;this.applyStyles(data)}},onAnimationEnd:function(e){var element=e.target,name=e.browserEvent.animationName,animationElementMap=this.animationElementMap,elementId=animationElementMap[name],runningAnimationsMap=this.runningAnimationsMap,runningAnimations=runningAnimationsMap[elementId],animation=runningAnimations[name];console.log("END============= "+name);if(animation.onBeforeEnd){animation.onBeforeEnd.call(animation.scope||this,element)}if(animation.onEnd){animation.onEnd.call(animation.scope||this,element)}delete animationElementMap[name];delete runningAnimations[name];this.removeKeyframesRule(name)},generateAnimationId:function(){return"animation-"+(++this.uniqueId)},run:function(animations){var data={},elementEndStates=this.elementEndStates,animationElementMap=this.animationElementMap,runningAnimationsMap=this.runningAnimationsMap,runningAnimations,states,elementId,animationId,i,ln,animation,name,runningAnimation,names,durations,easings,delays,directions,iterations;if(!this.listenersAttached){this.attachListeners()}animations=Ext.Array.from(animations);for(i=0,ln=animations.length;i<ln;i++){animation=animations[i];animation=Ext.factory(animation,Ext.fx.Animation);elementId=animation.getElement().getId();animationId=animation.getName()||this.generateAnimationId();animationElementMap[animationId]=elementId;animation=animation.getData();states=animation.states;this.addKeyframesRule(animationId,states);runningAnimations=runningAnimationsMap[elementId];if(!runningAnimations){runningAnimations=runningAnimationsMap[elementId]={}}runningAnimations[animationId]=animation;names=[];durations=[];easings=[];delays=[];directions=[];iterations=[];for(name in runningAnimations){if(runningAnimations.hasOwnProperty(name)){runningAnimation=runningAnimations[name];names.push(name);durations.push(runningAnimation.duration);easings.push(runningAnimation.easing);delays.push(runningAnimation.delay);directions.push(runningAnimation.direction);iterations.push(runningAnimation.iteration)}}data[elementId]={"animation-name":names,"animation-duration":durations,"animation-timing-function":easings,"animation-delay":delays,"animation-direction":directions,"animation-iteration-count":iterations};if(animation.preserveEndState){elementEndStates[elementId]=states["100%"]}}this.applyStyles(data)},addKeyframesRule:function(name,keyframes){var percentage,properties,keyframesRule,styleSheet,rules,styles,rulesLength,key,value;styleSheet=this.getStyleSheet();rules=styleSheet.cssRules;rulesLength=rules.length;styleSheet.insertRule("@"+this.vendorPrefix+"keyframes "+name+"{}",rulesLength);keyframesRule=rules[rulesLength];for(percentage in keyframes){properties=keyframes[percentage];rules=keyframesRule.cssRules;rulesLength=rules.length;styles=[];for(key in properties){value=this.formatValue(properties[key],key);key=this.formatName(key);styles.push(key+":"+value)}keyframesRule.insertRule(percentage+"{"+styles.join(";")+"}",rulesLength)}return this},removeKeyframesRule:function(name){var styleSheet=this.getStyleSheet(),rules=styleSheet.cssRules,i,ln,rule;for(i=0,ln=rules.length;i<ln;i++){rule=rules[i];if(rule.name===name){styleSheet.removeRule(i);break}}return this}});Ext.define("Ext.log.Base",{config:{},constructor:function(config){this.initConfig(config);return this}});(function(){var Logger=Ext.define("Ext.log.Logger",{extend:"Ext.log.Base",statics:{defaultPriority:"info",priorities:{verbose:0,info:1,deprecate:2,warn:3,error:4}},config:{enabled:true,minPriority:"deprecate",writers:{}},log:function(message,priority,callerId){if(!this.getEnabled()){return this}var statics=Logger,priorities=statics.priorities,priorityValue=priorities[priority],caller=this.log.caller,callerDisplayName="",writers=this.getWriters(),event,i,originalCaller;if(!priority){priority="info"}if(priorities[this.getMinPriority()]>priorityValue){return this}if(!callerId){callerId=1}if(Ext.isArray(message)){message=message.join(" ")}else{message=String(message)}if(typeof callerId=="number"){i=callerId;do{i--;caller=caller.caller;if(!caller){break}if(!originalCaller){originalCaller=caller.caller}if(i<=0&&caller.displayName){break}}while(caller!==originalCaller);callerDisplayName=Ext.getDisplayName(caller)}else{caller=caller.caller;callerDisplayName=Ext.getDisplayName(callerId)+"#"+caller.$name}event={time:Ext.Date.now(),priority:priorityValue,priorityName:priority,message:message,caller:caller,callerDisplayName:callerDisplayName};for(i in writers){if(writers.hasOwnProperty(i)){writers[i].write(Ext.merge({},event))}}return this}},function(){Ext.Object.each(this.priorities,function(priority){this.override(priority,function(message,callerId){if(!callerId){callerId=1}if(typeof callerId=="number"){callerId+=1}this.log(message,priority,callerId)})},this)})})();Ext.define("Ext.log.filter.Filter",{extend:"Ext.log.Base",accept:function(event){return true}});Ext.define("Ext.log.filter.Priority",{extend:"Ext.log.filter.Filter",config:{minPriority:1},accept:function(event){return event.priority>=this.getMinPriority()}});Ext.define("Ext.log.formatter.Formatter",{extend:"Ext.log.Base",config:{messageFormat:"{message}"},format:function(event){return this.substitute(this.getMessageFormat(),event)},substitute:function(template,data){var name,value;for(name in data){if(data.hasOwnProperty(name)){value=data[name];template=template.replace(new RegExp("\\{"+name+"\\}","g"),value)}}return template}});Ext.define("Ext.log.formatter.Default",{extend:"Ext.log.formatter.Formatter",config:{messageFormat:"[{priorityName}][{callerDisplayName}] {message}"},format:function(event){var event=Ext.merge({},event,{priorityName:event.priorityName.toUpperCase()});return this.callParent([event])}});Ext.define("Ext.log.formatter.Identity",{extend:"Ext.log.formatter.Default",config:{messageFormat:"[{osIdentity}][{browserIdentity}][{timestamp}][{priorityName}][{callerDisplayName}] {message}"},format:function(event){event.timestamp=Ext.Date.toString();event.browserIdentity=Ext.browser.name+" "+Ext.browser.version;event.osIdentity=Ext.os.name+" "+Ext.os.version;return this.callParent(arguments)}});Ext.define("Ext.log.writer.Writer",{extend:"Ext.log.Base",requires:["Ext.log.formatter.Formatter"],config:{formatter:null,filters:{}},constructor:function(){this.activeFilters=[];return this.callParent(arguments)},updateFilters:function(filters){var activeFilters=this.activeFilters,i,filter;activeFilters.length=0;for(i in filters){if(filters.hasOwnProperty(i)){filter=filters[i];activeFilters.push(filter)}}},write:function(event){var filters=this.activeFilters,formatter=this.getFormatter(),i,ln,filter;for(i=0,ln=filters.length;i<ln;i++){filter=filters[i];if(!filters[i].accept(event)){return this}}if(formatter){event.message=formatter.format(event)}this.doWrite(event);return this},doWrite:Ext.emptyFn});Ext.define("Ext.log.writer.Console",{extend:"Ext.log.writer.Writer",config:{throwOnErrors:true,throwOnWarnings:false},doWrite:function(event){var message=event.message,priority=event.priorityName,consoleMethod;if(priority==="error"&&this.getThrowOnErrors()){throw new Error(message)}if(typeof console!=="undefined"){consoleMethod=priority;if(consoleMethod==="deprecate"){consoleMethod="warn"}if(consoleMethod==="warn"&&this.getThrowOnWarnings()){throw new Error(message)}if(!(consoleMethod in console)){consoleMethod="log"}console[consoleMethod](message)}}});Ext.define("Ext.log.writer.DocumentTitle",{extend:"Ext.log.writer.Writer",doWrite:function(event){var message=event.message;document.title=message}});Ext.define("Ext.log.writer.Remote",{extend:"Ext.log.writer.Writer",requires:["Ext.Ajax"],config:{batchSendDelay:100,onFailureRetryDelay:500,url:""},isSending:false,sendingTimer:null,constructor:function(){this.queue=[];this.send=Ext.Function.bind(this.send,this);return this.callParent(arguments)},doWrite:function(event){var queue=this.queue;queue.push(event.message);if(!this.isSending&&this.sendingTimer===null){this.sendingTimer=setTimeout(this.send,this.getBatchSendDelay())}},send:function(){var queue=this.queue,messages=queue.slice();queue.length=0;this.sendingTimer=null;if(messages.length>0){this.doSend(messages)}},doSend:function(messages){var me=this;me.isSending=true;Ext.Ajax.request({url:me.getUrl(),method:"POST",params:{messages:messages.join("\n")},success:function(){me.isSending=false;me.send()},failure:function(){setTimeout(function(){me.doSend(messages)},me.getOnFailureRetryDelay())},scope:me})}});Ext.define("Ext.navigation.Bar",{extend:"Ext.TitleBar",requires:["Ext.Button","Ext.Spacer"],isToolbar:true,config:{baseCls:Ext.baseCSSPrefix+"toolbar",cls:Ext.baseCSSPrefix+"navigation-bar",ui:"dark",title:null,defaultType:"button",layout:{type:"hbox"},defaultBackButtonText:"Back",animation:{duration:300},useTitleForBackButtonText:null,view:null,android2Transforms:false,backButton:{align:"left",ui:"back",hidden:true}},constructor:function(config){config=config||{};if(!config.items){config.items=[]}this.backButtonStack=[];this.activeAnimations=[];this.callParent([config])},applyBackButton:function(config){return Ext.factory(config,Ext.Button,this.getBackButton())},updateBackButton:function(newBackButton,oldBackButton){if(oldBackButton){this.remove(oldBackButton)}if(newBackButton){this.add(newBackButton);newBackButton.on({scope:this,tap:this.onBackButtonTap})}},onBackButtonTap:function(){this.fireEvent("back",this)},updateView:function(newView){var me=this,backButton=me.getBackButton(),innerItems,i,backButtonText,item,title;me.getItems();if(newView){innerItems=newView.getInnerItems();for(i=0;i<innerItems.length;i++){item=innerItems[i];title=(item.getTitle)?item.getTitle():item.config.title;me.backButtonStack.push(title||"&nbsp;")}me.setTitle(me.getTitleText());backButtonText=me.getBackButtonText();if(backButtonText){backButton.setText(backButtonText);backButton.show()}}},onViewAdd:function(view,item){var me=this,backButtonStack=me.backButtonStack,hasPrevious,title;me.endAnimation();title=(item.getTitle)?item.getTitle():item.config.title;backButtonStack.push(title||"&nbsp;");hasPrevious=backButtonStack.length>1;me.doChangeView(view,hasPrevious,false)},onViewRemove:function(view){var me=this,backButtonStack=me.backButtonStack,hasPrevious;me.endAnimation();backButtonStack.pop();hasPrevious=backButtonStack.length>1;me.doChangeView(view,hasPrevious,true)},doChangeView:function(view,hasPrevious,reverse){var me=this,leftBox=me.leftBox,leftBoxElement=leftBox.element,titleComponent=me.titleComponent,titleElement=titleComponent.element,backButton=me.getBackButton(),titleText=me.getTitleText(),backButtonText=me.getBackButtonText(),animation=me.getAnimation()&&view.getLayout().getAnimation(),animated=animation&&animation.isAnimation&&view.isPainted(),properties,leftGhost,titleGhost,leftProps,titleProps;if(animated){me.isAnimating=true;leftGhost=me.createProxy(leftBox.element);leftBoxElement.setStyle("opacity","0");backButton.setText(backButtonText);backButton[hasPrevious?"show":"hide"]();titleGhost=me.createProxy(titleComponent.element.getParent());titleElement.setStyle("opacity","0");me.setTitle(titleText);properties=me.measureView(leftGhost,titleGhost,reverse);leftProps=properties.left;titleProps=properties.title;me.animate(leftBoxElement,leftProps.element);me.animate(titleElement,titleProps.element,function(){titleElement.setLeft(properties.titleLeft);me.isAnimating=false;me.refreshTitlePosition()});if(Ext.os.is.Android2&&!this.getAndroid2Transforms()){leftGhost.ghost.destroy();titleGhost.ghost.destroy()}else{me.animate(leftGhost.ghost,leftProps.ghost);me.animate(titleGhost.ghost,titleProps.ghost,function(){leftGhost.ghost.destroy();titleGhost.ghost.destroy()})}}else{if(hasPrevious){backButton.setText(backButtonText);backButton.show()}else{backButton.hide()}me.setTitle(titleText)}},measureView:function(oldLeft,oldTitle,reverse){var me=this,barElement=me.element,newLeftElement=me.leftBox.element,titleElement=me.titleComponent.element,minOffset=Math.min(barElement.getWidth()/3,200),newLeftWidth=newLeftElement.getWidth(),barX=barElement.getX(),barWidth=barElement.getWidth(),titleX=titleElement.getX(),titleLeft=titleElement.getLeft(),titleWidth=titleElement.getWidth(),oldLeftX=oldLeft.x,oldLeftWidth=oldLeft.width,oldLeftLeft=oldLeft.left,useLeft=Ext.os.is.Android2&&!this.getAndroid2Transforms(),newOffset,oldOffset,leftAnims,titleAnims,omega,theta;theta=barX-oldLeftX-oldLeftWidth;if(reverse){newOffset=theta;oldOffset=Math.min(titleX-oldLeftWidth,minOffset)}else{oldOffset=theta;newOffset=Math.min(titleX-barX,minOffset)}if(useLeft){leftAnims={element:{from:{left:newOffset,opacity:1},to:{left:0,opacity:1}}}}else{leftAnims={element:{from:{transform:{translateX:newOffset},opacity:0},to:{transform:{translateX:0},opacity:1}},ghost:{to:{transform:{translateX:oldOffset},opacity:0}}}}theta=barX-titleX+newLeftWidth;if((oldLeftLeft+titleWidth)>titleX){omega=barX-titleX-titleWidth}if(reverse){titleElement.setLeft(0);oldOffset=barX+barWidth;if(omega!==undefined){newOffset=omega}else{newOffset=theta}}else{newOffset=barWidth-titleX;if(omega!==undefined){oldOffset=omega}else{oldOffset=theta}}if(useLeft){titleAnims={element:{from:{left:newOffset,opacity:1},to:{left:titleLeft,opacity:1}}}}else{titleAnims={element:{from:{transform:{translateX:newOffset},opacity:0},to:{transform:{translateX:titleLeft},opacity:1}},ghost:{to:{transform:{translateX:oldOffset},opacity:0}}}}return{left:leftAnims,title:titleAnims,titleLeft:titleLeft}},animate:function(element,config,callback){var me=this,animation;element.setLeft(0);config=Ext.apply(config,{element:element,easing:"ease-in-out",duration:me.getAnimation().duration||250,preserveEndState:true});animation=new Ext.fx.Animation(config);animation.on("animationend",function(){if(callback){callback.call(me)}},me);Ext.Animator.run(animation);me.activeAnimations.push(animation)},endAnimation:function(){var activeAnimations=this.activeAnimations,animation,i,ln;if(activeAnimations){ln=activeAnimations.length;for(i=0;i<ln;i++){animation=activeAnimations[i];if(animation.isAnimating){animation.stopAnimation()}else{animation.destroy()}}this.activeAnimations=[]}},refreshTitlePosition:function(){if(!this.isAnimating){this.callParent()}},getBackButtonText:function(){var text=this.backButtonStack[this.backButtonStack.length-2],useTitleForBackButtonText=this.getUseTitleForBackButtonText();if(!useTitleForBackButtonText){if(text){text=this.getDefaultBackButtonText()}}return text},getTitleText:function(){return this.backButtonStack[this.backButtonStack.length-1]},beforePop:function(count){count--;for(var i=0;i<count;i++){this.backButtonStack.pop()}},doSetHidden:function(hidden){if(!hidden){this.element.setStyle({position:"relative",top:"auto",left:"auto",width:"auto"})}else{this.element.setStyle({position:"absolute",top:"-1000px",left:"-1000px",width:this.element.getWidth()+"px"})}},createProxy:function(element){var ghost,x,y,left,width;ghost=element.dom.cloneNode(true);ghost.id=element.id+"-proxy";element.getParent().dom.appendChild(ghost);ghost=Ext.get(ghost);x=element.getX();y=element.getY();left=element.getLeft();width=element.getWidth();ghost.setStyle("position","absolute");ghost.setX(x);ghost.setY(y);ghost.setHeight(element.getHeight());ghost.setWidth(width);return{x:x,y:y,left:left,width:width,ghost:ghost}}});Ext.define("Ext.navigation.View",{extend:"Ext.Container",alternateClassName:"Ext.NavigationView",xtype:"navigationview",requires:["Ext.navigation.Bar"],config:{baseCls:Ext.baseCSSPrefix+"navigationview",navigationBar:{docked:"top"},defaultBackButtonText:"Back",useTitleForBackButtonText:false,layout:{type:"card",animation:{duration:300,easing:"ease-out",type:"slide",direction:"left"}}},initialize:function(){var me=this,navBar=me.getNavigationBar();navBar.on({back:me.onBackButtonTap,scope:me});me.relayEvents(navBar,"rightbuttontap");me.relayEvents(me,{add:"push",remove:"pop"});var layout=me.getLayout();if(layout&&!layout.isCard){Ext.Logger.error("The base layout for a NavigationView must always be a Card Layout")}},applyLayout:function(config){config=config||{};return config},onBackButtonTap:function(){this.pop();this.fireEvent("back",this)},push:function(view){return this.add(view)},pop:function(count){if(this.beforePop(count)){return this.doPop()}},beforePop:function(count){var me=this,innerItems=me.getInnerItems();if(Ext.isString(count)||Ext.isObject(count)){var last=innerItems.length-1,i;for(i=last;i>=0;i--){if((Ext.isString(count)&&Ext.ComponentQuery.is(innerItems[i],count))||(Ext.isObject(count)&&count==innerItems[i])){count=last-i;break}}if(!Ext.isNumber(count)){return false}}var ln=innerItems.length,toRemove;if(!Ext.isNumber(count)||count<1){count=1}count=Math.min(count,ln-1);if(count){me.getNavigationBar().beforePop(count);toRemove=innerItems.splice(-count,count-1);for(i=0;i<toRemove.length;i++){this.remove(toRemove[i])}return true}return false},doPop:function(){var me=this,innerItems=this.getInnerItems();me.remove(innerItems[innerItems.length-1]);return this.getActiveItem()},getPreviousItem:function(){var innerItems=this.getInnerItems();return innerItems[innerItems.length-2]},updateUseTitleForBackButtonText:function(useTitleForBackButtonText){var navigationBar=this.getNavigationBar();if(navigationBar){navigationBar.setUseTitleForBackButtonText(useTitleForBackButtonText)}},updateDefaultBackButtonText:function(defaultBackButtonText){var navigationBar=this.getNavigationBar();if(navigationBar){navigationBar.setDefaultBackButtonText(defaultBackButtonText)}},applyNavigationBar:function(config){if(!config){config={hidden:true,docked:"top"}}if(config.title){delete config.title;Ext.Logger.warn("Ext.navigation.View: The 'navigationBar' configuration does not accept a 'title' property. You set the title of the navigationBar by giving this navigation view's children a 'title' property.")}config.view=this;config.useTitleForBackButtonText=this.getUseTitleForBackButtonText();return Ext.factory(config,Ext.navigation.Bar,this.getNavigationBar())},updateNavigationBar:function(newNavigationBar,oldNavigationBar){if(oldNavigationBar){this.remove(oldNavigationBar,true)}if(newNavigationBar){this.add(newNavigationBar)}},applyActiveItem:function(activeItem,currentActiveItem){var me=this,innerItems=me.getInnerItems();me.getItems();if(!me.initialized){activeItem=innerItems.length-1}return this.callParent([activeItem,currentActiveItem])},doResetActiveItem:function(innerIndex){var me=this,innerItems=me.getInnerItems(),animation=me.getLayout().getAnimation();if(innerIndex>0){if(animation&&animation.isAnimation){animation.setReverse(true)}me.setActiveItem(innerIndex-1);me.getNavigationBar().onViewRemove(me,innerItems[innerIndex],innerIndex)}},doRemove:function(){var animation=this.getLayout().getAnimation();if(animation&&animation.isAnimation){animation.setReverse(false)}this.callParent(arguments)},onItemAdd:function(item,index){this.doItemLayoutAdd(item,index);if(!this.isItemsInitializing&&item.isInnerItem()){this.setActiveItem(item);this.getNavigationBar().onViewAdd(this,item,index)}if(this.initialized){this.fireEvent("add",this,item,index)}},reset:function(){return this.pop(this.getInnerItems().length)}});Ext.define("Ext.plugin.ListPaging",{extend:"Ext.Component",alias:"plugin.listpaging",config:{autoPaging:false,loadMoreText:"Load More...",noMoreRecordsText:"No More Records",loadTpl:['<div class="{cssPrefix}loading-spinner" style="font-size: 180%; margin: 10px auto;">','<span class="{cssPrefix}loading-top"></span>','<span class="{cssPrefix}loading-right"></span>','<span class="{cssPrefix}loading-bottom"></span>','<span class="{cssPrefix}loading-left"></span>',"</div>",'<div class="{cssPrefix}list-paging-msg">{message}</div>'].join(""),loadMoreCmp:{xtype:"component",baseCls:Ext.baseCSSPrefix+"list-paging",scrollDock:"bottom",docked:"bottom",hidden:true},loadMoreCmpAdded:false,loadingCls:Ext.baseCSSPrefix+"loading",list:null,scroller:null,loading:false},init:function(list){var scroller=list.getScrollable().getScroller(),store=list.getStore();this.setList(list);this.setScroller(scroller);this.bindStore(list.getStore());list.setScrollToTopOnRefresh(false);this.addLoadMoreCmp();if(store){this.disableDataViewMask(store)}list.updateStore=Ext.Function.createInterceptor(list.updateStore,this.bindStore,this);if(this.getAutoPaging()){scroller.on({scrollend:this.onScrollEnd,scope:this})}},bindStore:function(newStore,oldStore){if(oldStore){oldStore.un({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}if(newStore){newStore.on({beforeload:this.onStoreBeforeLoad,load:this.onStoreLoad,scope:this})}},disableDataViewMask:function(store){var list=this.getList();if(store.isAutoLoading()){list.setLoadingText(null)}else{store.on({load:{single:true,fn:function(){list.setLoadingText(null)}}})}},applyLoadTpl:function(config){return(Ext.isObject(config)&&config.isTemplate)?config:new Ext.XTemplate(config)},applyLoadMoreCmp:function(config){config=Ext.merge(config,{html:this.getLoadTpl().apply({cssPrefix:Ext.baseCSSPrefix,message:this.getLoadMoreText()}),listeners:{tap:{fn:this.loadNextPage,scope:this,element:"element"}}});return Ext.factory(config,Ext.Component,this.getLoadMoreCmp())},onScrollEnd:function(scroller,x,y){if(!this.getLoading()&&y>=scroller.maxPosition.y){this.loadNextPage()}},updateLoading:function(isLoading){var loadMoreCmp=this.getLoadMoreCmp(),loadMoreCls=this.getLoadingCls();if(isLoading){loadMoreCmp.addCls(loadMoreCls)}else{loadMoreCmp.removeCls(loadMoreCls)}},onStoreBeforeLoad:function(store){if(store.getCount()===0){this.getLoadMoreCmp().hide()}},onStoreLoad:function(store){var loadCmp=this.getLoadMoreCmp(),template=this.getLoadTpl(),message=this.storeFullyLoaded()?this.getNoMoreRecordsText():this.getLoadMoreText();if(store.getCount()){loadCmp.show();this.getList().scrollDockHeightRefresh()}this.setLoading(false);loadCmp.setHtml(template.apply({cssPrefix:Ext.baseCSSPrefix,message:message}))},addLoadMoreCmp:function(){var list=this.getList(),cmp=this.getLoadMoreCmp();if(!this.getLoadMoreCmpAdded()){list.add(cmp);list.fireEvent("loadmorecmpadded",this,list);this.setLoadMoreCmpAdded(true)}return cmp},storeFullyLoaded:function(){var store=this.getList().getStore(),total=store.getTotalCount();return total!==null?store.getTotalCount()<=(store.currentPage*store.getPageSize()):false},loadNextPage:function(){var me=this;if(!me.storeFullyLoaded()){me.setLoading(true);me.getList().getStore().nextPage({addRecords:true})}}});Ext.define("Ext.plugin.PullRefresh",{extend:"Ext.Component",alias:"plugin.pullrefresh",requires:["Ext.DateExtras"],config:{list:null,pullRefreshText:"Pull down to refresh...",releaseRefreshText:"Release to refresh...",lastUpdatedText:"Last Updated:",loadingText:"Loading...",snappingAnimationDuration:150,refreshFn:null,pullTpl:['<div class="x-list-pullrefresh">','<div class="x-list-pullrefresh-arrow"></div>','<div class="x-loading-spinner">','<span class="x-loading-top"></span>','<span class="x-loading-right"></span>','<span class="x-loading-bottom"></span>','<span class="x-loading-left"></span>',"</div>",'<div class="x-list-pullrefresh-wrap">','<h3 class="x-list-pullrefresh-message">{message}</h3>','<div class="x-list-pullrefresh-updated">{lastUpdatedText}&nbsp;{lastUpdated:date("m/d/Y h:iA")}</div>',"</div>","</div>"].join(""),translatable:true},isRefreshing:false,currentViewState:"",initialize:function(){this.callParent();this.on({painted:"onPainted",scope:this})},init:function(list){var me=this;me.setList(list);me.initScrollable()},initScrollable:function(){var me=this,list=me.getList(),store=list.getStore(),pullTpl=me.getPullTpl(),element=me.element,scrollable=list.getScrollable(),scroller;if(!scrollable){return}scroller=scrollable.getScroller();me.lastUpdated=new Date();list.container.insert(0,me);if(store){if(store.isAutoLoading()){list.setLoadingText(null)}else{store.on({load:{single:true,fn:function(){list.setLoadingText(null)}}})}}pullTpl.overwrite(element,{message:me.getPullRefreshText(),lastUpdatedText:me.getLastUpdatedText(),lastUpdated:me.lastUpdated},true);me.loadingElement=element.getFirstChild();me.messageEl=element.down(".x-list-pullrefresh-message");me.updatedEl=element.down(".x-list-pullrefresh-updated");me.maxScroller=scroller.getMaxPosition();scroller.on({maxpositionchange:me.setMaxScroller,scroll:me.onScrollChange,scope:me})},onScrollableChange:function(){this.initScrollable()},updateList:function(newList,oldList){var me=this;if(newList&&newList!=oldList){newList.on({order:"after",scrollablechange:me.onScrollableChange,scope:me})}else{if(oldList){oldList.un({order:"after",scrollablechange:me.onScrollableChange,scope:me})}}},fetchLatest:function(){var store=this.getList().getStore(),proxy=store.getProxy(),operation;operation=Ext.create("Ext.data.Operation",{page:1,start:0,model:store.getModel(),limit:store.getPageSize(),action:"read",filters:store.getRemoteFilter()?store.getFilters():[]});proxy.read(operation,this.onLatestFetched,this)},onLatestFetched:function(operation){var store=this.getList().getStore(),oldRecords=store.getData(),newRecords=operation.getRecords(),length=newRecords.length,toInsert=[],newRecord,oldRecord,i;for(i=0;i<length;i++){newRecord=newRecords[i];oldRecord=oldRecords.getByKey(newRecord.getId());if(oldRecord){oldRecord.set(newRecord.getData())}else{toInsert.push(newRecord)}oldRecord=undefined}store.insert(0,toInsert)},onPainted:function(){this.pullHeight=this.loadingElement.getHeight()},setMaxScroller:function(scroller,position){this.maxScroller=position},onScrollChange:function(scroller,x,y){if(y<0){this.onBounceTop(y)}if(y>this.maxScroller.y){this.onBounceBottom(y)}},applyPullTpl:function(config){return(Ext.isObject(config)&&config.isTemplate)?config:new Ext.XTemplate(config)},onBounceTop:function(y){var me=this,pullHeight=me.pullHeight,list=me.getList(),scroller=list.getScrollable().getScroller();if(!me.isReleased){if(!pullHeight){me.onPainted();pullHeight=me.pullHeight}if(!me.isRefreshing&&-y>=pullHeight+10){me.isRefreshing=true;me.setViewState("release");scroller.getContainer().onBefore({dragend:"onScrollerDragEnd",single:true,scope:me})}else{if(me.isRefreshing&&-y<pullHeight+10){me.isRefreshing=false;me.setViewState("pull")}}}me.getTranslatable().translate(0,-y)},onScrollerDragEnd:function(){var me=this;if(me.isRefreshing){var list=me.getList(),scroller=list.getScrollable().getScroller();scroller.minPosition.y=-me.pullHeight;scroller.on({scrollend:"loadStore",single:true,scope:me});me.isReleased=true}},loadStore:function(){var me=this,list=me.getList(),scroller=list.getScrollable().getScroller();me.setViewState("loading");me.isReleased=false;Ext.defer(function(){scroller.on({scrollend:function(){if(me.getRefreshFn()){me.getRefreshFn().call(me,me)}else{me.fetchLatest()}me.resetRefreshState()},delay:100,single:true,scope:me});scroller.minPosition.y=0;scroller.scrollTo(null,0,true)},500,me)},onBounceBottom:Ext.emptyFn,setViewState:function(state){var me=this,prefix=Ext.baseCSSPrefix,messageEl=me.messageEl,loadingElement=me.loadingElement;if(state===me.currentViewState){return me}me.currentViewState=state;if(messageEl&&loadingElement){switch(state){case"pull":messageEl.setHtml(me.getPullRefreshText());loadingElement.removeCls([prefix+"list-pullrefresh-release",prefix+"list-pullrefresh-loading"]);break;case"release":messageEl.setHtml(me.getReleaseRefreshText());loadingElement.addCls(prefix+"list-pullrefresh-release");break;case"loading":messageEl.setHtml(me.getLoadingText());loadingElement.addCls(prefix+"list-pullrefresh-loading");break}}return me},resetRefreshState:function(){var me=this;me.isRefreshing=false;me.lastUpdated=new Date();me.setViewState("pull");me.updatedEl.setHtml(this.getLastUpdatedText()+"&nbsp;"+Ext.util.Format.date(me.lastUpdated,"m/d/Y h:iA"))}});Ext.define("Ext.tab.Tab",{extend:"Ext.Button",xtype:"tab",alternateClassName:"Ext.Tab",isTab:true,config:{baseCls:Ext.baseCSSPrefix+"tab",pressedCls:Ext.baseCSSPrefix+"tab-pressed",activeCls:Ext.baseCSSPrefix+"tab-active",active:false,title:"&nbsp;"},template:[{tag:"span",reference:"badgeElement",hidden:true},{tag:"span",className:Ext.baseCSSPrefix+"button-icon",reference:"iconElement",style:"visibility: hidden !important"},{tag:"span",reference:"textElement",hidden:true}],updateIconCls:function(newCls,oldCls){this.callParent([newCls,oldCls]);if(oldCls){this.removeCls("x-tab-icon")}if(newCls){this.addCls("x-tab-icon")}},updateTitle:function(title){this.setText(title)},hideIconElement:function(){this.iconElement.dom.style.setProperty("visibility","hidden","!important")},showIconElement:function(){this.iconElement.dom.style.setProperty("visibility","visible","!important")},updateActive:function(active,oldActive){var activeCls=this.getActiveCls();if(active&&!oldActive){this.element.addCls(activeCls);this.fireEvent("activate",this)}else{if(oldActive){this.element.removeCls(activeCls);this.fireEvent("deactivate",this)}}}},function(){this.override({activate:function(){this.setActive(true)},deactivate:function(){this.setActive(false)}})});Ext.define("Ext.tab.Bar",{extend:"Ext.Toolbar",alternateClassName:"Ext.TabBar",xtype:"tabbar",requires:["Ext.tab.Tab"],config:{baseCls:Ext.baseCSSPrefix+"tabbar",defaultType:"tab",layout:{type:"hbox",align:"middle"}},eventedConfig:{activeTab:null},initialize:function(){var me=this;me.callParent();me.on({tap:"onTabTap",delegate:"> tab",scope:me})},onTabTap:function(tab){this.setActiveTab(tab)},applyActiveTab:function(newActiveTab,oldActiveTab){if(!newActiveTab&&newActiveTab!==0){return}var newTabInstance=this.parseActiveTab(newActiveTab);if(!newTabInstance){if(oldActiveTab){Ext.Logger.warn("Trying to set a non-existent activeTab")}return}return newTabInstance},doSetDocked:function(newDocked){var layout=this.getLayout(),initialConfig=this.getInitialConfig(),pack;if(!initialConfig.layout||!initialConfig.layout.pack){pack=(newDocked=="bottom")?"center":"left";if(layout.isLayout){layout.setPack(pack)}else{layout.pack=(layout&&layout.pack)?layout.pack:pack}}},doSetActiveTab:function(newTab,oldTab){if(newTab){newTab.setActive(true)}if(oldTab&&oldTab.parent){oldTab.setActive(false)}},parseActiveTab:function(tab){if(typeof tab=="number"){return this.getInnerItems()[tab]}else{if(typeof tab=="string"){tab=Ext.getCmp(tab)}}return tab}});Ext.define("Ext.tab.Panel",{extend:"Ext.Container",xtype:"tabpanel",alternateClassName:"Ext.TabPanel",requires:["Ext.tab.Bar"],config:{ui:"dark",tabBar:true,tabBarPosition:"top",layout:{type:"card",animation:{type:"slide",direction:"left"}},cls:Ext.baseCSSPrefix+"tabpanel"},delegateListeners:{delegate:"> component",centeredchange:"onItemCenteredChange",dockedchange:"onItemDockedChange",floatingchange:"onItemFloatingChange",disabledchange:"onItemDisabledChange"},initialize:function(){this.callParent();this.on({order:"before",activetabchange:"doTabChange",delegate:"> tabbar",scope:this})},applyScrollable:function(){return false},updateUi:function(newUi,oldUi){this.callParent(arguments);if(this.initialized){this.getTabBar().setUi(newUi)}},doSetActiveItem:function(newActiveItem,oldActiveItem){if(newActiveItem){var items=this.getInnerItems(),oldIndex=items.indexOf(oldActiveItem),newIndex=items.indexOf(newActiveItem),reverse=oldIndex>newIndex,animation=this.getLayout().getAnimation(),tabBar=this.getTabBar(),oldTab=tabBar.parseActiveTab(oldIndex),newTab=tabBar.parseActiveTab(newIndex);if(animation&&animation.setReverse){animation.setReverse(reverse)}this.callParent(arguments);if(newIndex!=-1){this.forcedChange=true;tabBar.setActiveTab(newIndex);this.forcedChange=false;if(oldTab){oldTab.setActive(false)}if(newTab){newTab.setActive(true)}}}},doTabChange:function(tabBar,newTab){var oldActiveItem=this.getActiveItem(),newActiveItem;this.setActiveItem(tabBar.indexOf(newTab));newActiveItem=this.getActiveItem();return this.forcedChange||oldActiveItem!==newActiveItem},applyTabBar:function(config){if(config===true){config={}}if(config){Ext.applyIf(config,{ui:this.getUi(),docked:this.getTabBarPosition()})}return Ext.factory(config,Ext.tab.Bar,this.getTabBar())},updateTabBar:function(newTabBar){if(newTabBar){this.add(newTabBar);this.setTabBarPosition(newTabBar.getDocked())}},updateTabBarPosition:function(position){var tabBar=this.getTabBar();if(tabBar){tabBar.setDocked(position)}},onItemAdd:function(card){var me=this;if(!card.isInnerItem()){return me.callParent(arguments)}var tabBar=me.getTabBar(),initialConfig=card.getInitialConfig(),tabConfig=initialConfig.tab||{},tabTitle=(card.getTitle)?card.getTitle():initialConfig.title,tabIconCls=(card.getIconCls)?card.getIconCls():initialConfig.iconCls,tabHidden=(card.getHidden)?card.getHidden():initialConfig.hidden,tabDisabled=(card.getDisabled)?card.getDisabled():initialConfig.disabled,tabBadgeText=(card.getBadgeText)?card.getBadgeText():initialConfig.badgeText,innerItems=me.getInnerItems(),index=innerItems.indexOf(card),tabs=tabBar.getItems(),activeTab=tabBar.getActiveTab(),currentTabInstance=(tabs.length>=innerItems.length)&&tabs.getAt(index),tabInstance;if(tabTitle&&!tabConfig.title){tabConfig.title=tabTitle}if(tabIconCls&&!tabConfig.iconCls){tabConfig.iconCls=tabIconCls}if(tabHidden&&!tabConfig.hidden){tabConfig.hidden=tabHidden}if(tabDisabled&&!tabConfig.disabled){tabConfig.disabled=tabDisabled}if(tabBadgeText&&!tabConfig.badgeText){tabConfig.badgeText=tabBadgeText}if(!currentTabInstance&&!tabConfig.title&&!tabConfig.iconCls){if(!tabConfig.title&&!tabConfig.iconCls){Ext.Logger.error("Adding a card to a tab container without specifying any tab configuration")}}tabInstance=Ext.factory(tabConfig,Ext.tab.Tab,currentTabInstance);if(!currentTabInstance){tabBar.insert(index,tabInstance)}card.tab=tabInstance;me.callParent(arguments);if(!activeTab&&activeTab!==0){tabBar.setActiveTab(tabBar.getActiveItem())}},onItemDisabledChange:function(item,newDisabled){if(item&&item.tab){item.tab.setDisabled(newDisabled)}},onItemRemove:function(item,index){this.getTabBar().remove(item.tab,this.getAutoDestroy());this.callParent(arguments)}},function(){});Ext.define("Ext.table.Cell",{extend:"Ext.Container",xtype:"tablecell",config:{baseCls:"x-table-cell"},getElementConfig:function(){var config=this.callParent();config.children.length=0;return config}});Ext.define("Ext.table.Row",{extend:"Ext.table.Cell",xtype:"tablerow",config:{baseCls:"x-table-row",defaultType:"tablecell"}});Ext.define("Ext.table.Table",{extend:"Ext.Container",requires:["Ext.table.Row"],xtype:"table",config:{baseCls:"x-table",defaultType:"tablerow"},cachedConfig:{fixedLayout:false},fixedLayoutCls:"x-table-fixed",updateFixedLayout:function(fixedLayout){this.innerElement[fixedLayout?"addCls":"removeCls"](this.fixedLayoutCls)}});Ext.define("Ext.util.Droppable",{mixins:{observable:"Ext.mixin.Observable"},config:{baseCls:Ext.baseCSSPrefix+"droppable"},activeCls:Ext.baseCSSPrefix+"drop-active",invalidCls:Ext.baseCSSPrefix+"drop-invalid",hoverCls:Ext.baseCSSPrefix+"drop-hover",validDropMode:"intersect",disabled:false,group:"base",tolerance:null,monitoring:false,constructor:function(el,config){var me=this;config=config||{};Ext.apply(me,config);me.el=Ext.get(el);me.callParent();me.mixins.observable.constructor.call(me);if(!me.disabled){me.enable()}me.el.addCls(me.baseCls)},onDragStart:function(draggable,e){if(draggable.group===this.group){this.monitoring=true;this.el.addCls(this.activeCls);this.region=this.el.getPageBox(true);draggable.on({drag:this.onDrag,beforedragend:this.onBeforeDragEnd,dragend:this.onDragEnd,scope:this});if(this.isDragOver(draggable)){this.setCanDrop(true,draggable,e)}this.fireEvent("dropactivate",this,draggable,e)}else{draggable.on({dragend:function(){this.el.removeCls(this.invalidCls)},scope:this,single:true});this.el.addCls(this.invalidCls)}},isDragOver:function(draggable,region){return this.region[this.validDropMode](draggable.region)},onDrag:function(draggable,e){this.setCanDrop(this.isDragOver(draggable),draggable,e)},setCanDrop:function(canDrop,draggable,e){if(canDrop&&!this.canDrop){this.canDrop=true;this.el.addCls(this.hoverCls);this.fireEvent("dropenter",this,draggable,e)}else{if(!canDrop&&this.canDrop){this.canDrop=false;this.el.removeCls(this.hoverCls);this.fireEvent("dropleave",this,draggable,e)}}},onBeforeDragEnd:function(draggable,e){draggable.cancelRevert=this.canDrop},onDragEnd:function(draggable,e){this.monitoring=false;this.el.removeCls(this.activeCls);draggable.un({drag:this.onDrag,beforedragend:this.onBeforeDragEnd,dragend:this.onDragEnd,scope:this});if(this.canDrop){this.canDrop=false;this.el.removeCls(this.hoverCls);this.fireEvent("drop",this,draggable,e)}this.fireEvent("dropdeactivate",this,draggable,e)},enable:function(){if(!this.mgr){this.mgr=Ext.util.Observable.observe(Ext.util.Draggable)}this.mgr.on({dragstart:this.onDragStart,scope:this});this.disabled=false},disable:function(){this.mgr.un({dragstart:this.onDragStart,scope:this});this.disabled=true},isDisabled:function(){return this.disabled},isMonitoring:function(){return this.monitoring}});if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}return v}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());Ext.util.JSON={encode:function(o){return JSON.stringify(o)},decode:function(s){return JSON.parse(s)}};Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.define("Ext.util.translatable.CssPosition",{extend:"Ext.util.translatable.Dom",doTranslate:function(x,y){var domStyle=this.getElement().dom.style;if(typeof x=="number"){domStyle.left=x+"px"}if(typeof y=="number"){domStyle.top=y+"px"}},destroy:function(){var domStyle=this.getElement().dom.style;domStyle.left=null;domStyle.top=null;this.callParent(arguments)}});Ext.define("Ext.viewport.Default",{extend:"Ext.Container",xtype:"viewport",PORTRAIT:"portrait",LANDSCAPE:"landscape",requires:["Ext.LoadMask","Ext.layout.Card"],config:{autoMaximize:false,autoBlurInput:true,preventPanning:true,preventZooming:false,autoRender:true,layout:"card",width:"100%",height:"100%",useBodyElement:true},isReady:false,isViewport:true,isMaximizing:false,id:"ext-viewport",isInputRegex:/^(input|textarea|select|a)$/i,focusedElement:null,fullscreenItemCls:Ext.baseCSSPrefix+"fullscreen",constructor:function(config){var bind=Ext.Function.bind;this.doPreventPanning=bind(this.doPreventPanning,this);this.doPreventZooming=bind(this.doPreventZooming,this);this.doBlurInput=bind(this.doBlurInput,this);this.maximizeOnEvents=["ready","orientationchange"];this.orientation=this.determineOrientation();this.windowWidth=this.getWindowWidth();this.windowHeight=this.getWindowHeight();this.windowOuterHeight=this.getWindowOuterHeight();if(!this.stretchHeights){this.stretchHeights={}}this.callParent([config]);if(!Ext.os.is.Android||Ext.browser.name=="ChromeMobile"){if(this.supportsOrientation()){this.addWindowListener("orientationchange",bind(this.onOrientationChange,this))}else{this.addWindowListener("resize",bind(this.onResize,this))}}document.addEventListener("focus",bind(this.onElementFocus,this),true);document.addEventListener("blur",bind(this.onElementBlur,this),true);Ext.onDocumentReady(this.onDomReady,this);this.on("ready",this.onReady,this,{single:true});this.getEventDispatcher().addListener("component","*","fullscreen","onItemFullscreenChange",this);return this},onDomReady:function(){this.isReady=true;this.updateSize();this.fireEvent("ready",this)},onReady:function(){if(this.getAutoRender()){this.render()}},onElementFocus:function(e){this.focusedElement=e.target},onElementBlur:function(){this.focusedElement=null},render:function(){if(!this.rendered){var body=Ext.getBody(),clsPrefix=Ext.baseCSSPrefix,classList=[],osEnv=Ext.os,osName=osEnv.name.toLowerCase(),browserName=Ext.browser.name.toLowerCase(),osMajorVersion=osEnv.version.getMajor(),orientation=this.getOrientation();this.renderTo(body);classList.push(clsPrefix+osEnv.deviceType.toLowerCase());if(osEnv.is.iPad){classList.push(clsPrefix+"ipad")}classList.push(clsPrefix+osName);classList.push(clsPrefix+browserName);if(osMajorVersion){classList.push(clsPrefix+osName+"-"+osMajorVersion)}if(osEnv.is.BlackBerry){classList.push(clsPrefix+"bb")}if(Ext.browser.is.Standalone){classList.push(clsPrefix+"standalone")}classList.push(clsPrefix+orientation);body.addCls(classList)}},applyAutoBlurInput:function(autoBlurInput){var touchstart=(Ext.feature.has.Touch)?"touchstart":"mousedown";if(autoBlurInput){this.addWindowListener(touchstart,this.doBlurInput,false)}else{this.removeWindowListener(touchstart,this.doBlurInput,false)}return autoBlurInput},applyAutoMaximize:function(autoMaximize){if(Ext.browser.is.WebView){autoMaximize=false}if(autoMaximize){this.on("ready","doAutoMaximizeOnReady",this,{single:true});this.on("orientationchange","doAutoMaximizeOnOrientationChange",this)}else{this.un("ready","doAutoMaximizeOnReady",this);this.un("orientationchange","doAutoMaximizeOnOrientationChange",this)}return autoMaximize},applyPreventPanning:function(preventPanning){if(preventPanning){this.addWindowListener("touchmove",this.doPreventPanning,false)}else{this.removeWindowListener("touchmove",this.doPreventPanning,false)}return preventPanning},applyPreventZooming:function(preventZooming){var touchstart=(Ext.feature.has.Touch)?"touchstart":"mousedown";if(preventZooming){this.addWindowListener(touchstart,this.doPreventZooming,false)}else{this.removeWindowListener(touchstart,this.doPreventZooming,false)}return preventZooming},doAutoMaximizeOnReady:function(){var controller=arguments[arguments.length-1];controller.pause();this.isMaximizing=true;this.on("maximize",function(){this.isMaximizing=false;this.updateSize();controller.resume();this.fireEvent("ready",this)},this,{single:true});this.maximize()},doAutoMaximizeOnOrientationChange:function(){var controller=arguments[arguments.length-1],firingArguments=controller.firingArguments;controller.pause();this.isMaximizing=true;this.on("maximize",function(){this.isMaximizing=false;this.updateSize();firingArguments[2]=this.windowWidth;firingArguments[3]=this.windowHeight;controller.resume()},this,{single:true});this.maximize()},doBlurInput:function(e){var target=e.target,focusedElement=this.focusedElement;if(focusedElement&&!this.isInputRegex.test(target.tagName)){delete this.focusedElement;focusedElement.blur()}},doPreventPanning:function(e){e.preventDefault()},doPreventZooming:function(e){if("button" in e&&e.button!==0){return}var target=e.target;if(target&&target.nodeType===1&&!this.isInputRegex.test(target.tagName)){e.preventDefault()}},addWindowListener:function(eventName,fn,capturing){window.addEventListener(eventName,fn,Boolean(capturing))},removeWindowListener:function(eventName,fn,capturing){window.removeEventListener(eventName,fn,Boolean(capturing))},doAddListener:function(eventName,fn,scope,options){if(eventName==="ready"&&this.isReady&&!this.isMaximizing){fn.call(scope);return this}return this.callSuper(arguments)},supportsOrientation:function(){return Ext.feature.has.Orientation},onResize:function(){var oldWidth=this.windowWidth,oldHeight=this.windowHeight,width=this.getWindowWidth(),height=this.getWindowHeight(),currentOrientation=this.getOrientation(),newOrientation=this.determineOrientation();if((oldWidth!==width&&oldHeight!==height)&&currentOrientation!==newOrientation){this.fireOrientationChangeEvent(newOrientation,currentOrientation)}},onOrientationChange:function(){var currentOrientation=this.getOrientation(),newOrientation=this.determineOrientation();if(newOrientation!==currentOrientation){this.fireOrientationChangeEvent(newOrientation,currentOrientation)}},fireOrientationChangeEvent:function(newOrientation,oldOrientation){var clsPrefix=Ext.baseCSSPrefix;Ext.getBody().replaceCls(clsPrefix+oldOrientation,clsPrefix+newOrientation);this.orientation=newOrientation;this.updateSize();this.fireEvent("orientationchange",this,newOrientation,this.windowWidth,this.windowHeight)},updateSize:function(width,height){this.windowWidth=width!==undefined?width:this.getWindowWidth();this.windowHeight=height!==undefined?height:this.getWindowHeight();return this},waitUntil:function(condition,onSatisfied,onTimeout,delay,timeoutDuration){if(!delay){delay=50}if(!timeoutDuration){timeoutDuration=2000}var scope=this,elapse=0;setTimeout(function repeat(){elapse+=delay;if(condition.call(scope)===true){if(onSatisfied){onSatisfied.call(scope)}}else{if(elapse>=timeoutDuration){if(onTimeout){onTimeout.call(scope)}}else{setTimeout(repeat,delay)}}},delay)},maximize:function(){this.fireMaximizeEvent()},fireMaximizeEvent:function(){this.updateSize();this.fireEvent("maximize",this)},doSetHeight:function(height){Ext.getBody().setHeight(height);this.callParent(arguments)},doSetWidth:function(width){Ext.getBody().setWidth(width);this.callParent(arguments)},scrollToTop:function(){window.scrollTo(0,-1)},getWindowWidth:function(){return window.innerWidth},getWindowHeight:function(){return window.innerHeight},getWindowOuterHeight:function(){return window.outerHeight},getWindowOrientation:function(){return window.orientation},getOrientation:function(){return this.orientation},getSize:function(){return{width:this.windowWidth,height:this.windowHeight}},determineOrientation:function(){var portrait=this.PORTRAIT,landscape=this.LANDSCAPE;if(this.supportsOrientation()){if(this.getWindowOrientation()%180===0){return portrait}return landscape}else{if(this.getWindowHeight()>=this.getWindowWidth()){return portrait}return landscape}},onItemFullscreenChange:function(item){item.addCls(this.fullscreenItemCls);this.add(item)}});Ext.define("Ext.viewport.Android",{extend:"Ext.viewport.Default",constructor:function(){this.on("orientationchange","doFireOrientationChangeEvent",this,{prepend:true});this.on("orientationchange","hideKeyboardIfNeeded",this,{prepend:true});this.callParent(arguments);this.addWindowListener("resize",Ext.Function.bind(this.onResize,this))},getDummyInput:function(){var input=this.dummyInput,focusedElement=this.focusedElement,box=Ext.fly(focusedElement).getPageBox();if(!input){this.dummyInput=input=document.createElement("input");input.style.position="absolute";input.style.opacity="0";document.body.appendChild(input)}input.style.left=box.left+"px";input.style.top=box.top+"px";input.style.display="";return input},doBlurInput:function(e){var target=e.target,focusedElement=this.focusedElement,dummy;if(focusedElement&&!this.isInputRegex.test(target.tagName)){dummy=this.getDummyInput();delete this.focusedElement;dummy.focus();setTimeout(function(){dummy.style.display="none"},100)}},hideKeyboardIfNeeded:function(){var eventController=arguments[arguments.length-1],focusedElement=this.focusedElement;if(focusedElement){delete this.focusedElement;eventController.pause();if(Ext.os.version.lt("4")){focusedElement.style.display="none"}else{focusedElement.blur()}setTimeout(function(){focusedElement.style.display="";eventController.resume()},1000)}},doFireOrientationChangeEvent:function(){var eventController=arguments[arguments.length-1];this.orientationChanging=true;eventController.pause();this.waitUntil(function(){return this.getWindowOuterHeight()!==this.windowOuterHeight},function(){this.windowOuterHeight=this.getWindowOuterHeight();this.updateSize();eventController.firingArguments[2]=this.windowWidth;eventController.firingArguments[3]=this.windowHeight;eventController.resume();this.orientationChanging=false},function(){Ext.Logger.error("Timeout waiting for viewport's outerHeight to change before firing orientationchange",this)});return this},applyAutoMaximize:function(autoMaximize){autoMaximize=this.callParent(arguments);this.on("add","fixSize",this,{single:true});if(!autoMaximize){this.on("ready","fixSize",this,{single:true});this.onAfter("orientationchange","doFixSize",this,{buffer:100})}else{this.un("ready","fixSize",this);this.unAfter("orientationchange","doFixSize",this)}},fixSize:function(){this.doFixSize()},doFixSize:function(){this.setHeight(this.getWindowHeight())},determineOrientation:function(){return(this.getWindowHeight()>=this.getWindowWidth())?this.PORTRAIT:this.LANDSCAPE},getActualWindowOuterHeight:function(){return Math.round(this.getWindowOuterHeight()/window.devicePixelRatio)},maximize:function(){var stretchHeights=this.stretchHeights,orientation=this.orientation,height;height=stretchHeights[orientation];if(!height){stretchHeights[orientation]=height=this.getActualWindowOuterHeight()}if(!this.addressBarHeight){this.addressBarHeight=height-this.getWindowHeight()}this.setHeight(height);var isHeightMaximized=Ext.Function.bind(this.isHeightMaximized,this,[height]);this.scrollToTop();this.waitUntil(isHeightMaximized,this.fireMaximizeEvent,this.fireMaximizeEvent)},isHeightMaximized:function(height){this.scrollToTop();return this.getWindowHeight()===height}},function(){if(!Ext.os.is.Android){return}var version=Ext.os.version,userAgent=Ext.browser.userAgent,isBuggy=/(htc|desire|incredible|ADR6300)/i.test(userAgent)&&version.lt("2.3");if(isBuggy){this.override({constructor:function(config){if(!config){config={}}config.autoMaximize=false;this.watchDogTick=Ext.Function.bind(this.watchDogTick,this);setInterval(this.watchDogTick,1000);return this.callParent([config])},watchDogTick:function(){this.watchDogLastTick=Ext.Date.now()},doPreventPanning:function(){var now=Ext.Date.now(),lastTick=this.watchDogLastTick,deltaTime=now-lastTick;if(deltaTime>=2000){return}return this.callParent(arguments)},doPreventZooming:function(){var now=Ext.Date.now(),lastTick=this.watchDogLastTick,deltaTime=now-lastTick;if(deltaTime>=2000){return}return this.callParent(arguments)}})}if(version.match("2")){this.override({onReady:function(){this.addWindowListener("resize",Ext.Function.bind(this.onWindowResize,this));this.callParent(arguments)},scrollToTop:function(){document.body.scrollTop=100},onWindowResize:function(){var oldWidth=this.windowWidth,oldHeight=this.windowHeight,width=this.getWindowWidth(),height=this.getWindowHeight();if(this.getAutoMaximize()&&!this.isMaximizing&&!this.orientationChanging&&window.scrollY===0&&oldWidth===width&&height<oldHeight&&((height>=oldHeight-this.addressBarHeight)||!this.focusedElement)){this.scrollToTop()}},fixSize:function(){var orientation=this.getOrientation(),outerHeight=window.outerHeight,outerWidth=window.outerWidth,actualOuterHeight;if(orientation==="landscape"&&(outerHeight<outerWidth)||orientation==="portrait"&&(outerHeight>=outerWidth)){actualOuterHeight=this.getActualWindowOuterHeight()}else{actualOuterHeight=this.getWindowHeight()}this.waitUntil(function(){return actualOuterHeight>this.getWindowHeight()},this.doFixSize,this.doFixSize,50,1000)}})}else{if(version.gtEq("3.1")){this.override({isHeightMaximized:function(height){this.scrollToTop();return this.getWindowHeight()===height-1}})}else{if(version.match("3")){this.override({isHeightMaximized:function(){this.scrollToTop();return true}})}}}if(version.gtEq("4")){this.override({doBlurInput:Ext.emptyFn,onResize:function(){this.callParent();this.doFixSize()}})}});Ext.define("Ext.viewport.Ios",{extend:"Ext.viewport.Default",isFullscreen:function(){return this.isHomeScreen()},isHomeScreen:function(){return window.navigator.standalone===true},constructor:function(){this.callParent(arguments);if(this.getAutoMaximize()&&!this.isFullscreen()){this.addWindowListener("touchstart",Ext.Function.bind(this.onTouchStart,this))}},maximize:function(){if(this.isFullscreen()){return this.callParent()}var stretchHeights=this.stretchHeights,orientation=this.orientation,currentHeight=this.getWindowHeight(),height=stretchHeights[orientation];if(window.scrollY>0){this.scrollToTop();if(!height){stretchHeights[orientation]=height=this.getWindowHeight()}this.setHeight(height);this.fireMaximizeEvent()}else{if(!height){height=this.getScreenHeight()}this.setHeight(height);this.waitUntil(function(){this.scrollToTop();return currentHeight!==this.getWindowHeight()},function(){if(!stretchHeights[orientation]){height=stretchHeights[orientation]=this.getWindowHeight();this.setHeight(height)}this.fireMaximizeEvent()},function(){Ext.Logger.error("Timeout waiting for window.innerHeight to change",this);height=stretchHeights[orientation]=this.getWindowHeight();this.setHeight(height);this.fireMaximizeEvent()},50,1000)}},getScreenHeight:function(){return window.screen[this.orientation===this.PORTRAIT?"height":"width"]},onElementFocus:function(){if(this.getAutoMaximize()&&!this.isFullscreen()){clearTimeout(this.scrollToTopTimer)}this.callParent(arguments)},onElementBlur:function(){if(this.getAutoMaximize()&&!this.isFullscreen()){this.scrollToTopTimer=setTimeout(this.scrollToTop,500)}this.callParent(arguments)},onTouchStart:function(){if(this.focusedElement===null){this.scrollToTop()}},scrollToTop:function(){window.scrollTo(0,0)}},function(){if(!Ext.os.is.iOS){return}if(Ext.os.version.lt("3.2")){this.override({constructor:function(){var stretchHeights=this.stretchHeights={};stretchHeights[this.PORTRAIT]=416;stretchHeights[this.LANDSCAPE]=268;return this.callOverridden(arguments)}})}if(Ext.os.version.lt("5")){this.override({fieldMaskClsTest:"-field-mask",doPreventZooming:function(e){var target=e.target;if(target&&target.nodeType===1&&!this.isInputRegex.test(target.tagName)&&target.className.indexOf(this.fieldMaskClsTest)==-1){e.preventDefault()}}})}if(Ext.os.is.iPad){this.override({isFullscreen:function(){return true}})}});Ext.define("Ext.viewport.Viewport",{requires:["Ext.viewport.Ios","Ext.viewport.Android"],constructor:function(config){var osName=Ext.os.name,viewportName,viewport;switch(osName){case"Android":viewportName=(Ext.browser.name=="ChromeMobile")?"Default":"Android";break;case"iOS":viewportName="Ios";break;default:viewportName="Default"}viewport=Ext.create("Ext.viewport."+viewportName,config);return viewport}});